[{"title":"å®ä¹ å­¦ä¹ æ—¥å¿—","url":"/2024/06/17/å®ä¹ å­¦ä¹ æ—¥å¿—/","content":"\n# ä¸€ã€LUåˆ†è§£\n\nå‡è®¾`A = LU`ï¼Œæ–¹ç¨‹`Ax = b`å³å¯å†™æˆ`LUx = b`\n\næ­¤æ—¶ä»¤`Ux = y`ï¼Œå³å¯é€šè¿‡ä¸€å¯¹æ–¹ç¨‹æ¥æ±‚è§£x x*x*ï¼Œå†™ä½œ\n$$\n\\begin{equation}\n\\left\\{\n\\begin{array}{l}\nLy = b \\\\\nUx = y\n\\end{array}\n\\right.\n\\end{equation}\n$$\nå› æ­¤ï¼Œæ±‚è§£è¿‡ç¨‹å°±å¯ä»¥è½¬æ¢ä¸º\n$$\n\\begin{equation}\n\\begin{aligned}\nLUx &= b \\\\\nâ‡’x &= (LU)^{-1} b \\\\\n  &= U^{-1} L^{-1} b\n\\end{aligned}\n\\end{equation}\n$$\nå®é™…åº”ç”¨ä¸­ï¼ŒçŸ©é˜µAå¾€å¾€æ˜¯å›ºå®šçš„ï¼Œè€Œå³ä¾§å‘é‡bç»å¸¸ä¼šæ›¿æ¢ã€‚å½“çŸ©é˜µAè¢«åˆ†è§£åï¼ŒLå’ŒUå¯å……åˆ†åˆ©ç”¨ï¼Œæé«˜æ•ˆç‡ã€‚\n\n**æ³¨æ„äº‹é¡¹ï¼š**é€‰ä¸»å…ƒæ—¶å°½é‡é€‰æœ€å¤§æ•°æ‰€åœ¨çš„è¡Œï¼Œç„¶åå°†å…¶äº¤æ¢åˆ°ç¬¬ä¸€è¡Œ\n\n## ç¤ºä¾‹ï¼š\n\n$$\nA = \\begin{pmatrix}\n1 & 5 & -3 \\\\\n-2 & -7 & 3 \\\\\n4 & 9 & 6\n\\end{pmatrix}\n$$\n\né€šå¸¸æ‰‹åŠ¨æ¶ˆå…ƒçš„æ—¶å€™ï¼Œæ¶ˆå…ƒé¡ºåºä¸æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯åœ¨LUåˆ†è§£æ—¶ï¼Œæ¶ˆå…ƒé¡ºåºæ˜¯å›ºå®šçš„ï¼Œå³**ä»¥ç¬¬ä¸€è¡Œä¸ºä¸»å…ƒï¼Œä¾æ¬¡å‘ä¸‹æ¶ˆå…ƒï¼Œæœ€ç»ˆæ¶ˆå…ƒä¸ºä¸€ä¸ªä¸Šä¸‰è§’çŸ©é˜µ**ã€‚\n$$\nA = \\begin{bmatrix}\n1 & 5 & -3 \\\\\n-2 & -7 & 3 \\\\\n4 & 9 & 6\n\\end{bmatrix}\n\\xrightarrow{\\substack{E_{21} \\\\ r_2 + 2r_1}}\n\\begin{bmatrix}\n1 & 5 & -3 \\\\\n0 & 3 & -3 \\\\\n4 & 9 & 6\n\\end{bmatrix}\n\\xrightarrow{\\substack{E_{31} \\\\ r_3 - 4r_1}}\n\\begin{bmatrix}\n1 & 5 & -3 \\\\\n0 & 3 & -3 \\\\\n0 & -11 & 18\n\\end{bmatrix}\n\\xrightarrow{\\substack{E_{32} \\\\ r_3 + \\frac{11}{3} r_2}}\n\\begin{bmatrix}\n1 & 5 & -3 \\\\\n0 & 3 & -3 \\\\\n0 & 0 & 7\n\\end{bmatrix} = U\n$$\nä¸Šè¿°å˜æ¢è¿‡ç¨‹ä¸º\n\n\n$$\nE_{32}â€‹E_{31}â€‹E_{21}â€‹A=U\n$$\nå…¶ä¸­\n$$\nE_{21} = \\begin{pmatrix}\n1 & 0 & 0 \\\\\n2 & 1 & 0 \\\\\n0 & 0 & 1\n\\end{pmatrix}, \\quad\nE_{31} = \\begin{pmatrix}\n1 & 0 & 0 \\\\\n0 & 1 & 0 \\\\\n-4 & 0 & 1\n\\end{pmatrix}, \\quad\nE_{32} = \\begin{pmatrix}\n1 & 0 & 0 \\\\\n0 & 1 & 0 \\\\\n0 & \\frac{11}{3} & 1\n\\end{pmatrix}\n$$\næ‰€ä»¥ï¼ŒçŸ©é˜µAå¯ä»¥å†™åšï¼š\n$$\nA=LU=(E_{32}â€‹E_{31}â€‹E_{21})^{-1}U\n$$\n\n$$\nE_{32}â€‹E_{31}â€‹E_{21} = \\begin{pmatrix}\n1 & 0 & 0 \\\\\n2 & 1 & 0 \\\\\n\\frac{10}{3} & \\frac{11}{3} & 1\n\\end{pmatrix}\n$$\n\nå› æ­¤ï¼Œ\n$$\nL=(E_{32}â€‹E_{31}â€‹E_{21})^{-1}=\\begin{pmatrix}\n1 & 0 & 0 \\\\\n-2 & 1 & 0 \\\\\n4 & -\\frac{11}{3} & 1\n\\end{pmatrix}\n$$\nåŸå˜æ¢çŸ©é˜µ$E_{32}E_{31}E_{21}$ä¼šåœ¨çŸ©é˜µ(3,1)ä¸­å¼•å…¥ä¸€ä¸ªæ— å®é™…æ„ä¹‰çš„$\\frac{10}{3}$\n\nè€Œæ”¹å†™çš„LçŸ©é˜µï¼Œå…¶ä¸­çš„(2,1)(3,1)(3,2)ä½ç½®å¯¹åº”çš„åˆ™åˆšå¥½å‡æ˜¯åˆç­‰å˜æ¢çŸ©é˜µä¸­å®é™…å˜æ¢ä½ç½®å¤„å…ƒç´ çš„ç›¸åæ•°\nè¿™å°±æ˜¯**LUåˆ†è§£çš„ä¼˜ç‚¹ï¼š**åªä¿ç•™äº†æ¶ˆå…ƒè¿‡ç¨‹ä¸­æœ€å…³é”®çš„æ¶ˆå…ƒä¿¡æ¯ï¼ŒåŒæ—¶å…¶ä¸Š/ä¸‹ä¸‰è§’çŸ©é˜µå½¢å¼å‡å°‘äº†å¤§é‡è®¡ç®—é‡ã€‚\n\nç®—æ³•ï¼š\n\n```\nfor i = 1, . . . , n do\t\t\t\t\t//è¡Œ\n\tfor k = 1, . . . , i - 1 do\t\t\t//åˆ—\n\t\ta[i][k] = a[i][k] /a[k][k]\n\t\tfor j = k + 1, . . . , n do\t\t//è¡Œæ›´æ–°\n\t\t\ta[i][j] âˆ’= a[i][k]a[k][j]\n\t\tend for\n\tend for\nend for\n```\n\n\n\n# äºŒã€ILUä¸å®Œå…¨åˆ†è§£\n\nILUå’ŒLUçš„è”ç³»ï¼šéƒ½æ˜¯å°†ä¸€ä¸ªç»™å®šçš„æ–¹é˜µåˆ†è§£ä¸ºä¸€ä¸ªä¸‹ä¸‰è§’çŸ©é˜µï¼ˆLï¼‰å’Œä¸€ä¸ªä¸Šä¸‰è§’çŸ©é˜µï¼ˆUï¼‰çš„ä¹˜ç§¯ã€‚\n\nåŒºåˆ«åœ¨äºILUçš„åˆ†è§£ï¼š$Aâ‰ˆLU$\n\nLUåˆ†è§£é€šå¸¸ç”¨äºè§£å†³ç²¾ç¡®çš„çº¿æ€§æ–¹ç¨‹ç»„ï¼Œè€ŒILUåˆ†è§£åˆ™æ˜¯ç”¨äºè§£å†³å¤§å‹ç¨€ç–çº¿æ€§æ–¹ç¨‹ç»„ã€‚å› æ­¤LUåˆ†è§£å¾—åˆ°çš„è§£æ˜¯ç²¾ç¡®çš„ï¼Œè€ŒILUåˆ†è§£çš„è§£æ˜¯è¿‘ä¼¼çš„\n\n## 2.1 ILU(0)\n\n![image-20240617165015419](å®ä¹ å­¦ä¹ æ—¥å¿—/image-20240617165015419.png)\n\nILU(0) åŸºæœ¬ä¸Šæ˜¯å¯¹åŸå§‹çŸ©é˜µ AAA çš„LUåˆ†è§£ï¼Œä½†åˆ†è§£ç»“æœä¸­çš„éé›¶ç»“æ„ä¸¥æ ¼éµå¾ªåŸå§‹çŸ©é˜µçš„éé›¶ç»“æ„ã€‚å…·ä½“æ¥è¯´ï¼š\n\n- å¦‚æœ A æ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼ŒILU(0) åˆ†è§£å¾—åˆ°çš„ L å’Œ U ä¹Ÿæ˜¯ç¨€ç–çŸ©é˜µï¼Œå¹¶ä¸”å…¶éé›¶å…ƒç´ ä½ç½®ä¸ A çš„éé›¶å…ƒç´ ä½ç½®ç›¸åŒã€‚\n\n## 2.2 ILUT\n\nåŸºäºä¸€ä¸ªé¢„å®šçš„é˜ˆå€¼ï¼Œä»…ä¿ç•™é‚£äº›ç»å¯¹å€¼å¤§äºé˜ˆå€¼çš„å¡«å……å€¼\n\n## 2.3 ILU(k)\n\nå…è®¸ä¸€å®šç¨‹åº¦çš„å¡«å……ï¼Œä¿ç•™åœ¨è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°çš„éé›¶å…ƒç´ ã€‚è¿™é‡Œçš„ ğ‘˜ è¡¨ç¤ºå…è®¸çš„å¡«å……çº§åˆ«ã€‚è¾ƒå¤§çš„ ğ‘˜ä¼šå¸¦æ¥æ›´é«˜çš„ç²¾åº¦ï¼Œä½†ä¹Ÿä¼šå¢åŠ è®¡ç®—å’Œå­˜å‚¨æˆæœ¬\n\n## 2.4 ç¤ºä¾‹\n\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <limits.h>\n\n#define N 4\n#define K 1  // ILU(k)ä¸­çš„kå€¼\n\ntypedef struct {\n    double **data;\n    int **level;  // ç”¨äºå­˜å‚¨fill-inçº§åˆ«\n} Matrix;\n\nMatrix createMatrix();\nvoid printMatrix(Matrix mat);\nvoid LU(Matrix mat);\nvoid ILU0(Matrix mat);\nvoid ILUk(Matrix mat, int k);\nMatrix copyMatrix(Matrix src);\nvoid freeMatrix(Matrix mat);\n\nint main() {\n    Matrix A = createMatrix();\n    Matrix B = copyMatrix(A);\n    Matrix C = copyMatrix(A);\n\n    printf(\"åŸå§‹çŸ©é˜µ:\\n\");\n    printMatrix(A);\n\n    LU(A);\n    ILU0(B);\n    ILUk(C, K);\n\n    // é‡Šæ”¾çŸ©é˜µå†…å­˜\n    freeMatrix(A);\n    freeMatrix(B);\n    freeMatrix(C);\n\n    return 0;\n}\n\nMatrix createMatrix() {\n    Matrix mat;\n    mat.data = (double **)malloc(N * sizeof(double *));\n    mat.level = NULL;  // åˆå§‹åŒ–ä¸ºNULLï¼Œåªæœ‰åœ¨ILUkä¸­æ‰åˆ†é…å†…å­˜\n    for (int i = 0; i < N; ++i) {\n        mat.data[i] = (double *)malloc(N * sizeof(double));\n        for (int j = 0; j < N; ++j) {\n            mat.data[i][j] = rand() % 10 + 1;  // 1 åˆ° 10 ä¹‹é—´çš„éšæœºæ•°\n        }\n    }\n    return mat;\n}\n\nvoid printMatrix(Matrix mat) {\n    for (int i = 0; i < N; ++i) {\n        for (int j = 0; j < N; ++j) {\n            printf(\"%.2f\\t\", mat.data[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n}\n\n// LUåˆ†è§£å‡½æ•°\nvoid LU(Matrix mat) {\n    for (int i = 1; i < N; i++) {\n        for (int j = 0; j < i; j++) {\n            mat.data[i][j] /= mat.data[j][j];\n            for (int k = j + 1; k < N; k++) {\n                mat.data[i][k] -= mat.data[i][j] * mat.data[j][k];\n            }\n        }\n    }\n\n    printf(\"LUåˆ†è§£åçš„çŸ©é˜µ:\\n\");\n    printMatrix(mat);\n}\n\n// ILU(0)åˆ†è§£\nvoid ILU0(Matrix mat) {\n    for (int i = 1; i < N; i++) {\n        for (int j = 0; j < i; j++) {\n            if (mat.data[i][j] != 0) {\n                mat.data[i][j] /= mat.data[j][j];\n                for (int k = j + 1; k < N; k++) {\n                    if (mat.data[i][k] != 0 && mat.data[j][k] != 0)\n                        mat.data[i][k] -= mat.data[i][j] * mat.data[j][k];\n                }\n            }\n        }\n    }\n\n    printf(\"ILU(0)åˆ†è§£åçš„çŸ©é˜µ:\\n\");\n    printMatrix(mat);\n}\n\n// ILU(k)åˆ†è§£\nvoid ILUk(Matrix mat, int k) {\n    mat.level = (int **)malloc(N * sizeof(int *));\n    for (int i = 0; i < N; ++i) {\n        mat.level[i] = (int *)malloc(N * sizeof(int));\n        for (int j = 0; j < N; ++j) {\n            if (mat.data[i][j] != 0) {\n                mat.level[i][j] = 0;  // åˆå§‹çŸ©é˜µå…ƒç´ çº§åˆ«ä¸º0\n            } else {\n                mat.level[i][j] = INT_MAX;  // éåˆå§‹å…ƒç´ çº§åˆ«ä¸ºæ— ç©·å¤§\n            }\n        }\n    }\n\n    for (int i = 1; i < N; ++i) {\n        for (int j = 0; j < i; ++j) {\n            if (mat.level[i][j] <= k) {\n                mat.data[i][j] /= mat.data[j][j];\n                for (int m = j + 1; m < N; ++m) {\n                    if (mat.level[i][m] > mat.level[i][j] + mat.level[j][m] + 1) {\n                        mat.level[i][m] = mat.level[i][j] + mat.level[j][m] + 1;\n                        if (mat.level[i][m] <= k) {\n                            mat.data[i][m] -= mat.data[i][j] * mat.data[j][m];\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    printf(\"ILU(%d)åˆ†è§£åçš„çŸ©é˜µ:\\n\", k);\n    printMatrix(mat);\n}\n\n// å¤åˆ¶çŸ©é˜µå‡½æ•°\nMatrix copyMatrix(Matrix src) {\n    Matrix dest;\n    dest.data = (double **)malloc(N * sizeof(double *));\n    dest.level = NULL;  // åˆå§‹åŒ–ä¸ºNULLï¼Œåªæœ‰åœ¨ILUkä¸­æ‰åˆ†é…å†…å­˜\n    for (int i = 0; i < N; ++i) {\n        dest.data[i] = (double *)malloc(N * sizeof(double));\n        memcpy(dest.data[i], src.data[i], N * sizeof(double));\n    }\n    return dest;\n}\n\n// é‡Šæ”¾çŸ©é˜µå†…å­˜\nvoid freeMatrix(Matrix mat) {\n    for (int i = 0; i < N; ++i) {\n        free(mat.data[i]);\n        if (mat.level != NULL) {\n            free(mat.level[i]);\n        }\n    }\n    free(mat.data);\n    if (mat.level != NULL) {\n        free(mat.level);\n    }\n}\n```\n\næ­¤å¤„çš„ILU(k)ä»£ç æ­£ç¡®æ€§æœªçŸ¥ï¼Œè¿˜æ²¡éªŒè¯\n\n# ä¸‰ã€å­˜å‚¨ç»“æ„\n\næ›´å¤šå­˜å‚¨æ ¼å¼ï¼šhttps://en.wikipedia.org/wiki/Sparse_matrix\n\n## 3.1 CSR å‹ç¼©ç¨€ç–è¡Œæ ¼å¼\n\nå‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/weixin_62592231/article/details/127477739\n\n![image-20240618093507083](å®ä¹ å­¦ä¹ æ—¥å¿—/image-20240618093507083.png)\n\n- valï¼šå­˜å‚¨é0å…ƒç´ çš„å€¼\n\n- xï¼šä¾æ¬¡å­˜å‚¨æ¯è¡Œçš„**<u>é¦–å…ƒç´ </u>**åœ¨valä¸­çš„ä½ç½®ï¼Œæœ€åä¸€ä¸ªä»£è¡¨æ€»çš„éé›¶å…ƒç´ çš„æ€»ä¸ªæ•°\n\n- yï¼šå­˜å‚¨é0å…ƒç´ çš„åˆ—åæ ‡\n\n  ```cpp\n  struct CsrMatrix {\n      int rows;//çŸ©é˜µçš„æ€»è¡Œæ•°\n      int *row_off;//xæ•°ç»„ï¼Œæ¯è¡Œç¬¬ä¸€ä¸ªå…ƒç´ å‰é¢çš„éé›¶å…ƒç´ ï¼Œæœ€åä¸€ä¸ªrowoffä»£è¡¨æ€»çš„éé›¶å…ƒç´ \n      int *cols;//yæ•°ç»„,å³æ¯ä¸ªéé›¶å…ƒç´ åœ¨æ™®é€šçŸ©é˜µä¸­çš„åˆ—æ ‡ï¼ˆä»0å¼€å§‹ï¼‰\n      double *data;//å›¾ä¸­çš„valæ•°ç»„\n      int data_size;//valæ•°ç»„å¤§å°\n  };\n  \n  ```\n\n## 3.2 BSR\n\n**BSR**å—å‹ç¼©å­˜å‚¨æ˜¯**CSR**è¡Œå‹ç¼©å­˜å‚¨çš„å‡çº§å˜å½¢\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](å®ä¹ å­¦ä¹ æ—¥å¿—/5fb0c2a217204128a88e97478b75f3d4.png)\n\nå¦‚æœé‡‡ç”¨CSRè¿›è¡Œè¡¨ç¤ºï¼š\n\n```\nvals:1 6 7 2 1 8 2 1 4 5 1 4 3 7 2\ncols:0 2 3 0 1 2 3 2 3 2 3 2 3 4 5\nrow_off:0 3 7 9 11 14 14\n```\n\né‡‡ç”¨BSRè¿›è¡Œè¡¨ç¤ºï¼š\n\n```\nvals: 1 0 2 1|6 7 8 2|1 4 5 1|4 3 0 0|7 2 0 0\ncols: 0 1 | 1 | 1 2\nrow_off: 0 2 3 5\n```\n\nBSRä¸CSRç±»ä¼¼ï¼Œåªæ˜¯BSRçš„colså’Œrow_offéƒ½æ˜¯**ä»¥å—ä¸ºå•ä½**è¿›è¡Œå®šä½\n\nä¼˜åŠ¿æ˜¾è€Œæ˜“è§ï¼ŒèŠ‚çº¦å­˜å‚¨ç©ºé—´ï¼ŒCSRéœ€è¦å­˜count(vals,cols,row_off)=37ä¸ªç©ºé—´\n\nè€ŒBSRåªéœ€è¦å­˜count(vals,cols,row_off)=29ä¸ªç©ºé—´\n\n```cpp\nstruct BsrMatrix {\n    int rows; // çŸ©é˜µçš„æ€»è¡Œæ•°\n    int cols; // çŸ©é˜µçš„æ€»åˆ—æ•°\n    int row_block_size; // è¡Œæ–¹å‘çš„å—å¤§å°\n    int col_block_size; // åˆ—æ–¹å‘çš„å—å¤§å°\n    int num_blocks; // éé›¶å—çš„æ•°é‡\n    int *row_off; // æ¯ä¸ªå—è¡Œç¬¬ä¸€ä¸ªå—å‰çš„éé›¶å—æ•°é‡ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä»£è¡¨æ€»çš„éé›¶å—æ•°é‡\n    int *col_indices; // æ¯ä¸ªéé›¶å—åœ¨æ™®é€šçŸ©é˜µä¸­çš„åˆ—æ ‡ï¼ˆä»0å¼€å§‹ï¼‰\n    double *data; // å­˜å‚¨éé›¶å—çš„æ•°æ®ï¼ŒæŒ‰ç…§å—è¡Œçš„é¡ºåºå­˜å‚¨\n    int data_size; // å­˜å‚¨æ•°æ®æ•°ç»„çš„å¤§å°\n};\n```\n\n## 3.3 COO\n\nä¸‰å…ƒç»„å­˜å‚¨ç»“æ„ï¼Œè¡Œ+åˆ—+æ•°æ®\n\n```cpp\nstruct CooMatrix {\n    int rows;     // çŸ©é˜µçš„æ€»è¡Œæ•°\n    int cols;     // çŸ©é˜µçš„æ€»åˆ—æ•°\n    int nnz;      // éé›¶å…ƒç´ çš„æ•°é‡\n    int *row_indices; // éé›¶å…ƒç´ æ‰€åœ¨çš„è¡Œç´¢å¼•æ•°ç»„\n    int *col_indices; // éé›¶å…ƒç´ æ‰€åœ¨çš„åˆ—ç´¢å¼•æ•°ç»„\n    double *data;     // éé›¶å…ƒç´ çš„å€¼æ•°ç»„\n};\n\n```\n\n# å››ã€BLAS\n\nBLAS(basic linear algebra subroutine)åŸºæœ¬çº¿æ€§ä»£æ•°ç®—æ³•\n\n- level1ï¼šå‘é‡Ã—å‘é‡\n- level2ï¼šå‘é‡Ã—çŸ©é˜µ\n- level3ï¼šçŸ©é˜µÃ—çŸ©é˜µ\n\n## 4.1 BLASå‡½æ•°å‘½å\n\n- sï¼šå•ç²¾åº¦ï¼ˆfloatï¼‰\n- dï¼šåŒç²¾åº¦ï¼ˆdoubleï¼‰\n- cï¼šå•ç²¾åº¦å¤æ•°ï¼ˆgsl_complex_floatï¼‰\n- zï¼šåŒç²¾åº¦å¤æ•°ï¼ˆgsl_complexï¼‰\n\n```cpp\nint gls_blas_sdot(const gsl_vector_float *x,const gsl_vector_float *y, float *resuilt)//ä¸¤ä¸ªå‘é‡ç‚¹ç§¯è¿ç®—ï¼Œåªæœ‰å•ç²¾åº¦\n\nint gls_blas_dsdot(const gsl_vector_float *x,const gsl_vector_float *y, double *resuilt)//ä¸¤ä¸ªå‘é‡ç‚¹ç§¯è¿ç®—ï¼Œå‘é‡ä¸ºå•ç²¾åº¦ï¼Œè¾“å‡ºç»“æœä¸ºåŒç²¾åº¦\n```\n\n\n\n# äº”ã€BLASTed\n\n## 5.1 testcsrmatrix.cpp\n\n```cpp\nint testCSRMatMult(const std::string type,\nconst std::string matfile, const std::string xvec, const std::string prodvec)\n{\t//è¯»å–çŸ©é˜µï¼Œæ­¤æ—¶ä¸ºCOOæ ¼å¼\n\tCOOMatrix<double,int> coom;\n\tcoom.readMatrixMarket(matfile);\n\t//è¯»å–xå‘é‡ï¼Œå’Œanså‘é‡ï¼Œanså‘é‡ç”¨äºåç»­éªŒè¯ç»“æœ\n\tconst device_vector<double> x = readDenseMatrixMarket<double>(xvec);\n\tconst device_vector<double> ans = readDenseMatrixMarket<double>(prodvec);\n\t\n\tAbstractLinearOperator<double,int>* testmat = nullptr;\n\tif(type == \"view\") {\n\t\ttestmat = new CSRMatrixView<double,int>(move_to_const<double,int>(getSRMatrixFromCOO<double,int,1>(coom, \"\")));\n\t}\n\telse\n\t\ttestmat = new BSRMatrix<double,int,1>(getSRMatrixFromCOO<double,int,1>(coom, \"\"));\n\n\tdevice_vector<double> y(testmat->dim());//dimè·å–çŸ©é˜µçš„è¡Œæ•°ï¼Œåˆ›å»ºyå‘é‡(b)\n\ttestmat->apply(x.data(), y.data());//è¿›è¡Œè®¡ç®—Ax = b\n\n\tfor(int i = 0; i < testmat->dim(); i++) {\n\t\tassert(std::fabs(y[i]-ans[i]) < 10*DBL_EPSILON);//ç»“æœéªŒè¯\n\t}\n\tdelete testmat;\n\treturn 0;\n}\n```\n\napplyå‡½æ•°è·³è½¬ï¼šblockmatrices.ipp->matvecs.cpp\n\n```cpp\ntemplate <typename scalar, typename index>\nvoid CSRMatrixView<scalar,index>::apply(const scalar *const xx,\n                                        scalar *const __restrict yy) const\n{\n\tBLAS_CSR<const scalar,const index>::matrix_apply(std::forward<const MatrixWrapper>(mat), xx, yy);\n}\n```\n\n```cpp\ntemplate <typename mscalar, typename mindex>\nvoid BLAS_CSR<mscalar,mindex>::matrix_apply(const SRMatrixStorage<mscalar,mindex>&& mat,\n                                            const scalar *const xx, scalar *const __restrict yy) \n{\n#pragma omp parallel for default(shared)\n\tfor(index irow = 0; irow < mat.nbrows; irow++)\n\t{\n\t\tyy[irow] = 0;\n\n\t\tfor(index jj = mat.browptr[irow]; jj < mat.browptr[irow+1]; jj++)\n\t\t{\n\t\t\tyy[irow] += mat.vals[jj] * xx[mat.bcolind[jj]];\n\t\t}\n\t}\n}\n```\n\n"},{"title":"Linuxé©±åŠ¨å¼€å‘é¢˜ç›®","url":"/2024/06/12/Linuxé©±åŠ¨å¼€å‘é¢˜ç›®/","content":"\nç›¸å…³é“¾æ¥ï¼šhttps://www.cnblogs.com/lxq-247A3/p/16337398.html\n\n# 1.å­—ç¬¦è®¾å¤‡å’Œå—è®¾å¤‡\n\n**å­—ç¬¦è®¾å¤‡ï¼š**èƒ½å¤Ÿåƒ**å­—èŠ‚æµ**ä¸€æ ·è¢«è®¿é—®çš„è®¾å¤‡ï¼Œé©±åŠ¨ç¨‹åºè‡³å°‘å®ç°open,close,readå’Œwriteç³»ç»Ÿè°ƒç”¨ã€‚å­—ç¬¦ç»ˆç«¯ã€ä¸²å£ã€é¼  æ ‡ã€é”®ç›˜ã€æ‘„åƒå¤´ã€å£°å¡å’Œæ˜¾å¡ç­‰ã€‚\n\n**å—è®¾å¤‡ï¼š**å¯ä»¥å­˜å–ä»»æ„å­—èŠ‚æ•°ï¼Œèƒ½å¤Ÿå®¹çº³æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚ï¼šuç›˜ï¼ŒSDå¡ï¼Œç£ç›˜ç­‰ã€‚\n\n**ç½‘ç»œè®¾å¤‡ï¼š**å¯ä»¥æ˜¯ä¸€ä¸ªç¡¬ä»¶è®¾å¤‡ï¼Œæˆ–è€…æ˜¯è½¯ä»¶è®¾å¤‡ï¼Œæ²¡æœ‰ç›¸åº”çš„read writeï¼Œ**é¢å‘æµ**çš„ä¸€ç§ç‰¹æ®Šè®¾å¤‡ã€‚\n\n**ç›¸åŒç‚¹ï¼š**éƒ½æ˜¯é€šè¿‡/devç›®å½•ä¸‹çš„æ–‡ä»¶ç³»ç»ŸèŠ‚ç‚¹æ¥è®¿é—®ã€‚\n\n\n\nç³»ç»Ÿè°ƒç”¨ï¼šreadã€openã€closeã€writeï¼Œæ³¨æ„fopen\\freadä¸ºæ ‡å‡†IOä¸æ˜¯ç³»ç»Ÿè°ƒç”¨\n\n# 2.é©±åŠ¨åŠ è½½\n\n**é™æ€åŠ è½½ï¼š**æŠŠé©±åŠ¨ç›´æ¥ç¼–è¯‘åˆ°å†…æ ¸ä¸­ï¼Œè¿™ç§åŠ è½½æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬éœ€è¦ä¿®æ”¹é©±åŠ¨çš„æ—¶å€™ï¼Œå°±éœ€è¦æ¯æ¬¡éƒ½ç¼–è¯‘å†…æ ¸ï¼Œç¼–è¯‘å†…æ ¸æ˜¯æ¯”è¾ƒè´¹æ—¶é—´çš„\n\n**åŠ¨æ€åŠ è½½ï¼š**ä½¿ç”¨insmodå‘½ä»¤æ·»åŠ æ¨¡å—ï¼ˆ.koï¼‰ï¼Œåœ¨ä¸éœ€è¦çš„æ—¶å€™ç”¨rmmodå‘½ä»¤å¸è½½æ¨¡å—ï¼Œé‡‡ç”¨è¿™ç§åŠ¨æ€åŠ è½½çš„æ–¹å¼ä¾¿äºé©±åŠ¨ç¨‹åºçš„è°ƒè¯•ï¼ŒåŒæ—¶å¯ä»¥é’ˆå¯¹äº§å“çš„åŠŸèƒ½éœ€æ±‚ï¼Œè¿›è¡Œå†…æ ¸çš„è£å‰ªï¼Œå°†ä¸éœ€è¦çš„é©±åŠ¨å»é™¤ï¼Œå¤§å¤§å‡å°äº†å†…æ ¸çš„å­˜å‚¨å®¹é‡ã€‚\n\n# 3.æŸ¥çœ‹æ¨¡å—ç›¸å…³ä¿¡æ¯\n\n1. æŸ¥çœ‹é©±åŠ¨æ¨¡å—ä¸­æ‰“å°ä¿¡æ¯çš„å‘½ä»¤ï¼šdmesg\n\n2. æŸ¥çœ‹å­—ç¬¦è®¾å¤‡ä¿¡æ¯å¯ä»¥ç”¨lsmod å’Œmodprobe\n\n   - lsmodå¯ä»¥æŸ¥çœ‹æ¨¡å—çš„ä¾èµ–å…³ç³»\n\n   - modprobeåœ¨åŠ è½½æ¨¡å—æ—¶ä¼šåŠ è½½å…¶ä»–ä¾èµ–çš„æ¨¡å—\n\n3. æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„ä¸­æ–­å·cat /proc/interrupt\n\n# 4.ä¸»è®¾å¤‡å·å’Œæ¬¡è®¾å¤‡å·\n\nåˆ›å»ºchartestè®¾å¤‡ï¼š`mknod chartest c 4 64`\n\n**ä¸»è®¾å¤‡å·ï¼š**æ ‡è¯†è®¾å¤‡å¯¹åº”çš„é©±åŠ¨ç¨‹åºï¼ŒLinuxä¸­ä¸º12ä½\n\n**æ¬¡è®¾å¤‡å·ï¼š**é€šè¿‡æ¬¡è®¾å¤‡å·è·å¾—ä¸€ä¸ªæŒ‡å‘å†…æ ¸è®¾å¤‡çš„ç›´æ¥æŒ‡é’ˆï¼Œä¹Ÿå¯å°†æ­¤è®¾å¤‡å·å½“ä½œè®¾å¤‡æœ¬åœ°æ•°ç»„çš„ç´¢å¼•ã€‚å 20ä½\n\nchartest ç”±é©±åŠ¨ç¨‹åº4ç®¡ç†ï¼Œè¯¥æ–‡ä»¶æ‰€æŒ‡çš„è®¾å¤‡æ˜¯64å·è®¾å¤‡\n\n# 5.å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„æ‹·è´\n\n**copy_to_user()ï¼š**å®Œæˆå†…æ ¸ç©ºé—´åˆ°ç”¨æˆ·ç©ºé—´çš„å¤åˆ¶\n\n**copy_from_user()ï¼š**å®Œæˆç”¨æˆ·ç©ºé—´åˆ°å†…æ ¸ç©ºé—´çš„å¤åˆ¶\n\nä¸€èˆ¬ç”¨äºfile_operationsï¼ˆæ–‡ä»¶æ“ä½œç»“æ„ä½“ï¼‰é‡Œçš„`read`,`write`,`ioctl`ç­‰å†…å­˜æ•°æ®äº¤æ¢ä½œç”¨çš„å‡½æ•°ã€‚å¦‚æœ`ioctl`æ²¡æœ‰ç”¨åˆ°å†…å­˜æ•°æ®å¤åˆ¶ï¼Œé‚£ä¹ˆå°±ä¸ä¼šç”¨åˆ°è¿™ä¸¤ä¸ªå‡½æ•°ã€‚\n\n# 6.å¼•å…¥æ¨¡å—æœºåˆ¶çš„å¥½å¤„\n\nè¯¥æœºåˆ¶æœ‰åŠ©äºç¼©çŸ­æ¨¡å—çš„å¼€å‘å‘¨æœŸã€‚å³:æ³¨å†Œå’Œå¸è½½éƒ½å¾ˆçµæ´»æ–¹ä¾¿ã€‚\n\n# 7.å­—ç¬¦è®¾å¤‡åŸºæœ¬æ¡†æ¶\n\n## 7.1 æ¨¡å—åŠ è½½\n\n~~~cpp\n\n\n```cpp\n#include <linux/init.h>\n#include <linux/module.h>\n\n/* é©±åŠ¨å…¥å£å‡½æ•° */\nstatic int __init xxx_init(void)\n{\n    /* å…¥å£å‡½æ•°å…·ä½“å†…å®¹ */\n    return 0;\n}\n/* é©±åŠ¨å‡ºå£å‡½æ•° */\nstatic void __exit xxx_exit(void)\n{\n    /* å‡ºå£å‡½æ•°å…·ä½“å†…å®¹ */\n}\n/* å°†ä¸Šé¢ä¸¤ä¸ªå‡½æ•°æŒ‡å®šä¸ºé©±åŠ¨çš„å…¥å£å’Œå‡ºå£å‡½æ•° */\nmodule_init(xxx_init);\nmodule_exit(xxx_exit)\nMODULE_LICENSE(\"GPL\");//æ¨¡å—GPLè®¸å¯å£°æ˜\nMODULE_AUTHOR(\"VICCZYQ\");//æ¨¡å—ä½œè€…ç­‰ä¿¡æ¯\n```\n\n```shell\nsudo insmod hello.ko//åŠ è½½æ¨¡å—\nsudo rmmod hello//å¸è½½æ¨¡å—\n```\n\n**æ³¨æ„åœ¨initå‡½æ•°ä¸­ç”³è¯·çš„èµ„æºåœ¨exitå‡½æ•°ä¸­è¦é‡Šæ”¾**\n~~~\n\nå¯¹äºå­—ç¬¦è®¾å¤‡é©±åŠ¨è€Œè¨€ï¼Œå½“é©±åŠ¨æ¨¡å—åŠ è½½æˆåŠŸä»¥åéœ€è¦æ³¨å†Œå­—ç¬¦è®¾å¤‡ã€‚å¸è½½é©±åŠ¨æ¨¡å—çš„æ—¶ä¹Ÿéœ€è¦æ³¨é”€æ‰å­—ç¬¦è®¾å¤‡ã€‚\n\n## 7.2 æ³¨å†Œå­—ç¬¦è®¾å¤‡é©±åŠ¨\n\nå¯¹äºå­—ç¬¦è®¾å¤‡é©±åŠ¨è€Œè¨€ï¼Œå½“é©±åŠ¨æ¨¡å—åŠ è½½æˆåŠŸä»¥åéœ€è¦æ³¨å†Œå­—ç¬¦è®¾å¤‡ã€‚å¸è½½é©±åŠ¨æ¨¡å—çš„æ—¶ä¹Ÿéœ€è¦æ³¨é”€æ‰å­—ç¬¦è®¾å¤‡ã€‚ä¸€èˆ¬**å­—ç¬¦è®¾å¤‡çš„æ³¨å†Œ**åœ¨**é©±åŠ¨æ¨¡å—çš„å…¥å£å‡½æ•° xxx_init** ä¸­è¿›è¡Œï¼Œ**å­—ç¬¦è®¾å¤‡çš„æ³¨é”€**åœ¨**é©±åŠ¨æ¨¡å—çš„å‡ºå£å‡½æ•° xxx_exit** ä¸­è¿›è¡Œã€‚\n\n```cpp\nstatic inline int register_chrdev(unsigned int major, \n\t\t\t\t\t\t\t\t\tconst char *name,\n\t\t\t\t\t\t\t\t\tconst struct file_operations *fops)\n \nstatic inline void unregister_chrdev(unsigned int major, \n\t\t\t\t\t\t\t\t\tconst char *name)\n\n```\n\n## 7.3 å†…å­˜æ˜ å°„\n\nåœ¨Linuxä¸­ä¸èƒ½ç›´æ¥è®¿é—®å¯„å­˜å™¨ï¼Œè¦æƒ³è¦æ“ä½œå¯„å­˜å™¨éœ€è¦å®Œæˆç‰©ç†åœ°å€åˆ°è™šæ‹Ÿç©ºé—´çš„æ˜ å°„ã€‚ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜ä¹‹é—´çš„è½¬æ¢ï¼Œéœ€è¦ç”¨åˆ°ï¼š ioremap å’Œ iounmapä¸¤ä¸ªå‡½æ•°\n\n```cpp\n#define addr (0X020E0068)  // ç‰©ç†åœ°å€\nstatic void __iomem*  va; //æŒ‡å‘æ˜ å°„åçš„è™šæ‹Ÿç©ºé—´é¦–åœ°å€çš„æŒ‡é’ˆ\nva=ioremap(addr, 4);   // å¾—åˆ°è™šæ‹Ÿåœ°å€é¦–åœ°å€\n```\n\næ³¨æ„å¸è½½æ—¶å€™è¦ç”¨iounmap\n\n```cpp\niounmap(va);\n```\n\n## 7.4 æ•°æ®ä¼ é€’\n\n```cpp\nstatic inline long copy_from_user(void *to, const void __user * from, unsigned long n)\nstatic inline long copy_to_user(void __user *to, const void *from, unsigned long n)\n//to:ç›®æ ‡åœ°å€\n//from:æºåœ°å€\n//n:æ‹·è´çš„å­—èŠ‚æ•°\n```\n\n## 7.5 å­—ç¬¦è®¾å¤‡æœ€åŸºæœ¬æ¡†æ¶\n\n```cpp\n#define CHRDEVBASE_MAJOR 200\t\t\t//æ‰‹åŠ¨è®¾ç½®ä¸»è®¾å¤‡å·\n#define CHRDEVBASE_NAME  \"chrdevbase\"\t//è®¾å¤‡åç§°\n//å†…æ ¸ç¼“å­˜åŒº\nstatic char readbuf[100];\t\t\t\t\t\t//è¯»æ•°æ®ç¼“å­˜\nstatic char writebuf[100];\t\t\t\t\t\t//å†™æ•°æ®ç¼“å­˜\nstatic char kerneldata[] = {\"kernel data!\"};\t//æµ‹è¯•æ•°æ®\n//ç¡¬ä»¶å¯„å­˜å™¨\n#define GPIO_TEST_BASE (0x01234567) \t//å®å®šä¹‰å¯„å­˜å™¨æ˜ å°„åœ°å€\nstatic void __iomem *GPIO_TEST;\t\t\t// __iomem ç±»å‹çš„æŒ‡é’ˆï¼ŒæŒ‡å‘æ˜ å°„åçš„è™šæ‹Ÿç©ºé—´é¦–åœ°å€\n//æ‰“å¼€è®¾å¤‡\nstatic int chrdevbase_open(struct inode *inode, struct file *filp) \n{\n\treturn 0;\n}\n// ä»è®¾å¤‡è¯»å–æ•°æ® \nstatic ssize_t chrdevbase_read(struct file *filp , char __user *buf , size_t cnt , loff_t *offt) \n{\n\tint retvalue = 0;\n\tunsigned char databuf[1];\n// è¯»å–ç¡¬ä»¶å¯„å­˜å™¨\n#if 0  \n\t//è¯»å–å¯„å­˜å™¨çŠ¶æ€\n\tdatabuf[0] = readl(GPIO_TEST);\n\tretvalue = copy_to_user(buf , databuf, cnt);\n//è¯»å–å†…æ ¸å†…å­˜\n#else\t\n\t//æµ‹è¯•æ•°æ®æ‹·è´åˆ°è¯»æ•°æ®ç¼“å­˜ä¸­\n    memcpy(readbuf , kerneldata , sizeof(kerneldata));  \n    //å†…æ ¸ä¸­æ•°æ®ï¼ˆè¯»ç¼“å­˜ï¼‰æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´\n    retvalue = copy_to_user(buf , readbuf , cnt);\n#endif\n\n    if(retvalue == 0) printk(\"kernel senddate ok!\\n\");   \n  \telse printk(\"kernel senddate failed!\\n\");\n    return 0;\n}\n//å‘è®¾å¤‡å†™æ•°æ® \nstatic ssize_t chrdevbase_write(struct file *filp, const char __user *buf, size_t cnt , loff_t *offt) \n{\n\tint retvalue = 0;\n//å†™ç¡¬ä»¶å¯„å­˜å™¨\n#if 0\n\twritel(buf[0],GPIO_TEST);\n//å†™å†…æ ¸ç¼“å­˜\n#else\n\t//ç”¨æˆ·æ•°æ®æ‹·è´åˆ°å†…æ ¸ç©ºé—´ï¼ˆå†™ç¼“å­˜ï¼‰\n    retvalue = copy_from_user(writebuf , buf ,cnt);\n#endif\n    if(retvalue == 0) printk(\"kernel recevdate : %s\\n\",writebuf);\n  \telse printk(\"kernel recevdate failed!\");\n    return 0;\n}\n//å…³é—­/é‡Šæ”¾è®¾å¤‡\nstatic int chrdevbase_release(struct inode *inode , struct file *filp) \n{\n\treturn 0;\n}\n//è®¾å¤‡æ“ä½œå‡½æ•°\nstatic struct file_operations chrdevbase_fops = {\n    .owner = THIS_MODULE,\n    .open = chrdevbase_open,\n    .read = chrdevbase_read,\n    .write = chrdevbase_write,\n    .release = chrdevbase_release,\n};\n/* é©±åŠ¨å…¥å£å‡½æ•° */\nstatic int __init chrdevbase_init(void)\n{\n\tint retvalue = 0;\n\t//å¯„å­˜å™¨ç‰©ç†æ˜ å°„ï¼Œç‰©ç†åœ°å€æ˜ å°„åˆ°è™šæ‹Ÿåœ°å€æŒ‡é’ˆ\n\tGPIO_TEST= ioremap(GPIO_TEST_BASE, 4);\n\t//æ³¨å†Œå­—ç¬¦è®¾å¤‡é©±åŠ¨\n    retvalue = register_chrdev(CHRDEVBASE_MAJOR, \t//ä¸»è®¾å¤‡å·\n    \t\t\t\t\t\t\tCHRDEVBASE_NAME, \t//è®¾å¤‡åç§°\n    \t\t\t\t\t\t\t&chrdevbase_fops);\t//è®¾å¤‡æ“ä½œå‡½æ•°é›†åˆ\n    \t\t\t\t\t\t\t\n    if(retvalue < 0) printk(\"chrdevbase driver register failed\\n\");\n    printk(\"chrdevbase_init()\\r\\n\");\n    return 0;\n}\n/* é©±åŠ¨å‡ºå£å‡½æ•° */\nstatic void __exit chrdevbase_exit(void)\n{\n\t//è§£é™¤å¯„å­˜å™¨æ˜ å°„\n\tiounmap(GPIO_TEST);\n\t//æ³¨æ¶ˆå­—ç¬¦è®¾å¤‡é©±åŠ¨\n\tunregister_chrdev(CHRDEVBASE_MAJOR ,  \t//ä¸»è®¾å¤‡å·\n\t\t\t\t\t\tCHRDEVBASE_NAME);\t//è®¾å¤‡åç§°\n    printk(\"chrdevbase_exit()\\r\\n\");\n}\n/* å°†ä¸Šé¢ä¸¤ä¸ªå‡½æ•°æŒ‡å®šä¸ºé©±åŠ¨çš„å…¥å£å’Œå‡ºå£å‡½æ•° */\nmodule_init(chrdevbase_init);\nmodule_exit(chrdevbase_exit);\n\nMODULE_LICENSE(\"GPI\");//GPLæ¨¡å—è®¸å¯è¯\nMODULE_AUTHOR(\"songwei\");//ä½œè€…ä¿¡æ¯\n\n```\n\n## 7.6 åˆ›å»ºé©±åŠ¨èŠ‚ç‚¹æ–‡ä»¶\n\n```bash\nmknod /dev/chrdevbase c 200 0\n```\n\nåˆ›å»ºå®Œæˆä»¥åå°±ä¼šå­˜åœ¨/dev/chrdevbase è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨â€œls /dev/chrdevbase -lâ€å‘½ä»¤æŸ¥çœ‹\n\n# 8.DMAå’Œä¸­æ–­\n\n**DMAï¼š**ä¸€ç§æ— é¡»CPUçš„å‚ä¸å°±å¯ä»¥è®©**å¤–è®¾**ä¸**ç³»ç»Ÿå†…å­˜**ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“çš„ç¡¬ä»¶æœºåˆ¶\n\n**ä¸­æ–­ï¼š**æ˜¯æŒ‡CPUåœ¨æ‰§è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†æŸäº›çªå‘äº‹ä»¶æ—¶CPUå¿…é¡»æš‚åœæ‰§è¡Œå½“å‰çš„ç¨‹åºï¼Œè½¬å»å¤„ç†çªå‘äº‹ä»¶ï¼Œå¤„ç†å®Œæ¯•åCPUåˆè¿”å›æºç¨‹åºè¢«ä¸­æ–­çš„ä½ç½®å¹¶ç»§ç»­æ‰§è¡Œã€‚\n\nä¸­æ–­å’ŒDMAçš„åŒºåˆ«å°±æ˜¯<u>DMAä¸éœ€CPU</u>å‚ä¸è€Œä¸­æ–­æ˜¯éœ€è¦CPUå‚ä¸çš„ã€‚\n\n# 9.é©±åŠ¨çš„Makefileæ¡†æ¶\n\n```makefile\nBASE_KERNEL ?= å†…æ ¸çš„æºç ç›®å½•\nobj-m += é©±åŠ¨æºæ–‡ä»¶å.o\nall:\n    make -C $(BASE_KERNEL) M=$(PWD) modules\nclean:\n    make -C $(BASE_KERNEL) M=$(PWD) clean\n```\n\n eg.é©±åŠ¨æºæ–‡ä»¶ä¸ºabc.cå’Œhello.c\n\n```makefile\n# è‹¥æ˜¯è™šæ‹Ÿæœºè‡ªèº«å†…æ ¸ï¼Œå¯ä»¥å®šä¹‰å˜é‡ä¸º: /lib/modules/$(shell uname -r)/build\n# å®šä¹‰å†…æ ¸æºç æ ¹ç›®å½•\nBASE_KERNEL ?= /lib/modules/$(shell uname -r)/build\n\n# å®šä¹‰ç›®æ ‡å\nTARGET := hello\n\n# å°†å¤šä¸ªå¯¹è±¡æ–‡ä»¶åˆå¹¶åˆ°åŒä¸€è¡Œ\nobj-m := abc.o hello.o\n\nall:\n    make -C $(BASE_KERNEL) M=$(PWD) modules\n\nclean:\n    make -C $(BASE_KERNEL) M=$(PWD) clean\n```\n\n# 10 å¯åŠ¨è¿‡ç¨‹\n\n## 10.1 U-boot å¯åŠ¨æµç¨‹\n\n**ç¬¬ä¸€é˜¶æ®µï¼š**\n\n- ç¡¬ä»¶è®¾å¤‡åˆå§‹åŒ–\n- å°†ç¬¬äºŒé˜¶æ®µçš„ä»£ç åŠ è½½åˆ°RAM\n- è®¾ç½®å¥½æ ˆç©ºé—´\n- è·³è½¬åˆ°ç¬¬äºŒé˜¶æ®µä»£ç å…¥å£å¤„\n\n**ç¬¬äºŒé˜¶æ®µï¼š**\n\n- åˆå§‹åŒ–æœ¬é˜¶æ®µçš„ç¡¬ä»¶è®¾å¤‡\n- å°†Linuxå†…æ ¸ä»Flashè¯»å…¥RAM\n- ä¸ºLinuxå†…æ ¸è®¾ç½®å¯åŠ¨å‚æ•°\n- è°ƒç”¨Linuxå†…æ ¸\n\n## 10.2 Linuxç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹\n\n1. å†…æ ¸å¼•å¯¼\n2. è¿è¡Œåˆå§‹åŒ–ï¼Œinit\n3. ç³»ç»Ÿåˆå§‹åŒ–\n4. å»ºç«‹ç»ˆç«¯\n5. ç”¨æˆ·ç™»å½•ç³»ç»Ÿ\n\n"},{"title":"é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ å¯¼èˆª","url":"/2024/05/26/é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/","content":"\n**é«˜æ€§èƒ½ç¨‹åº** = æ•°æ®ç»“æ„ + ç®—æ³• + **ä½“ç³»ç»“æ„**\n\nä¼˜åŒ–æ•ˆæœ = æ·±å…¥æ€è€ƒ + æ•¢äºå°è¯• + **æ—¶é—´ç´¯ç§¯**\n\n# å­¦ä¹ èµ„æº\n\n- [intel Intrinsics Guide (opens new window)](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#cats=Arithmetic&expand=3904,3913,4011,4014,4602,4011&techs=MMX,SSE,SSE2,SSE3,SSSE3,SSE4_1,SSE4_2,AVX,AVX2,FMA,AVX_512,AMX,SVML,Other)\n- OpenMP å’Œ MPI ï¼šã€Š[å¹¶è¡Œç¨‹åºè®¾è®¡å¯¼è®º](https://kaywu-images.oss-cn-beijing.aliyuncs.com/book/code/%E5%B9%B6%E8%A1%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%AF%BC%E8%AE%BA.pdf)ã€‹\n- [ç°ä»£å¾®å¤„ç†å™¨æ¶æ„ 90åˆ†é’ŸæŒ‡å—](https://www.starduster.me/2020/11/05/modern-microprocessors-a-90-minute-guide/)\n- [é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ è·¯çº¿](https://heptagonhust.github.io/HPC-roadmap/)\n- [shell è„šæœ¬å­¦ä¹ -bilibili](https://www.bilibili.com/video/BV14L4y157Bv/)\n- [å¿«é€Ÿå…¥é—¨ï¼šSlurmèµ„æºç®¡ç†ä¸ä½œä¸šè°ƒåº¦ç³»ç»Ÿ](https://zhuanlan.zhihu.com/p/571973164)\n- [CMakeå’ŒMakefile](https://vicczyq.github.io/2024/03/06/Makefile%E5%92%8CCMake/)\n\n# ä¸€ã€åŸºç¡€çŸ¥è¯†\n\n## 1.1 å¹¶è¡Œè®¡ç®—\n\n**å¹¶è¡Œè®¡ç®—**æ˜¯æŒ‡åœ¨è®¡ç®—è¿‡ç¨‹ä¸­åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡æˆ–æ“ä½œï¼Œä»¥æé«˜è®¡ç®—æ•ˆç‡çš„æŠ€æœ¯ã€‚ä¸ä¼ ç»Ÿçš„ä¸²è¡Œè®¡ç®—ç›¸æ¯”ï¼Œå®ƒèƒ½å¤Ÿåˆ©ç”¨å¤šä¸ªå¤„ç†å•å…ƒæˆ–è®¡ç®—èµ„æºåŒæ—¶è¿›è¡Œè®¡ç®—ï¼Œä»è€Œæ›´å¿«åœ°å®Œæˆä»»åŠ¡ã€‚\n\n### 1.1.1 åˆ†ç±»ï¼š\n\n- **æŒ‡ä»¤çº§å¹¶è¡Œï¼š**CPUæµæ°´çº¿\n- **åˆ†å¸ƒå¼å¹¶è¡Œï¼š**MPI\n- **å…±äº«å­˜å‚¨å¼å¹¶è¡Œï¼š**OpenMPã€OpenACCã€OpenCL\n\n### 1.1.3 å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«\n\n**å¹¶è¡Œï¼š**åœ¨**åŒä¸€æ—¶åˆ»çœŸæ­£åœ°å¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡**ï¼Œä¾èµ–äºå¤šå¤„ç†å™¨æˆ–å¤šæ ¸å¿ƒç³»ç»Ÿ\n\n**å¹¶å‘**ï¼šæ˜¯æŒ‡å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶é—´æ®µå†…**äº¤æ›¿æ‰§è¡Œ**ï¼Œä½†ä¸ä¸€å®šæ˜¯åŒæ—¶æ‰§è¡Œçš„ã€‚\n\n### 1.1.3 å¼‚æ„å¹¶è¡Œçš„æ¦‚å¿µ\n\nè®¡ç®—ä»»åŠ¡ä¸­ä½¿ç”¨å…·æœ‰ä¸åŒæ¶æ„çš„å¤šç§è®¡ç®—èµ„æºï¼ˆä¾‹å¦‚CPUã€GPUã€ç¥å¨ä¸»ä»æ ¸ç­‰ï¼‰è¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚\n\n![image-20240523203637666](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/image-20240523203637666.png)\n\n## 1.2 è¿›ç¨‹å’Œçº¿ç¨‹\n\n**è¿›ç¨‹ï¼š**<u>èµ„æºåˆ†é…çš„æœ€å°å•ä½</u>ã€‚æ˜¯å¹¶å‘æ‰§è¡Œçš„ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ†é…å’Œç®¡ç†èµ„æºçš„åŸºæœ¬å•ä½ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€æ¦‚å¿µï¼Œç«äº‰è®¡ç®—æœºç³»ç»Ÿèµ„æºçš„åŸºæœ¬å•ä½ã€‚ï¼ˆèµ„æºåˆ†é…ï¼‰\n**çº¿ç¨‹ï¼š**<u>CPUè°ƒåº¦çš„æœ€å°å•ä½</u>ã€‚æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œæ˜¯è¿›ç¨‹å†…å¯è°ƒåº¦å®ä½“ã€‚æ¯”è¿›ç¨‹æ›´å°çš„ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚ï¼ˆæ‰§è¡Œä½“ï¼‰\n\n- ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹\n- çº¿ç¨‹çš„åˆ’åˆ†å°ºåº¦å°äºè¿›ç¨‹ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘æ€§é«˜\n- è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šçº¿ç¨‹ä¹‹é—´æ˜¯å…±äº«å†…å­˜\n\n**OpenMP**\n\n1. å¹¶è¡Œç²’åº¦ï¼šçº¿ç¨‹çº§\n2. æ•°æ®åˆ†é…æ–¹å¼ï¼šéšå¼ï¼ˆç³»ç»Ÿæˆ–ç¼–è¯‘å™¨è‡ªåŠ¨å¤„ç†æ•°æ®åˆ†é…å’Œç®¡ç†ï¼‰\n3. å…±äº«å­˜å‚¨ï¼Œå¯æ‰©å±•æ€§å·®\n\n\n**MPI**\n\n1. å¹¶è¡Œç²’åº¦ï¼šè¿›ç¨‹çº§\n2. æ•°æ®åˆ†é…æ–¹å¼ï¼šæ˜¾å¼ï¼ˆç”±ç¨‹åºå‘˜è‡ªä¸»åˆ†é…ï¼‰\n3. åˆ†å¸ƒå¼å­˜å‚¨ï¼Œå¯æ‰©å±•æ€§å¥½\n\n\n\n## 1.3 CPUå†…éƒ¨æ¶æ„\n\n### 1.3.1 æŒ‡ä»¤æµæ°´çº¿ï¼ˆpipelineï¼‰\n\nä»¥ç»å…¸çš„5çº§æµæ°´çº¿ä¸ºä¾‹ï¼Œä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¢«åˆ†ä¸º5ä¸ªé˜¶æ®µï¼š\n\n- å–æŒ‡ï¼ˆIFï¼‰ï¼šä»å†…å­˜ä¸­å–å‡ºä¸€æ¡æŒ‡ä»¤\n- è¯‘ç ï¼ˆIDï¼‰ï¼šå¯¹æŒ‡ä»¤è¿›è¡Œè§£ç ï¼Œç¡®å®šæŒ‡ä»¤è¦æ‰§è¡Œçš„æ“ä½œ\n- æ‰§è¡Œï¼ˆEXï¼‰ï¼šæ‰§è¡ŒæŒ‡ä»¤æ“ä½œ\n- è®¿å­˜ï¼ˆMEMï¼‰ï¼šå†…å­˜è®¿é—®æ“ä½œ\n- å†™å›ï¼ˆWBï¼‰ï¼šæ‰§è¡Œç»“æœå†™å›å¯„å­˜å™¨æˆ–å†…å­˜\n\n![img](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/2efd9ec72267748ff315f95e4959d13a.png)\n\nåœ¨CPUå†…éƒ¨ï¼Œæ‰§è¡Œæ¯ä¸ªé˜¶æ®µä½¿ç”¨çš„æ˜¯ä¸åŒçš„ç¡¬ä»¶èµ„æºï¼Œä»è€Œå¯ä»¥è®©å¤šæ¡æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ç›¸äº’é‡å ã€‚\n\n![img](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/d7e26bf2bf7f955559e36abee7a66c59.png)\n\næœ‰äº†æµæ°´çº¿æŠ€æœ¯ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ŒCPUå¯ä»¥å®Œæˆä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Œå¯ä»¥è®©CPUåœ¨æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œå®Œæˆå¤šæ¡æŒ‡ä»¤çš„æ‰§è¡Œå‘¢ï¼Œè¿™å²‚ä¸æ˜¯ä¼šå¤§å¤§æé«˜CPUæ•´ä½“æ€§èƒ½å—ï¼Ÿè¿™å°±æ˜¯SuperscalaræŠ€æœ¯ï¼ï¼ˆè¿˜æœ‰VLIWæŠ€æœ¯ï¼‰\n\n### 1.3.2 è¶…æ ‡é‡ï¼ˆSuperscalarï¼‰\n\né€šè¿‡åœ¨CPUå†…éƒ¨å®ç°å¤šæ¡æŒ‡ä»¤æµæ°´çº¿ï¼Œå¯ä»¥çœŸæ­£å®ç°å¤šæ¡å‘½ä»¤å¹¶è¡Œæ‰§è¡Œï¼Œä¹Ÿè¢«ç§°ä¸º**å¤šå‘å°„æ•°æ®é€šè·¯æŠ€æœ¯**\n\n![img](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/438dfd2c0f9f9b798b403063f5858f88.png)\n\n### 1.3.3 æµæ°´çº¿å†²çª\n\nåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸Šè¿°è®¾è®¡ååˆ†å®Œç¾ï¼Œä½†æ˜¯ç°å®ä¸­ç¨‹åºçš„æŒ‡ä»¤åºåˆ—ä¹‹é—´å¾€å¾€å­˜åœ¨å„ç§å„æ ·çš„**ä¾èµ–å’Œç›¸å…³æ€§**ï¼Œè€ŒCPUä¸ºäº†è§£å†³è¿™ç§æŒ‡ä»¤é—´çš„ä¾èµ–å’Œç›¸å…³æ€§ï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸â€œ**åœé¡¿**â€ä¸‹æ¥ï¼Œç›´åˆ°è¿™äº›ä¾èµ–å¾—åˆ°è§£å†³ï¼Œè¿™å°±å¯¼è‡´CPUæŒ‡ä»¤æµæ°´çº¿æ— æ³•æ€»æ˜¯ä¿æŒâ€œå…¨é€Ÿè¿è¡Œâ€ã€‚\n\n#### ï¼ˆ1ï¼‰æ•°æ®å†²çª\n\nä¸¤æ¡åœ¨æµæ°´çº¿ä¸­å¹¶è¡Œæ‰§è¡Œçš„æŒ‡ä»¤ï¼Œ**ç¬¬äºŒæ¡æŒ‡ä»¤éœ€è¦ç”¨åˆ°ç¬¬ä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œç»“æœ**ï¼Œå› æ­¤ç¬¬äºŒæ¡æŒ‡ä»¤çš„æ‰§è¡Œä¸å¾—ä¸æš‚åœï¼Œä¸€ç›´åˆ°å¯ä»¥è·å–åˆ°ç¬¬ä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œç»“æœä¸ºæ­¢ã€‚\n\n```cpp\nx = æŸäº›è®¡ç®—;\ny = x;\n```\n\n#### ï¼ˆ2ï¼‰æ§åˆ¶å†²çª\n\nCPUåœ¨æ‰§è¡Œ**åˆ†æ”¯è·³è½¬æ—¶ï¼Œæ— æ³•é¢„çŸ¥ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤ã€‚**\n\n```cpp\nif(a > 100) {\n    x = 1;\n} else {\n    y = 2;\n}\n```\n\n#### ï¼ˆ3ï¼‰ç»“æ„å†²çª\n\n**å¤šæ¡æŒ‡ä»¤åŒæ—¶ç«äº‰åŒä¸€ä¸ªç¡¬ä»¶èµ„æº**ï¼Œç”±äºç¡¬ä»¶èµ„æºçŸ­ç¼ºï¼Œæ— æ³•åŒæ—¶æ»¡è¶³æ‰€æœ‰æŒ‡ä»¤çš„æ‰§è¡Œè¯·æ±‚ã€‚å¦‚ä¸¤æ¡å¹¶è¡Œæ‰§è¡Œçš„å‘½ä»¤éœ€è¦åŒæ—¶è®¿é—®å†…å­˜ï¼Œè€Œå†…å­˜åœ°å€è¯‘ç å•å…ƒå¯èƒ½åªæœ‰ä¸€ä¸ªï¼Œè¿™å°±äº§ç”Ÿäº†ç»“æ„å†²çªã€‚\n\n## 1.4 é«˜æ€§èƒ½æ•°å­¦ç®—æ³•åº“\n\nåŸºæœ¬æ¦‚å¿µï¼šè®¡ç®—é¢†åŸŸçš„åŸºç¡€è½¯ä»¶åº“ï¼Œæ˜¯å‘æŒ¥ç¡¬ä»¶ç®—åŠ›çš„åŸºçŸ³ï¼Œæé«˜æ•ˆç‡\n\n![image-20240523180934242](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/image-20240523180934242.png)\n\nä¸»æµçš„ç¡¬ä»¶å‚å•†éƒ½ä¼šä¸ºè‡ªèº«ç¡¬ä»¶æä¾›ä¼˜åŒ–äº†çš„ç®—æ³•åº“\n\n- **Intel** MKL\n- **IBM** ESSL/PESSL\n- **AMD** AOCL\n- **Nvidia** CUDA-X\n\n### 1.4.1 BLAS/LAPACK\n\n**BLASï¼š**åŸºç¡€çº¿æ€§ä»£æ•°å­ç¨‹åºï¼Œæ˜¯ä¸€ç³»åˆ—åˆçº§æ“ä½œçš„è§„èŒƒï¼Œå¦‚å‘é‡ä¹‹é—´çš„ä¹˜æ³•ï¼ŒçŸ©é˜µä¹˜æ³•ç­‰\n\n**LAPACKï¼š**çº¿æ€§ä»£æ•°åº“ï¼Œåº•å±‚æ˜¯BLASï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå®šä¹‰äº†å¾ˆå¤šçŸ©é˜µå’Œé«˜çº§è¿ç®—å‡½æ•°ï¼Œå¦‚çŸ©é˜µåˆ†è§£ã€æ±‚é€†ç­‰ï¼Œè¿ç®—æ•ˆç‡æ¯”BLASé«˜\n\n### 1.4.2 PETSc\n\nåº•å±‚ä¸ºBLAS/LAPACKï¼Œç”¨äºé«˜æ€§èƒ½æ±‚è§£åå¾®ç§¯åˆ†æ–¹ç¨‹ç»„ç›¸å…³é—®é¢˜ï¼Œç›®å‰PETScæ‰€æœ‰æ¶ˆæ¯ä¼ é€’å‡é‡‡ç”¨MPIå®ç°ã€‚\n\næ”¯æŒFortran 77/90ã€C/C++ç¼–å†™çš„ä¸²è¡Œå’Œå¹¶è¡Œä»£ç \n\n## 1.5 è®¡ç®—æœºæ¶æ„\n\nåˆ’åˆ†è®¡ç®—æœºæ¶æ„çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¹¿æ³›ä½¿ç”¨çš„ä¸ºä½›æ—åˆ†ç±»æ³•ï¼ˆFlynnâ€™s Taxonomyï¼‰\n\n### 1.5.1 ä½›æ—åˆ†ç±»æ³•ï¼ˆFlynnâ€™s Taxonomyï¼‰\n\næ ¹æ®æŒ‡ä»¤å’Œæ•°æ®è¿›å…¥CPUçš„æ–¹æ³•è¿›è¡Œåˆ†ç±»\n\n- å•æŒ‡ä»¤å•æ•°æ®SISDï¼ˆä¼ ç»Ÿä¸²è¡Œè®¡ç®—æœºï¼Œ386ï¼‰\n- å•æŒ‡ä»¤å¤šæ•°æ®SIMDï¼ˆå¹¶è¡Œæ¶æ„ï¼Œæ¯”å¦‚å‘é‡æœºï¼Œæ‰€æœ‰æ ¸å¿ƒæŒ‡ä»¤å”¯ä¸€ï¼Œä½†æ˜¯æ•°æ®ä¸åŒï¼Œç°åœ¨CPUåŸºæœ¬éƒ½æœ‰è¿™ç±»çš„å‘é‡æŒ‡ä»¤ï¼‰\n- å¤šæŒ‡ä»¤å•æ•°æ®MISDï¼ˆå°‘è§ï¼Œå¤šä¸ªæŒ‡ä»¤å›´æ®´ä¸€ä¸ªæ•°æ®ï¼‰\n- å¤šæŒ‡ä»¤å¤šæ•°æ®MIMDï¼ˆå¹¶è¡Œæ¶æ„ï¼Œå¤šæ ¸å¿ƒï¼Œå¤šæŒ‡ä»¤ï¼Œå¼‚æ­¥å¤„ç†å¤šä¸ªæ•°æ®æµï¼Œä»è€Œå®ç°ç©ºé—´ä¸Šçš„å¹¶è¡Œï¼ŒMIMDå¤šæ•°æƒ…å†µä¸‹åŒ…å«SIMDï¼Œå°±æ˜¯MIMDæœ‰å¾ˆå¤šè®¡ç®—æ ¸ï¼Œè®¡ç®—æ ¸æ”¯æŒSIMDï¼‰\n\n### 1.5.2 æ ¹æ®å†…å­˜åˆ’åˆ†\n\n#### 1.5.2.1 åˆ†å¸ƒå¼å†…å­˜çš„å¤šèŠ‚ç‚¹ç³»ç»Ÿ\n\né€šå¸¸æŠŠè¿™ç§æˆä¸ºé›†ç¾¤ï¼ŒèŠ‚ç‚¹æœ‰ç‹¬ç«‹çš„ç¡¬ä»¶ï¼ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œäº¤äº’ï¼ˆMPIçš„ä½œç”¨ï¼‰\n\n![image-20240809163234017](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/image-20240809163234017.png)\n\n#### 1.5.2.2 å…±äº«å†…å­˜çš„å¤šå¤„ç†å™¨ç³»ç»Ÿ\n\nå•ä¸ªä¸»æ¿ä¸Šé¢æœ‰å¤šä¸ªå¤„ç†å™¨ï¼Œä»–ä»¬å…±äº«ä¸»æ¿ä¸Šé¢çš„å†…å­˜ï¼Œé€šè¿‡PCIeå’Œå†…å­˜è¿›è¡Œäº¤äº’\n\n![img](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/6.png)\n\nä¸Šé¢è®²åˆ°çš„â€å¤šä¸ªå¤„ç†å™¨â€œå¯ä»¥åˆ†ä¸º å¤šç‰‡å¤„ç†å™¨ å’Œ å•ç‰‡å¤šæ ¸ï¼ˆä¼—æ ¸ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰äº›ä¸»æ¿ä¸Šå®‰è£…äº†è®¸å¤šç‰‡å¤„ç†å™¨ï¼Œä¹Ÿæœ‰çš„æ˜¯ä¸€ä¸ªä¸»æ¿ä¸Šå°±ä¸€ä¸ªå¤„ç†å™¨ï¼Œä½†æ˜¯è¿™ä¸ªå¤„ç†å™¨é‡Œé¢æœ‰å‡ ç™¾ä¸ªæ ¸ã€‚\n\nGPUå°±å±äºä¼—æ ¸ç³»ç»Ÿã€‚å½“ç„¶ç°åœ¨CPUä¹Ÿéƒ½æ˜¯å¤šæ ¸çš„äº†ï¼Œä½†æ˜¯ä»–ä»¬è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ï¼š\n\n- CPUé€‚åˆæ‰§è¡Œå¤æ‚çš„é€»è¾‘ï¼Œæ¯”å¦‚å¤šåˆ†æ”¯ï¼Œå…¶æ ¸å¿ƒæ¯”è¾ƒé‡ï¼ˆå¤æ‚ï¼‰\n- GPUé€‚åˆæ‰§è¡Œç®€å•çš„é€»è¾‘ï¼Œå¤§é‡çš„æ•°æ®è®¡ç®—ï¼Œå…¶ååé‡æ›´é«˜ï¼Œä½†æ˜¯æ ¸å¿ƒæ¯”è¾ƒè½»ï¼ˆç»“æ„ç®€å•ï¼‰\n\n# äºŒã€å…¥é—¨ç¯‡\n\nPSï¼šåœ¨è¿™ä¹‹å‰æœ€å¥½å­¦å¥½C++çš„ç›¸å…³çŸ¥è¯†\n\n## 2.1 Pthread\n\n![image-20240521112131105](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/image-20240521112131105.png)\n\npthreadæ˜¯è®¸å¤šå¹¶è¡Œæ¨¡å‹çš„åº•å±‚å®ç°\n\n**å…·ä½“å†…å®¹ï¼š**https://vicczyq.github.io/2024/05/21/Pthread\n\n## 2.2 OpenMP\n\nä»¥Pthreadä¸ºåŸºç¡€å¼€å‘çš„ï¼Œé¢å‘å¤šçº¿ç¨‹å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼Œæå¤§ç®€åŒ–äº†å¤šçº¿ç¨‹ç¼–ç ï¼Œæ”¯æŒFortranã€C/C++\n\nè¯¦ç»†å†…å®¹ï¼š[https://vicczyq.github.io/2022/02/05/OpenMPå­¦ä¹ ](https://vicczyq.github.io/2022/02/05/OpenMPå­¦ä¹ )\n\n# ä¸‰ã€åŸºç¡€ç¯‡\n\n## 3.1 MPI\n\nè¯¦ç»†å†…å®¹ï¼š[https://vicczyq.github.io/2022/02/05/MPI%E5%AD%A6%E4%B9%A0/](https://vicczyq.github.io/2022/02/05/MPI%E5%AD%A6%E4%B9%A0/)\n\n## 3.2 CUDA\n\nï¼ˆå†…å®¹ä¸æ˜¯å¾ˆå®Œå–„ï¼Œå¾…æ›´......ï¼‰\n\nè¯¦ç»†å†…å®¹ï¼š[https://vicczyq.github.io/2022/02/05/CUDA%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/](https://vicczyq.github.io/2022/02/05/CUDA%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/)\n\n## 3.3 æ€§èƒ½åˆ†æ\n\n### 3.3.1 é™æ€åˆ†æå·¥å…·\n\nåˆ©ç”¨ä»£ç é™æ€åˆ†æï¼Œå¯¹ä»£ç è¿›è¡Œæ•°æ®å¯¹è±¡ã€å‡½æ•°æ¥å£å°è£…å’Œè°ƒç”¨åˆ†æ\n\nä¸»æµçš„å·¥å…·ï¼š**Understand**ã€SourceInsightã€DeepScanã€deepsourceã€VERACODE\n\nä»¥Understandä¸ºä¾‹ï¼š[https://blog.csdn.net/qq_40513792/article/details/111991978](https://blog.csdn.net/qq_40513792/article/details/111991978)\n\n### 3.3.2 åŠ¨æ€åˆ†æå·¥å…·\n\nå®é™…è¿è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨äº†å“ªäº›å‡½æ•°ã€‚\n\nä¸»æµçš„å·¥å…·ï¼šgprofã€intel vtune profilerã€Perfç­‰\n\n#### Perf\n\nä½¿ç”¨æ•™ç¨‹ï¼š[Amicoyuan-perf-ç³»ç»Ÿçº§æ€§èƒ½åˆ†æå·¥å…·](https://xingyuanjie.top/2022/01/19/tool003/)\n\n#### gprofï¼ˆGNU profileï¼‰\n\n**æ³¨æ„ï¼š**<u>ä¸é€‚ç”¨äºå¤šçº¿ç¨‹ç¨‹åºï¼Œåªä¼šè®°å½•ä¸»çº¿ç¨‹ã€‚</u>\n\nç”¨gccã€g++ç­‰ç¼–è¯‘ç¨‹åºæ—¶ï¼Œä½¿ç”¨-pgå‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šåœ¨åŸä»£ç ä¸­æ’å…¥ç”¨äºæ€§èƒ½æµ‹è¯•çš„ä»£ç ç‰‡æ–­\n\nå¦‚ï¼š`g++ -pg -o test test.cpp`\n\næ‰§è¡Œç¼–è¯‘åçš„å¯æ‰§è¡Œç¨‹åºï¼Œå¦‚ï¼š`./test`\n\nç¨‹åºè¿è¡Œç»“æŸåï¼Œä¼šåœ¨ç¨‹åºæ‰€åœ¨è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªç¼ºçœæ–‡ä»¶åä¸ºgmon.outçš„æ–‡ä»¶\n\næœ€åä½¿ç”¨`gprof test gmon.out > output.txt`å³å¯\n\n![image-20240523190516990](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/image-20240523190516990.png)\n\n#### intel vtune profiler\n\né’ˆå¯¹äºè‹±ç‰¹å°”å¤„ç†å™¨ã€‚\n\n## 3.4 SIMD\n\nAVXï¼šAdvanced Vector Extension é«˜çº§å‘é‡æ‰©å±•\n\nAVXæ˜¯SIMDï¼ˆå•æŒ‡ä»¤å¤šæ•°æ®ï¼‰æŒ‡ä»¤ï¼Œå¯ä»¥ç”¨ä¸€æ¡æŒ‡ä»¤äº§ç”Ÿå¤šä¸ªå¹¶è¡Œæ“ä½œã€‚\n\n**å¯„å­˜å™¨ä½å®½ï¼š**\n\n- SSEï¼š128bit\n- AVX/AVX2ï¼š256bit\n- AVX512ï¼š512bit\n\nå› ä¸ºAVX/AVX2éƒ½æ”¯æŒ256bitï¼Œæ‰€ä»¥å¯ä»¥ç»Ÿç§°ä¸ºAVX256\n\næ›´å¤šå†…å®¹è§ï¼š[https://blog.csdn.net/qq_17075011/article/details/130555559](https://blog.csdn.net/qq_17075011/article/details/130555559)\n\n# å››ã€å…¶ä»–å¸¸ç”¨ä¼˜åŒ–æ‰‹æ®µ\n\n## 4.1 å¸¸ç”¨å¾ªç¯ä¼˜åŒ–æŠ€æœ¯\n\n### **ï¼ˆ1ï¼‰è¾“å…¥å€¼åµŒå…¥**\n\nå°†è¿è¡Œæ—¶éœ€è¦ä»æ–‡ä»¶è¯»å…¥çš„å…³é”®æ•°æ®è½¬æ¢ä¸ºç¼–è¯‘æ—¶çš„é™æ€å¯çŸ¥æ•°æ®\n\nä¾‹å­å¦‚ä¸‹ï¼š\n\n```c++\n#include <stdio.h>\nint main() {\n    FILE *file;\n    int value;\n    file = fopen(\"data.txt\", \"r\");\n    if (file == NULL) {\n        perror(\"Error opening file\");\n        return 1;\n    }\n    if (fscanf(file, \"%d\", &value) != 1) {\n        perror(\"Error reading integer from file\");\n        fclose(file);\n        return 1;\n    }\n    fclose(file);\n    printf(\"Read value: %d\\n\", value);\n    return 0;\n}\n```\n\nå¦‚æœæˆ‘å·²ç»çŸ¥é“éœ€è¦è¯»å…¥çš„æ•°æ®valueçš„å€¼ä¸º0ï¼Œå°±å¯ä»¥ç›´æ¥é‡‡ç”¨å®å®šä¹‰æˆ–è€…é™æ€å˜é‡çš„æ–¹æ³•ï¼Œä¸éœ€è¦å»è¯»å…¥\n\n```cpp\n#define value 3\n```\n\n### **ï¼ˆ2ï¼‰åˆ†æ”¯æ¶ˆé™¤**\n\næ¶ˆé™¤å¾ªç¯ä¸­çš„åˆ†æ”¯ï¼Œå‡å°‘åˆ†æ”¯åˆ¤æ–­å’Œè·³è½¬\n\nä¹Ÿå¯ä»¥ç”¨è¡¥ç /ä½è¿ç®—\n\nä¾‹å¦‚ï¼š\n\n```cpp\nfor(int i = 0; i < 100; i++){\n\tif(i<30){ //æ‰§è¡ŒAæ“ä½œ }\n\telse{ //æ‰§è¡ŒBæ“ä½œ }\n}\n```\n\nä¿®æ”¹ä¸ºï¼š\n\n```cpp\nfor(int i = 0; i < 30; i++){\n//æ‰§è¡ŒAæ“ä½œ\n}\nfor(int j = 30; j < 100; j++){\n//æ‰§è¡ŒBæ“ä½œ\n}\n```\n\n### **ï¼ˆ3ï¼‰å¾ªç¯åˆå¹¶**\n\næ¯æ¬¡å¾ªç¯éœ€è¦å¯¹å¾ªç¯æ¡ä»¶è¿›è¡Œåˆ¤æ–­ï¼ˆi<N?ï¼‰å¾ªç¯åˆå¹¶å¯ä»¥å‡å°‘åˆ¤æ–­æ¬¡æ•°ã€‚\n\nå¦‚æœAï¼ŒBæ“ä½œæ•°æ®æœ‰å…³è”ï¼Œç”šè‡³å¯ä»¥å‡å°‘IO\n\n```cpp\nfor(int i = 0; i < N; i++){\n\t//æ‰§è¡ŒAæ“ä½œ\n}\nfor(int j = 0; j < N; j++){\n\t//æ‰§è¡ŒBæ“ä½œ\n}\n```\n\nä¿®æ”¹ä¸º\n\n```cpp\nfor(int i = 0; i < N; i++){\n\t//æ‰§è¡ŒAæ“ä½œ\n\t//æ‰§è¡ŒBæ“ä½œ\n}\n```\n\n### **ï¼ˆ4ï¼‰æ¬¡åºäº¤æ¢**\n\nC/C++å­˜å‚¨æ˜¯æŒ‰**è¡Œä¼˜å…ˆ**å­˜å‚¨ï¼ŒFortranæ˜¯**åˆ—ä¼˜å…ˆ**å­˜å‚¨\n\nåœ¨å¯¹æ•°æ®è¿›è¡Œè®¿é—®æ—¶ï¼Œæœ€å¥½æŒ‰ç…§é¡ºåºè¿›è¡Œè®¿é—®ã€‚\n\nåŸç†æ˜¯æœ€å¤§åŒ–åˆ©ç”¨é«˜é€Ÿç¼“å­˜Cache\n\n```cpp\nfor(int i = 0; i < N; i++){\n\tfor(int j = 0; j < N; j++){\n\t\tcout << array[j][i]; //åˆ—ä¼˜å…ˆé¡ºåºè®¿é—®\n        cout << array[i][j]; //è¡Œä¼˜å…ˆé¡ºåºè®¿é—®\n\t}\n}\n\n```\n\n### ï¼ˆ5ï¼‰å¾ªç¯åˆ†å—\n\nç›®çš„æ˜¯**æé«˜Cacheçš„å‘½ä¸­ç‡**ï¼Œ\n\nä¸€ä¸ª`Cache line`è¢«ä½¿ç”¨è¿‡ä¹‹åï¼Œåé¢å¯èƒ½è¿˜ä¼šä½¿ç”¨ï¼Œä½†æ˜¯é»˜è®¤å¾ªç¯çš„æ–¹å¼ï¼Œåˆ°ä¸‹æ¬¡è¦ä½¿ç”¨çš„æ—¶å€™`Cache line`å·²ç»è¢«æ›¿æ¢ã€‚\n\näºæ˜¯æˆ‘ä»¬å°±æŠŠå¾ªç¯é‡æ–°æ’ä¸€ä¸‹ï¼Œä½¿å¾—ä¸€ä¸ª`Cache line`åœ¨è¢«æ›¿æ¢ä¹‹å‰å°±èƒ½è¢«å†æ¬¡ä½¿ç”¨\n\n**ä¾‹ï¼š**\n\n```cpp\nfor(i = 0; i < N; i++){\n\tfor(j = 0; j < M; j++){\n\t\tA[i] = A[i] + B[j];\n\t}\n}\n```\n\nå¦‚æœå½“å‰`Cache Line`çš„å¤§å°ä¸º **b** ï¼ŒAçš„cache missæ¬¡æ•°å°±ä¸º`N/b`ï¼ŒBçš„cache missæ¬¡æ•°ä¸º`N*M/b`\n\n![image-20240523163713301](é«˜æ€§èƒ½è®¡ç®—å­¦ä¹ æ€»å¸–/image-20240523163713301.png)\n\nå› æ­¤å°±å¯ä»¥åˆ’åˆ†å—ï¼Œä»¤å—å¤§å°ä¸º**T**ï¼ˆä¸€èˆ¬æ˜¯bçš„æ•´æ•°å€ï¼Œä¹Ÿè¦è¶³å¤Ÿå°ï¼‰\n\n```cpp\nfor(jj = 0; jj < M; jj += T){\n\tfor(i = 0; i < N; i++){\n\t\tfor(j = 0; j < jj+T; j++){\n\t\t\tA[i] = A[i] + B[j];\n\t\t}\n\t}\n}\n```\n\n### ï¼ˆ6ï¼‰å¾ªç¯å±•å¼€\n\nå¾ªç¯æ¡ä»¶åˆ¤æ–­æ¬¡æ•°å‡å°‘ï¼Œæ›´å¤§çš„ä»£ç å—æœ‰æ›´å¤šä¼˜åŒ–æ‰‹æ®µ\n\nç°åœ¨æœ‰ä¸€ä¸ªä»£ç \n\n```cpp\nint calc(int n){\n\tint fact = 1;\n\tfor(int i = 1; i < n; i++){\n\t\tfact *= i;\n\t}\n\treturn fact;\n}\n```\n\nå¯¹ä»£ç è¿›è¡Œå¾ªç¯å±•å¼€ï¼Œå‡è®¾næ˜¯4çš„å€æ•°ï¼ˆå¦‚æœä¸æ˜¯4çš„å€æ•°è¦è¾¹ç•Œå¤„ç†ï¼‰\n\n```cpp\n//test_1\nint calc(int n){\n\tint fact0 = 1, fact1 = 1, fact2 = 1, fact3 = 1;\n\tfor(int i = 1; i < n; i+=4){\n\t\tfact0 *= i;\n        fact1 *= i+1;\n        fact2 *= i+2;\n        fact3 *= i+3;\n\t}\n\treturn fact0 * fact1 * fact2 * fact3;\n}\n```\n\n```cpp\n//test_2\nint calc(int n){\n\tint fact = 1;\n\tfor(int i = 1; i < n; i+=4){\n\t\tfact *= i;\n        fact *= i+1;\n        fact *= i+2;\n        fact *= i+3;\n\t}\n\treturn fact;\n}\n```\n\ntest_2å’Œtest_1éƒ½å±äºå¾ªç¯å±•å¼€ï¼Œä½†æ˜¯test_1æ•ˆæœæ›´å¥½\n\n**å†…å®¹å‰æè¡¥å……ï¼š**[æµæ°´çº¿](#1.3 CPUå†…éƒ¨æ¶æ„)ï¼Œè§ 1.3\n\ntest_1æ˜¯è¿™æ ·å±•å¼€çš„\n\n```cpp\nfact0 *= i;\nfact1 *= i+1;\nfact2 *= i+2;\nfact3 *= i+3;\n```\n\ntest_2æ˜¯è¿™æ ·å±•å¼€çš„\n\n```cpp\nfact *= i;\nfact *= i+1;\nfact *= i+2;\nfact *= i+3;\n```\n\nå¾ˆæ˜æ˜¾ï¼Œtest_2çš„åä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå‰ï¼Œå¿…é¡»çŸ¥é“å‰ä¸€æ¡æŒ‡ä»¤çš„è®¡ç®—ç»“æœï¼Œè¿™ä¹Ÿå°±æ˜¯**æ•°æ®ä¾èµ–**ï¼Œé€ æˆæµæ°´çº¿å†²çªã€‚\n\nè™½ç„¶é€šè¿‡å¾ªç¯å±•å¼€ï¼Œå‡å°‘äº†æ— ç”¨æŒ‡ä»¤ï¼Œä¹Ÿå‡å°‘äº†çƒ­ç‚¹è·¯å¾„ä¸Šåˆ†æ”¯è·³è½¬å¼•èµ·çš„æµæ°´çº¿æ§åˆ¶å†²çªï¼Œä½†å®ƒåŒæ—¶å¼•å…¥äº†æ•°æ®ä¾èµ–ï¼Œè¿›è€Œå¯¼è‡´æµæ°´çº¿å†²çªï¼Œä»ç„¶æ— æ³•å‘æŒ¥æµæ°´çº¿å’Œsuperscalarçš„æŒ‡ä»¤çº§å¹¶è¡Œæ‰§è¡Œçš„èƒ½åŠ›ï¼\n\n#### è¡¥å……ï¼šä¼˜åŒ–çƒ­ç‚¹è·¯å¾„å†…å­˜è®¿é—®\n\nå®šä¹‰å±€éƒ¨å˜é‡æ—¶åŠ ä¸Š`register`å…³é”®å­—å³å¯ï¼Œ\n\nä½œç”¨æ˜¯å»ºè®®ç¼–è¯‘å™¨å°½å¯èƒ½æŠŠå˜é‡æ”¾åœ¨å¯„å­˜å™¨ä¸­ï¼Œä»¥æ±‚æ›´å¿«çš„è®¿é—®é€Ÿåº¦\n\n```cpp\nint calc(int n){\n\tregister int fact0 = 1, fact1 = 1, fact2 = 1, fact3 = 1;\n\tfor(register int i = 1; i < n; i+=4){\n\t\tfact0 *= i;\n        fact1 *= i+1;\n        fact2 *= i+2;\n        fact3 *= i+3;\n\t}\n\treturn fact0 * fact1 * fact2 * fact3;\n}\n```\n\n## 4.2 cacheä¼˜åŒ–\n\n### 4.2.1 æŒ‡ä»¤cacheä¼˜åŒ–\n\nå°†éœ€è¦å¤šæ¬¡è°ƒç”¨çš„å‡½æ•°è®¾ç½®ä¸ºå†…è”å‡½æ•°`inline`ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€\n\n `inline` å…³é”®å­—å¯ä»¥å»ºè®®ç¼–è¯‘å™¨åœ¨è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ç›´æ¥æ’å…¥å‡½æ•°ä»£ç ï¼Œè€Œä¸æ˜¯æ‰§è¡Œæ­£å¸¸çš„å‡½æ•°è°ƒç”¨ã€‚\n\n```cpp\ninline int add(int a, int b) {\n    return a + b;\n}\n\nint main() {\n    int result = add(3, 4);  // æ­¤å¤„å±•å¼€ä¸º int result = 3 + 4;\n}\n```\n\n### 4.2.2 æ•°æ®cacheä¼˜åŒ–\n\n**æ•°æ®é¢„å–ï¼š**åœ¨æœ¬æ¬¡è®¡ç®—ä¸­ï¼Œé¢„å–ä¸‹ä¸€æ¬¡éœ€è¦çš„æ•°æ®ã€‚\n\n```cpp\n//ä½¿ç”¨GCCå†…ç½®å‡½æ•°å®ç°\nvoid __builtin_prefetch(const void *addr, int rw, int locality);\n//addrï¼šæŒ‡å‘é¢„å–æ•°æ®çš„åœ°å€ã€‚\n//rwï¼šé¢„å–çš„æ„å›¾ï¼Œ0 è¡¨ç¤ºé¢„å–ç”¨äºè¯»å–ï¼ˆé»˜è®¤ï¼‰ï¼Œ1 è¡¨ç¤ºé¢„å–ç”¨äºå†™å…¥ã€‚\n//localityï¼šæ•°æ®çš„å±€éƒ¨æ€§æç¤ºï¼ŒèŒƒå›´æ˜¯ 0 åˆ° 3ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºæ•°æ®å°†è¢«é¢‘ç¹è®¿é—®ï¼Œå› æ­¤åº”å°½é‡ä¿æŒåœ¨ç¼“å­˜ä¸­ã€‚\n```\n\n**æ•°æ®é‡æ’ï¼š**æŠŠæ•°æ®é‡æ–°æ’åˆ—ï¼ˆè¡Œä¼˜å…ˆæˆ–åˆ—ä¼˜å…ˆï¼‰ï¼Œä½¿å…¶å¯¹Cacheè®¿é—®æ›´ä¸ºå‹å¥½ï¼Œå‡å°‘Cache miss\n\n## 4.3 é€»è¾‘ä¼˜åŒ–\n\né€‰æ‹©åˆé€‚ç¼–è¯‘çº§åˆ«ï¼ˆO0\\O1\\O2\\O3\\Ofastï¼‰\n\nä½¿ç”¨registerå…³é”®å­—ï¼Œå°†å¸¸è®¿é—®å˜é‡æ”¾å…¥å¯„å­˜å™¨\n\nä½¿ç”¨å¿«é€Ÿæ•°å­¦è®¡ç®—ï¼ˆ-ffast-mathï¼‰ç­‰\n","tags":["è¶…ç®—"]},{"title":"Pthread","url":"/2024/05/21/Pthread/","content":"\npthreadæ˜¯è®¸å¤šå¹¶è¡Œæ¨¡å‹(OpenMP)çš„åº•å±‚å®ç°\n\n# pthread_once\n\nçº¿ç¨‹çš„ä¸€æ¬¡æ€§åˆå§‹åŒ–\n\n```\npthread_once(pthread_once_t *once_control, void(*init_routime)(void))\n```\n\n- once_controlï¼šæ§åˆ¶å˜é‡\n- init_routimeï¼šåˆå§‹åŒ–å‡½æ•°\n\nå°†æ§åˆ¶å˜é‡ï¼ˆonce_controlï¼‰è®¾ç½®ä¸º`PTHREAD_ONCE_INIT`å³å¯ä¿è¯åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ç¯å¢ƒä¸­ï¼Œå°½ç®¡pthread_onceå‡½æ•°ä¼šå‡ºç°åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ï¼Œå‡½æ•°ä¹Ÿä»…æ‰§è¡Œä¸€æ¬¡ï¼Œç©¶ç«Ÿåœ¨å“ªä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œç”±å†…æ ¸è°ƒåº¦å†³å®š\n\n# pthread_create\n\n```c\n#include <pthread.h>\npthread_create(thread, attr, start_routine, arg);\n```\n\n- threadï¼šæŒ‡å‘çº¿ç¨‹æ ‡è¯†ç¬¦\n- ç”¨äºè®¾ç½®çº¿ç¨‹å±æ€§ï¼Œé»˜è®¤ä¹Ÿå¯ä»¥ä½¿ç”¨NULL\n- çº¿ç¨‹å‡½æ•°åœ°å€\n- è¿è¡Œå‡½æ•°æ‰€éœ€è¦å‚æ•°ï¼Œå¯ä»¥ä¸ºNULL\n\nè‹¥åˆ›å»ºæˆåŠŸï¼Œå‡½æ•°ä¼šè¿”å›0ï¼Œè‹¥ä¸ä¸º0åˆ™çº¿ç¨‹åˆ›å»ºå¤±è´¥ã€‚\n\n# çº¿ç¨‹ç»ˆæ­¢å‡½æ•°\n\n## `int pthread_detach(pthread_t tid);`\n\n**åŠŸèƒ½**ï¼š\n\n- å°†çº¿ç¨‹æ ‡è®°ä¸ºåˆ†ç¦»çŠ¶æ€ã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- ä½¿å¾—çº¿ç¨‹åœ¨ç»ˆæ­¢æ—¶è‡ªåŠ¨é‡Šæ”¾å…¶èµ„æºï¼Œè€Œä¸éœ€è¦è°ƒç”¨`pthread_join`æ¥ç­‰å¾…å®ƒçš„ç»“æŸã€‚\n- åˆ†ç¦»çº¿ç¨‹åï¼Œä¸èƒ½å†å¯¹è¯¥çº¿ç¨‹è°ƒç”¨`pthread_join`ã€‚\n\n**è¿”å›å€¼**ï¼š\n\n- æˆåŠŸæ—¶è¿”å›`0`ã€‚\n- å¤±è´¥æ—¶è¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚\n\n**ä½¿ç”¨åœºæ™¯**ï¼š\n\n- å½“ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹å®Œæˆï¼Œä¹Ÿä¸éœ€è¦è·å–å…¶è¿”å›å€¼æ—¶ä½¿ç”¨ã€‚\n\n```c\npthread_t tid;\npthread_create(&tid, NULL, thread_function, NULL);\npthread_detach(tid); // åˆ†ç¦»çº¿ç¨‹\n```\n\n\n\n## `int pthread_cancel(pthread_t tid);`\n\n**åŠŸèƒ½**ï¼š\n\n- è¯·æ±‚å–æ¶ˆä¸€ä¸ªçº¿ç¨‹ã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- å‘æŒ‡å®šçš„çº¿ç¨‹å‘é€ä¸€ä¸ªå–æ¶ˆè¯·æ±‚ã€‚è¢«è¯·æ±‚çš„çº¿ç¨‹å¦‚æœå¤„äºå–æ¶ˆçŠ¶æ€ä¸”åˆ°è¾¾ä¸€ä¸ªå–æ¶ˆç‚¹ï¼ˆä¾‹å¦‚åœ¨é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨ä¸­ï¼‰ï¼Œåˆ™ä¼šå“åº”å–æ¶ˆè¯·æ±‚å¹¶ç»ˆæ­¢æ‰§è¡Œã€‚\n\n**è¿”å›å€¼**ï¼š\n\n- æˆåŠŸæ—¶è¿”å›`0`ã€‚\n- å¤±è´¥æ—¶è¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚\n\n**ä½¿ç”¨åœºæ™¯**ï¼š\n\n- å½“éœ€è¦å¼ºåˆ¶ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹æ—¶ä½¿ç”¨ã€‚çº¿ç¨‹å¯ä»¥è®¾ç½®å–æ¶ˆçŠ¶æ€å’Œå–æ¶ˆç±»å‹æ¥æ§åˆ¶å–æ¶ˆè¡Œä¸ºã€‚\n\n```c\npthread_t tid;\npthread_create(&tid, NULL, thread_function, NULL);\npthread_cancel(tid); // è¯·æ±‚å–æ¶ˆçº¿ç¨‹\n```\n\n\n\n##  `int sched_yield(void);`\n\n**åŠŸèƒ½**ï¼š\n\n- ä½¿è°ƒç”¨çº¿ç¨‹ä¸»åŠ¨è®©å‡ºCPUï¼Œè®©å…¶ä»–çº¿ç¨‹å¯ä»¥è¿è¡Œã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- è°ƒç”¨çº¿ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—å°¾éƒ¨ï¼Œè°ƒåº¦ç¨‹åºå°†é€‰æ‹©å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚\n- çº¿ç¨‹è°ƒåº¦çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºæé«˜ç³»ç»Ÿçš„å“åº”æ€§å’Œå¹¶å‘æ€§ã€‚\n\n**è¿”å›å€¼**ï¼š\n\n- æˆåŠŸæ—¶è¿”å›`0`ã€‚\n- å¤±è´¥æ—¶è¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚\n\n**ä½¿ç”¨åœºæ™¯**ï¼š\n\n- å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œäº†è¶³å¤Ÿé•¿æ—¶é—´æˆ–éœ€è¦ç­‰å¾…æŸäº›èµ„æºæ—¶ï¼Œå¯ä»¥è°ƒç”¨`sched_yield`è®©å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚\n\n```c\nsched_yield(); // è®©å‡ºCPUï¼Œè®©å…¶ä»–çº¿ç¨‹è¿è¡Œ\n```\n\n## `int pthread_join(pthread_t tid, void **status);`\n\n**åŠŸèƒ½**ï¼š\n\n- ç­‰å¾…æŒ‡å®šçº¿ç¨‹ç»ˆæ­¢ï¼Œå¹¶è·å–å…¶é€€å‡ºçŠ¶æ€ã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- è°ƒç”¨çº¿ç¨‹é˜»å¡ï¼Œç›´åˆ°æŒ‡å®šçº¿ç¨‹ç»ˆæ­¢ã€‚\n- å¯ä»¥é€šè¿‡`status`å‚æ•°è·å–è¢«ç­‰å¾…çº¿ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚\n\n**è¿”å›å€¼**ï¼š\n\n- æˆåŠŸæ—¶è¿”å›`0`ã€‚\n- å¤±è´¥æ—¶è¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚\n\n**ä½¿ç”¨åœºæ™¯**ï¼š\n\n- å½“éœ€è¦ç­‰å¾…æŸä¸ªçº¿ç¨‹å®Œæˆå…¶ä»»åŠ¡å¹¶è·å–å…¶ç»“æœæ—¶ä½¿ç”¨ã€‚\n\n```c\npthread_t tid;\npthread_create(&tid, NULL, thread_function, NULL);\nvoid *status;\npthread_join(tid, &status); // ç­‰å¾…çº¿ç¨‹å®Œæˆå¹¶è·å–å…¶é€€å‡ºçŠ¶æ€\n```\n\n\n\n##  `void pthread_exit(void *status);`\n\n**åŠŸèƒ½**ï¼š\n\n- ç»ˆæ­¢è°ƒç”¨çº¿ç¨‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- ç»ˆæ­¢å½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œå¹¶å°†`status`ä¼ é€’ç»™`pthread_join`è°ƒç”¨è€…ã€‚\n- è°ƒç”¨`pthread_exit`åï¼Œçº¿ç¨‹çš„èµ„æºä¼šè¢«é‡Šæ”¾ã€‚\n\n**è¿”å›å€¼**ï¼š\n\n- æ­¤å‡½æ•°ä¸è¿”å›ï¼Œç›´æ¥ç»ˆæ­¢çº¿ç¨‹ã€‚\n\n**ä½¿ç”¨åœºæ™¯**ï¼š\n\n- å½“çº¿ç¨‹å®Œæˆå…¶ä»»åŠ¡ï¼Œå¹¶å¸Œæœ›ç»ˆæ­¢å¹¶è¿”å›ä¸€ä¸ªçŠ¶æ€å€¼æ—¶ä½¿ç”¨ã€‚\n\n```c\nvoid *thread_function(void *arg) {\n    // çº¿ç¨‹çš„å·¥ä½œ\n    pthread_exit((void *)0); // ç»ˆæ­¢çº¿ç¨‹å¹¶è¿”å›çŠ¶æ€\n}\n```\n\n## æ€»ç»“\n\n| å‡½æ•°             | åŠŸèƒ½æè¿°                                       | ä½¿ç”¨åœºæ™¯                                         |\n| ---------------- | ---------------------------------------------- | ------------------------------------------------ |\n| `pthread_detach` | å°†çº¿ç¨‹æ ‡è®°ä¸ºåˆ†ç¦»çŠ¶æ€ï¼Œä½¿å…¶ç»ˆæ­¢æ—¶è‡ªåŠ¨é‡Šæ”¾èµ„æºã€‚ | ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹å®Œæˆï¼Œä¹Ÿä¸éœ€è¦è·å–å…¶è¿”å›å€¼æ—¶ä½¿ç”¨ã€‚ |\n| `pthread_cancel` | è¯·æ±‚å–æ¶ˆä¸€ä¸ªçº¿ç¨‹ã€‚                             | éœ€è¦å¼ºåˆ¶ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹æ—¶ä½¿ç”¨ã€‚                     |\n| `sched_yield`    | ä½¿è°ƒç”¨çº¿ç¨‹ä¸»åŠ¨è®©å‡ºCPUï¼Œè®©å…¶ä»–çº¿ç¨‹å¯ä»¥è¿è¡Œã€‚    | å½“çº¿ç¨‹éœ€è¦è®©å‡ºCPUç»™å…¶ä»–çº¿ç¨‹è¿è¡Œæ—¶ä½¿ç”¨ã€‚          |\n| `pthread_join`   | ç­‰å¾…æŒ‡å®šçº¿ç¨‹ç»ˆæ­¢ï¼Œå¹¶è·å–å…¶é€€å‡ºçŠ¶æ€ã€‚           | éœ€è¦ç­‰å¾…çº¿ç¨‹å®Œæˆä»»åŠ¡å¹¶è·å–å…¶ç»“æœæ—¶ä½¿ç”¨ã€‚         |\n| `pthread_exit`   | ç»ˆæ­¢è°ƒç”¨çº¿ç¨‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ã€‚             | çº¿ç¨‹å®Œæˆä»»åŠ¡åï¼Œå¸Œæœ›ç»ˆæ­¢å¹¶è¿”å›ä¸€ä¸ªçŠ¶æ€å€¼æ—¶ä½¿ç”¨ã€‚ |\n\n# çº¿ç¨‹çš„æ ‡è¯†\n\n## `pthread_t pthread_self(void)`\n\n**åŠŸèƒ½**ï¼š\n\n- è·å–è°ƒç”¨çº¿ç¨‹çš„çº¿ç¨‹æ ‡è¯†ç¬¦ã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- `pthread_self`å‡½æ•°è¿”å›ä¸€ä¸ªè¡¨ç¤ºè°ƒç”¨çº¿ç¨‹çš„çº¿ç¨‹æ ‡è¯†ç¬¦ï¼ˆIDï¼‰ã€‚\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```c\n#include <pthread.h>\n#include <stdio.h>\n\nvoid* thread_function(void* arg) {\n    pthread_t tid = pthread_self(); // è·å–å½“å‰çº¿ç¨‹ID\n    printf(\"Thread ID: %lu\\n\", (unsigned long)tid);\n    return NULL;\n}\n\nint main() {\n    pthread_t tid;\n    pthread_create(&tid, NULL, thread_function, NULL);\n    pthread_join(tid, NULL);\n    return 0;\n}\n```\n\n## `int pthread_equal(pthread_t t1, pthread_t t2)`\n\n**åŠŸèƒ½**ï¼š\n\n- æ¯”è¾ƒä¸¤ä¸ªçº¿ç¨‹IDæ˜¯å¦ç›¸ç­‰ã€‚\n\n**è¯¦ç»†æè¿°**ï¼š\n\n- `pthread_equal`å‡½æ•°ç”¨äºæ¯”è¾ƒä¸¤ä¸ªçº¿ç¨‹IDï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œè¿”å›éé›¶å€¼ï¼ˆé€šå¸¸ä¸º1ï¼‰ï¼›å¦‚æœå®ƒä»¬ä¸ç›¸ç­‰ï¼Œè¿”å›0ã€‚\n- ç›´æ¥ä½¿ç”¨`==`è¿ç®—ç¬¦æ¯”è¾ƒ`pthread_t`ç±»å‹çš„çº¿ç¨‹IDåœ¨æŸäº›å®ç°ä¸­å¯èƒ½**ä¸å®‰å…¨æˆ–ä¸å¯ç§»æ¤**ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨`pthread_equal`å‡½æ•°ã€‚\n\n**å‚æ•°**ï¼š\n\n- `t1`ï¼šç¬¬ä¸€ä¸ªçº¿ç¨‹IDã€‚\n- `t2`ï¼šç¬¬äºŒä¸ªçº¿ç¨‹IDã€‚\n\n**è¿”å›å€¼**ï¼š\n\n- ç›¸ç­‰æ—¶è¿”å›éé›¶å€¼ã€‚\n- ä¸ç›¸ç­‰æ—¶è¿”å›é›¶ã€‚\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```c\n#include <pthread.h>\n#include <stdio.h>\n\nvoid* thread_function(void* arg) {\n    pthread_t tid = pthread_self();\n    printf(\"Thread ID: %lu\\n\", (unsigned long)tid);\n    return NULL;\n}\n\nint main() {\n    pthread_t tid1, tid2;\n    pthread_create(&tid1, NULL, thread_function, NULL);\n    pthread_create(&tid2, NULL, thread_function, NULL);\n\n    pthread_join(tid1, NULL);\n    pthread_join(tid2, NULL);\n\n    if (pthread_equal(tid1, tid2)) {\n        printf(\"Threads are equal\\n\");\n    } else {\n        printf(\"Threads are not equal\\n\");\n    }\n\n    return 0;\n}\n```\n\n# çº¿ç¨‹çš„åŒæ­¥å’Œäº’æ–¥\n","tags":["è¶…ç®—"]},{"title":"ä¿¡æ¯ç½‘ç»œå®‰å…¨","url":"/2024/04/30/ä¿¡æ¯ç½‘ç»œå®‰å…¨/","content":"\næ‰©å±•é“¾æ¥ï¼šhttps://www.cnblogs.com/lxq-247A3/p/16320439.html\n\n# ä¸€ã€æ¦‚è¿°\n\n## 1.1 åŸºæœ¬æ¦‚å¿µ\n\n**ä¿¡æ¯å®‰å…¨**æ˜¯æŒ‡ä¿¡æ¯ç½‘ç»œä¸­çš„**ç¡¬ä»¶**ã€**è½¯ä»¶**åŠå…¶**ç³»ç»Ÿä¸­çš„æ•°æ®**å—åˆ°ä¿æŠ¤ï¼Œä¸å—å¶ç„¶çš„æˆ–è€…æ¶æ„çš„åŸå› è€Œé­åˆ°**ç ´åã€æ›´æ”¹ã€æ³„éœ²ã€å¦è®¤**ç­‰ï¼Œç³»ç»Ÿè¿ç»­å¯é æ­£å¸¸çš„è¿è¡Œï¼Œ**ä¿¡æ¯æœåŠ¡**ä¸ä¸­æ–­ã€‚\n\n\n\n**ä¿¡æ¯å®‰å…¨å¨èƒ**æ˜¯æŒ‡æŸäº›å› ç´ ï¼ˆäººã€ç‰©ã€äº‹ä»¶ã€æ–¹æ³•ç­‰ï¼‰å¯¹ä¿¡æ¯ç³»ç»Ÿçš„å®‰å…¨ä½¿ç”¨å¯èƒ½æ„æˆçš„å±å®³ã€‚\n\n- ç¡¬ä»¶çš„å®‰å…¨éšæ‚£ï¼ˆCPUã€ç½‘ç»œè®¾å¤‡ï¼‰ \n- æ“ä½œç³»ç»Ÿå®‰å…¨éšæ‚£\n- ç½‘ç»œåè®®çš„å®‰å…¨éšæ‚£\n- æ•°æ®åº“ç³»ç»Ÿå®‰å…¨éšæ‚£ï¼ˆåˆ†ä¸ºç›´æ¥æ”»å‡»å’Œé—´æ¥æ”»å‡»ï¼‰\n- è®¡ç®—æœºç—…æ¯’\n- ç®¡ç†ç–æ¼ï¼Œå†…éƒ¨ä½œæ¡ˆ\n\nè®¡ç®—æœºç—…æ¯’æ˜¯ä¸€ç§èƒ½å¤Ÿè‡ªæˆ‘å¤åˆ¶çš„ç¨‹åºï¼Œæœ¨é©¬çš„ä½œç”¨æ˜¯å·å·ç›‘è§†åˆ«äººå’Œç›—å–åˆ«äººæ•°æ®ç­‰\n\n## 1.2 æ”»å‡»\n\n**æ”»å‡»ï¼š**å…¥ä¾µè¡Œä¸ºå®Œå…¨å®Œæˆä¸”å…¥ä¾µè€…å·²è¿›å…¥ç›®æ ‡ç½‘ç»œå†…çš„è¡Œä¸ºç§°ä¸ºæ”»å‡»ã€‚\n\nä½†æ›´ä¸ºç§¯æçš„è§‚ç‚¹æ˜¯ï¼šæ‰€æœ‰å¯èƒ½ä½¿ä¸€ä¸ªç½‘ç»œå—åˆ°ç ´åçš„è¡Œä¸ºéƒ½ç§°ä¸ºæ”»å‡»ã€‚å³ä»ä¸€ä¸ªå…¥ä¾µè€…å¼€å§‹åœ¨ç›®æ ‡æœºä¸Šå·¥ä½œçš„é‚£ä¸ªæ—¶åˆ»èµ·ï¼Œæ”»å‡»å°±å¼€å§‹äº†ã€‚\n\n**ä¿¡æ¯ç³»ç»Ÿçš„æ„æˆï¼š**ä¿¡é“ã€ç½‘ç»œã€ä¼ è¾“åè®®ã€ä¸»æœºç³»ç»Ÿã€æ•°æ®åº“ç³»ç»Ÿã€åº”ç”¨ç³»ç»Ÿ\n\n**æ”»å‡»åˆ†ç±»ï¼š**æ³„éœ²ä¿¡æ¯ã€ç ´åä¿¡æ¯ã€æ‹’ç»æœåŠ¡\n\n**ä¸»è¦æ‰‹æ®µï¼š**å£ä»¤å…¥ä¾µã€åé—¨è½¯ä»¶ã€ç›‘å¬æ³•ï¼ˆSnifferï¼‰ã€E-mailæŠ€æœ¯ã€ç”µå­æ¬ºéª—ã€Dosï¼ˆDenial of Serviceï¼‰\n\n## 1.3 ä¿¡æ¯å®‰å…¨\n\n**ä¿¡æ¯å®‰å…¨ä¸‰è¦ç´ ï¼š** \n\næœºå¯†æ€§ï¼ˆ**C**onfidentialityï¼‰ã€å®Œæ•´æ€§ï¼ˆ**I**ntegrityï¼‰ã€å¯ç”¨æ€§ï¼ˆ**A**vailabilityï¼‰\n\n**CIA**ä¸‰è¦ç´ æ˜¯ç½‘ç»œå®‰å…¨çš„åŸºæœ¬å‡†åˆ™ã€æ ¸å¿ƒå‡†åˆ™\n\n\n\n**ä¿¡æ¯å®‰å…¨å…¸å‹æŠ€æœ¯ï¼š**\n\n- ä¿¡æ¯åŠ å¯†æŠ€æœ¯\n- é˜²ç«å¢™æŠ€æœ¯\n- æ¼æ´æ‰«ææŠ€æœ¯\n- å…¥ä¾µæ£€æµ‹æŠ€æœ¯\n- é˜²ç—…æ¯’æŠ€æœ¯\n- ç½‘ç»œå®‰å…¨éš§é“æŠ€æœ¯ï¼ˆVPNï¼‰\n\n\n\n# äºŒã€ä¿¡æ¯åŠ å¯†æŠ€æœ¯\n\n**å¯†ç å­¦**æ˜¯ä¿¡æ¯å®‰å…¨çš„æ ¸å¿ƒå’Œå…³é”®æŠ€æœ¯\n\n## 2.1 å¤å…¸å¯†ç å­¦æ¡ˆä¾‹\n\nè—å¤´è¯—ã€å›ç¯è¯—ã€ç½‘æ ¼å¯†ç ã€å‡¯æ’’ï¼ˆCaesarï¼‰å¯†ç \n\n## **2.2 ä»£æ¢å¯†ç **\n\nå°±æ˜¯å°†æ˜æ–‡ä¸­çš„ä¸€ä¸ªå­—æ¯ç”±å…¶å®ƒå­—æ¯ã€æ•°å­—æˆ–è€…ç¬¦å·æ›¿ä»£çš„ä¸€ç§æ–¹æ³•ã€‚\n\n**å¸¸è§çš„ä»£æ¢å¯†ç **\n\n- å•è¡¨ä»£æ¢å¯†ç ï¼ˆCaesarå¯†ç ï¼‰\n- å¤šè¡¨ä»£æ¢å¯†ç \n\n**ç¼ºç‚¹ï¼š**\n\n1. å¯†ç é‡å°ï¼Œä¸èƒ½æŠµæŠ—ç©·å°½æœç´¢æ”»å‡»\n2. æ˜æ–‡å›ºå®šä»£æ¢ï¼Œä¸èƒ½æŠµæŠ—é¢‘ç‡åˆ†ææ”»å‡»\n\n## 2.3 å¯†ç å­¦åŸºæœ¬æ¦‚å¿µ\n\nç ”ç©¶**ä¿¡æ¯ç³»ç»Ÿå®‰å…¨**ä¿å¯†çš„ç§‘å­¦ï¼ŒåŒ…å«ä¸¤ä¸ªåˆ†æ”¯\n\n- å¯†ç ç¼–ç å­¦\n- å¯†ç åˆ†æå­¦\n\nä¸€ä¸ª**å¯†ç ï¼ˆåŠ å¯†ï¼‰ç³»ç»Ÿ**æ˜¯ç”±**æ˜æ–‡(M)ã€å¯†æ–‡(C)ã€åŠ å¯†ç®—æ³•(E)ã€è§£å¯†ç®—æ³•(D)ã€å¯†é’¥(K)**äº”ä¸ªéƒ¨åˆ†ç»„æˆ\n\n![image-20240501121927416](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501121927416.png)\n\n**æŒ‰ä¿å¯†ç¨‹åº¦æ¢åˆ†ï¼š**\n\n- ç†è®ºä¸Šä¿å¯†çš„å¯†ç ï¼šä¸ç®¡æœ‰å¤šå°‘å¯†æ–‡å’Œç®—ä¾‹ï¼Œå¯¹æ˜æ–‡å§‹ç»ˆå¾—ä¸åˆ°å”¯ä¸€è§£\n- å®é™…ä¸Šä¿å¯†çš„å¯†ç ï¼šç†è®ºä¸Šå¯ç ´\n- ä¸ä¿å¯†çš„å¯†ç ï¼šè·å–ä¸€å®šé‡å¯†æ–‡åå¯å¾—åˆ°è§£\n\n**æŒ‰ç¼–åˆ¶åŸç†åˆ’åˆ†ï¼š**\n\n- ä»£æ¢ï¼ˆæ˜æ–‡å†…å®¹çš„è¡¨ç¤ºå½¢å¼æ”¹å˜ï¼Œå†…å®¹å…ƒç´ ä¹‹é—´ç›¸å¯¹ä½ç½®ä¸å˜ï¼Œæ˜æ–‡å­—æ¯ç”¨å¯†æ–‡ä¸­å¯¹åº”å­—æ¯ä»£æ›¿ï¼‰\n- ç½®æ¢ï¼ˆæ˜æ–‡å†…å®¹å…ƒç´ çš„ç›¸å¯¹ä½ç½®æ”¹å˜ï¼Œå†…å®¹çš„è¡¨ç¤ºå½¢å¼ä¸å˜ï¼‰\n- å¤šç§ç»„åˆ\n\n**æŒ‰å¯†é’¥ä½¿ç”¨æ–¹å¼åˆ’åˆ†ï¼š**\n\n- å¯¹ç§°å¯†ç ä½“åˆ¶\n  - åŠ å¯†ï¼šEK(M)=C\n  - è§£å¯†ï¼šDK(C)=M\n- éå¯¹ç§°å¯†ç ä½“åˆ¶ï¼ˆå…¬é’¥å¯†ç ä½“åˆ¶ï¼‰\n  - åŠ å¯†ï¼šEKp(M)=C\n  - è§£å¯†ï¼šDKs(C)=M\n\n**æŒ‰æ•°æ®åŠ å¯†å‘å±•é˜¶æ®µåˆ†ç±»ï¼š**\n\n- å¤å…¸å¯†ç ä½“åˆ¶ï¼šä»£æ›¿ã€ç½®æ¢å¯†ç \n- å¯¹ç§°å¯†ç ï¼šDESã€AES\n- éå¯¹ç§°å¯†ç ï¼ˆå…¬é’¥å¯†ç ï¼‰ï¼šRSA\n\n# ä¸‰ã€å¤å…¸å¯†ç ä½“åˆ¶\n\n**å•è¡¨ä»£æ¢å¯†ç ï¼š**å¯¹æ˜æ–‡æ¶ˆæ¯ä¸­å‡ºç°çš„åŒä¸€ä¸ªå­—æ¯ï¼Œåœ¨åŠ å¯†æ—¶ä½¿ç”¨åŒä¸€ä¸ªå›ºå®šå­—æ¯æ¥ä»£æ¢ï¼Œä¸ç®¡å®ƒå‡ºç°åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚\n\n**ç¼ºç‚¹ï¼š**\n\n1ã€å¯†ç é‡å°ï¼Œä¸èƒ½æŠµæŠ—ç©·å°½æœç´¢æ”»å‡»\n\n2ã€æ˜æ–‡å›ºå®šä»£æ¢ï¼Œä¸èƒ½æŠµæŠ—é¢‘ç‡åˆ†æçš„æ”»å‡»\n\n**å¤šè¡¨ä»£æ¢å¯†ç ï¼š**æ˜æ–‡æ¶ˆæ¯ä¸­å‡ºç°çš„åŒä¸€ä¸ªå­—æ¯ï¼Œåœ¨åŠ å¯†æ—¶ä¸æ˜¯å®Œå…¨è¢«åŒä¸€ä¸ªå›ºå®šçš„å­—æ¯ä»£æ¢ï¼Œè€Œæ˜¯æ ¹æ®å…¶å‡ºç°çš„ä½ç½®æ¬¡åºï¼Œç”¨ä¸åŒçš„å­—æ¯ä»£æ¢ã€‚\n\n## 3.1 Vigenereï¼ˆç»´å‰å°¼äºšï¼‰å¯†ç \n\nä½¿ç”¨ä¸€ä¸ªè¯ç»„ä½œä¸ºå¯†é’¥ï¼Œç¬¬ä¸€ä¸ªå¯†é’¥å­—æ¯åŠ å¯†æ˜æ–‡çš„ç¬¬ä¸€ä¸ªå­—æ¯ï¼Œç¬¬äºŒä¸ªå¯†é’¥å­—æ¯åŠ å¯†æ˜æ–‡çš„ç¬¬äºŒä¸ªå­—æ¯ï¼Œç­‰æ‰€æœ‰å¯†é’¥å­—æ¯ä½¿ç”¨å®Œåï¼Œå¯†é’¥åˆå†å¾ªç¯ä½¿ç”¨ã€‚\n\n| **v** | **i** | **g** | **e** | **n** | **e** | **r** | **e** |\n| ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |\n| **k** | **e** | **y** | **k** | **e** | **y** | **k** | **e** |\n\n![image-20240501123650623](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501123650623.png)\n\n## 3.2 Playfairå¯†ç \n\nçŸ©é˜µæ„é€ æ–¹æ³•ï¼šä»å·¦è‡³å³ã€ä»ä¸Šè‡³ä¸‹ä¾æ¬¡å¡«å…¥å…³é”®è¯çš„å­—æ¯ï¼ˆè‹¥å…³é”®è¯ä¸­æœ‰é‡å¤å­—æ¯ï¼Œåˆ™ç¬¬äºŒæ¬¡å‡ºç°æ˜¯ç•¥è¿‡ï¼‰ã€‚\n\nå¦‚æœæ²¡å¡«æ»¡ï¼Œç„¶åå†ä»¥å­—æ¯è¡¨é¡ºåºä¾æ¬¡å¡«å…¥å…¶ä»–å­—æ¯ï¼Œ**å­—æ¯Iå’ŒJè¢«ç®—ä¸ºåŒä¸€ä¸ªå­—ç¬¦**ã€‚\n\nåŒæ—¶çº¦å®šå¦‚ä¸‹è§„åˆ™ï¼šè¡¨ä¸­ç¬¬ä¸€åˆ—çœ‹ä½œæ˜¯ç¬¬äº”åˆ—çš„å³è¾¹ä¸€åˆ—ï¼Œç¬¬ä¸€è¡Œçœ‹ä½œæ˜¯ç¬¬äº”è¡Œçš„ä¸‹ä¸€è¡Œã€‚\n\n**åŠ å¯†æ–¹æ³•å¦‚ä¸‹ï¼š**  \n\n1. è‹¥**åŒè¡Œ**ï¼Œåˆ™å¯¹åº”çš„å¯†æ–‡åˆ†åˆ«æ˜¯ç´§é å…¶å³ç«¯çš„å­—æ¯ï¼ˆè§£å¯†åå‘ï¼‰ã€‚\n2. è‹¥**åŒåˆ—**ï¼Œåˆ™å¯¹åº”çš„å¯†æ–‡åˆ†åˆ«æ˜¯ç´§é å…¶ä¸‹æ–¹çš„å­—æ¯ï¼ˆè§£å¯†åå‘ï¼‰ã€‚\n3. è‹¥**ä¸åŒè¡Œã€ä¸åŒåˆ—**ï¼Œåˆ™å¯¹åº”çš„å¯†æ–‡åˆ†åˆ«æ˜¯ç”±æ˜æ–‡å­—æ¯ç¡®å®šçš„å¯¹è§’çº¿çš„å…¶ä»–ä¸¤è§’çš„å­—æ¯ï¼Œä¸”æŒ‰å…¶åŒè¡Œå¯¹åº”ï¼ˆè§£å¯†æ–¹æ³•ç›¸åŒ)ã€‚\n4. è‹¥ä¸¤å­—æ¯ç›¸åŒï¼Œåˆ™åœ¨é‡å¤å­—æ¯ä¹‹é—´æ’å…¥ä¸€ä¸ªäº‹å…ˆçº¦å®šå¥½çš„å­—æ¯ï¼ˆå¦‚:Q)ã€‚å†æŒ‰ä¸Šè¿°æ–¹æ³•æ‰§è¡Œã€‚\n5. è‹¥æ˜æ–‡å­—æ¯æ•°ä¸ºå¥‡æ•°ï¼Œåˆ™åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªçº¦å®šå¥½çš„å­—æ¯(å¦‚:Q)ã€‚\n\n![image-20240501124323285](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501124323285.png)\n\n## 3.3 Hillå¯†ç \n\n![image-20240501124548901](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501124548901-1714538750999-1.png)\n\n### **é€†çŸ©é˜µæ±‚æ³•ï¼š**\n\n$$\nA*A^{-1}=E\\\\\n\\\\\nA=\n\\begin{bmatrix}A_{11} &A_{12}  &A_{13}\\\\\nA_{21} & A_{22} & A_{23}\\\\\nA_{31} & A_{32} & A_{33}\n\\end{bmatrix}\n\\\\\nA^{-1}=\n\\begin{bmatrix}a &b  &c\\\\\nd & e & f\\\\\ng & h & i\n\\end{bmatrix}\n$$\n\nå¾…å®šç³»æ•°æ³•å³å¯æ±‚å‡ºå¯¹åº”çš„é€†çŸ©é˜µ\n\n# å››ã€å¯¹ç§°å¯†ç ä½“åˆ¶\n\nå¦‚æœä¸€ä¸ªå¯†ç ç®—æ³•çš„åŠ å¯†å¯†é’¥å’Œè§£å¯†å¯†é’¥ç›¸åŒï¼Œæˆ–ç”±å…¶ä¸­ä¸€ä¸ªå¾ˆå®¹æ˜“æ¨å¯¼å‡ºå¦ä¸€ä¸ªï¼Œè¯¥ç®—æ³•å°±æ˜¯å¯¹ç§°å¯†ç ç®—æ³•ï¼Œæ»¡è¶³å…³ç³»ï¼š M=DK (C)=DK(EK(M)) \n\n å¯¹ç§°å¯†ç ä½“åˆ¶çš„å®‰å…¨æ€§ä¸»è¦å–å†³äºä¸¤ä¸ªå› ç´ ï¼š**åŠ å¯†ç®—æ³•**å’Œ**å¯†é’¥ç©ºé—´å¤§å°**\n\n**å¯¹ç§°å¯†ç çš„ä¼˜ç‚¹ï¼š**\n\n  ï¼ˆ1ï¼‰åŠ å¯†è§£å¯†å¤„ç†é€Ÿåº¦å¿«ï¼›\n\n  ï¼ˆ2ï¼‰ä¿å¯†åº¦é«˜ã€‚\n\n**å¯¹ç§°å¯†ç çš„ç¼ºç‚¹ï¼š**\n\n1. å‘ä¿¡æ–¹å¿…é¡»å®‰å…¨ã€å¦¥å–„åœ°æŠŠå¯†é’¥æŠ¤é€åˆ°æ”¶ä¿¡æ–¹ï¼Œä»£ä»·é«˜\n2. å¤šäººé€šä¿¡éœ€è¦çš„å¯†é’¥æ•°ä¼šå‡ºç°çˆ†ç‚¸æ€§è†¨èƒ€\n3. é€šä¿¡æ–¹å¿…é¡»ç»Ÿä¸€å¯†é’¥\n4. æ¥æ”¶æ–¹å¯ä»¥ä¼ªé€ ç­¾å\n\n**å¯¹ç§°å¯†ç åˆ†ç±»ï¼š**\n\n- åºåˆ—å¯†ç ç®—æ³•ï¼ˆæµå¯†ç ç®—æ³•ï¼‰ï¼šå¯¹æ˜æ–‡çš„å•ä¸ªä½æˆ–å­—èŠ‚è¿›è¡Œè¿ç®—\n- åˆ†ç»„å¯†ç ç®—æ³•ï¼šæ˜æ–‡ä¿¡æ¯åˆ’åˆ†ä¸ºå—ï¼Œå¯¹æ¯ä¸ªå—è¿›è¡ŒåŠ è§£å¯†\n\n**è‘—åçš„åŠ å¯†ç®—æ³•ï¼š**DESã€AESã€RCç³»åˆ—\n\n## 4.1 åºåˆ—å¯†ç \n\n![image-20240501141743080](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501141743080.png)\n\n![image-20240501141752390](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501141752390.png)\n\n**åˆ†ç±»ï¼š**\n\n- åŒæ­¥åºåˆ—å¯†ç \n  - åœ¨åŒæ ·çš„ä½ç½®ç”¨åŒæ ·çš„å¯†é’¥æ‰èƒ½ä¿è¯æ­£ç¡®åœ°è§£å¯†ï¼Œä¸€ä¸ªå¯†æ–‡ä½çš„æ”¹å˜åªå½±å“è¯¥ä½çš„æ¢å¤ï¼Œä¸ä¼šå¯¹åç»§ä½äº§ç”Ÿå½±å“ã€‚\n- è‡ªåŒæ­¥åºåˆ—å¯†ç \n  - è‡ªåŒæ­¥åºåˆ—å¯†ç çš„å¯†é’¥çš„äº§ç”Ÿä¸å¯†é’¥å’Œå·²äº§ç”Ÿçš„å›ºå®šæ•°é‡çš„å¯†æ–‡ä½æœ‰å…³ï¼Œä¸€ä¸ªé”™è¯¯ä¼šå½±å“åˆ°åé¢æœ‰é™ä½çš„æ­£ç¡®è§£å¯†\n\n**è‡ªåŒæ­¥æ¡ˆä¾‹ï¼š**\n\n![image-20240501142352650](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501142352650.png)\n\n## 4.2 åˆ†ç»„å¯†ç \n\nåˆ†ç»„å¯†ç æœ¬è´¨æ˜¯ç”±**å¯†é’¥æ§åˆ¶**çš„ä»æ˜æ–‡ç©ºé—´åˆ°å¯†æ–‡ç©ºé—´çš„ä¸€ä¸ª**ä¸€å¯¹ä¸€**æ˜ å°„ã€‚\n\nåŠ å¯†å˜æ¢çš„æ„é€ åº”éµå¾ªä¸‹åˆ—å‡ ä¸ªåŸåˆ™ï¼š\n\n1. åˆ†ç»„é•¿åº¦è¶³å¤Ÿå¤§ã€‚\n2. å¯†é’¥é‡ç©ºé—´è¶³å¤Ÿå¤§\n3. åŠ å¯†å˜æ¢è¶³å¤Ÿå¤æ‚\n4. åŠ å¯†å’Œè§£å¯†è¿ç®—ç®€å•ï¼Œæ˜“äºå®ç°\n5. åŠ å¯†å’Œè§£å¯†çš„é€»è¾‘ç»“æ„æœ€å¥½ä¸€è‡´\n\n## 4.3 DESç®—æ³•\n\nDESç®—æ³•å±äº**å¯¹ç§°åŠ å¯†ç®—æ³•**ä¸­çš„**åˆ†ç»„åŠ å¯†ç®—æ³•**\n\næ˜æ–‡é•¿åº¦ä¸º64bitï¼Œå¯†é’¥é•¿åº¦ä¸º56bitï¼Œæ ¡éªŒä½ä¸º8bitï¼ˆ8,16,24,32,40,48,56,64ï¼‰\n\n![image-20240501143556535](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501143556535.png)\n\n![image-20240501163825138](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501163825138.png)\n\n\n\n### 4.3.1 IPç½®æ¢å’ŒIP-1ç½®æ¢\n\nç»™å®šä¸€ä¸ªåˆå§‹æˆ–ç»“æœç½®æ¢è¡¨ï¼Œ\n\n![image-20240501150229520](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501150229520.png)\n\nç¬¬ä¸€ä¸ªæ•°ä¸º58æ„æ€å°±æ˜¯æŠŠæ˜æ–‡çš„ç¬¬58ä½æ”¾åœ¨æ­¤å¤„\n\n### 4.3.2 fè½®å‡½æ•°\n\n#### 4.3.2.1 æ‰©å±•ç½®æ¢ï¼ˆ32->48ï¼‰\n\n![image-20240501161304788](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501161304788.png)\n\n![image-20240501161323721](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501161323721.png)\n\n#### 4.3.2.2 ä¸Kå¼‚æˆ–\n\n64bit çš„keyå»æ‰8ä¸ªæ ¡éªŒä½å°±å˜æˆäº†56bit\n\nå†ç»è¿‡å¯†é’¥å˜åŒ–æˆä¸º48bitå­å¯†é’¥ï¼Œå…·ä½“çœ‹åé¢å­å¯†é’¥ç”Ÿæˆè¿‡ç¨‹\n\n#### 4.3.2.3 Sç›’å‹ç¼©ï¼ˆ48->32ï¼‰\n\nä½¿ç”¨8ä¸ªSç›’å‹ç¼©å¤„ç†å¾—åˆ°32ä½æ•°æ®ï¼Œæ¯ä¸ªSç›’æœ‰6ä¸ªè¾“å…¥ï¼Œ4ä¸ªè¾“å‡º\n\nå¤„ç†æ—¶é‡‡ç”¨8å¼  4è¡Œ16åˆ—çš„è¡¨è¿›è¡Œå‹ç¼©\n\n\n\n**æ•°æ®ï¼š**111111 101100 001011 101010 101111 000001 100000 111000\n\nç¬¬ä¸€ç»„å–å‡ºï¼Œå¤´å°¾æ•°æ®è¡¨ç¤ºè¡Œï¼Œä¸­é—´æ•°æ®è¡¨ç¤ºåˆ—\n\n![image-20240501162959468](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501162959468.png)\n\næŸ¥æ‰¾**å‹ç¼©è¡¨**å¯¹åº”ä½ç½®ï¼Œå¹¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶å½¢å¼å³ä¸ºæ‰€æ±‚æ•°æ®\n\nS1çš„3è¡Œ15åˆ—ä¸º13ï¼Œæ‰€ä»¥è¾“å‡ºå†…å®¹ä¸º1101\n\n![img](ä¿¡æ¯ç½‘ç»œå®‰å…¨/20200309184608860.png)\n\n\n\n**ä¾‹ï¼š**æŸç»„æ•°æ®ä¸º101100\n\n![img](ä¿¡æ¯ç½‘ç»œå®‰å…¨/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RyaWZ0ZXJfR2FsYXh5,size_16,color_FFFFFF,t_70.png)\n\n#### 4.3.2.4 Pç›’ç½®æ¢\n\nå’Œipç½®æ¢æˆ–ip-1ç½®æ¢ä¸€æ ·ï¼Œåªæ˜¯ç½®æ¢è¡¨ä¸åŒ\n\n![img](ä¿¡æ¯ç½‘ç»œå®‰å…¨/u=3299240445,2534654427&fm=253&fmt=auto&app=138&f=JPEG.jpeg)\n\n### 4.3.3 å­å¯†é’¥ç”Ÿæˆè¿‡ç¨‹\n\n![image-20240501170040880](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501170040880.png)\n\n64ä½çš„å¯†é’¥é€šè¿‡PC-1ç½®æ¢è¡¨é¡ºä¾¿å»é™¤æ ¡éªŒä½å¾—åˆ°56ä½çš„æ•°æ®\n\nç»è¿‡å¾ªç¯å·¦ç§»å†ç»è¿‡PC-2ç½®æ¢å¾—åˆ°48ä½çš„å•è½®å­å¯†é’¥\n\n### 4.3.4 DESçš„ç¼ºç‚¹\n\nï¼ˆ1ï¼‰å¯†é’¥å¤ªçŸ­\n\nï¼ˆ2ï¼‰DESçš„åŠå…¬å¼€æ€§\n\nï¼ˆ3ï¼‰DESè¿­ä»£æ¬¡æ•°åå°‘ï¼Œåªæœ‰16è½®\n\n## 4.4 AESç®—æ³•\n\nAESç®—æ³•å±äº**å¯¹ç§°åŠ å¯†ç®—æ³•**çš„**åˆ†ç»„åŠ å¯†ç®—æ³•**\n\næ˜æ–‡é•¿åº¦å›ºå®šä¸º128ä½ï¼Œå¯†é’¥é•¿åº¦å¯ä»¥æ˜¯128ï¼ˆ10è½®ï¼‰ã€192ï¼ˆ12è½®ï¼‰ã€256ä½ï¼ˆ14è½®ï¼‰\n\n![img](ä¿¡æ¯ç½‘ç»œå®‰å…¨/d9952c306b71491da8a6ba8da52e39d1.png)\n\nä»¥ä¸‹å†…å®¹å‡ä¸ºä»¥128ä½ï¼ˆ16å­—èŠ‚ï¼‰å¯†é’¥ä¸ºä¾‹ï¼ˆæ˜æ–‡128ä½ï¼Œå¯†é’¥128ä½ï¼‰\n\næ˜æ–‡æŒ‰å­—èŠ‚åˆ’åˆ†ä¸º16ä¸ªå—\n\n![image-20240501225201302](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501225201302.png)\n\n\n\n### 4.4.1 æ±‚å­å¯†é’¥ï¼šå¯†é’¥æ‰©å±•\n\n$$\nè‹¥iæ˜¯4çš„å€æ•°\\\\\nW_i=W_{i-4}âŠ•T(W_{i-1})\\\\\nè‹¥iä¸æ˜¯4çš„å€æ•°\\\\\nW_i=W_{i-4}âŠ•W_{i-1}\n$$\n\n**Tå‡½æ•°ï¼š**\n\n- å°†åˆ—ä¸Šå…ƒç´ <u>ä¸Šç§»1ä½</u>\n- å­—èŠ‚ä»£æ¢ï¼ˆæŸ¥Sè¡¨ï¼‰\n- è½®å¸¸é‡å¼‚æˆ–ï¼ˆæŸ¥è½®å¸¸é‡è¡¨Rconï¼‰\n\n![image-20240501231148350](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501231148350.png)\n\n![image-20240501231514158](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501231514158.png)\n$$\næ±‚28âŠ•a0\\\\\n00101000âŠ•10100000=10001000=0x88\n$$\n**Sè¡¨å¦‚ä¸‹ï¼š**![img](ä¿¡æ¯ç½‘ç»œå®‰å…¨/d386e45b52a84313a349c5e8a9ebcf48.png)\n\n\n\n### 4.4.2 åˆå§‹å˜æ¢\n\næ˜æ–‡çŸ©é˜µå’Œ**åˆå§‹å¯†é’¥**è¿›è¡Œ**å¼‚æˆ–æ“ä½œ**\n\n![image-20240501232058403](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501232058403.png)\n\n### 4.4.3 9è½®å¾ªç¯\n\n#### 4.4.3.1 å­—èŠ‚ä»£æ¢\n\næŸ¥Sè¡¨ï¼Œæ›¿æ¢å¯¹åº”çš„æ˜æ–‡\n\n![image-20240501232252019](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501232252019.png)\n\n#### 4.4.3.2 è¡Œä½ç§»\n\nçº¿æ€§è¿ç®—ï¼Œä»¥ç¬¬0è¡Œå¼€å§‹ï¼Œç¬¬iè¡Œå·¦ç§»iä¸ªå­—èŠ‚ã€‚å¯ä»¥ä½¿åŸæ¥åŒä¸€åˆ—çš„4ä¸ªå…ƒç´ åˆ†æ•£åˆ°ä¸åŒåˆ—\n\n![image-20240501232403611](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501232403611.png)\n\n#### 4.4.3.3 åˆ—æ··åˆ\n\nå°†ä¸Šä¸€æ­¥çš„ç»“æœå·¦ä¹˜ä¸€ä¸ªå›ºå®šçš„4*4çŸ©é˜µ\n\n**åœ¨åˆ—æ··åˆä¸­çš„ä¹˜æ³•å’Œæ™®é€šçš„ä¹˜æ³•ä¸ç›¸åŒï¼Œ**\n\nä¸»è¦çœ‹a7ä¸º0è¿˜æ˜¯ä¸º1,\n\n![image-20240501234117197](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501234117197.png)\n\n![img](ä¿¡æ¯ç½‘ç»œå®‰å…¨/0f0a71f057cd4fae873a625f72a03847.png)\n\n\n\n![image-20240501232535297](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501232535297.png)\n\n#### 4.4.3.4 è½®å¯†é’¥åŠ \n\n![image-20240501233057107](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501233057107.png)\n\n#### 4.4.3.5 å¾ªç¯\n\n![image-20240501233611792](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501233611792.png)\n\n**æ³¨æ„**ï¼šç¬¬åè½®æ²¡æœ‰ç¬¬ä¸‰æ­¥ï¼ˆåˆ—æ··åˆï¼‰\n\n## 4.5 AESå’ŒDESçš„ç›¸ä¼¼ä¸ä¸åŒ\n\n### 4.5.1 ç›¸ä¼¼\n\n![image-20240501235213078](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501235213078.png)\n\n### 4.5.2 ä¸åŒ\n\n![image-20240501235220080](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240501235220080.png)\n\n# äº”ã€å…¬é’¥å¯†ç ä½“åˆ¶ï¼ˆéå¯¹ç§°ï¼‰\n\n- RSAç®—æ³•\n- ElGamalç®—æ³•\n- ECCç®—æ³•\n- IBEç®—æ³•\n\n**åŸºæœ¬åŸç†ï¼š**å•å‘é™·é—¨å‡½æ•°\n\n## 5.0 å…¬é’¥åŠ å¯†ä½“åˆ¶æ¨¡å‹\n\n![image-20240502155233871](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240502155233871.png)\n\n- å‘é€æ–¹AæŸ¥æ‰¾æ¥æ”¶æ–¹Bçš„å…¬é’¥ï¼›\n- Aé‡‡ç”¨å…¬é’¥åŠ å¯†ç®—æ³•ç”¨Bçš„å…¬é’¥å¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†ï¼›\n- Aé€šè¿‡ä¸å®‰å…¨ä¿¡é“å°†å¯†æ–‡å‘é€ç»™Bï¼›\n- Bæ”¶åˆ°å¯†æ–‡åä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹å¯†æ–‡è§£å¯†è¿˜åŸå‡ºæ˜æ–‡\n\n## 5.1 RSAç®—æ³•\n\n RSAçš„ç†è®ºåŸºç¡€æ˜¯**æ¬§æ‹‰å®šç†**ï¼Œå…¶å®‰å…¨æ€§ä¾èµ–äº**å¤§æ•´æ•°çš„è´¨æ•°å› å­åˆ†è§£çš„å›°éš¾æ€§**\n\n### 5.1.1 åŠ å¯†è¿‡ç¨‹\n\n| æ­¥éª¤ |             è¯´æ˜             |       æè¿°       |\n| :--: | :--------------------------: | :--------------: |\n|  1   | é€‰æ‹©ä¸€å¯¹ä¸ç›¸ç­‰ä¸”è¶³å¤Ÿå¤§çš„è´¨æ•° |       p,q        |\n|  2   |        è®¡ç®—p,qçš„ä¹˜ç§¯         |      n=p*q       |\n|  3   |       è®¡ç®—nçš„æ¬§æ‹‰å‡½æ•°        | Ï†(n)=(p-1)*(q-1) |\n|  4   |   é€‰ä¸€ä¸ªä¸Ï†(n)äº’è´¨çš„æ•´æ•°e    |     1<e<Ï†(n)     |\n|  5   |  è®¡ç®—å‡ºeå¯¹äºÏ†(n)çš„æ¨¡åå…ƒç´ d  | de mod Ï†(n) = 1  |\n|  6   |             å…¬é’¥             |     KU=(e,n)     |\n|  7   |             ç§é’¥             |     KR=(d,n)     |\n\næ˜æ–‡ Mï¼Œå¯†æ–‡ C\n$$\nM^e\\%n =C\\\\\nC^d\\%n=M\n$$\n\n### 5.1.2 è®¡ç®—nçš„æ¬§æ‹‰å‡½æ•°\n\n**æ¬§æ‹‰å‡½æ•°**æ˜¯å°äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„æ•°ç›®\n\n**äº’è´¨**æ˜¯æŒ‡å…¬çº¦æ•°åªæœ‰1çš„ä¸¤ä¸ªæ•°\n\n**è´¨æ•°**çš„æ¬§æ‹‰å‡½æ•°å€¼ä¸ºn-1\n\nÏ†(6)=2\n\n**1**,2,3,4,**5**\n\n### 5.1.3 è®¡ç®—æ¨¡åå…ƒç´ d\n\nå¦‚æœä¸¤ä¸ªæ­£æ•´æ•°eå’ŒÏ†(n)äº’è´¨ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæ•´æ•°dï¼Œä½¿å¾—ed-1è¢«Ï†(n)æ•´æ•°\n\næˆ–è€…è¯´edé™¤ä»¥Ï†(n)æ‰€å¾—ä½™æ•°ä¸º1\n$$\ned-1=kÏ†(n)\\\\\ned\\%Ï†(n)=1\n$$\nå› æ­¤då°±å«åšeçš„æ¨¡åå…ƒç´ \n\n\n\n**æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼š**\n$$\nå·²çŸ¥p=5,q=11,e=7ï¼Œæ±‚d\\\\\nn=p*q=55\\\\Ï†(n)=(p-1)(q-1)=4*10=40\\\\\ned\\%Ï†(n)=1å³ed-kÏ†(n)=1\\\\\n7d-40k=1\n$$\né‡‡ç”¨è¾—è½¬ç›¸é™¤æ³•ï¼Œä»¥å°çš„æ•°å¯¹å¤§çš„æ•°å–æ¨¡ï¼Œå¾—åˆ°çš„ç»“æœæ›¿æ¢å¤§çš„æ•°\n$$\n40\\%7=5æ‰€ä»¥åŸå¼æ›¿æ¢ä¸º7d-5k=1\\\\\n7\\%5=2æ‰€ä»¥ä¸Šå¼æ›¿æ¢ä¸º2d-5k=1\\\\\n5\\%2=1æ‰€ä»¥ä¸Šå¼æ›¿æ¢ä¸º2d-1k=1\n$$\nå½“å‡ºç°æŸä¸ªæ•°å­—å˜ä¸º1çš„æ—¶å€™å³å¯ç»“æŸè¾—è½¬ï¼Œ\n\n**å½“eä¸º1æ—¶ï¼Œè®¾k=0ï¼›å½“Ï†(n)=1æ—¶ï¼Œè®¾d=1**\n$$\nè®¾d=1ï¼Œç”±2d-1k=1å¾—åˆ°k=1\\\\\nç”±2d-5k=1å¾—åˆ°d=3\\\\\nç”±7d-5k=1å¾—åˆ°k=4\\\\\nç”±7d-40k=1å¾—åˆ°d=23\n$$\n\nå¿«é€Ÿå–æ¨¡è¿ç®—ï¼šhttps://zhuanlan.zhihu.com/p/521322795\n\n### 5.1.4 RSAå°ç»“\n\n![image-20240502215526552](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240502215526552.png)\n\n# å…­ã€æ•°å­—ç­¾å\n\n## **6.1 æ•°å­—ç­¾åçš„å®šä¹‰**\n\n![image-20240502224239887](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240502224239887.png)\n\n![image-20240502230200309](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240502230200309.png)\n\n**æ•£åˆ—å‡½æ•°(åˆç§°å“ˆå¸Œå‡½æ•°)**æ˜¯å°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ¶ˆæ¯Mæ˜ å°„æˆä¸€ä¸ªå›ºå®šé•¿åº¦æ•£åˆ—å€¼hçš„ç‰¹æ®Šå‡½æ•°ï¼Œä½¿ç”¨Hashå‡½æ•°**ç¼©å°ç­¾åå¯†æ–‡çš„é•¿åº¦**ï¼Œå¤§å¤§æé«˜äº†ç­¾åçš„é€Ÿåº¦\n\n## 6.2 RSAæ•°å­—ç­¾å\n\n### 6.2.1 ç­¾å\n\n- åˆ©ç”¨ä¸€ä¸ªå®‰å…¨çš„hashå‡½æ•°häº§ç”Ÿæ¶ˆæ¯æ‘˜è¦h(m)\n- è®¡ç®—ç­¾å\n\n$$\ns=signk(m)=h(m)^d \\% n\n$$\n\n\n\n### 6.2.2 éªŒè¯\n\n- æ¥æ”¶è€…ä½¿ç”¨ç›¸åŒçš„hashå‡½æ•°hè®¡ç®—æ¶ˆæ¯æ‘˜è¦h(m)\n\n- æ¥æ”¶è€…éªŒè¯ä»¥ä¸‹å…¬å¼æ˜¯å¦æˆç«‹ã€‚è‹¥æˆç«‹ï¼Œåˆ™ç­¾åæœ‰æ•ˆï¼Œå¦åˆ™ç­¾åæ— æ•ˆ\n  $$\n  h(m) \\% n=s^e \\% n\n  $$\n  \n\n## 6.3 ç»ƒä¹ \n\nä¸ºäº†ç”ŸæˆRSAç®—æ³•çš„å¯†é’¥ï¼Œé€‰å–ä¸¤äº’å¼‚å¤§ç´ æ•°p=11å’Œq=13ï¼Œå‡å®še=17ï¼Œæ±‚å…¶å…¬é’¥ï¼ˆe,nï¼‰å’Œç§é’¥dï¼Œå¹¶åˆ©ç”¨æ­¤ç§é’¥å¯¹æ¶ˆæ¯mè¿›è¡Œç­¾åï¼Œå…¶ä¸­h(m)=16ï¼Œæ±‚å…¶ç­¾åsï¼Ÿ\n\n**ç­”æ¡ˆï¼š**d=113ï¼Œs=16^113%143=48\n\n# ä¸ƒã€ä¿¡æ¯éšè—\n\n## 7.1 å®šä¹‰\n\nä¿¡æ¯éšè—æ˜¯å°†ç§˜å¯†ä¿¡æ¯éšè—åœ¨å¦ä¸€éæœºå¯†çš„è½½ä½“ä¿¡æ¯ä¸­ï¼Œé€šè¿‡å…¬å…±ä¿¡é“è¿›è¡Œä¼ é€’ã€‚æ”»å‡»è€…æ— ä»åˆ¤æ–­æ˜¯å¦æœ‰ç§˜å¯†ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•æå–æˆ–å»é™¤ç§˜å¯†ä¿¡æ¯ã€‚\n\n## 7.2 ä¸»è¦åº”ç”¨\n\n1. æ•°æ®ä¿å¯†\n2. æ•°æ®å®Œæ•´æ€§ï¼ˆç”¨äºè®¤è¯å’Œç¯¡æ”¹æ£€æµ‹ï¼‰\n3. å›¾åƒè‡ªæ¢å¤\n4. ç‰ˆæƒä¿æŠ¤\n5. ç¥¨æ®é˜²ä¼ª\n\n## 7.3 ç‰¹ç‚¹\n\n- **é²æ£’æ€§**\n  - ä¼ªè£…å¯¹è±¡å¯¹éšè—ä¿¡æ¯çš„â€œå…¼å®¹æ€§â€\n- **ä¸å¯æ£€æµ‹æ€§**\n  - å¥½çš„ç»Ÿè®¡ç‰¹æ€§ï¼Œæ— æ³•åˆ¤æ–­æ˜¯å¦æœ‰éšè—ä¿¡æ¯\n- **é€æ˜æ€§**\n  - ç›®æ ‡æ•°æ®æ²¡æœ‰æ˜æ˜¾å˜åŒ–\n- **å®‰å…¨æ€§**\n  - éšè—ç®—æ³•æœ‰è¾ƒå¼ºçš„æŠ—æ”»å‡»èƒ½åŠ›\n- **è‡ªæ¢å¤æ€§**\n  - å°‘é‡çš„æ•°æ®ä¿¡æ¯ï¼Œæ¢å¤å‡ºéšè—ä¿¡æ¯\n\n## 7.4 æ•°å­—æ°´å°\n\n### 7.4.1 æ¦‚å¿µ\n\nå°†ä¸€äº›æ ‡è¯†ä¿¡æ¯ï¼ˆå³æ•°å­—æ°´å°ï¼Œå¦‚æœºæ„Logoã€äº§å“åºåˆ—å·ç­‰ï¼‰ç›´æ¥åµŒå…¥æ•°å­—è½½ä½“å½“ä¸­ï¼Œä¸”ä¸å½±å“åŸè½½ä½“çš„ä½¿ç”¨ä»·å€¼ï¼Œä¹Ÿä¸å®¹æ˜“è¢«å†æ¬¡ä¿®æ”¹ã€‚\n\n### 7.4.2 æ•°å­—æ°´å°çš„ä½œç”¨\n\n1. **ç‰ˆæƒä¿æŠ¤**ï¼šè¡¨æ˜å¯¹æ•°å­—äº§å“çš„æ‰€æœ‰æƒ \n2. **æ•°å­—æŒ‡çº¹**ï¼šç”¨äºé˜²æ­¢æ•°å­—äº§å“è¢«éæ³•å¤åˆ¶å’Œæ•£å‘\n3. **è®¤è¯å’Œå®Œæ•´æ€§æ ¡éªŒ**ï¼šéªŒè¯æ•°å­—å†…å®¹æœªè¢«ä¿®æ”¹æˆ–å‡å†’ \n4. **å†…å®¹æ ‡è¯†å’Œéšè—æ ‡è¯†**ï¼šå¤šåª’ä½“å†…å®¹æ£€ç´¢\n5. **ä½¿ç”¨æ§åˆ¶**ï¼šæ§åˆ¶å¤åˆ¶æ¬¡æ•° \n6. **å†…å®¹ä¿æŠ¤**ï¼šä¿æŠ¤å†…å®¹ä¸è¢«æ»¥ç”¨\n\n# å…«ã€åº”ç”¨å±‚å®‰å…¨æŠ€æœ¯\n\n**SQLæ³¨å…¥**ï¼šç”¨æˆ·å¯ä»¥æäº¤ä¸€æ®µæ•°æ®åº“æŸ¥è¯¢ä»£ç ï¼Œæ ¹æ®ç¨‹åºè¿”å›çš„ç»“æœï¼Œè·å¾—æŸäº›ä»–æƒ³å¾—çŸ¥çš„æ•°æ®\n\n**IIS**å³Internetä¿¡æ¯æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªç”¨äºé…ç½®åº”ç”¨ç¨‹åºæ± æˆ–ç½‘ç«™ã€FTP ç«™ç‚¹ã€SMTPæˆ–NNTPç«™ç‚¹çš„å·¥å…·ï¼ŒåŠŸèƒ½ååˆ†å¼ºå¤§ã€‚\n\n## 8.2 ç”µå­é‚®ä»¶ç³»ç»Ÿ\n\n![image-20240503161137755](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240503161137755.png)\n\næ ¹æ®é‚®ä»¶ç½‘å…³çš„**ç”¨é€”**å¯åˆ’åˆ†ä¸º**æ™®é€šé‚®ä»¶ç½‘å…³**ã€**é‚®ä»¶è¿‡æ»¤ç½‘å…³**ã€**ååƒåœ¾é‚®ä»¶ç½‘å…³**\n\n### 8.2.1 SMTPåè®®(Simple Mail Transfer Protocol)\n\nç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼Œå±äºTCP/IPåè®®æ—çš„åº”ç”¨å±‚åè®®ï¼ŒSMTPæœåŠ¡å™¨åˆ™æ˜¯éµå¾ªSMTPåè®®çš„å‘é€é‚®ä»¶æœåŠ¡å™¨ï¼Œç”¨æ¥å‘é€æˆ–ä¸­è½¬ç”µå­é‚®ä»¶ã€‚\n\n### 8.2.2 POPåè®®(Post Office Protocol)\n\né‚®å±€åè®®,æ˜¯ä¸€ç§å…è®¸ç”¨æˆ·ä»é‚®ä»¶æœåŠ¡å™¨æ”¶å‘é‚®ä»¶çš„åè®®\n\nPOP3å…è®¸ç”¨æˆ·ä»æœåŠ¡å™¨ä¸ŠæŠŠé‚®ä»¶å­˜å‚¨åˆ°æœ¬åœ°ä¸»æœºï¼ŒåŒæ—¶åˆ é™¤ä¿å­˜åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šçš„é‚®ä»¶ã€‚æ˜¯ç”µå­é‚®ä»¶çš„**ç¬¬ä¸€ä¸ªç¦»çº¿åè®®æ ‡å‡†**\n\nPOP3æœåŠ¡å™¨åˆ™æ˜¯éµå¾ªPOP3åè®®çš„æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨ï¼Œç”¨æ¥æ¥æ”¶ç”µå­é‚®ä»¶çš„ã€‚\n\n### 8.2.3 ååƒåœ¾é‚®ä»¶æŠ€æœ¯\n\n- **è¿‡æ»¤æŠ€æœ¯**\n  - å…³é”®è¯è¿‡æ»¤\n  - é»‘ç™½åå•\n  - åŸºäºè§„åˆ™è¿‡æ»¤\n  - æ™ºèƒ½å’Œæ¦‚ç‡ç³»ç»Ÿ\n  - HASHæŠ€æœ¯\n- **éªŒè¯æŸ¥è¯¢**\n- **æŒ‘æˆ˜**\n- **å¯†ç æœ¯**\n\n### 8.2.4 PCGæŠ€æœ¯\n\nPGPæ˜¯ä¸€ä¸ªåŸºäº**å…¬é’¥åŠ å¯†ç®—æ³•**çš„åº”ç”¨ç¨‹åºï¼Œè¯¥ç¨‹åºæŠŠRSAå…¬é’¥ä½“ç³»çš„æ–¹ä¾¿å’Œä¼ ç»ŸåŠ å¯†ä½“ç³»çš„é«˜é€Ÿåº¦ç»“åˆèµ·æ¥ï¼Œå¹¶åœ¨æ•°å­—ç­¾åå’Œå¯†é’¥è®¤è¯ç®¡ç†æœºåˆ¶ä¸Šæœ‰å·§å¦™çš„è®¾è®¡ã€‚\n\n**PGPç‰¹ç‚¹ï¼š**\n\n- ï¼ˆ1ï¼‰åŠ å¯†é€Ÿåº¦å¿«\n- ï¼ˆ2ï¼‰å¯ç§»æ¤æ€§å‡ºè‰²\n- ï¼ˆ3ï¼‰æºä»£ç æ˜¯å…è´¹çš„\n\n\n\n# ä¹ã€ç½‘ç»œæ”»å‡»æŠ€æœ¯\n\nç½‘ç»œæ”»å‡»çš„ç›®æ ‡ä¸»è¦æœ‰ä¸¤ç±»ï¼š**ç³»ç»Ÿ**å’Œ**æ•°æ®**ï¼Œå…¶æ‰€å¯¹åº”çš„å®‰å…¨æ€§ä¹Ÿæ¶‰åŠç³»ç»Ÿå®‰å…¨å’Œæ•°æ®å®‰å…¨ä¸¤ä¸ªæ–¹é¢ã€‚\n\nç½‘ç»œæ”»å‡»åˆ†ä¸º**ä¸»åŠ¨æ”»å‡»**å’Œ**è¢«åŠ¨æ”»å‡»**\n\n## 9.1 æ¼æ´æ‰«ææŠ€æœ¯\n\n**è®¡ç®—æœºæ¼æ´**æ˜¯æŒ‡è®¡ç®—æœºç³»ç»Ÿå…·æœ‰çš„æŸç§å¯èƒ½è¢«å…¥ä¾µè€…æ¶æ„åˆ©ç”¨çš„å±æ€§ã€‚ \n\n **æ¼æ´æ‰«ææŠ€æœ¯**æ˜¯æŒ‡åœ¨æ”»å‡»è€…æ¸—é€å…¥ä¾µåˆ°ç”¨æˆ·çš„ç³»ç»Ÿå‰ï¼Œé‡‡ç”¨æ‰‹å·¥æˆ–ä½¿ç”¨ç‰¹å®šçš„è½¯ä»¶å·¥å…·ï¼Œå¯¹ç³»ç»Ÿè„†å¼±ç‚¹è¿›è¡Œè¯„ä¼°ï¼Œå¯»æ‰¾å¯èƒ½å¯¹ç³»ç»Ÿé€ æˆæŸå®³çš„å®‰å…¨æ¼æ´ï¼Œå¹¶ä¸”å¯¹ç›®æ ‡ç³»ç»Ÿè¿›è¡Œæ¼æ´æ£€æµ‹å’Œåˆ†æ\n\n**åˆ†ç±»ï¼š**\n\n- ä¸»æœºæ¼æ´æ‰«æï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œå¢å¼ºä¸»æœºç³»ç»Ÿå®‰å…¨æ€§\n- ç½‘ç»œæ‰«æï¼šæ¨¡æ‹Ÿé»‘å®¢æ”»å‡»ï¼Œå¯»æ‰¾å®‰å…¨æ¼æ´\n\n## 9.2 ARPåè®®-åœ°å€è§£æåè®®\n\nMACåœ°å€å’ŒIPåœ°å€é—´ä½¿ç”¨ARP å’ŒRARPåè®®è¿›è¡Œç›¸äº’è½¬æ¢ã€‚\n\nåè®®ç¼ºé™·ï¼šARPå’ŒRARPå‡æœªå¯¹æ”¶å‘åŒæ–¹åšä»»ä½•è®¤è¯ï¼Œå¯ä»¥è¿›è¡Œä¼ªé€ èº«ä»½\n\n## 9.3 Dosæ”»å‡»\n\nDenial of Service-æ‹’ç»æœåŠ¡ï¼Œ**ä¸»è¦æ”»å‡»æ–¹å¼æ˜¯ä¼ é€å¤§é‡è¦æ±‚ç¡®è®¤çš„ä¿¡æ¯åˆ°æœåŠ¡å™¨ï¼Œä½¿æœåŠ¡å™¨é‡Œå……æ–¥ç€è¿™ç§æ— ç”¨çš„ä¿¡æ¯**å‘¨è€Œå¤å§‹ï¼Œæœ€ç»ˆå¯¼è‡´æœåŠ¡å™¨ç˜«ç—ª\n\n**å¸¸ç”¨DoSæ”»å‡»æ–¹æ³•**ï¼š\n\n- TCP SYN Floodæ”»å‡»\n  - å‘é€å¤§é‡TCPè¯·æ±‚ï¼Œä»è€Œä½¿æœåŠ¡å™¨èµ„æºè€—å°½\n- IPæ¬ºéª—æ”»å‡»\n  - ä¼ªé€ å¤§é‡IPåœ°å€ï¼Œæƒ³æœåŠ¡å™¨å‘é€RSTæ•°æ®ï¼Œä½¿æœåŠ¡å™¨ä¸å¯¹åˆæ³•ç”¨æˆ·æä¾›æœåŠ¡\n- å¸¦å®½æ”»å‡»\n  - å‘é€è¯·æ±‚æ¥æ¶ˆè€—æœåŠ¡å™¨ç¼“å†²åŒº\n\n## 9.4 DDoSåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡\n\n**æ”»å‡»æ˜¯åˆ©ç”¨å¾ˆå¤šå°è®¡ç®—æœºä¸€èµ·å‘åŠ¨æ”»å‡»**\n\n![image-20240503164343207](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240503164343207.png)\n\n**é˜²å¾¡æ‰‹æ®µï¼š**\n\nï¼ˆ1ï¼‰ISP+ä¸¢åŒ…\n\nï¼ˆ2ï¼‰ç§»åŠ¨IPæŠ€æœ¯æˆ–å€ŸåŠ©æ£€æµ‹å·¥å…·\n\n# åã€è®¡ç®—æœºç—…æ¯’\n\nå®šä¹‰ï¼š**è®¡ç®—æœºç—…æ¯’æ˜¯ä¸€ä¸ªç¨‹åºï¼Œä¸€æ®µå¯æ‰§è¡Œç ã€‚**\n\nç‰¹å¾ï¼šéæˆæƒå¯æ‰§è¡Œæ€§ã€ä¼ æŸ“æ€§ã€éšè”½æ€§ã€æ½œä¼æ€§\n\n**å¸¸è§ç—…æ¯’ï¼š**\n\n- æ„ŸæŸ“å‹ç—…æ¯’ ï¼šå±å®³æœ€å¤§\n- è •è™«ç—…æ¯’ï¼šä¼ æ’­è½½ä½“å¤šï¼Œä¼ æ’­èƒ½åŠ›å¼º\n- åé—¨ç¨‹åºï¼šè¿œç¨‹æ“æ§\n- æœ¨é©¬ç—…æ¯’ï¼šéšè—ã€çªƒå–\n- ç—…æ¯’å·¥å…·ï¼šç½‘ç»œåª’ä»‹\n- ç—…æ¯’ç”Ÿæˆå™¨ï¼šæ‹¼ç§¯æœ¨å½¢å¼\n- æç¬‘ç¨‹åºï¼šæ„šå¼„\n\n## 10.1 VBSç—…æ¯’\n\nè¿™ç§ç—…æ¯’ä¸æ–­çš„åˆ©ç”¨è‡ªèº«çš„å¤åˆ¶åŠŸèƒ½ï¼ŒæŠŠè‡ªèº«å¤åˆ¶åˆ°è®¡ç®—æœºå†…çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹å†…\n\n**åŸç†ï¼š**é¦–å…ˆå°†è®¡ç®—æœºç—…æ¯’è‡ªèº«ä»£ç èµ‹ç»™å­—ç¬¦ä¸²å˜é‡VBscopyã€‚å°†è¿™ä¸ªå­—ç¬¦ä¸²è¦†ç›–åˆ°ç›®æ ‡æ–‡ä»¶å¹¶åˆ›å»ºä¸€ä¸ªä»¥ç›®æ ‡æ–‡ä»¶åä¸ºæ–‡ä»¶åå‰ç¼€ï¼Œä»¥vbsä¸ºæ‰©å±•åçš„æ–‡ä»¶å‰¯æœ¬ï¼Œæœ€ååˆ é™¤ç›®æ ‡æ–‡ä»¶ã€‚\n\n## 10.2 è •è™«ç—…æ¯’\n\nè •è™«ç—…æ¯’ä¸€èˆ¬æ˜¯ç”±ä¸»ç¨‹åºå’Œå¼•å¯¼ç¨‹åºä¸¤éƒ¨åˆ†æ„æˆã€‚ä¸»ç¨‹åºæˆåŠŸå…¥ä¾µè®¡ç®—æœºåï¼Œè¯»å–ç½‘ç»œçŠ¶æ€ä¿¡æ¯ï¼Œé€šè¿‡ç³»ç»Ÿç¼ºé™·åœ¨è”æœºçš„è®¡ç®—æœºä¸Šæ¤å…¥å¼•å¯¼ç¨‹åºï¼Œæ„ŸæŸ“æ¯å°è®¡ç®—æœºã€‚\n\n### 10.3 æœ¨é©¬\n\nWindowsæœ¬èº«è‡ªå¸¦çš„ **Netstat**å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¼€æ”¾ç«¯å£ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æœ¨é©¬æˆ–å…¶ä»–é»‘å®¢ç¨‹åº\n\n# åä¸€ã€é˜²ç«å¢™\n\n**é˜²ç«å¢™çš„ä½œç”¨:**\n\n1. é˜²é»‘å®¢å…¥ä¾µ\n2. é˜²ç—…æ¯’å†…ç½‘ä¼ æ’­\n3. è®¿é—®æ§åˆ¶\n4. â€œéš”ç¦»â€å±éšœ \n\n**æ¦‚å¿µï¼š**ä¸€ç§å°†å†…éƒ¨ç½‘å’Œå…¬ä¼—è®¿é—®ç½‘ï¼ˆå¦‚Internetï¼‰åˆ†å¼€çš„æ–¹æ³•ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§éš”ç¦»æŠ€æœ¯\n\n**åŸºæœ¬åŸç†ï¼š**åœ¨ä¸¤ä¸ªç½‘ç»œè¿›è¡Œé€šä¿¡æ—¶æ‰§è¡Œè®¿é—®æ§åˆ¶\n\n**é˜²ç«å¢™çš„åŠŸèƒ½ï¼š**\n\n1. ç½‘ç»œå®‰å…¨å±éšœ\n2. å¼ºåŒ–ç½‘ç»œå®‰å…¨ç­–ç•¥\n3. å¯¹ç½‘ç»œå­˜å–å’Œè®¿é—®è¿›è¡Œç›‘æ§å®¡è®¡\n4. é˜²æ­¢å†…éƒ¨ä¿¡æ¯å¤–æ³„\n5. ä¿æŠ¤å†…ç½‘å®‰å…¨\n\n\n\n# åäºŒã€å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ\n\nå…¥ä¾µæ£€æµ‹ç³»ç»Ÿ(Intrusion Detection System,IDS)æ˜¯æ¢æµ‹è®¡ç®—æœºç½‘ç»œæ”»å‡»è¡Œä¸ºçš„è½¯ä»¶æˆ–ç¡¬ä»¶ã€‚ä½œä¸ºé˜²ç«å¢™çš„åˆç†è¡¥å……ï¼Œå®ƒå¯ä»¥å¸®åŠ©ç½‘ç»œç®¡ç†å‘˜æ¢æŸ¥è¿›å…¥ç½‘ç»œçš„å…¥ä¾µè¡Œä¸ºï¼Œä»è€Œæ‰©å±•ç³»ç»Ÿç®¡ç†å‘˜çš„å®‰å…¨ç®¡ç†èƒ½åŠ›ã€‚\n\n## 12.1**IDSä¸»è¦åŠŸèƒ½ï¼š**\n\n1. ç›‘æµ‹å¹¶åˆ†æç”¨æˆ·å’Œç³»ç»Ÿçš„æ´»åŠ¨\n2. æ ¸æŸ¥ç³»ç»Ÿé…ç½®å’Œæ¼æ´\n3. è¯„ä¼°ç³»ç»Ÿå…³é”®èµ„æºå’Œæ•°æ®æ–‡ä»¶çš„å®Œæ•´æ€§\n4. è¯†åˆ«å·²çŸ¥çš„æ”»å‡»è¡Œä¸º\n5. ç»Ÿè®¡åˆ†æå¼‚å¸¸è¡Œä¸º\n6. æ“ä½œç³»ç»Ÿæ—¥å¿—ç®¡ç†ï¼Œå¹¶è¯†åˆ«è¿åå®‰å…¨ç­–ç•¥çš„ç”¨æˆ·æ´»åŠ¨\n\n\n\n## 12.2 IDSé€šç”¨æ¨¡å‹CIDF\n\n![image-20240503170424594](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240503170424594.png)\n\n**å…¥ä¾µæ£€æµ‹ä¿¡æ¯æ¥æºï¼š**\n\n1. ç³»ç»Ÿå’Œç½‘ç»œæ—¥å¿—æ–‡ä»¶ï¼šåˆ©ç”¨ç³»ç»Ÿå’Œç½‘ç»œæ—¥å¿—æ–‡ä»¶ä¿¡æ¯æ˜¯å…¥ä¾µæ£€æµ‹çš„**å¿…è¦æ¡ä»¶**\n2. ç›®å½•å’Œæ–‡ä»¶ä¸­ä¸æœŸæœ›çš„æ”¹å˜\n3. ç¨‹åºæ‰§è¡Œä¸­çš„ä¸æœŸæœ›è¡Œä¸º\n4. ç‰©ç†å½¢å¼çš„å…¥ä¾µä¿¡æ¯\n\n**IDSä¿¡å·åˆ†ææ‰‹æ®µï¼š**\n\n- **æ¨¡å¼åŒ¹é…ï¼š**å°†æ”¶é›†åˆ°çš„ä¿¡æ¯å’Œå·²çŸ¥çš„ç½‘ç»œå…¥ä¾µå’Œç³»ç»Ÿè¯¯ç”¨æ¨¡å¼æ•°æ®åº“è¿›è¡Œæ¯”å¯¹ã€‚\n\nâ€‹\tï¼ˆ1ï¼‰ä¼˜ç‚¹ï¼šå‡†ç¡®ã€æ•ˆç‡é«˜\n\nâ€‹\tï¼ˆ2ï¼‰ç¼ºç‚¹ï¼šéœ€è¦ä¸æ–­æ›´æ–°ï¼Œæ— æ³•æ£€æµ‹æœªå‡ºç°è¿‡çš„æ”»å‡»\n\n- **ç»Ÿè®¡åˆ†æï¼š**é¦–å…ˆç»™ç³»ç»Ÿå¯¹è±¡åˆ›å»ºä¸€ä¸ªç»Ÿè®¡æè¿°ï¼Œç»Ÿè®¡æ­£å¸¸ä½¿ç”¨æ—¶çš„ä¸€äº›æµ‹é‡å±æ€§ã€‚ä»»ä½•è§‚æµ‹å€¼åœ¨æ­£å¸¸èŒƒå›´ä¹‹å¤–çš„ï¼Œå°±è®¤ä¸ºæœ‰å…¥ä¾µè¡Œä¸ºå‘ç”Ÿã€‚\n\nâ€‹\tï¼ˆ1ï¼‰ä¼˜ç‚¹ï¼šå¯æ£€æµ‹åˆ°æœªçŸ¥å’Œæ›´ä¸ºå¤æ‚çš„å…¥ä¾µ\n\nâ€‹\tï¼ˆ2ï¼‰ç¼ºç‚¹ï¼šè¯¯æŠ¥ã€æ¼æŠ¥ç‡é«˜\n\n- **å®Œæ•´æ€§åˆ†æï¼š**ä¸»è¦å…³æ³¨æŸä¸ªæ–‡ä»¶æˆ–å¯¹è±¡æ˜¯å¦è¢«æ›´æ”¹\n\nâ€‹\tï¼ˆ1ï¼‰ä¼˜ç‚¹ï¼šèƒ½å‘ç°æ”»å‡»å¯¼è‡´æ–‡ä»¶æˆ–å¯¹è±¡å‘ç”Ÿçš„ä»»ä½•æ”¹å˜\n\nâ€‹\tï¼ˆ2ï¼‰ç¼ºç‚¹ï¼šæ— æ³•å®æ—¶å“åº”ï¼Œåªèƒ½äº‹ååˆ†æ\n\n## 12.3 IDSåˆ†ç±»\n\n- åŸºäºç½‘ç»œçš„IDS\n  - æ¦‚å¿µï¼šå¯¹æ•°æ®åŒ…è¿›è¡Œåˆ†æä»¥æ¢æµ‹é’ˆå¯¹ç½‘ç»œçš„æ”»å‡»ã€‚\n  - ä¼˜ç‚¹ï¼šå…¨ç½‘ç›‘æ§ï¼Œæ»¡è¶³å„ç§æ€§èƒ½è¦æ±‚\n  - ç¼ºç‚¹ï¼šå¸¦å®½è¦æ±‚ï¼Œæ— æ³•å¤„ç†åŠ å¯†æ•°æ®\n\n- åŸºäºä¸»æœºçš„IDS\n  - æ¦‚å¿µï¼šé€šè¿‡åœ¨ä¸»æœºæˆ–æ“ä½œç³»ç»Ÿä¸Šæ£€æŸ¥æœ‰å…³ä¿¡æ¯ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼Œå®¡è®¡æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯ï¼‰æ¥æ¢æµ‹å…¥ä¾µè¡Œä¸º\n\n\n## 12.4 **å…¥ä¾µæ£€æµ‹æŠ€æœ¯åˆ†ç±»ï¼š**\n\n- ç‰¹å¾æ£€æµ‹\n- å¼‚å¸¸æ£€æµ‹\n\n## 12.5 IDSé¢ä¸´çš„æŒ‘æˆ˜\n\n1. æé«˜IDSçš„æ£€æµ‹é€Ÿåº¦ï¼Œä»¥é€‚åº”ç½‘ç»œé€šä¿¡çš„è¦æ±‚\n2. å‡å°‘IDSçš„æ¼æŠ¥å’Œè¯¯æŠ¥ï¼Œæé«˜å…¶å®‰å…¨æ€§å’Œå‡†ç¡®åº¦\n3. æé«˜IDSçš„äº’åŠ¨æ€§èƒ½ï¼Œä»è€Œæé«˜æ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§èƒ½ã€‚\n\n\n\n# åä¸‰ã€ç½‘ç»œå®‰å…¨åè®®\n\n**æ¦‚å¿µï¼š**å®‰å…¨åè®®æ˜¯å»ºç«‹åœ¨å¯†ç ä½“åˆ¶åŸºç¡€ä¸Šçš„ä¸€ç§äº¤äº’é€šä¿¡åè®®ï¼Œå®ƒè¿ç”¨å¯†ç ç®—æ³•å’Œåè®®é€»è¾‘æ¥å®ç°è®¤è¯å’Œå¯†é’¥åˆ†é…\n\n## 13.1 TCP/IP å„å±‚å¸¸è§åè®®\n\n![image-20240512221851079](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240512221851079.png)\n\n## 13.2 OSIå¸¸è§åè®®\n\n![image-20240512221909053](ä¿¡æ¯ç½‘ç»œå®‰å…¨/image-20240512221909053.png)\n\n\n\n# åå››ã€VPNæŠ€æœ¯\n\nVirtual Private Network,è™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼Œé‡‡ç”¨åŠ å¯†ã€è®¤è¯å’Œéš§é“æŠ€æœ¯ï¼Œåˆ©ç”¨å…¬å…±ç½‘ç»œè®¾æ–½æ¥å‘é€ä¸“ç”¨ç½‘ç»œä¿¡æ¯ã€‚\n\n## 14.1 å¸¸ç”¨çš„è¿œç¨‹è¿æ¥æ–¹æ³•\n\n- åˆ©ç”¨æ‹¨å·æŠ€æœ¯æ¥å®ç°è¿œç¨‹è¿æ¥ï¼ˆæ•°å­—/æ¨¡æ‹Ÿï¼‰\n- åˆ©ç”¨VPNå®ç°è¿œç¨‹è¿æ¥\n\nâ€‹\tï¼ˆ1ï¼‰ç¡¬ä»¶ï¼šè·¯ç”±å™¨VPN\n\nâ€‹\tï¼ˆ2ï¼‰è½¯ä»¶ï¼šå¸¸ç”¨ä¸ªäººè¿œç¨‹ååŠ©è½¯ä»¶ï¼ˆèŠ±ç”Ÿå£³ï¼Œå‘æ—¥è‘µï¼ŒTeamviewerï¼‰\n\n- æ— çº¿è¿œç¨‹è¿æ¥\n\n## 14.2 VPNçš„åŸºæœ¬è¦æ±‚ï¼š\n\n- ç”¨æˆ·éªŒè¯\n- åœ°å€ç®¡ç†\n- æ•°æ®åŠ å¯†\n- å¯†é’¥ç®¡ç†\n- å¤šåè®®æ”¯æŒ\n\n## 14.3 éš§é“æŠ€æœ¯å’ŒåŸºæœ¬è¦æ±‚\n\n### 14.3.1 æ¦‚å¿µ\n\néš§é“æŠ€æœ¯æ˜¯ä¸€ç§é€šè¿‡ä½¿ç”¨äº’è”ç½‘ç»œçš„åŸºç¡€è®¾æ–½åœ¨ç½‘ç»œä¹‹é—´ä¼ é€’æ•°æ®çš„æŠ€æœ¯ã€‚\n\n### 14.3.2 åŸºæœ¬è¦æ±‚\n\n1. ç”¨æˆ·éªŒè¯\n2. ä»¤ç‰Œå¡ï¼ˆTokencardï¼‰æ”¯æŒ\n3. åŠ¨æ€åœ°å€åˆ†é…\n4. æ•°æ®å‹ç¼©\n5. æ•°æ®åŠ å¯†\n6. å¯†é’¥ç®¡ç†\n7. å¤šåè®®æ”¯æŒ\n\n## 14.4 VPNçš„ä¼˜ç‚¹\n\n- èŠ‚çœæˆæœ¬\n- å®ç°ç½‘ç»œå®‰å…¨\n- ç®€åŒ–ç½‘ç»œç»“æ„\n- è¿æ¥çš„éšæ„æ€§\n- æŒæ¡è‡ªä¸»æƒ\n\n# åäº”ã€æ— çº¿ç½‘ç»œ\n\n**æ¦‚å¿µï¼š**ä»¥æ— çº¿ä¿¡é“ä½œä¼ è¾“åª’ä»‹çš„è®¡ç®—æœºå±€åŸŸç½‘ï¼Œæ˜¯æœ‰çº¿è”ç½‘æ–¹å¼çš„é‡è¦è¡¥å……å’Œå»¶ä¼¸\n\n## 15.1 æ— çº¿ç½‘ç»œçš„å®‰å…¨é˜²èŒƒæªæ–½\n\n- é‡‡ç”¨å¼ºåŠ›çš„å¯†ç ã€‚\n- ä¸¥ç¦å¹¿æ’­æœåŠ¡é›†åˆæ ‡è¯†ç¬¦(SSID)ã€‚\n- é‡‡ç”¨æœ‰æ•ˆçš„æ— çº¿åŠ å¯†æ–¹å¼ã€‚\n- é‡‡ç”¨ä¸åŒç±»å‹çš„åŠ å¯†ã€‚\n- å¯¹ä»‹è´¨è®¿é—®æ§åˆ¶(MAC)åœ°å€è¿›è¡Œæ§åˆ¶ã€‚\n- å…³é—­æ— çº¿ç½‘ç»œæ¥å£ã€‚\n- å¯¹ç½‘ç»œå…¥ä¾µè€…è¿›è¡Œç›‘æ§ã€‚\n- ç¡®ä¿æ ¸å¿ƒçš„å®‰å…¨ã€‚\n"},{"title":"åµŒå…¥å¼ç³»ç»Ÿç§»æ¤","url":"/2024/04/10/åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/","content":"\nä½¿ç”¨FS4412å¼€å‘æ¿\n\n# ç½‘ç»œé…ç½®\n\n**é…ç½®æ¿å­IP**\n\nç¼–è¾‘/etc/init.d/rcSæ–‡ä»¶ï¼Œæ·»åŠ \n\n```shell\nifconfig eth0 192.168.2.111\nifconfig eth0 up\n```\n\né‡å¯æ¿å­å³å¯ã€‚\n\n**é…ç½®è™šæ‹ŸæœºIP**\n\nç‚¹å‡»è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨\n\n![image-20240410150711037](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240410150711037.png)\n\n![image-20240410150741702](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240410150741702.png)\n\nè™šæ‹Ÿæœºæœ‰çº¿ç½‘ç»œè®¾ç½®\n\n![image-20240410151030759](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240410151030759.png)\n\n![image-20240410151047806](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240410151047806.png)\n\næ³¨æ„ï¼šè™šæ‹Ÿæœºç½‘ç»œé€‚é…å™¨éœ€è¦æ›´æ”¹ä¸º**æ¡¥æ¥æ¨¡å¼**\n\n![image-20240410151130855](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240410151130855.png)\n\n\n\n## ç¼–è¯‘è½¯ä»¶\n\nç¼–è¯‘è½¯ä»¶é‡‡ç”¨`arm-linux-gcc`\n\n```shell\narm-linux-gcc a.c\n```\n\n\n\n# æ–‡ä»¶ä¼ è¾“\n\né‡‡ç”¨`tftp`å·¥å…·è¿›è¡Œä¼ è¾“\n\n1. å®‰è£…tftpæœåŠ¡å™¨ï¼š   æ³¨æ„ï¼šè™šæ‹Ÿæœºéœ€è¦è¿å¤–ç½‘\n\t\n\t```bash\n\tsudo    apt-get    update\n\tsudo    apt-get    install     tftpd-hpa     tftp-hpa   \n\t```\n\t\n2. é…ç½®tftpæœåŠ¡å™¨ï¼š   \n\t\n\t```bash\n   sudo    vim    /etc/default/tftpd-hpa\n   ç‚¹iè¿›å…¥ç¼–è¾‘æ¨¡å¼\n        TFTP_USERNAME=\"tftp\"\t\t\t\t\n        TFTP_DIRECTORY=\"/home/hqyj/tftpboot\"\t    //å…±äº«æ–‡ä»¶çš„è·¯å¾„ï¼›\n        TFTP_ADDRESS=\"0.0.0.0:69\"\t\t\t\n\t     TFTP_OPTIONS=\"-l   -c    -s\"\n\t ç‚¹Escé€€å‡ºç¼–è¾‘æ¨¡å¼\n\t\n\tå®¶ç›®å½•ä¸‹é¢åˆ›å»ºç›®å½•tftpboot:    \n\t\tsudo  mkdir   /home/hqyj/tftpboot\n\tä¿®æ”¹å…±äº«æ–‡ä»¶çš„æƒé™:   \n\t\tsudo   chmod   0777     /home/hqyj/tftpboot\n\t```\n\t\n3. å¯åŠ¨tftpæœåŠ¡å™¨: Ubuntuå¼€æœºååªéœ€è¦å¯åŠ¨ä¸€æ¬¡      \n\t\n\t```bash\n\tsudo service tftpd-hpa restart\n\t```\n\t\n4. å°†éœ€è¦ä¼ è¾“çš„æ–‡ä»¶å­˜å‚¨åœ¨å…±äº«ç›®å½•ä¸­(/home/hqyj/tftpboot):   \n\t\n\t```bash\n\tcp  <filename> /home/hqyj/tftpboot\n\t```\n\nè¦ä»è¿œç¨‹ä¸»æœº`192.168.1.2`ä¸Šä¸‹è½½ `test.txt`ï¼Œåˆ™åº”è¾“å…¥ä»¥ä¸‹å‘½ä»¤\n\n```bash\ntftp -g -r test.txt 192.168.1.2\n```\n\nå°†ç£ç›˜ä¸­çš„æ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹ä¸»æœºçš„å‘½ä»¤\n\n```bash\ntftp -p -l file.txt 192.168.1.2\n```\n\n# Linuxæ–‡ä»¶æ“ä½œ\n\nç›¸å…³é©±åŠ¨æ–‡ä»¶å­˜æ”¾åœ¨/devä¸­\n\n```cpp\nint fd = open();\nioctl(fd, _IO('L',0));\n```\n\nioctlçš„è¯·æ±‚ï¼š\n\n- _IO('L',0)\tå¼€ç¯\n- _IO('L',2)    å…³ç¯\n\n# è£¸æœºæ“ä½œ\n\n![image-20240414091204368](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414091204368.png)\n\nå¯ä»¥å‘ç°LED3è¿æ¥åˆ°GPX1_0ï¼ŒæŸ¥è¯¢ç”¨æˆ·æ‰‹å†Œ\n\n![image-20240414091553406](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414091553406.png)\n\n- CONï¼šé…ç½®å¯„å­˜å™¨\n- DATï¼šæ•°æ®å¯„å­˜å™¨\n- PUDï¼š\n- DRVï¼š\n\n![image-20240414092432928](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414092432928.png)\n\n![image-20240414092049105](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414092049105.png)\n\n![image-20240414091844457](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414091844457.png)\n\nå¯ä»¥çœ‹åˆ°GPX1_0å¯¹åº”é…ç½®ä¸ºGPX1CON[0]ï¼Œé…ç½®[3:0]ä½ç½®å³å¯è®¾ç½®çŠ¶æ€\n\nGPX1DAT[7:0]æ—¢å¯ä»¥é…ç½®è¾“å…¥è¾“å‡ºç”µå¹³ï¼Œ\n\n\n\næ‰“å¼€æ¿å­å¼€å…³ï¼Œé©¬ä¸ŠæŒ‰**å›è½¦**ï¼Œè¿›å…¥å¯åŠ¨åŠ è½½ç•Œé¢ï¼ˆU-bootï¼‰ï¼Œç±»ä¼¼äºç»ˆç«¯\n\n![image-20240414094159863](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414094159863.png)\n\né€šè¿‡`pri`å‘½ä»¤å¯ä»¥æ‰“å°åŸºæœ¬é…ç½®ä¿¡æ¯\n\n![image-20240414094347917](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414094347917.png)\n\né€šè¿‡`set`å‘½ä»¤ä¿®æ”¹é…ç½®ä¿¡æ¯ï¼Œ`save`ä¿å­˜\n\n![image-20240414094547766](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414094547766.png)\n\n`ping`æµ‹è¯•è¿é€šæ€§\n\n![image-20240414094717566](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414094717566.png)\n\n**æ³¨æ„ï¼š**Ubuntu pingä¸åŒå¼€å‘æ¿ï¼Œè£¸æœºåªèƒ½ç”±å¼€å‘æ¿ä¸»åŠ¨å‘èµ·ping\n\né€šè¿‡`tftp`ä¸‹è½½æ–‡ä»¶ï¼Œ\n\n```\ntftp å†…å­˜åœ°å€ æ–‡ä»¶å\ntftp 43e00000 a.out\ngo 43e00000\n```\n\næ­¤æ—¶ä¸ºè£¸æœºï¼Œéœ€è¦ç”¨äºŒè¿›åˆ¶æ–‡ä»¶æ‰èƒ½è¯†åˆ«\n\nè¿™ä¸ªä¸ä¸ºäºŒè¿›åˆ¶æ•°æ®æ–‡ä»¶\n\n![image-20240414101123569](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414101123569.png)\n\n![image-20240414103310580](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240414103310580.png)\n\né«˜çº§è¯­è¨€ï¼šï¼ˆé¢„å¤„ç†->ç¼–è¯‘->æ±‡ç¼–->é“¾æ¥ï¼‰\n\n- é¢„å¤„ç†ï¼šå±•å¼€å¤´æ–‡ä»¶\n- ç¼–è¯‘ï¼šæŠŠé«˜çº§è¯­è¨€è½¬å˜ä¸ºæ±‡ç¼–è¯­è¨€\n- æ±‡ç¼–ï¼šè½¬å˜ä¸ºäºŒè¿›åˆ¶\n- é“¾æ¥ï¼šå°†å¤šä¸ªäºŒè¿›åˆ¶æ®µç»“åˆåœ¨ä¸€èµ·\n\n```cpp\n#define GPX1CON (volatile unsigned int *)0x11000c20\n#define GPX1DAT (volatile unsigned int *)0x11000c24\n\nint main()\n{\n\t*GPX1CON = 0x1;\n\t*GPX1DAT = 0x1;\n\twhile(1);\n\treturn 0;\n}\n```\n\nè½¬å˜ä¸ºæ±‡ç¼–è¯­è¨€\n\n# æ“ä½œç³»ç»Ÿå¯åŠ¨\n\n**é‡äº§**ï¼šç ”å‘å®Œæˆåï¼Œç›´æ¥ä»¥ä¸€ä¸ªæ•´ä½“æ”¾åˆ°å†…å­˜ä¸­ï¼Œç›´æ¥å¯åŠ¨ -> äº§å“\n\nç ”å‘è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå°†ç³»ç»Ÿåˆ†ä¸º4éƒ¨åˆ†ï¼š\n\nå¯åŠ¨åŠ è½½å™¨(bootloader) + ç³»ç»Ÿå†…æ ¸(kernel) + è®¾å¤‡æ ‘(device tree) + æ ¹æ–‡ä»¶ç³»ç»Ÿ(rootfs-root file system)\n\n![image-20240417150853819](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240417150853819.png)\n\n![image-20240417151100936](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240417151100936.png)\n\n![image-20240418150357886](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240418150357886.png)\n\n```\nç›¸å…³å‘½ä»¤ï¼š\nprintenv(pri):\nsaveenv(save): \nsetenv(set): set å˜é‡å (å˜é‡å€¼)  //å˜é‡å€¼ä¸ºç©ºçš„è¯å°±åˆ é™¤å˜é‡\nboot \nbootm \tå†…æ ¸\tæ ¹æ–‡ä»¶ç³»ç»Ÿ\tè®¾å¤‡æ ‘\ntftp\n```\n\n\n\n##  åˆ†æ®µå¯åŠ¨æ“ä½œç³»ç»Ÿ\n\n```\nå°† u-sd.binçƒ§å†™è¿›å…¥SDå¡\nå¯åŠ¨u-boot\ntftpä¸‹è½½å†…æ ¸é•œåƒï¼Œå‰æä¸ºç½‘ç»œå¯ä»¥pingé€š\n```\n\n![image-20240417152243317](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240417152243317.png)\n\n```\ntftp 41000000 start/uImage\ntftp 42000000 start/exynos4412-fs4412.dtb\ntftp 43000000 start/ramdisk.img\n\nbootm 41000000 43000000 42000000\n\t\tå†…æ ¸\t æ ¹æ–‡ä»¶ç³»ç»Ÿ  è®¾å¤‡æ ‘\n```\n\nè¾“å…¥å®Œæˆåå³å¯è¿›å…¥æ­¤ç•Œé¢\n\n![image-20240417153246046](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240417153246046.png)\n\né…ç½®ç½‘ç»œé‡‡ç”¨`ifconfig eth0 ipåœ°å€`\n\n## è‡ªå¯åŠ¨æ“ä½œç³»ç»Ÿ\n\n```\nset bootcmd \"tftp 41000000 start/uImage;tftp 42000000 start/exynos4412-fs4412.dtb;tftp 43000000 start/ramdisk.img;bootm 41000000 43000000 42000000\"\nset bootdelay 1\nsave\n\nboot\n```\n\n## NFSæŒ‚è½½å¯åŠ¨\n\né€šè¿‡ç½‘ç»œæŒ‚è½½ä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹\n\nramdisk.imgæ˜¯å°è£…å¥½çš„ï¼Œrootfs.tar.gzæ˜¯æ²¡å°è£…çš„\n\n**Ubuntuä¸‹æ“ä½œ:**\n\n\t1.nfså®‰è£…,è¦æœ‰å¤–ç½‘\n\t\t\t sudo   apt-get   update\n\t\t\t sudo   apt-get   install    nfs-kernel-server\n\t2.å‡†å¤‡å¥½ä¸€ä¸ªå³å°†è¢«å…±äº«å‡ºå»çš„æ–‡ä»¶å¤¹\n\t\t sudo   mkdir     nfs\n\t\t sudo    chmod   0777    nfs\n\t\n\t3.å°† æ–‡ä»¶ç³»ç»Ÿ æ”¾å…¥ nfs æ–‡ä»¶å¤¹, è§£å‹æ–‡ä»¶ç³»ç»Ÿ   è§£å‹  rootfs.tar.xz\n\t\t tar  -xvf  rootfs.tar.xz\n\t\n\t4.è§£å‹åè¿›å…¥åˆ°rootfsç›®å½•ï¼Œä½¿ç”¨pwdç¡®å®šæ‰€å¯¹åº”çš„ç»å¯¹è·¯å¾„\n\t\t cd    rootfs\n\t\t pwd   -->  /home/hqyj/nfs/rootfs å°±æ˜¯ç”¨æ¥æŒ‚è½½çš„å…±äº«è·¯å¾„ï¼›\n\t\t\n\t5.åœ¨nfsæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­è¯´æ˜ /home/hqyj/nfs/rootfs éœ€è¦å…±äº«å‡ºå»\n\t\tsudo   vi    /etc/exports\n\t\tå°¾éƒ¨åŠ å…¥, æ·»åŠ æ–°çš„ä¸€è¡Œ:\n\t\t\t/home/hqyj/nfs/rootfs *(rw,sync,no_root_squash,no_subtree_check)\n\t\tè§£é‡Š:\n\t\t\t*ï¼šå…è®¸æ‰€æœ‰çš„ç½‘æ®µè®¿é—®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…·ä½“çš„IP\n\t\t\trwï¼šæŒ‚æ¥æ­¤ç›®å½•çš„å®¢æˆ·ç«¯å¯¹è¯¥å…±äº«ç›®å½•å…·æœ‰è¯»å†™æƒé™\n\t\t\tsyncï¼šèµ„æ–™åŒæ­¥å†™å…¥å†…å­˜å’Œç¡¬ç›˜\n\t\t\tno_root_squashï¼šrootç”¨æˆ·å…·æœ‰å¯¹æ ¹ç›®å½•çš„å®Œå…¨ç®¡ç†è®¿é—®æƒé™\n\t\t\tno_subtree_checkï¼šä¸æ£€æŸ¥çˆ¶ç›®å½•çš„æƒé™\n\t\n\t6.é‡å¯nfså…±äº«\n\t\t sudo service nfs-kernel-server restart\n\t\n\t7.æ£€æŸ¥æ˜¯å¦å¼€æˆåŠŸ\n\t\t showmount -e\n\t\t\tExport list for ubuntu:\n\t\t\t /home/hqyj/nfs/rootfs  * \t\t//å…±äº«æˆåŠŸçš„è·¯å¾„\nå¼€å‘æ¿ä¸Šæ“ä½œ(ä¸è¿›æ“ä½œç³»ç»Ÿ):\t\n\n\t8.ä¿®æ”¹u-bootå¯åŠ¨å‚æ•°\n\t\tset   bootargs    \"root=/dev/nfs nfsroot=192.168.2.222:/home/hqyj/nfs/rootfs,v3 rw console=ttySAC2,115200 clk_ignore_unused init=/linuxrc ip=192.168.2.111\"\n\t\t\tæ³¨æ„æ›´æ”¹:\n\t\t\t\tnfsroot=192.168.2.222:/home/hqyj/nfs/rootfs   //Ubuntuçš„ipåœ°å€,  è¦æŒ‚è½½çš„æ–‡ä»¶è·¯å¾„\n\t\t\tè§£é‡Š:\n\t\t\t\troot=/dev/nfs //æ–‡ä»¶ç³»ç»Ÿåœ¨ç½‘ä¸Š\n\t\t\t\tnfsroot=192.168.2.222:/home/hqyj/nfs/rootfs,v3 //é‚£å°ç”µè„‘çš„å“ªä¸ªæ–‡ä»¶å¤¹,è€Œä¸”ç”¨v3ç‰ˆæœ¬çš„åè®®\n\t\t\t\trw //å¯è¯»å¯å†™\n\t\t\t\tconsole=ttySAC2,115200 //é€šè¿‡ä¸²å£2è¾“å‡ºä¿¡æ¯,æ³¢ç‰¹ç‡115200\n\t\t\t\tclk_ignore_unused //å¿½ç•¥æœªä½¿ç”¨çš„æ—¶é’Ÿï¼Œå¦‚æœä¸åŠ å¾ˆæœ‰å¯èƒ½å¡ä½\n\t\t\t\tinit=/linuxrc //å½“æŒ‚è½½æˆåŠŸåï¼Œè‡ªåŠ¨æ‰§è¡Œinitè¿›ç¨‹(æ–‡ä»¶å¤¹ä¸‹çš„linuxrcæ–‡ä»¶)\n\t\t\t\tip=192.168.2.111 //å†…æ ¸èµ·æ¥ä¹‹åç”¨è¿™ä¸ªIP(å¼€å‘æ¿IP)\n\t\t\t\t\n\t9.ä¿®æ”¹u-bootå¯åŠ¨å‘½ä»¤\n\tset  bootcmd  \"tftp  41000000  start/uImage;   tftp 43000000  start/exynos4412-fs4412.dtb;  bootm  41000000  -  43000000\"\n\tsave\n\n## EMMCå¯åŠ¨\n\nè¦ç¡®ä¿æœ‰ä¸€ä¸ªu-emmc.bin\n\n```\nå…ˆSDå¡å¯åŠ¨ï¼Œå°†u-emmc.bin ä¸‹è½½åˆ°è¿å­˜\ntftp 41000000 u-emmc.bin\n\nå°†ä¸‹è½½æˆåŠŸçš„u-emmc.binæ”¾åˆ°emmcä¸­\nå‘½ä»¤ï¼šmovi write u-boot 41000000\nè§£é‡Šï¼šå°†41000000è¿å­˜åœ°å€æ•°æ®å†™å…¥åˆ°emmcçš„u-bootåŒº\n```\n\n![image-20240418152230925](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240418152230925.png)\n\n![image-20240418152306126](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240418152306126.png)\n\nè¿›å…¥åæ“ä½œä¸å‰æ®µç›¸åŒ\n\n## Bootloader\n\nCPUæ¶æ„ï¼š\n\n```\nX86(intel):é«˜æ€§èƒ½\nC51(intel):ä½åŠŸè€—ï¼Œå•ç‰‡æœº-å•åº”ç”¨ï¼ˆ51å•ç‰‡æœºï¼‰\nARM(ARM):ä½åŠŸè€—åŒæ—¶é«˜æ€§èƒ½ï¼Œç§»åŠ¨ç«¯å¸‚åœº\n\tCortex-Aï¼šé«˜æ€§èƒ½\n\tCortex-Rï¼šå®æ—¶realtime\n\tCortex-Mï¼šä½åŠŸè€—ï¼ˆSTM32ï¼‰\n\npowerPCï¼šåŠŸè€—éå¸¸é«˜ï¼Œæ€§èƒ½å¥½ï¼Œç”¨äºå¤§å‹åå°æœåŠ¡å™¨\n```\n\n**ä»€ä¹ˆæ˜¯Bootloaderï¼Ÿ**\n\n- ç¡¬ä»¶å¯åŠ¨çš„å¼•å¯¼ç¨‹åºï¼Œæ˜¯è¿è¡Œæ“ä½œç³»ç»Ÿçš„å‰æã€‚\n- åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸æˆ–ç”¨æˆ·åº”ç”¨è¿è¡Œä¹‹å‰çš„ä¸€æ®µä»£ç ã€‚\n- å¯¹äºç¡¬ä»¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸ºæ“ä½œç³»ç»Ÿå‡†å¤‡å¥½ç¯å¢ƒã€‚\n- åœ¨åµŒå…¥å¼ç³»ç»Ÿé‡ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å¯åŠ¨åŠ è½½ä»»åŠ¡é€šå¸¸ç”±bootloaderæ¥å®Œæˆã€‚\n\n**Bootloader**çš„ç‰¹ç‚¹ï¼š\n\n- ä¸å±äºæ“ä½œç³»ç»Ÿï¼Œç”±æ±‡ç¼–è¯­è¨€æˆ–Cè¯­è¨€å¼€å‘\n- é’ˆå¯¹ç‰¹å®šçš„ç¡¬ä»¶å¹³å°ç¼–å†™\n- åœ¨ç§»æ¤ç³»ç»Ÿæ—¶ï¼Œé¦–å…ˆè¦ä¸ºå¼€å‘æ¿ç§»æ¤bootloader\n- bootloaderä¸ä¾èµ–äºCPUçš„ä½“ç³»ç»“æ„ï¼Œä¾èµ–äºåµŒå…¥å¼ç³»ç»Ÿç­è®¾å¤‡çš„é…ç½®\n\n**bootloaderçš„åŸºæœ¬åŠŸèƒ½ï¼š**\n\n- åˆå§‹åŒ–ç›¸å…³ç¡¬ä»¶ï¼ŒæŠŠbootloaderè‡ªæ¬è¿åˆ°å†…å­˜ä¸­\n- æ‰§è¡Œç”¨æˆ·çš„å‘½ä»¤ï¼šè®¿é—®ç¯å¢ƒå˜é‡ï¼Œé€šè¿‡ä¸²å£/ç½‘ç»œé€šä¿¡ï¼Œè¯»å†™RAM/FLASH\n- åŠ è½½å¹¶æ‰§è¡Œå†…æ ¸\n\n**bootloaderå¯åŠ¨ï¼š**\n\n1. ç¬¬ä¸€é˜¶æ®µï¼šBL1\n   1. åˆå§‹åŒ–åŸºæœ¬çš„ç¡¬ä»¶\n   2. æŠŠbootloaderæ¬è¿åˆ°å†…å­˜\n   3. è®¾ç½®å †æ ˆæŒ‡é’ˆå¹¶å°†bssæ®µæ¸…ç†ï¼Œä¸ºåç»­æ‰§è¡ŒCä»£ç åšå‡†å¤‡\n   4. è·³è½¬åˆ°ç¬¬äºŒé˜¶æ®µä»£ç \n2. ç¬¬äºŒé˜¶æ®µï¼šBL2\n   1. åˆå§‹åŒ–æœ¬é˜¶æ®µéœ€è¦ç”¨åˆ°åº•çš„ç¡¬ä»¶\n   2. è¯»å–ç¯å¢ƒå˜é‡\n   3. å¦‚æœæ˜¯è‡ªå¯åŠ¨æ¨¡å¼ï¼Œä»flashæˆ–é€šè¿‡ç½‘ç»œåŠ è½½å†…æ ¸å¹¶æ‰§è¡Œ\n   4. å¦‚æœæ˜¯ä¸‹è½½æ¨¡å¼ï¼Œæ¥æ”¶ç”¨æˆ·çš„å‘½ä»¤åæ‰§è¡Œ\n\n# u-bootç³»ç»Ÿç§»æ¤\n\n## 1.æŠ„æ¿ \n\nä»¿ç…§åˆ«äººçš„æ¿å­ä¿®æ”¹ä¸€äº›ä¿¡æ¯, æ”¹æˆè‡ªå·±çš„ \n\n```\nvi boards.cfg å¤åˆ¶284è¡Œ, yyå¤åˆ¶, pç²˜è´´, å°†å¤åˆ¶çš„285è¡Œä¸­çš„ä¸¤ä¸ªorigenä¿®æ”¹ä¸ºfs4412 \n\ncp include/configs/origen.h include/configs/fs4412.h \n\ncp -r board/samsung/origen/ board/samsung/fs4412 \n\nmv board/samsung/fs4412/origen.c board/samsung/fs4412/fs4412.c \n\nvi Makefile ä¿®æ”¹185è¡Œ: CROSS_COMPILE ?= arm-none-linux-gnueabi\n\nvi board/samsung/fs4412/Makefile ä¿®æ”¹31è¡Œ: COBJS += fs4412.o \n\nmake fs4412 \n//æ•² fs4 ç”¨tabé”®è¡¥å…¨ makeå®Œæˆå, çœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ä¿¡æ¯, æ²¡æœ‰çš„è¯å°±èƒ½ç”Ÿæˆ u-boot.bin æ–‡ä»¶\n```\n\n![image-20240418163234598](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240418163234598.png)\n\nå…·ä½“è¿‡ç¨‹ï¼š\n\n [u-bootç§»æ¤.pdf](u-bootç§»æ¤.pdf) \n\n[ä»£ç ä¿®æ”¹](1.ä»£ç ä¿®æ”¹.txt)\n\n [tool_SD_img.zip](tool_SD_img.zip)\n\n[tool_EMMC_bin.zip](tool_EMMC_bin.zip) \n\n [movi ä¿®æ”¹æ–‡ä»¶.zip](movi ä¿®æ”¹æ–‡ä»¶.zip) \n\n# Linuxå†…æ ¸\n\né€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªé›†Linuxå†…æ ¸ã€å·¥å…·é›†ã€å„ç§åº“ã€æ¡Œé¢ç®¡ç†å™¨ã€åº”ç”¨ç¨‹åºäºä¸€ä½“çš„ä¸€ä¸ªå‘å¸ƒåŒ…\n\nä¸€ä¸ªå†…æ ¸ä¸æ˜¯ä¸€å¥—å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œ\n\nâ€œå†…æ ¸â€æŒ‡çš„æ˜¯ä¸€ä¸ªæ''ä¾›ç¡¬ä»¶æŠ½è±¡å±‚ã€ç£ç›˜ä»¥åŠæ–‡ä»¶æ§åˆ¶ã€å¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„ç³»ç»Ÿè½¯ä»¶\n\n## å†…æ ¸ç§»æ¤\n\n### å‡†å¤‡\n\nå®‰è£…æ’ä»¶exuberant-ctagså’Œlibncurses5-dev\n\n```\nsudo apt-get update //æ›´æ–°è½¯ä»¶\nsudo apt-get install exuberant-ctags\nsudo apt-get install libncurses5-dev\n```\n\nè·å–Linuxæºç ï¼Œå¹¶è§£å‹\n\n```bash\ntar -xvf linux-3.14.tar.xz\n```\n\nä¿®æ”¹äº¤å‰ç¼–è¯‘å·¥å…·\n\n```\nä¿®æ”¹Makefileï¼Œ198è¡Œ,199è¡Œ\nARCH ?= arm\nCROSS_COMPILE ?= arm-none-linux-gnueabi-\n```\n\n![image-20240420110903156](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240420110903156.png)\n\nç”Ÿæˆé»˜è®¤é…ç½®\n\nï¼ˆé…ç½®æ–‡ä»¶æ”¾åœ¨ arch/arm/configsä¸‹ï¼‰\n\n```\nmake exynos_defconfig\n```\n\n![image-20240420111239775](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240420111239775.png)\n\n### é…ç½®å†…æ ¸:\n\næ­£å¸¸æ‰§è¡Œï¼Œä¼šå¼¹å‡ºä¸€ä¸ªèœå•é€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥å»é€‰æ‹©éœ€è¦é…ç½®çš„å†…æ ¸ï¼›\n\n```\nmake menuconfig\n```\n\n![image-20240420111316895](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240420111316895.png)\n\nåœ¨èœå•ç•Œé¢é€‰ä¸­ dm9000 ç½‘å¡é©±åŠ¨\n\n```\nDevice Drivers --->\n\t[*] Network device support --->\n\t\t[*] Ethernet driver support --->\n\t\t\t<*> DM9000 support\nå›è½¦é”®é€‰æ‹©è¿›å…¥, ç©ºæ ¼é”®æ”¹å˜é€‰æ‹©, ä¸Šä¸‹å·¦å³æ–¹å‘é”®æ”¹å˜é€‰æ‹©\n```\n\n```\nå†…æ ¸ä¸­é€‰é…å¿…è¦çš„ç½‘ç»œåè®®æ ˆæ”¯æŒ\n[*] Networking support --->\n\tNetworking options --->\n\t\t<*> Packet socket\n\t\t<*>Unix domain sockets\n\t\t[*] TCP/IP networking\n\t\t[*] IP: kernel level autoconfiguration\n```\n\n```\né€‰æ‹©NFSæ”¯æŒ\nFile systems --->\n\t[*] Network File Systems (NEW) --->\n\t\t<*> NFS client support\n        [*] NFS client support for NFS version 3\n        [*] NFS client support for the NFSv3 ACL protocol extension\n        [*] Root file system on NFS\n```\n\n```\né€‰æ‹©USBæ”¯æŒ\nDevice Drivers --->\n\t[*] USB support --->\n        <*> EHCI HCD (USB 2.0) support\n        <*>EHCI support for Samsung S5P/EXYNOS SoC Series\n        <*> USB Mass Storage support\n        <*> USB3503 HSIC to USB20 Driver\n\t\tUSB Physical Layer drivers --->\n\t\t\t<*> Samsung USB 2.0 PHY controller Driver\n\tSCSI device support --->\n        <*> SCSI device support\n        <*> SCSI disk support\n        <*> SCSI generic support\n```\n\n### ç¼–è¯‘ç”Ÿæˆå†…æ ¸é•œåƒ\n\nç¼–è¯‘å†…æ ¸é•œåƒä¼šç”¨åˆ°\"mkimage\"å‘½ä»¤, éœ€è¦æå‰é…ç½®ä¸€ä¸‹, è¿™ä¸ªå·¥å…·åœ¨ u-boot æ–‡ä»¶å¤¹ä¸‹ é¦–å…ˆå°†u-boot-2013.01æ–‡ä»¶å¤¹ä¸‹çš„mkimageå‘½ä»¤å¤åˆ¶åˆ°ç”¨æˆ·ç³»ç»Ÿå‘½ä»¤æ–‡ä»¶å¤¹ä¸‹\n\n```\nsudo cp ../u-boot-2013.01/tools/mkimage /usr/local/bin/\n```\n\nç¼–è¯‘å†…æ ¸\n\n```\nmake uImage\n```\n\nç¼–è¯‘æˆåŠŸä¼šç”Ÿæˆä¸€ä¸ªç»è¿‡å‹ç¼©åçš„é•œåƒæ–‡ä»¶uImageï¼Œ\n\nå…¶ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„ä¸ºï¼šarch/arm/boot/uImage\n\nå°†ç”Ÿæˆçš„ uImage ç§»åŠ¨åˆ° tftp å…±äº« è·¯å¾„ä¸‹\n\n```bash\ncp arch/arm/boot/uImage /home/hqyj/tftp/my_uImage\n```\n\nå¯åŠ¨é•œåƒ\n\n![image-20240420114131499](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240420114131499.png)\n\n [å†…æ ¸ç§»æ¤.pdf](å†…æ ¸ç§»æ¤.pdf) \n\n![image-20240421082027484](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421082027484.png)\n\n```\nImage:åŸå§‹é•œåƒ\nzImage:å‹ç¼©é•œåƒ\nuImage:åœ¨zImageçš„åŸºç¡€ä¸Šå¤šè¡¥å……äº†ã€æ ¼å¼å¤´ã€‘\n\nImage -> å‹ç¼© -> zImage -> æ·»åŠ u-bootèƒ½è§£æçš„æ ¼å¼å¤´ -> uImage\n```\n\n## è®¾å¤‡æ ‘ç§»æ¤\n\n![image-20240421090313912](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421090313912.png)\n\nå¤åˆ¶ä¸€ä»½ä¸ºexynos4412-fs412.dts\n\nä¿®æ”¹527è¡Œåé¢ï¼Œæ·»åŠ **ç½‘å¡é©±åŠ¨**\n\n![image-20240421091312045](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421091312045.png)\n\næ ¼å¼ä¸å¯¹ï¼Œé€‰ä¸­å…¨éƒ¨è¡Œï¼ŒæŒ‰ä¸€ä¸‹\"=\"ï¼Œæ ¼å¼å³å¯å¯¹é½\n\n![image-20240421091359487](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421091359487.png)\n\nä¿®æ”¹makefileæ–‡ä»¶\n\n![image-20240421091853047](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421091853047.png)\n\nç¼–è¯‘è®¾å¤‡æ ‘æ–‡ä»¶ï¼š\n\n```\nmake dtbs\n```\n\n![image-20240421091932551](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421091932551.png)\n\næ‹·è´ç¼–è¯‘çš„è®¾å¤‡æ ‘åˆ°tftpå…±äº«æ–‡ä»¶ä¸­:\n\n```\ncp arch/arm/boot/dts/exynos4412-fs4412.dtb /home/hqyj/tftp/my_exynos4412-fs4412.dtb\n```\n\næŒ‚è½½å¯åŠ¨\n\n![image-20240421092414811](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421092414811.png)\n\næ‹“å±•ï¼šæ·»åŠ **USBé©±åŠ¨**\n\n```\nvim arch/arm/boot/dts/exynos4412-fs4412.dts\n```\n\n```\nusbphy: usbphy@125B0000 {\n#address-cells = <1>;\n#size-cells = <1>;\ncompatible = \"samsung,exynos4x12-usb2phy\";\nreg = <0x125B0000 0x100>;\nranges;\nclocks = <&clock 2>, <&clock 305>;\nclock-names = \"xusbxti\", \"otg\";\nusbphy-sys {\nreg = <0x10020704 0x8 0x1001021c 0x4>;\n};\n};\nehci@12580000 {\nstatus = \"okay\";\nusbphy = <&usbphy>;\n};\nusb3503@08 {\ncompatible = \"smsc,usb3503\";\nreg = <0x08 0x4>;\nconnect-gpios = <&gpm3 3 1>;\nintn-gpios = <&gpx2 3 1>;\nreset-gpios = <&gpm2 4 1>;\ninitial-mode = <1>;\n};\n```\n\n```\nmake dtbs\n```\n\n```\ncp arch/arm/boot/dts/exynos4412-fs4412.dtb /home/hqyj/tftp/my_exynos4412-fs4412.dtb\n```\n\næ’å…¥USBè®¾å¤‡ï¼Œ\n\n![image-20240421093222897](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421093222897.png)\n\n## å­—ç¬¦è®¾å¤‡\n\n![image-20240421102926332](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421102926332.png)\n\nä¸»ï¼ˆç»„ï¼‰è®¾å¤‡å·ï¼Œç”¨äºå®šä¹‰åŒä¸€ç±»è®¾å¤‡\n\næ¬¡è®¾å¤‡å·ç”¨äºå®šä½å…·ä½“è®¾å¤‡\n\n\n\nä¿®æ”¹Makefile\n\n![image-20240421111004155](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421111004155.png)\n\nç”Ÿæˆé©±åŠ¨ä»£ç .koæ–‡ä»¶\n\næ¿å­é€šè¿‡`insmod myled.ko`å®‰è£…é©±åŠ¨\n\né€šè¿‡åº”ç”¨ç¨‹åºå¼€å…³ç¯\n\n![image-20240421111723254](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421111723254.png)\n\nå¸è½½é©±åŠ¨æ–‡ä»¶\n\n![image-20240421112006653](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240421112006653.png)\n\n## æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ¶ä½œ\n\næˆ‘ä»¬é€‰æ‹©çš„ç‰ˆæœ¬æ˜¯busybox-1.22.1.tar.bz2, å°†æ–‡ä»¶ç§»åŠ¨åˆ°Ubuntuå†…, è¿›è¡Œè§£å‹:\n\nè¿›å…¥æºç ç›®å½•, åœ¨ busybox-1.22.1 æ–‡ä»¶å¤¹å†…è¿›è¡Œæ“ä½œ: \n\n```\nmake menuconfig \n```\n\n![image-20240422160754543](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422160754543.png)\n\n```\nBusybox Settings --->\nBuild Options --->\n[*] Build BusyBox as a static binary (no shared libs)\n[ ] Force NOMMU build\n[ ] Build with Large File Support (for accessing files > 2 GB)\n(arm-linux-) Cross Compiler prefix //é‡‡ç”¨çš„ç¼–è¯‘å™¨æ˜¯arm-linux-,æ•²å›è½¦è¾“å…¥\n```\n\n![image-20240422160843827](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422160843827.png)\n\né…ç½®å¥½ä¿å­˜å, è¿›è¡Œç¼–è¯‘: \n\n```\nmake\n```\n\nç¼–è¯‘å¥½å, å®‰è£…busybox, ç”Ÿæˆæ ¹æ–‡ä»¶å¤¹:  \n\n```\nmake install\n```\n\nå®‰è£…å®Œæˆåé»˜è®¤ç”Ÿæˆ _install æ–‡ä»¶å¤¹, è¿™å°±æ˜¯æˆ‘ä»¬åˆ¶ä½œçš„æ ¹æ–‡ä»¶å¤¹, å°†æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°nfså…±äº«æ–‡ä»¶å¤¹ä¸‹,\nåˆ‡æ¢è·¯å¾„:  \n\n```\nsudo cp -rf _install /home/hqyj/nfs/my_rootfs\ncd /home/hqyj/nfs/my_rootfs\nls\n```\n\n![image-20240422161124379](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422161124379.png)\n\nåˆ›å»ºç¼ºå°‘çš„ç›®å½•  \n\n```\nsudo mkdir etc dev tmp mnt proc sys var lib\n```\n\n![image-20240422161809231](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422161809231.png)\n\næ·»åŠ æ‰€éœ€è¦çš„åº“ä»£ç  \n\n```\nsudo   cp  -a  /home/hqyj/Downloads/gcc-4.6.4/arm-arm1176jzfssf-linux-gnueabi/sysroot/lib/*    ./lib/\n```\n\nåˆ é™¤æ— ç”¨çš„åº“ï¼Œç”¨æ¥ä¿è¯rootfsè¶³å¤Ÿå°8Mä»¥å†…ï¼›\n\n```\nsudo rm lib/*.a     \nsudo cp /home/hqyj/Downloads/gcc-4.6.4/bin/arm-linux-strip   /usr/local/bin/ \nsudo arm-linux-strip lib/*\n```\n\n![image-20240422161930999](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422161930999.png)\n\n### æ·»åŠ ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶ \n\nåœ¨etcä¸‹æ·»åŠ æ–‡ä»¶inittabï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹  sudo vi etc/inittab\n\n```\n#this is run first except when booting in single-user mode.\n::sysinit:/etc/init.d/rcS\n# /bin/sh invocations on selected ttys\n# start an \"askfirst\" shell on the console (whatever that may be)\n::askfirst:-/bin/sh\n# stuff to do when restarting the init process\n::restart:/sbin/init\n# stuff to do before rebooting\n::ctrlaltdel:/sbin/reboot\n```\n\nåœ¨etcä¸‹æ·»åŠ æ–‡ä»¶fstabï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹,  \n\n```\n#device mount-point type options dump fsck order\nproc /proc proc defaults 0 0\ntmpfs /tmp tmpfs defaults 0 0\nsysfs /sys sysfs defaults 0 0\ntmpfs /dev tmpfs defaults 0 0\n```\n\nåœ¨etcä¸‹åˆ›å»ºinit.dç›®å½•ï¼Œå¹¶åœ¨init.dä¸‹åˆ›å»ºrcSæ–‡ä»¶ï¼ŒrcSæ–‡ä»¶å†…å®¹ä¸ºï¼š  \n\n```\n#!/bin/sh\n# This is the first script called by init process\n/bin/mount -a\necho /sbin/mdev > /proc/sys/kernel/hotplug\n/sbin/mdev -s\n```\n\nä¸ºrcSæ·»åŠ å¯æ‰§è¡Œæƒé™:\n\n```\nsudo chmod +x etc/init.d/rcS\n```\n\n  åœ¨etcä¸‹æ·»åŠ profileæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸º:  \n\n```\n#!/bin/sh\nPATH=/bin:/sbin:/usr/bin:/usr/sbin\nLD_LIBRARY_PATH=/lib:/usr/lib:$LD_LIBRARY_PATH\nexport PATH LD_LIBRARY_PATH\nexport HOSTNAME=Group3\nexport USER=Vicczyq\nexport HOME=root\nexport PS1=\"[$USER@$HOSTNAME \\W]\\# \"\n```\n\n### å¤åˆ¶æ–‡ä»¶ç³»ç»Ÿ, ä¿®æ”¹æŒ‚è½½é•œåƒ  \n\nåœ¨nfsæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­è¯´æ˜ /home/hqyj/nfs/my_rootfs éœ€è¦å…±äº«å‡ºå»  \n\n```\nsudo vi /etc/exports  \n```\n\n```\nå°†åŸæ¥çš„æŒ‚è½½ä¿¡æ¯å±è”½ - å‰é¢åŠ #:\n# /home/hqyj/nfs/rootfs *(rw,sync,no_root_squash,no_subtree_check)\nå°¾éƒ¨åŠ å…¥, æ·»åŠ æ–°çš„ä¸€è¡Œ:\n/home/hqyj/nfs/my_rootfs *(rw,sync,no_root_squash,no_subtree_check)\n```\n\n```\né‡å¯nfs\nsudo service nfs-kernel-server restart\n```\n\nå¼€å‘æ¿è®¾ç½®å¯åŠ¨å‚æ•°\n\n```\nset bootargs \"root=/dev/nfs nfsroot=192.168.2.222:/home/hqyj/nfs/my_rootfs,v3 rw console=ttySAC2,115200 clk_ignore_unused init=/linuxrc ip=192.168.2.111\"\nsave\n```\n\n![image-20240422163406444](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422163406444.png)\n\n### æ‰“åŒ…ä¸ºimgé•œåƒæ–‡ä»¶\n\n```\ncd /home/hqyj/nfs\n```\n\nåˆ›å»ºä¸€ä¸ª8Mçš„ç©ºç£ç›˜(ramdisk)\n\n```\ndd if=/dev/zero of=ramdisk bs=1k count=8192 \n```\n\n![image-20240422171712115](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422171712115.png)\n\næŠŠramdiskåˆ¶ä½œæˆext2æ ¼å¼çš„æ–‡ä»¶\n\n```\nmkfs.ext2 -F ramdisk  \n```\n\n![image-20240422171736733](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422171736733.png)\n\nåˆ›å»ºmymntç›®å½•ä½œä¸ºæŒ‚è½½ç‚¹\n\n```\nmkdir  mymnt \n```\n\næŠŠramdiskæŒ‚è½½åˆ°mymnt/  \n\n```\nsudo mount -t ext2 ramdisk mymnt/ \n```\n\nå°†æµ‹è¯•å¥½çš„æ–‡ä»¶ç³»ç»Ÿé‡Œçš„å†…å®¹å…¨éƒ¨æ‹·è´åˆ° mymnt/ ç›®å½•ä¸‹é¢\n\n```\nsudo cp -a my_rootfs/* mymnt/\n```\n\nå–æ¶ˆæŒ‚è½½\n\n```\nsudo  umount  mymnt/\n```\n\nå‹ç¼©ramdiskä¸ºramdisk.gz\n\n```\ngzip  --best  -c  ramdisk  >  ramdisk.gz\n```\n\næ ¼å¼åŒ–ä¸ºubootè¯†åˆ«çš„æ ¼å¼\n\n```\nmkimage -n \"ramdisk\" -A arm -O linux -T ramdisk -C gzip -d ramdisk.gz ramdisk.img\n```\n\n![image-20240422172254713](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422172254713.png)\n\næ‹·è´åˆ°tftpç›®å½•ä¸‹,æ–¹ä¾¿ä¸‹è½½\n\n```\ncp  ramdisk.img  /home/hqyj/tftp/my_ramdisk.img\n```\n\n### æ¿å­è®¾ç½®\n\n```\nset bootcmd \"tftp 41000000 my_uImage;tftp 42000000 my_exynos4412-fs4412.dtb;tftp 43000000 my_ramdisk.img;bootm 41000000 43000000 42000000\"\n```\n\n![image-20240422173216187](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240422173216187.png)\n\n# æ•´ä¸ªæ‰“åŒ…\n\nåˆ›å»ºä¸€ä¸ªimgé•œåƒæ–‡ä»¶\n\n```\nsudo dd if=/dev/zero of=fs4412.img bs=1M count=300\n```\n\nå®‰è£…å·¥å…·\n\n```\nsudo apt install kpartx qemu-utils fdisk\n```\n\nå»ºç«‹åˆ†åŒº\n\n```\nsudo fdisk ./fs4412.img\n1.ä½¿ç”¨må¯ä»¥æŸ¥çœ‹å¸®åŠ©\n2.ä½¿ç”¨nå¿«é€Ÿåˆ›å»ºåˆ†åŒº è¿™é‡Œç¬¬ä¸€åˆ†åŒºæ˜¯16m\n3.ç¬¬äºŒåˆ†åŒºå‰©ä¸‹çš„å…¨éƒ¨ï¼ˆéœ€å†æŒ‰ä¸€æ¬¡né‡æ–°åˆ†åŒºï¼‰\n4.è®°å¾—ä¿å­˜ ä½¿ç”¨wè¿›è¡Œä¿å­˜\n5.æœ€åæŒ‰qé€€å‡º\nä¸€èˆ¬éƒ½é€‰æ‹©é»˜è®¤ åˆ†åŒºå¤§å°å†™ +16m è¡¨ç¤ºå¢åŠ 16mçš„åˆ†åŒºå¦‚ä¸‹ï¼š\n\nCommand (m for help): n //åˆ›å»ºåˆ†åŒº\nPartition type\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended (container for logical partitions)\nSelect (default p): p //åˆ›å»ºä¸»åˆ†åŒº\nPartition number (1-4, default 1): 1 //ç¬¬ä¸€åˆ†åŒº\nFirst sector (2048-614399, default 2048): 2048 //é»˜è®¤ ä¹Ÿå¯ç›´æ¥æŒ‰å›è½¦\nLast sector, +sectors or +size{K,M,G,T,P} (2048-614399, default 614399): +16m //è¡¨ç¤ºå¢åŠ 16m è‹¥ç›´æ¥å›è½¦è¡¨ç¤ºåé¢çš„å…¨éƒ¨ä¸ºè¯¥åˆ†åŒºçš„å†…å®¹ æ‰€ä»¥ç¬¬äºŒåˆ†åŒºå¯ä»¥ç›´æ¥å…¨æŒ‰å›è½¦\n\nCreated a new partition 1 of type 'Linux' and of size 16 MiB.\n\n```\n\nåŠ è½½imgæ–‡ä»¶\n\n```\nsudo kpartx -av ./fs4412.img\nåŠ è½½æˆåŠŸä¼šå‡ºç°ä»¥ä¸‹ä½ç½®ï¼š\nsudo kpartx -av ./fs4412.img\nadd map loop28p1 (253:0): 0 32768 linear 7:28 2048\nadd map loop28p2 (253:1): 0 579584 linear 7:28 34816\nè¯´æ˜åœ¨è®¾å¤‡åŠ è½½åœ¨/dev/loop28\nè€Œä¸¤ä¸ªåˆ†åŒºæ˜¯/dev/mapper/loop28p1 å’Œloop28p2\n```\n\næ ¼å¼åŒ–ä¸¤ä¸ªåˆ†åŒº\n\n```\nç¬¬ä¸€åˆ†åŒºä¸ºfat16ï¼ˆæŒ‰éœ€æ±‚ v3sæ˜¯fat16ï¼‰\nsudo mkfs -t fat /dev/mapper/loop28p1\nç¬¬äºŒåˆ†åŒºä¸ºext4\nsudo mkfs.ext4  /dev/mapper/loop28p2 -L rootfs\n```\n\næŒ‚è½½ä¸¤ä¸ªåˆ†åŒº\n\n```\nåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹\nmkdir -p ./boot\nmkdir -p  ./rootfs\næŒ‚è½½ä¸¤ä¸ªåˆ†åŒºåˆ°ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­\nsudo mount /dev/mapper/loop28p1 ./boot/\nsudo mount /dev/mapper/loop28p2 ./rootfs/\nåŠ è½½å®Œåå¯ä»¥ç”¨ df -hå‘½ä»¤æŸ¥çœ‹æ˜¯å¦æŒ‚è½½ä¸‹é¢å›¾æœ‰æŒ‚è½½æˆåŠŸçš„å›¾\n```\n\n![image-20240424112658286](åµŒå…¥å¼ç³»ç»Ÿç§»æ¤/image-20240424112658286.png)\n\nå°†bootï¼Œå†…æ ¸ï¼Œè®¾å¤‡æ ‘æ–‡ä»¶æ‹·è´è¿›bootåˆ†åŒºä¸­\n\n[PhraseEdit.txt](PhraseEdit.txt)\n"},{"title":"CPPç›¸å…³é—®é¢˜","url":"/2024/04/01/CPPç›¸å…³é—®é¢˜/","content":"\n# 1 C/C++æ¦‚å¿µ\n\n## 1.1 ç®€è¿°C++çš„ç‰¹ç‚¹\n\n- æ”¯æŒ**é¢å‘å¯¹è±¡**ç¨‹åºè®¾è®¡ï¼ŒåŒ…æ‹¬å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ä¸‰å¤§ç‰¹å¾\n- æ›´åŠ å®‰å…¨ï¼Œå¢åŠ äº†constå˜é‡ã€å¼•ç”¨&ã€æ™ºèƒ½æŒ‡é’ˆã€try_catchç­‰\n- å¼•å…¥äº†æ¨¡æ¿çš„æ¦‚å¿µï¼Œå¯å¤ç”¨æ€§é«˜\n- è·¨å¹³å°\n\n## 1.2 å„ç§å˜é‡ä¹‹é—´çš„åŒºåˆ«\n\nä¸»è¦çœ‹**ç”Ÿå‘½å‘¨æœŸ**å’Œ**ä½œç”¨åŸŸ**\n\n## 1.3 newå’Œmallocçš„åŒºåˆ«\n\nnewæ˜¯ä¸€ä¸ª**æ“ä½œç¬¦**ï¼Œmallocæ˜¯ä¸€ä¸ª**å‡½æ•°**\n\nmallocå†…å­˜åˆ†é…æˆåŠŸè¿”å›çš„æ˜¯void*ï¼Œéœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè€Œnewæ— éœ€è¿›è¡Œ\n\nmallocåˆ†é…å†…å­˜å¤±è´¥ä¼šè¿”å›NULLï¼Œnewåˆ™è¿”å›bac_allocçš„å¼‚å¸¸\n\n## 1.4 æœ‰äº†malloc/free ä¸ºä»€ä¹ˆè¿˜è¦new/delete ?\n\nmalloc/freeæ˜¯å‡½æ•°ï¼Œæ— æ³•åœ¨åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œä¹Ÿæ— æ³•å†æ¶ˆäº¡æ—¶è‡ªåŠ¨æ‰§è¡Œææ„å‡½æ•°ï¼Œå› æ­¤éœ€è¦newå’Œdelete\n\n**newåˆ›å»ºçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œmallocåˆ†é…çš„æ˜¯ä¸€å—å†…å­˜åŒºåŸŸ**\n\n## 1.5 æŒ‡é’ˆå‡½æ•°å’Œå‡½æ•°æŒ‡é’ˆçš„åŒºåˆ«ï¼Ÿ\n\n**å‡½æ•°æŒ‡é’ˆï¼š**æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡ï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆè°ƒç”¨å‡½æ•°\n\n```cpp\n#include <stdio.h>\nint add(int a,int b){\n\treturn a+b;\n}\nint sub(int a,int b){\n\treturn a-b;\n}\n//å‡½æ•°æŒ‡é’ˆ\nint (*func)(int a,int b);\n\nint main()\n{\n\tfunc = &add;\n\tprintf(\"add:%d\\n\",(*func)(10,5));\n\tfunc = &sub;\n\tprintf(\"sub:%d\\n\",(*func)(10,5));\n\treturn 0;\n}\n```\n\n**æŒ‡é’ˆå‡½æ•°ï¼š**è¿”å›å€¼ä¸ºæŒ‡é’ˆçš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼Œint * func()\n\n## 1.6 é‡æŒ‡é’ˆ\n\næŒ‡å‘â€œåƒåœ¾â€å†…å­˜çš„æŒ‡é’ˆï¼Œç”±äº**æœªåˆå§‹åŒ–æŒ‡é’ˆ**ã€**æ•°æ®å·²åˆ é™¤**æˆ–**è¶…å‡ºä½œç”¨åŸŸ**éƒ½ä¼šäº§ç”Ÿ\n\n# 2 é¢å‘å¯¹è±¡\n\n## 2.1 ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡\n\nä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå°†ç›¸å…³æ•°æ®å’Œå¯¹è¿™äº›æ•°æ®çš„æ“ä½œç»„ç»‡ç§°ä¸€ä¸ªæ•´ä½“ï¼Œæˆä¸ºâ€œå¯¹è±¡â€ã€‚\n\n## 2.2 é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾\n\n**å°è£…ã€ç»§æ‰¿ã€å¤šæ€**\n\n- å°è£…ï¼šå°†å±æ€§å’Œæ–¹æ³•æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªâ€œç±»â€ï¼Œå¹¶å¯¹å…¶åŠ ä»¥æƒé™æ§åˆ¶\n- ç»§æ‰¿ï¼šè®©æŸä¸ªç±»å‹çš„å¯¹è±¡è·å¾—å¦å¤–ä¸€ä¸ªç±»å‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•çš„æœºåˆ¶ã€‚\n- å¤šæ€ï¼šé€šè¿‡åŸºç±»æŒ‡é’ˆå¯ä»¥è°ƒç”¨ä»»ä½•æ´¾ç”Ÿç±»çš„å‡½æ•°ã€‚å¤šæ€åˆ†ä¸ºç¼–è¯‘æ—¶çš„å¤šæ€ï¼ˆé‡è½½ï¼‰ï¼Œè¿è¡Œæ—¶çš„å¤šæ€ï¼ˆè™šå‡½æ•°ï¼‰ã€‚\n\nä¸‰å¤§ç‰¹æ€§ä½¿å¾—ç¼–ç¨‹æ›´åŠ çµæ´»ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€å¯å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§\n\n"},{"title":"LeetCode-top-100","url":"/2024/03/14/LeetCode-top-100/","content":"\n# 1 ä¸¤æ•°ä¹‹å’Œ\n\nç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ `target`ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º **å’Œä¸ºç›®æ ‡å€¼** *`target`* çš„é‚£ **ä¸¤ä¸ª** æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\n\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚\n\nä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```cpp\nè¾“å…¥ï¼šnums = [2,7,11,15], target = 9\nè¾“å‡ºï¼š[0,1]\nè§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```cpp\nè¾“å…¥ï¼šnums = [3,2,4], target = 6\nè¾“å‡ºï¼š[1,2]\n```\n\nåˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå¯¹äºæ¯ä¸€ä¸ª xï¼Œé¦–å…ˆæŸ¥è¯¢å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å·²å­˜åœ¨ target - xï¼Œå¦‚æœå­˜åœ¨é‚£ä¹ˆå°±å·²ç»æ‰¾åˆ°äº†ç­”æ¡ˆï¼Œä¸å­˜åœ¨ç›´æ¥å°† x æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ¬¡å¿«é€ŸåŒ¹é…ã€‚\n\n```cpp\nclass Solution {\npublic:\n    vector<int> twoSum(vector<int>& nums, int target) {\n        unordered_map<int, int> mp;//åˆ›å»ºå“ˆå¸Œè¡¨\n        vector<int> res(2, -1);\n        for (int i = 0; i < nums.size(); i++) {\n            if (mp.count(target - nums[i]) == 0) {\n                mp.insert(pair<int, int>(nums[i], i));\n            } else {\n                res[0] = mp[target - nums[i]];\n                res[1] = i;\n                break;\n            }\n        }\n        return res;\n    }\n};\n```\n\n# 2 å­—æ¯å¼‚ä½è¯åˆ†ç»„\n\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¯·ä½ å°† **å­—æ¯å¼‚ä½è¯** ç»„åˆåœ¨ä¸€èµ·ã€‚å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚\n\n**å­—æ¯å¼‚ä½è¯** æ˜¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„æ‰€æœ‰å­—æ¯å¾—åˆ°çš„ä¸€ä¸ªæ–°å•è¯ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: strs = [\"eat\", \"tea\", \"tan\", \"ate\", \"nat\", \"bat\"]\nè¾“å‡º: [[\"bat\"],[\"nat\",\"tan\"],[\"ate\",\"eat\",\"tea\"]]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: strs = [\"\"]\nè¾“å‡º: [[\"\"]]\n```\n\n**ç¤ºä¾‹ 3:**\n\n```\nè¾“å…¥: strs = [\"a\"]\nè¾“å‡º: [[\"a\"]]\n```\n\nå°†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½è¿›è¡Œæ’åºå¾—åˆ°å”¯ä¸€çš„åºåˆ—ï¼Œå°†åºåˆ—ç”¨hashè¡¨ä¿å­˜èµ·æ¥ï¼Œåšæ˜ å°„ï¼Œæœ€åéå†hashè¡¨å¾—åˆ°ç»“æœ\n\n```cpp\nclass Solution {\npublic:\n    vector<vector<string>> groupAnagrams(vector<string>& strs) {\n        unordered_map<string,vector<string>> hash;\n        for(vector<string>::iterator it=strs.begin();it!=strs.end();it++){\n            string str_tmp = *it;\n            sort(str_tmp.begin(),str_tmp.end());\n            hash[str_tmp].push_back(*it);\n        }\n        vector<vector<string>> res;\n        for(unordered_map<string,vector<string>>::iterator it=hash.begin();it!=hash.end();it++){\n            res.push_back(it->second);\n        }\n        return res;\n    }\n};\n};\n```\n\n# 3 æœ€é•¿è¿ç»­åºåˆ—\n\nç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚\n\nè¯·ä½ è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [100,4,200,1,3,2]\nè¾“å‡ºï¼š4\nè§£é‡Šï¼šæœ€é•¿æ•°å­—è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [0,3,7,2,5,8,4,6,0,1]\nè¾“å‡ºï¼š9\n```\n\n\n\n```cpp\nclass Solution {\npublic:\n    int longestConsecutive(vector<int>& nums) {\n        int max_len = 0;\n        unordered_set<int> st;\n        for (auto num : nums)\n            st.insert(num);\n        for (auto num : st){\n            if(st.find(num-1)==st.end()){\n                int len=1;\n                while(st.find(num+len)!=st.end())len++;\n                max_len=max(max_len,len);\n            }\n        }\n            return max_len;\n    }\n};\n```\n\n# 4 ç§»åŠ¨é›¶\n\nç»™å®šä¸€ä¸ªæ•°ç»„ `nums`ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ `0` ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚\n\n**è¯·æ³¨æ„** ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: nums = [0,1,0,3,12]\nè¾“å‡º: [1,3,12,0,0]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: nums = [0]\nè¾“å‡º: [0]\n```\n\n \n\n```cpp\nclass Solution {\npublic:\n    void moveZeroes(vector<int>& nums) {\n        int count = 0;\n        for (vector<int>::iterator it = nums.begin(); it != nums.end();) {\n            if (*it == 0) {\n                nums.erase(it);\n                count++;     \n            } else {\n                it++;\n            }\n        }\n        for (int i = 0; i < count; i++){\n            nums.push_back(0);\n        }\n    }\n};\n```\n\n# 5 ç››æœ€å¤šæ°´çš„å®¹å™¨\n\nç»™å®šä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `height` ã€‚æœ‰ `n` æ¡å‚çº¿ï¼Œç¬¬ `i` æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ `(i, 0)` å’Œ `(i, height[i])` ã€‚\n\næ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ `x` è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚\n\nè¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚\n\n**è¯´æ˜ï¼š**ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![img](LeetCode-top-100/question_11.jpg)\n\n```\nè¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]\nè¾“å‡ºï¼š49 \nè§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šheight = [1,1]\nè¾“å‡ºï¼š1\n```\n\n åŒæŒ‡é’ˆæ³•ï¼Œåˆå§‹åŒ–iã€jä¸ºä¸¤ç«¯ï¼Œå–heightæœ€å°çš„å‘å³æˆ–è€…å‘å·¦ç§»ï¼Œç›´åˆ°ä¸¤ç«¯ç›¸é‡\n\n```cpp\nclass Solution {\npublic:\n    int maxArea(vector<int>& height) {\n        int i = 0, j = height.size() - 1, MAX = -1;\n        while(i < j){\n            MAX = height[i] > height[j] ? \n    max(MAX, (j-i) * height[j--]):max(MAX, (j-i)* height[i++]);\n        }\n        return MAX;\n    }\n};\n```\n\n# 6 ä¸‰æ•°ä¹‹å’Œ\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·\n\nä½ è¿”å›æ‰€æœ‰å’Œä¸º `0` ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚\n\n**æ³¨æ„ï¼š**ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]\nè¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]\nè§£é‡Šï¼š\nnums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚\nnums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚\nnums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚\nä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚\næ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [0,1,1]\nè¾“å‡ºï¼š[]\nè§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [0,0,0]\nè¾“å‡ºï¼š[[0,0,0]]\nè§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚\n```\n\n \n\n```cpp\nclass Solution {\npublic:\n    vector<vector<int>> threeSum(vector<int>& nums) {\n        vector<vector<int>> res;\n        sort(nums.begin(), nums.end());\n        int N = nums.size();\n        for (int i = 0; i < N; i++) {\n            if(nums[i] > 0) break;//å½“nums[i]å¤§äºé›¶çš„æ—¶å€™,nums[l]å’Œnums[r]å¿…å®šå¤§äºé›¶\n            if(i != 0 && nums[i] == nums[i-1])continue;//å»é‡ï¼Œè·³è¿‡\n            int l = i+1;\n            int r = N-1;\n            while(l < r){\n                int sum = nums[i] + nums[l] + nums[r];\n                if( sum == 0 ){\n                    res.push_back({nums[i],nums[l],nums[r]});\n                    while( l+1 < r && nums[l] == nums[l+1]) l++;//å»é‡\n                    while( r-1 > l && nums[r-1] == nums[r]) r--;//å»é‡\n                    l++;\n                    r--;\n                } else if(sum < 0) {\n                    l++;\n                } else if(sum > 0){\n                    r--;\n                }\n            }\n        }\n\n        return res;\n    }\n};\n```\n\n# 7 åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—\n\nç»™ä½ ä¸€ä¸ª **éç©º** æ•´æ•°æ•°ç»„ `nums` ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œ**å…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡**ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚\n\nä½ å¿…é¡»è®¾è®¡å¹¶å®ç°çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä¸”è¯¥ç®—æ³•åªä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´ã€‚\n\n**ç¤ºä¾‹ 1 ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [2,2,1]\nè¾“å‡ºï¼š1\n```\n\n**ç¤ºä¾‹ 2 ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [4,1,2,1,2]\nè¾“å‡ºï¼š4\n```\n\n**ç¤ºä¾‹ 3 ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [1]\nè¾“å‡ºï¼š1\n```\n\nä¸€å¼€å§‹æƒ³æ³•ä¸ºå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œå†ç”¨æ ˆè¿›è¡ŒåŒ¹é…å¤„ç†\n\n```cpp\nclass Solution {\npublic:\n    int singleNumber(vector<int>& nums) {\n        stack<int> stk;\n        sort(nums.begin(),nums.end());\n        for(auto num:nums){\n            if(!stk.empty() && num==stk.top()){\n                stk.pop();\n            }else{\n                stk.push(num);\n            }\n        }\n        return stk.top();\n    }\n};\n```\n\nåœ¨é¢˜è§£ä¸­çœ‹åˆ°**å¼‚æˆ–è¿ç®—** ï¼šæ³¨æ„é¢˜ç›®ä¸­çš„â€œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡â€ï¼Œé‡‡ç”¨å¼‚æˆ–è¿ç®—å³å¯æ±‚å‡ºæ‰€éœ€æ•°å­—\n\n```cpp\nclass Solution {\npublic:\n    int singleNumber(vector<int>& nums) {\n        int res = 0;\n        for(auto num:nums){\n            res ^= num;\n        }\n        return res;\n    }\n};\n```\n\n# 8 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²\n\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ **æœ€é•¿å­ä¸²**çš„é•¿åº¦ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: s = \"abcabcbb\"\nè¾“å‡º: 3 \nè§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"abc\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: s = \"bbbbb\"\nè¾“å‡º: 1\nè§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"b\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚\n```\n\n**ç¤ºä¾‹ 3:**\n\n```\nè¾“å…¥: s = \"pwwkew\"\nè¾“å‡º: 3\nè§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"wke\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚\n     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ\"pwke\" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚\n```\n\n**æç¤ºï¼š**\n\n- `0 <= s.length <= 5 * 104`\n- `s` ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ\n\né‡‡ç”¨**æ»‘åŠ¨çª—å£æ³•**è§£å†³ï¼Œ\n\nå¦‚ä½•ç§»åŠ¨ï¼Ÿæˆ‘ä»¬åªè¦æŠŠé˜Ÿåˆ—çš„å·¦è¾¹çš„å…ƒç´ ç§»å‡ºå°±è¡Œäº†ï¼Œç›´åˆ°æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼\n\n```cpp\nclass Solution {\npublic:\n    int lengthOfLongestSubstring(string s) {\n        int l = 0, r = 1;\n        int res = 0;\n        int n = s.size();\n        while (r <= s.size()) {\n            res = max(res, r-l);\n            for (int i = l; i < r; i++) {\n                if(s[i] == s[r]){\n                    l = i + 1;\n                    break;\n                }\n            }\n            r++;\n        }\n        return res;\n    }\n};\n```\n\n# 9 æ¨è¾‰ä¸‰è§’\n\nç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° *`numRows`ï¼Œ*ç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰ *`numRows`* è¡Œã€‚\n\nåœ¨ã€Œæ¨è¾‰ä¸‰è§’ã€ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚\n\n![img](LeetCode-top-100/1626927345-DZmfxB-PascalTriangleAnimated2.gif)\n\n \n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: numRows = 5\nè¾“å‡º: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: numRows = 1\nè¾“å‡º: [[1]]\n```\n\n```cpp\nclass Solution {\npublic:\n    vector<vector<int>> generate(int numRows) {\n        vector<vector<int>> res;\n        for (int i = 0; i < numRows; i++) {\n            vector<int> tmp;\n            for (int j = 0; j <= i; j++) {\n                if (j == 0 || i == j)\n                    tmp.push_back(1);\n                else {\n                    tmp.push_back(res[i-1][j]+res[i-1][j-1]);\n                }\n            }\n            res.push_back(tmp);\n        }\n        return res;\n    }\n};\n```\n\n# 10 æœç´¢æ’å…¥ä½ç½®\n\nç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚\n\nè¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 5\nè¾“å‡º: 2\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 2\nè¾“å‡º: 1\n```\n\n**ç¤ºä¾‹ 3:**\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 7\nè¾“å‡º: 4\n```\n\nä¸€çœ¼ä¾¿çŸ¥æ˜¯äºŒåˆ†æŸ¥æ‰¾ç®—æ³•\n\n```cpp\nclass Solution {\npublic:\n    int searchInsert(vector<int>& nums, int target) {\n        int n = nums.size();\n        int l = 0,r = n-1;\n        int mid;\n        while(l <= r){\n            mid = (l + r) >> 1;\n            if(nums[mid] == target) break;\n            if(nums[mid] > target) r = mid - 1;\n            if(nums[mid] < target) l = mid + 1;\n        }\n        return nums[mid]==target?mid:l;\n    }\n};\n\n```\n\n# 11 äºŒå‰æ ‘çš„ä¸­åºéå†\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å› *å®ƒçš„ **ä¸­åº** éå†* ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![img](LeetCode-top-100/inorder_1.jpg)\n\n```\nè¾“å…¥ï¼šroot = [1,null,2,3]\nè¾“å‡ºï¼š[1,3,2]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šroot = []\nè¾“å‡ºï¼š[]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šroot = [1]\nè¾“å‡ºï¼š[1]\n```\n\n```cpp\nclass Solution {\npublic:\n    void mid_read(TreeNode* a, vector<int> & res){   \n       if(a->left != NULL){//å·¦\n            mid_read(a->left, res);\n        }\n        res.push_back(a->val);//ä¸­\n        if(a->right != NULL){//å³\n            mid_read(a->right, res);\n        }\n    }\n    vector<int> inorderTraversal(TreeNode* root) {\n        vector<int> res;\n        if(root != NULL) mid_read(root, res);\n        return res;\n    }\n};\n```\n\n# 12 å…¨æ’åˆ—\n\nç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ *æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—* ã€‚ä½ å¯ä»¥ **æŒ‰ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [1,2,3]\nè¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [0,1]\nè¾“å‡ºï¼š[[0,1],[1,0]]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [1]\nè¾“å‡ºï¼š[[1]]\n```\n\n \n\n```cpp\nclass Solution {\npublic:\n    vector<vector<int>> permute(vector<int>& nums) {\n        sort(nums.begin(),nums.end());\n        vector<vector<int>> res;\n        int N = nums.size();\n        do{\n            vector<int> tmp;\n            for(int i=0;i<N;i++){\n                tmp.push_back(nums[i]);\n            }\n            res.push_back(tmp);\n        }while(next_permutation(nums.begin(),nums.end()));\n\n        return res;\n    }\n};\n```\n\n","tags":["C++"]},{"title":"ç®—æ³•","url":"/2024/03/11/ç®—æ³•/","content":"\n# 1 æ’åºç®—æ³•\n\n- **ç¨³å®š**ï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ã€‚\n\n![img](ç®—æ³•/849589-20180402133438219-1946132192.png)\n\n## 1.1 å†’æ³¡æ’åº\n\n![img](ç®—æ³•/849589-20171015223238449-2146169197.gif)\n\n```cpp\n#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n#define N 10\nclass myPrint {\npublic:\n\tvoid operator()(int& val) {\n\t\tcout << val << \" \";\n\t}\n};\nint main(){\n\tvector<int> vec;\n\tsrand((unsigned int)time(NULL));\n\tfor (int i = 0; i < N; i++) {\n\t\tvec.push_back(rand());\n\t}\n\n\tfor (int i = 0; i < N; i++) {\n\t\tfor (int j = 0; j < N - i - 1; j++) {\n\t\t\tif (vec[j] < vec[j + 1]){\n\t\t\t\tint temp = vec[j];\n\t\t\t\tvec[j] = vec[j + 1];\n\t\t\t\tvec[j + 1] = temp;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor_each(vec.begin(), vec.end(), myPrint());\n\tcout << endl;\n\n\treturn 0;\n}\n```\n\n## 1.2 é€‰æ‹©æ’åº\n\né¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œ\n\nå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚\n\nä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚ \n\n![img](ç®—æ³•/849589-20171015224719590-1433219824.gif)\n\n```cpp\n\tfor (int i = 0; i < N; i++) {\n\t\tint flag = i;\n\t\tfor (int j = i; j < N; j++) {\n\t\t\tif (vec[j] > vec[flag]) {\n\t\t\t\tflag = j;\n\t\t\t}\n\t\t}\n\t\tint temp = vec[flag];\n\t\tvec[flag] = vec[i];\n\t\tvec[i] = temp;\n\t}\n```\n\n## 1.3 æ’å…¥æ’åº\n\n- ä»**ç¬¬ä¸€ä¸ªå…ƒç´ **å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼›\n- åœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼›\n- å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼›\n\n![img](ç®—æ³•/849589-20171015225645277-1151100000.gif)\n\n```cpp\n\tfor (int i = 1; i < N; i++) {\n\t\tint current_i = i;\n\t\tint count = vec[i];\n\t\twhile (current_i > 0 && count < vec[current_i - 1]) {\n\t\t\tvec[current_i] = vec[current_i - 1];\n\t\t\tcurrent_i--;\n\t\t}\n\t\tvec[current_i] = count;\n\t}\n```\n\n## 1.4 å¸Œå°”æ’åº(Shell Sort)\n\nç›´æ¥æ’å…¥æ’åºç®—æ³•çš„ä¸€ç§æ›´**é«˜æ•ˆ**çš„æ”¹è¿›ç‰ˆæœ¬\n\næŠŠæ— åºæ•°ç»„é€šè¿‡åˆ†ç»„ï¼Œåˆ†ç»„ä¹‹é—´æ¯”è¾ƒè¿›è¡Œç§»åŠ¨ï¼Œæœ€åå½¢æˆä¸€ä¸ª**æœ‰åºæ•°ç»„** \n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](ç®—æ³•/2135ce7a536f4353ba1ca61597b9fc62.gif)\n\n```cpp\n\tfor (int gap = N / 2; gap > 0; gap /= 2) {//ä¸º1çš„æ—¶å€™å°±ä¸éœ€è¦ç»§ç»­æ’åºäº†\n\t\tfor (int i = 0; i < gap; i++) {\n\t\t\t//ä»¥ä¸‹å¯ä»¥çœ‹ä½œæ’å…¥æ’åºçš„å®ç°\n\t\t\tfor (int j = i; j < N; j += gap) {\n\t\t\t\tint count = vec[j];\n\t\t\t\tint current_j = j;\n\t\t\t\twhile (current_j - gap >= 0 && count > vec[current_j-gap]) {\n\t\t\t\t\tvec[current_j] = vec[current_j - gap];\n\t\t\t\t\tcurrent_j -= gap;\n\t\t\t\t}\n\t\t\t\tvec[current_j] = count;\n\t\t\t}\n\t\t}\n\t}\n```\n\n## 1.5 å½’å¹¶æ’åº\n\nå°†æœªæ’åºçš„åˆ—è¡¨åˆ’åˆ†ä¸ºnä¸ªå­åˆ—è¡¨ï¼Œæ¯ä¸ªå­åˆ—è¡¨åŒ…å«ä¸€ä¸ªå…ƒç´ \n\n![img](ç®—æ³•/1024555-20161218163120151-452283750.png)\n\n![img](ç®—æ³•/1024555-20161218194508761-468169540.png)\n\n![img](ç®—æ³•/1024555-20161218194621308-588010220.png)\n\n```cpp\nvoid merge(vector<int> &arr, int* tmp, int left, int right) {\n\tif (left >= right)return;\n    //åˆ†\n\tint mid = (left + right) / 2;\n\tmerge(arr, tmp, left, mid);\n\tmerge(arr, tmp, mid + 1, right);\n\t//æ²»\n    int begin_left = left;\n\tint end_left = mid;\n\tint begin_right = mid + 1;\n\tint end_right = right;\n\tint i = begin_left;\n\twhile (begin_left <= end_left && begin_right <= end_right) {\n\t\tif (arr[begin_left] > arr[begin_right]) {\n\t\t\ttmp[i++] = arr[begin_left++];\n\t\t}\n\t\telse {\n\t\t\ttmp[i++] = arr[begin_right++];\n\t\t}\n\t}\n\twhile (begin_left <= end_left) {\n\t\ttmp[i++] = arr[begin_left++];\n\t}\n\n\twhile (begin_right <= end_right) {\n\t\ttmp[i++] = arr[begin_right++];\n\t}\n\t//æ•°æ®æ‹·è´\n\tfor (int j = left; j <= right; j++) {\n\t\tarr[j] = tmp[j];\n\t}\n}\n\nvoid merge_sort(vector<int> &arr) {\n\tint* tmp = new int[arr.size()];\n\tif (tmp == NULL) {\n\t\tperror(\"å†…å­˜åˆ†é…é”™è¯¯ï¼ŒæŒ‡é’ˆæŒ‡å‘NULL\");\n\t\texit(-1);\n\t}\n\tmerge(arr, tmp, 0, arr.size() - 1);\n\tdelete[] tmp;\n}\n```\n\n## 1.6 å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰\n\n**æ³¨æ„ï¼š**å¿«æ’å¿…é¡»å…ˆä»**å³è¾¹**å¼€å§‹æ‰«æï¼Œä¸ç„¶è¦å‡ºé”™ã€‚\n\nwhyï¼Ÿ[https://www.cnblogs.com/cai170221/p/13558104.html](https://www.cnblogs.com/cai170221/p/13558104.html)\n\n\n\n### 1.6.1 æŒ–å‘æ³•\n\n![20210515183213169.gif#pic_center](ç®—æ³•/20210515183213169.gif)\n\n```cpp\nvoid QuickSort(vector<int> &arr, int left, int right)\n{\n\tif (left >= right)return;\n\tint key = arr[left];\n\tint begin = left;\n\tint end = right;\n\tint flag = left;\n\twhile (begin < end) {\n\t\twhile (begin < end && arr[end] >= key) {\n\t\t\tend--;\n\t\t}\n\t\tarr[flag] = arr[end];\n\t\tflag = end;\n\t\twhile (begin < end && arr[begin] <= key) {\n\t\t\tbegin++;\n\t\t}\n\t\tarr[flag] = arr[begin];\n\t\tflag = begin;\n\t}\n\tarr[flag] = key;\n\tQuickSort(arr, left, flag - 1);\n\tQuickSort(arr, flag + 1, right);\n}\n```\n\n### 1.6.2 éœå°”æ³•\n\n![è¯·æ·»åŠ å›¾ç‰‡æè¿°](ç®—æ³•/77647f2bac1b4d32975d12a60208d443.gif)\n\n```cpp\nvoid QuickSort(vector<int>& arr, int left, int right) {\n    if (left >= right) return;\n    \n    int begin = left;\n    int end = right;\n    int key = arr[left];\n    \n    while (begin < end) {\n\n        while (begin < end && arr[end] >= key) {\n            end--;\n        }\n\t\twhile (begin < end && arr[begin] <= key) {\n\t\t\tbegin++;\n\t\t}\n        swap(arr[begin], arr[end]);\n    }\n    swap(arr[left], arr[begin]);\n    QuickSort01(arr, left, begin - 1);\n    QuickSort01(arr, begin + 1, right);\n}\n\n```\n\n# 2 å¿«é€Ÿå¹‚ä¸å¿«é€Ÿä¹˜\n\n$$\nè®¡ç®—3^5\\\\\n(5)_H=(101)_2\\\\\n3^5 = 3^4*3^1\n$$\n\n\n\n```cpp\nint qpow(int a, int n){\n    int ans = 1;\n    while(n){\n        if(n&1)        //å¦‚æœnçš„å½“å‰æœ«ä½ä¸º1\n            ans *= a;  //ansä¹˜ä¸Šå½“å‰çš„a\n        a *= a;        //aè‡ªä¹˜\n        n >>= 1;       //nå¾€å³ç§»ä¸€ä½\n    }\n    return ans;\n}\n```\n\nå–æ¨¡è¿ç®—è§„åˆ™ï¼š\n\n```cpp\n(a + b) % p = (a % p + b % p)%p\n(a - b) % p = (a % p - b % p)%p\n(a * b) % p = ((a % p) * (b % p))%p\n(a ^ b) % p = ((a % p)^b) %p \n```\n\n$$\nè®¡ç®—3^{15}\\%7\n$$\n\n```cpp\nint qpow(int a, int n){\n\tint ans = 1;\n    while(n){\n        if(n&1) ans = (ans * a)%7;\n        a = (a * a)%7;\n        n>>=1;\n    }\n    return ans;\n}\n```\n\nåŒç†ï¼Œå¿«é€Ÿä¹˜æœ‰ç±»ä¼¼çš„ç®—æ³•\n\n```cpp\nint qcg(int a, int b, int p)\n{\n\tint res = 0;\n\twhile (b)\n\t{\n\t\tif (b & 1)res = ((LL)res + a) % p;\n\t\ta = ((LL)a + a) % p;\n\t\tb >>= 1;\n\t}\n\treturn res;\n}\n```\n\n# 3 KMPå­—ç¬¦ä¸²åŒ¹é…\n\n### **æœ€é•¿ç›¸ç­‰å‰åç¼€ï¼š**\n\n```\nä¾‹1ï¼šaba\nå‰ç¼€ï¼šaï¼Œab\nåç¼€ï¼ša, ba\næœ€é•¿ç›¸ç­‰å‰åç¼€ï¼šaï¼Œæœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦æ˜¯1\n\nä¾‹2ï¼šaaaa\nå‰ç¼€ï¼šaï¼Œaa, aaa\nåç¼€ï¼ša , aa, aaa\næœ€é•¿ç›¸ç­‰å‰åç¼€ï¼šaaaï¼Œæœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦æ˜¯3\n```\n\n### **nextæ•°ç»„ï¼š**\n\næ•°ç»„æ¯ä¸€ä½è®°å½•**åŒ¹é…ä¸²**åˆ°å½“å‰ä¸ºæ­¢çš„**æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦**\n\n```\nåŒ¹é…ä¸²ï¼ša b a b c a b a b a\n\t   0 0 1 2 0 1 2 3 4 3\n```\n\n```cpp\nvoid get_next(const string str, int* next) {\n    int j = 0;\n    next[0] = 0;\n    for (int i = 1; i < str.size(); i++) {\n        //å‰åç¼€ä¸ç›¸åŒæ€ä¹ˆå¤„ç†\n        while (j > 0 && str[i] != str[j]) j = next[j - 1];\n        //å‰åç¼€ç›¸åŒæ€ä¹ˆå¤„ç†\n        if (str[i] == str[j]) j++;     \n        \n        next[i] = j;\n    }\n}\n```\n\n### KMP\n\n```cpp\n#include <iostream>\nusing namespace std;\nvoid get_next(const string str, int* next) {\n    int j = 0;\n    next[0] = 0;\n    for (int i = 1; i < str.size(); i++) {\n        //å‰åç¼€ä¸ç›¸åŒæ€ä¹ˆå¤„ç†\n        while (j > 0 && str[i] != str[j]) j = next[j - 1];\n        //å‰åç¼€ç›¸åŒæ€ä¹ˆå¤„ç†\n        if (str[i] == str[j]) j++;     \n        \n        next[i] = j;\n    }\n}\nint kmp(const string& str, const string& ptr, const int* next) {\n    int j = 0;\n    for (int i = 0; i < str.size(); i++) {\n        while (j > 0 && str[i] != ptr[j])j = next[j - 1];\n        if (str[i] == ptr[j])j++;\n        if (j == ptr.size())return i - j + 1;\n    }\n    return -1;\n}\nint main() {\n    string str = \"ababcababcababdababcababa\";\n    string ptr = \"ababcababa\";\n    int next[13] = { 0 };\n    get_next(ptr, next);\n    cout << kmp(str, ptr, next);\n}\n```\n\n# 4 äºŒåˆ†æŸ¥æ‰¾ç®—æ³•\n\n```cpp\n##include <iostream>\nusing namespace std;\n\nint main()\n{\n\tint a[] = { 1,2,4,6,12,13,18,22,28,31 };\n\tint key = 31;//æŸ¥æ‰¾å…³é”®å­—\n\tint low = 0;\n\tint high = sizeof(a)/sizeof(a[0]);\n\n\twhile (low <= high) {\n\t\tint mid = (low + high) / 2;\n\t\tif (a[mid] == key) {\n\t\t\tcout << \"æ‰¾åˆ°\" << endl;\n\t\t\tbreak;\n\t\t}\n\t\tif (a[mid] > key)high = mid-1;\n\t\telse if (a[mid] < key)low = mid+1;\n\t}\n\tif (low > high)cout << \"æœªæ‰¾åˆ°\" << endl;\n\treturn 0;\n}\n\n```\n\n# 5 æ·±åº¦ä¼˜å…ˆæœç´¢ã€DFSã€‘\n\nåœ¨ä¸€ä¸ª wÃ—h çš„çŸ©å½¢å¹¿åœºä¸Šï¼Œæ¯ä¸€å— 1Ã—1 çš„åœ°é¢éƒ½é“ºè®¾äº†çº¢è‰²æˆ–é»‘è‰²çš„ç“·ç –ã€‚å°æ—åŒå­¦ç«™åœ¨æŸä¸€å—é»‘è‰²çš„ç“·ç –ä¸Šï¼Œä»–å¯ä»¥ä»æ­¤å¤„å‡ºå‘ï¼Œç§»åŠ¨åˆ°ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªç›¸é‚»çš„ä¸”æ˜¯é»‘è‰²çš„ç“·ç –ä¸Šã€‚ç°åœ¨ï¼Œä»–æƒ³çŸ¥é“ï¼Œé€šè¿‡é‡å¤ä¸Šè¿°ç§»åŠ¨æ‰€èƒ½ç»è¿‡çš„é»‘è‰²ç“·ç –æ•°ã€‚\n\nã€è¾“å…¥æ ¼å¼ã€‘\n\nç¬¬ 1 è¡Œä¸º hã€wï¼Œ2â‰¤wã€hâ‰¤50ï¼Œä¹‹é—´ç”±ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚  \n\nä»¥ä¸‹ä¸ºä¸€ä¸ª w è¡Œ h åˆ—çš„äºŒç»´å­—ç¬¦çŸ©é˜µï¼Œæ¯ä¸ªå­—ç¬¦ä¸ºâ€œ.â€â€œ#â€â€œ@â€ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥ä½ç½®ä¸ºé»‘è‰²çš„ç“·ç –ã€çº¢è‰²çš„ç“·ç –ï¼Œä»¥åŠå°æ—çš„åˆå§‹ä½ç½®ã€‚\n\nã€è¾“å‡ºæ ¼å¼ã€‘\n\nè¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå°æ—ä»åˆå§‹ä½ç½®å‡ºå‘å¯ä»¥åˆ°è¾¾çš„ç“·ç –æ•°ã€‚\n\nã€è¾“å…¥è¾“å‡ºæ ·ä¾‹ã€‘\n\n11 9\n\n.#.........\n\n.#.#######.\n\n.#.#.....#.\n\n.#.#.###.#.\n\n.#.#..@#.#.\n\n.#.#####.#.\n\n.#.......#.\n\n.#########.\n\n...........\n\n```cpp\n#include <iostream>\nusing namespace std;\nint m, n, x, y, nx, ny, sum = 1;\nint cx[4] = { 0,0,1,-1 };\nint cy[4] = { 1,-1,0,0 };\nchar ma[23][23];\nint mo[23][23];\nvoid dfs(int sx, int sy)\n{\n\tfor (int i = 0; i < 4; i++)\n\t{\n\t\tnx = sx + cx[i];\n\t\tny = sy + cy[i];\n\t\tif (nx >= 0 && nx <= m && ny >= 0 && ny <= n && mo[nx][ny] == 0 && ma[nx][ny] == '.')\n\t\t{\n\t\t\tsum++;\n\t\t\tmo[nx][ny] = 1;\n\t\t\tdfs(nx, ny);\n\t\t\tmo[nx][ny] = 0;\n\t\t}\n\t}\n}\nint main()\n{\n\tcin >> n >> m;\n\tfor (int i = 0; i < m; i++)\n\t{\n\t\tfor (int j = 0; j < n; j++)\n\t\t{\n\t\t\tcin >> ma[i][j];\n\t\t\tif (ma[i][j] == '@')\n\t\t\t{\n\t\t\t\tx = i;\n\t\t\t\ty = j;\n\t\t\t}\n\t\t}\n\t}\n\tdfs(x, y);\n\n\tcout << sum;\n\treturn 0;\n}\n```\n\n# 6 å¹¿åº¦ä¼˜å…ˆæœç´¢ã€BFSã€‘\n\n```cpp\nint cx[4]={0,0,-1,1};\nint cy[4]={1,-1,0,0};\nint bfs(int sx,int sy){\n    int cnt = 0;\n    q.push(node{sx,sy,0});//å‹å…¥é˜Ÿåˆ—\n    \n    while(!q.empty()){//é˜Ÿåˆ—ä¸ä¸ºç©º\n        node p=q.top();//å–å‡ºé˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ \n        q.pop();//å¼¹å‡º\n        if(p.x == ex,p.y == ey){//æ‰¾åˆ°ç»ˆç‚¹ç„¶åç›´æ¥è¿”å›è·¯å¾„çš„é•¿åº¦\n            return p.k;\n        }\n        \n        if(vis[p.x][p.y]) continue;//å·²å»è¿‡\n        \n        vis[p.x][p.y] = true;//æ ‡è®°å·²å»è¿‡\n        \n        for(int i=0;i < 4;++i){\n            int nx = x + cx[i];\n            int ny = y + cy[i];\n            if( check(nx,ny) ){\n                q.push(node{nx,ny,p.k+1});\n            }\n        }\n    }\n    return -1;//æ²¡æœ‰è·¯å¾„çš„\n}\n\n```\n\n","tags":["C++"]},{"title":"å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹","url":"/2024/03/08/å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/","content":"\n# 1 å‰åºçŸ¥è¯†\n\n## 1.1 å±€åŸŸç½‘å’Œå¹¿åŸŸç½‘\n\n**å±€åŸŸç½‘ï¼š**å°†ä¸€å®šåŒºåŸŸå†…çš„è®¾å¤‡ï¼ˆè®¡ç®—æœºã€å¤–éƒ¨è®¾å¤‡ã€æ•°æ®åº“ç­‰ï¼‰è¿æ¥èµ·æ¥å½¢æˆçš„è®¡ç®—æœºé€šä¿¡çš„ç§æœ‰ç½‘ç»œ\n\n**å¹¿åŸŸç½‘ï¼š**åˆç§°ä¸ºå¤–ç½‘å’Œå…¬ç½‘ã€‚è¿æ¥ä¸åŒåœ°åŒºå±€åŸŸç½‘æˆ–åŸåŸŸç½‘çš„è¿œç¨‹å…¬ç”¨ç½‘ç»œ\n\n## 1.2 IPåœ°å€\n\nåˆ†ä¸º`ipv4`å’Œ`ipv6`åœ°å€\n\n### 1.2.1 IPv4\n\n- ä½¿ç”¨ä¸€ä¸ª32ä½çš„æ•´å‹æ•°è¡¨ç¤ºä¸€ä¸ªIPåœ°å€ï¼Œ4å­—èŠ‚ï¼Œintå‹\n- ä½¿ç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºIPåœ°å€ï¼š`192.168.1.1`\n- åˆ†æˆäº†4ä»½ï¼Œæ¯ä»½1å­—èŠ‚(8bit)ï¼Œæœ€å¤§å€¼ä¸º255\n\nå› æ­¤ï¼Œä¸€å…±å¯ç”¨IPåœ°å€ 2^32^ ä¸ª\n\n### 1.2.2 IPv6\n\n- ä½¿ç”¨128ä½è¡¨ç¤ºä¸€ä¸ªIPåœ°å€ï¼Œ16å­—èŠ‚\n- ä½¿ç”¨å­—ç¬¦ä¸²æè¿°IPï¼š`2001:0db8:3c4d:0015:0000:0000:1a2f:1a2b`\n- åˆ†æˆäº†8ä»½ï¼Œæ¯ä»½2å­—èŠ‚ï¼Œæ¯ä¸€éƒ¨åˆ†éƒ½æŒ‰16è¿›åˆ¶è¡¨ç¤º\n\nå…±2^128^ä¸ªå¯ç”¨IPåœ°å€\n\n## 1.3 ç«¯å£\n\nç«¯å£çš„ä½œç”¨æ˜¯å®šä½ä¸»æœºä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹å¯ä»¥é€šè¿‡è¿™ä¸ªç«¯å£è¿›è¡Œç½‘ç»œé€šä¿¡\n\nç«¯å£æ˜¯ä¸€ä¸ªçŸ­æ•´å‹æ— ç¬¦å·æ•°`usigned short`ï¼Œ16ä½æœ‰æ•ˆæ•°ï¼ŒèŒƒå›´`0~65535`\n\n**æ³¨æ„ï¼š**\n\n- å¹¶ä¸æ˜¯æ‰€æœ‰è¿›ç¨‹éƒ½éœ€è¦ç»‘å®šç«¯å£ï¼Œå¦‚æœæŸä¸ªè¿›ç¨‹ä¸éœ€è¦ç½‘ç»œé€šä¿¡ï¼Œå°±æ— éœ€ç»‘å®š\n- ä¸€ä¸ªç«¯å£åªèƒ½ç»™ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œ**ä¸èƒ½å¤šè¿›ç¨‹å…¬ç”¨**\n\n## 1.4 ç½‘ç»œåˆ†å±‚æ¨¡å‹\n\n[ISO/OSIç½‘ç»œæ¨¡å‹-å“”å“©å“”å“©è®²è§£](https://www.bilibili.com/video/BV1EU4y1v7ju/?spm_id_from=333.337.search-card.all.click&vd_source=10960c964c9089624e6f92b8d20ed3e0)\n\n![image-20240308220727062](å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/image-20240308220727062.png)\n\n**æ•°æ®æµé€šè¿‡ç¨‹ï¼š**\n\n![image-20240308235500469](å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/image-20240308235500469.png)\n\n------\n\n![image-20240309000750086](å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/image-20240309000750086.png)\n\n- **ç‰©ç†å±‚**ï¼šæ•°æ®æ¯”ç‰¹æµçš„ä¼ è¾“\n- **æ•°æ®é“¾è·¯å±‚**ï¼šè´Ÿè´£å°†æ•°æ®åˆ†å¸§å’Œå°è£…æˆå¸§ï¼Œå¹¶è¿›è¡Œå·®é”™æ§åˆ¶å’Œæµé‡æ§åˆ¶ï¼Œæä¾›ä»‹è´¨è®¿é—®å’Œé“¾è·¯ç®¡ç†ã€‚\n- **ç½‘ç»œå±‚**ï¼šIPé€‰å€åŠè·¯ç”±é€‰æ‹©ã€‚\n- **ä¼ è¾“å±‚ï¼š**å»ºç«‹ç«¯åˆ°ç«¯çš„è¿æ¥\n- **ä¼šè¯å±‚**ï¼šå»ºç«‹ã€ç®¡ç†å’Œç»´æŠ¤è¡¨ç¤ºå±‚å®ä½“çš„ä¼šè¯ã€‚\n- **è¡¨ç¤ºå±‚**ï¼šæ•°æ®æ ¼å¼è½¬åŒ–ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚\n- **åº”ç”¨å±‚**ï¼šä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡ã€‚\n\n## 1.5 ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹\n\nTCPåè®®æ˜¯ä¸€ä¸ª**å¯é çš„**ã€**é¢å‘è¿æ¥çš„**æµå¼ä¼ è¾“åè®®ï¼Œæ‰€è°“çš„é¢å‘è¿æ¥å°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹\n\n![img](å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/1460000039165594.png)\n\n![img](å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/1460000039165595.png)\n\n- `SYN`ï¼šè¿æ¥è¯·æ±‚/æ¥æ”¶ æŠ¥æ–‡æ®µ\n- `seq`ï¼šå‘é€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·\n- `ACK`ï¼šç¡®è®¤æŠ¥æ–‡æ®µ\n- `ack`ï¼šç¡®è®¤å·ã€‚å¸Œæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·\n\n### 1.5.1 ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ\n\nä¸‰æ¬¡æ¡æ‰‹çš„ä½œç”¨ï¼š**ç¡®è®¤åŒæ–¹è¿æ¥æ­£å¸¸ã€‚**\n\n1. ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClient ä»€ä¹ˆéƒ½ä¸èƒ½ç¡®è®¤ï¼›Server ç¡®è®¤äº†å¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸\n2. ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šClient ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›Server ç¡®è®¤äº†ï¼šå¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸\n3. ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClient ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›Server ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸\n\nå¦‚æœä¸é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚ï¼Œä½†æ˜¯ç½‘ç»œäº§ç”Ÿäº†å»¶è¿Ÿï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¯èƒ½ä¼šè®¤ä¸ºè¿æ¥æœªèƒ½å»ºç«‹æˆåŠŸï¼Œåˆé‡æ–°å‘èµ·äº†æ–°çš„è¿æ¥è¯·æ±‚ã€‚æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ä¸¤ä¸ªè¿æ¥è¯·æ±‚éƒ½ç»™äºˆäº†å›åº”ç¡®è®¤ï¼Œå°±ä¼šå»ºç«‹ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„è¿æ¥ã€‚å¯¼è‡´èµ„æºæµªè´¹å’Œæ•°æ®æ··ä¹±ã€‚\n\n### 1.5.2 ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ\n\nå››æ¬¡æŒ¥æ‰‹çš„ä½œç”¨ï¼š**ç¡®ä¿åŒæ–¹éƒ½èƒ½å¤Ÿå®‰å…¨åœ°å…³é—­TCPè¿æ¥**\n\n 1ã€å®¢æˆ·ç«¯æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œå‘é€ FINçš„åŒ…ï¼ˆFINï¼‰ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„æ•°æ®å‘é€å®Œæ¯•ã€‚\n\n 2ã€æœåŠ¡ç«¯æ‰§è¡Œè¢«åŠ¨å…³é—­ï¼Œå‘é€ç¡®è®¤ ACK åŒ…ã€‚\n\n 3ã€æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å‘é€ FINï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æˆ‘ä¹Ÿè¦å…³é—­ã€‚\n\n 4ã€å®¢æˆ·ç«¯ç¡®è®¤æœåŠ¡ç«¯çš„ACKçš„åŒ…ï¼Œç¡®è®¤æœåŠ¡ç«¯å…³é—­ã€‚\n\n### 1.5.3 2MSLçš„ä½œç”¨ï¼Ÿ\n\n**MSLæ˜¯æŠ¥æ–‡çš„æœ€å¤§ç”Ÿå­˜æ—¶é—´**ï¼ˆå•å‘æ•°æ®ä¼ è¾“æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œæ ¹æ®è·³æ•°è®¾å®šå€¼ï¼‰\n\nTIME_WAITçŠ¶æ€ä¹Ÿå°±æ˜¯2MSLç­‰å¾…çŠ¶æ€ã€‚\n\nå®¢æˆ·ç«¯å‘å‡ºçš„ç¬¬å››æ¬¡æŒ¥æ‰‹ACKæŠ¥æ–‡ï¼Œæœ€å¤§æœ‰æ•ˆæ—¶é—´ä¸ºMSLï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»åœ¨MSLçš„æ—¶é—´å†…è¾¾åˆ°æœåŠ¡ç«¯ã€‚è¶…è¿‡è¿™ä¸ªæ—¶é—´æœåŠ¡ç«¯å°±ä¼šé‡ä¼ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹çš„FINæŠ¥æ–‡ï¼Œç›¸åŒçš„å¿…é¡»åœ¨MSLæ—¶é—´å†…åˆ°è¾¾ã€‚\n\nè‹¥å‡ºç°ACKæŠ¥æ–‡ä¸¢å¤±ï¼Œå®¢æˆ·ç«¯åœ¨å‘å‡ºç¬¬å››æ¬¡æŒ¥æ‰‹ACKæŠ¥æ–‡å’Œæ¥æ”¶åˆ°é‡ä¼ çš„ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹FINæŠ¥æ–‡çš„æ—¶é—´é—´éš”å°±ä¸º2MSLã€‚\n\næ‰€ä»¥ç­‰å¾…2MSLæ˜¯ç¡®ä¿è¿æ¥åŒæ–¹å…³é—­å®Œæˆã€‚\n\n# 2 ç½‘ç»œç¼–ç¨‹\n\n![img](å¥—æ¥å­—Soketç½‘ç»œç¼–ç¨‹/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3BvbGFyaXNfMTE5,size_16,color_FFFFFF,t_70.png)\n\n## 2.1 åˆ›å»ºsocket\n\n```cpp\nint socket(int domain, int type, int protocal);\n```\n\n- **domain** é€šä¿¡çš„åè®®å®¶æ—\n  - <u>PF_INETï¼šipv4</u>\n  - PF_INET6ï¼šipv6\n  - PF_LOCALï¼šæœ¬åœ°é€šä¿¡çš„åè®®æ—\n  - PF_PACKETï¼šå†…æ ¸åº•å±‚åè®®æ—\n  - PF_IPXï¼šIPX Novellåè®®æ—\n-  **type** æ•°æ®ä¼ è¾“çš„ç±»å‹\n  - SOCK_STREAMï¼šé¢å‘è¿æ¥çš„socket\n  - SOCK_DGRAMï¼šæ— è¿æ¥çš„socket\n- **protocal** æœ€ç»ˆä½¿ç”¨çš„åè®®\n  - IPPROTO_TCP\n  - IPPROTO_UDP\n  - å¯ä»¥å¡«0ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«ç±»å‹\n\n```cpp\nsocket(PF_INET, SOCK_STREAM, 0);\nsocket(PF_INET, SOCK_STREAM, IPPROTO_TCP)//ç­‰æ•ˆ\n\nsocket(PF_INET, SOCK_DEGRAM, 0);\nsocket(PF_INET, SOCK_DEGRAM, IPPROTO_UDP);\n```\n\nè¿”å›å€¼ï¼š\n\n- æˆåŠŸï¼šè¿”å›å¯¹åº”çš„sockfdæ–‡ä»¶æè¿°ç¬¦\n- å¤±è´¥ï¼šè¿”å›-1\n\n## 2.2 ä¸»æœºå­—èŠ‚åºå’Œç½‘ç»œå­—èŠ‚åº\n\nå¤§ç«¯åºï¼šä½ä½å­—èŠ‚å­˜æ”¾åœ¨é«˜ä½ï¼Œé«˜ä½å­—èŠ‚å­˜æ”¾åœ¨ä½ä½\n\n```cpp\n0x001\t0x12\n0x002\t0x34\n0x003\t0x56\nå­˜æ”¾123456\n```\n\nå°ç«¯åºï¼šä½ä½å­—èŠ‚å­˜æ”¾åœ¨ä½ä½ï¼Œé«˜ä½å­—èŠ‚å­˜æ”¾åœ¨é«˜ä½\n\n```cpp\n0x001\t0x56\n0x002\t0x34\n0x003\t0x12\n```\n\nå°ç«¯åºæ›´ä¾¿äºCPUè¿›è¡Œå¤„ç†ï¼Œå¤§ç«¯åºä¾¿äºäººç±»æŸ¥çœ‹\n\n### 2.2.0 ç›¸å…³å‡½æ•°\n\nä¸åŒçš„ä¸»æœºå¯èƒ½æ˜¯é‡‡ç”¨ä¸åŒçš„å­—èŠ‚åºï¼Œå› æ­¤å‡ºç°äº†**ç½‘ç»œå­—èŠ‚åº**ï¼Œæœ¬è´¨ä¸Šæ˜¯å¤§ç«¯åº\n\n#### 2.2.0.1 htons/htonl\n\n```cpp\n#include <arpa/inet.h>ã€€\nuint16_t htons(uint16_t hostshort);\nuint32_t htonl(uint32_t hostlong);\n\nuint16_t ntohs(uint16_t netshort);\nuint32_t ntohl(uint32_t netlong);\n```\n\n- hï¼šhost ä¸»æœº\n- toï¼šè½¬æ¢\n- nï¼šnetwork ç½‘ç»œ\n- sï¼šshortï¼ˆ2å­—èŠ‚ï¼Œ16ä½æ•´æ•°ï¼‰\n- lï¼šlongï¼ˆ4å­—èŠ‚ï¼Œ32ä½æ•´æ•°ï¼‰\n\né•¿æ•´å‹ç”¨äºè½¬æ¢IPåœ°å€ï¼ŒçŸ­æ•´å‹ç”¨äºè½¬æ¢ç«¯å£å·ï¼Œä½†å¹³æ—¶IPåœ°å€éƒ½æ˜¯ç”¨ç‚¹åˆ†åè¿›åˆ¶å½¢å¼è¡¨ç¤ºï¼Œå› æ­¤ï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–å‡½æ•°å°†ç‚¹åˆ†åè¿›åˆ¶è½¬æ¢ä¸ºæ•´æ•°å‹\n\n#### 2.2.0.2 inet_pton å’Œ inet_ntop\n\npï¼špeople readäººç±»å¯è¯»\n\n```cpp\nint inet_pton(int af, const char *src, void *dst);\n```\n\n- afï¼šåè®®æ—ï¼ŒAF_INETæˆ–AF_INET6\n- srcï¼šç‚¹åˆ†åè¿›åˆ¶çš„åœ°å€\n- dstï¼šæ¥æ”¶è½¬æ¢åçš„æ•°æ®\n\nè¿”å›å€¼ï¼š\n\n- æˆåŠŸï¼š1\n- å¤±è´¥ï¼šè´Ÿæ•°\n- æ ¼å¼ä¸å¯¹ï¼š0\n\n```cpp\nchar *inet_ntop(int af, const void *src, char *dst, size_t len);\n```\n\n- afï¼šAF_INETæˆ–AF_INET6\n- srcï¼šæŒ‡å‘ç½‘ç»œå­—èŠ‚åºçš„æŒ‡é’ˆ\n- dstï¼šæŒ‡å‘è½¬æ¢åçš„å­—ç¬¦ä¸²æŒ‡é’ˆ\n- lenï¼šç›®æ ‡å¤§å°ï¼Œé˜²æ­¢æº¢å‡º\n\nè¿”å›å€¼ï¼š\n\n- æˆåŠŸï¼šç»“æœæŒ‡é’ˆ\n- å‡ºé”™ï¼šNULL\n\n\n\nIPv4åœ°å€é‡‡ç”¨4å­—èŠ‚çš„æ•´æ•°å­˜æ”¾ï¼Œç«¯å£å·ç”¨2å­—èŠ‚çš„æ•´æ•°å­˜æ”¾ï¼ˆ0~65536ï¼‰\n\n### 2.2.1 ç»“æ„ä½“\n\n#### 2.2.1.1 sockaddr ç»“æ„ä½“\n\nå­˜æ”¾åè®®æ—ã€ç«¯å£å’Œåœ°å€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯`connect()`å’ŒæœåŠ¡ç«¯`bind()`éœ€è¦æ­¤ç»“æ„ä½“\n\n```cpp\nstruct sockaddr{\n\tunsigned short sa_family; \n    //åè®®æ—ï¼ŒAF_INET,å’Œsocket()çš„ç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒï¼Œ\n    //AFå’ŒPFæ•°å€¼ä¸Šæ²¡åŒºåˆ«ï¼Œå¯ä»¥æ··ç”¨\n    unsigned char sa_data[14];\n    //14å­—èŠ‚çš„ç«¯å£å’Œåœ°å€\n}\n```\n\n#### 2.2.1.2 sockaddr_in ç»“æ„ä½“\n\nsockaddrç»“æ„ä½“æ“ä½œä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å‡ºç°äº†sockaddr_in\n\nä¸¤è€…å¤§å°ç›¸ç­‰ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢\n\n```cpp\nstruct sockaddr_in{\n\tunsigned short sin_family;//åè®®æ—\n    unsigned short sin_port;//16ä½ç«¯å£å·\n    struct in_addr sin_addr; //32ä½çš„åœ°å€\n    unsigned char sin_zero[8]; //æœªä½¿ç”¨ï¼Œä¸ºäº†ä¿æŒä¸sockaddré•¿åº¦ä¸€æ ·è€Œè®¾ç½®\n}\n\nstruct in_addr{\n    unsigned int s_addr;//32ä½çš„åœ°å€\n}\n```\n\n## 2.3 bindå‡½æ•°\n\n```cpp\nint bind(int sockfd, struct sockaddr* addr, socklen_t addrlen);\n```\n\n- **sockfd**ï¼šæœåŠ¡ç«¯ç›‘å¬æ–‡ä»¶æè¿°ç¬¦\n- **addr**ï¼šåŒ…å«ipåœ°å€å’Œç«¯å£å·çš„sockaddrç»“æ„ä½“\n- **addrlen**ï¼šç¬¬äºŒä¸ªå‚æ•°ï¼ˆç»“æ„ä½“ï¼‰çš„é•¿åº¦ï¼ˆsizeofï¼‰\n\n## 2.4 listenå‡½æ•°\n\n```cpp\nint listen(int sockfd, int backlog);\n```\n\n- **sockfd**ï¼šæœåŠ¡ç«¯æ–‡ä»¶æè¿°ç¬¦\n- **backlog**ï¼šæœ€å¤§è¿æ¥æ•°ç›®\n\n## 2.5 connectå‡½æ•°\n\n```cpp\nint connect(int sockfd, struct sockaddr* addr, socklen_t addrlen);\n```\n\n- **sockfd**ï¼šå®¢æˆ·ç«¯é€šä¿¡æ–‡ä»¶æè¿°ç¬¦\n- **addr**ï¼šåŒ…å«ipåœ°å€å’Œç«¯å£å·çš„sockaddrç»“æ„ä½“\n- **addrlen**ï¼šç¬¬äºŒä¸ªå‚æ•°ï¼ˆç»“æ„ä½“ï¼‰çš„é•¿åº¦ï¼ˆsizeofï¼‰\n\n## 2.6 acceptå‡½æ•°\n\n```cpp\nint accept(int sockfd, struct sockaddr* addr, socklen_t* addrlen);\n```\n\n- sockfdï¼šæœåŠ¡ç«¯ç›‘å¬æ–‡ä»¶æè¿°ç¬¦\n- addrï¼šä¼ å‡ºå‚æ•°ï¼Œè®°å½•è¿æ¥æˆåŠŸçš„å®¢æˆ·ç«¯ä¿¡æ¯åœ°å€å’Œç«¯å£å·\n- addrlenï¼šç¬¬äºŒä¸ªå‚æ•°çš„é•¿åº¦\n\nè¿”å›å€¼ï¼š\n\n- æˆåŠŸï¼šæœåŠ¡ç«¯ç”¨äºé€šä¿¡çš„æ–‡ä»¶æè¿°ç¬¦\n- å¤±è´¥ï¼š-1\n\n## 2.7 readã€writeå‡½æ•°\n\n```cpp\nssize_t write(int fd, const void *buf, size_t count);      // å†™æ•°æ® \nssize_t read(int fd, void *buf, size_t count);             // è¯»æ•°æ®\n```\n\nç½‘ç»œI/Oæ“ä½œä¸æ­¢æ˜¯readå’Œwrite\n\n```cpp\nread()/write()\nrecv()/send()\nreadv()/writev()\nrecvmsg()/sendmsg()\nrecvfrom()/sendto()\n```\n\nå£°æ˜å¦‚ä¸‹\n\n```cpp\nssize_t read(int fd, void *buf, size_t count);\nssize_t write(int fd, const void *buf, size_t count);\n \nssize_t send(int sockfd, const void *buf, size_t len, int flags);\nssize_t recv(int sockfd, void *buf, size_t len, int flags);\n \nssize_t sendto(int sockfd, const void *buf, size_t len, int flags,\n\t\t\t  const struct sockaddr *dest_addr, socklen_t addrlen);\nssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,\n\t\t\t\tstruct sockaddr *src_addr, socklen_t *addrlen);\n \nssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);\nssize_t recvmsg(int sockfd, struct msghdr *msg, int flags);\n```\n\n## 2.8 closeå‡½æ•°\n\n```cpp\nint close(int fd);\n```\n\n## 2.9 å®ä¾‹\n\n### 2.9.1 å®¢æˆ·ç«¯\n\n```cpp\n#include<stdio.h>\n#include<stdlib.h>\n#include<errno.h>\n#include<string.h>\n#include<sys/types.h>\n#include<netinet/in.h>\n#include<sys/socket.h>\n#include<sys/wait.h>\n \n#define SERVER_PORT 8888\n \nint main()\n{\n \n   //å®¢æˆ·ç«¯åªéœ€è¦ä¸€ä¸ªå¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦ï¼Œç”¨äºå’ŒæœåŠ¡å™¨é€šä¿¡\n   int serverSocket;\n    \n   //æè¿°æœåŠ¡å™¨çš„socket\n   struct sockaddr_in serverAddr;\n    \n   char sendbuf[200]; //å­˜å‚¨ å‘é€çš„ä¿¡æ¯ \n   char recvbuf[200]; //å­˜å‚¨ æ¥æ”¶åˆ°çš„ä¿¡æ¯ \n    \n   int iDataNum;\n   \n \n  /*********************************************************************/\n  /*                          1-åˆ›å»ºå®¢æˆ·ç«¯å¥—æ¥å­—                        */\n  /*********************************************************************/\n   if((serverSocket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP)) < 0)\n   {\n      perror(\"socket\");\n      return 1;\n   }\n    \n   serverAddr.sin_family = AF_INET;\n   serverAddr.sin_port = htons(SERVER_PORT);\n    \n   //æŒ‡å®šæœåŠ¡å™¨ç«¯çš„ipï¼Œæœ¬åœ°æµ‹è¯•ï¼š127.0.0.1\n   //inet_addr()å‡½æ•°ï¼Œå°†ç‚¹åˆ†åè¿›åˆ¶IPè½¬æ¢æˆç½‘ç»œå­—èŠ‚åºIP\n   serverAddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n  \n  /*********************************************************************/\n  /*                          2-è¿æ¥æœåŠ¡ç«¯                              */\n  /*********************************************************************/  \n   if(connect(serverSocket, (struct sockaddr *)&serverAddr, sizeof(serverAddr)) < 0)\n   {\n      perror(\"connect\");\n      return 1;\n   }\n    \n   printf(\"è¿æ¥åˆ°ä¸»æœº...\\n\");\n    \n  /*********************************************************************/\n  /*                          3-å‘é€æ¥æ”¶æ¶ˆæ¯                            */\n  /*********************************************************************/ \n   while(1)\n   {\n      printf(\"å‘é€æ¶ˆæ¯:\");\n      scanf(\"%s\", sendbuf);\n      printf(\"\\n\");\n      write(serverSocket, sendbuf, strlen(sendbuf)); //å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯\n      if(strcmp(sendbuf, \"quit\") == 0) break;\n      printf(\"è¯»å–æ¶ˆæ¯:\");\n      recvbuf[0] = '\\0';\n      iDataNum = read(serverSocket, recvbuf, 200); //æ¥æ”¶æœåŠ¡ç«¯å‘æ¥çš„æ¶ˆæ¯\n      recvbuf[iDataNum] = '\\0';\n      printf(\"%s\\n\", recvbuf);\n   }\n \n   close(serverSocket);\n   \n   return 0;\n}\n```\n\n### 2.9.2 æœåŠ¡ç«¯\n\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <errno.h>\n#include <string.h>\n#include <sys/types.h>\n#include <netinet/in.h>\n#include <sys/socket.h>\n#include <sys/wait.h>\n#include <arpa/inet.h>\n \n#define SERVER_PORT 8888\n \n/*\nç›‘å¬åï¼Œä¸€ç›´å¤„äºaccepté˜»å¡çŠ¶æ€ï¼Œ\nç›´åˆ°æœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œ\nå½“å®¢æˆ·ç«¯å¦‚closeåï¼Œæ–­å¼€ä¸å®¢æˆ·ç«¯çš„è¿æ¥\n*/\n \nint main()\n{\n   \n   //è°ƒç”¨socketå‡½æ•°è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦\n   int serverSocket;\n    \n   //å£°æ˜ä¸¤ä¸ªå¥—æ¥å­—sockaddr_inç»“æ„ä½“å˜é‡ï¼Œåˆ†åˆ«è¡¨ç¤ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨\n   struct sockaddr_in server_addr;\n   struct sockaddr_in clientAddr;\n    \n   int addr_len = sizeof(clientAddr);\n   int clientSocket;\n   char buffer[200]; //å­˜å‚¨ å‘é€å’Œæ¥æ”¶çš„ä¿¡æ¯ \n   int iDataNum;\n \n   \n  /*********************************************************************/\n  /*                          1-åˆ›å»ºæœåŠ¡ç«¯å¥—æ¥å­—                        */\n  /*********************************************************************/\n   if((serverSocket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP)) < 0)\n   {\n      perror(\"socket\");\n      return 1;\n   }\n   memset(&server_addr,0, sizeof(server_addr));\n    \n   //åˆå§‹åŒ–æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ï¼Œå¹¶ç”¨htonså’Œhtonlå°†ç«¯å£å’Œåœ°å€è½¬æˆç½‘ç»œå­—èŠ‚åº\n   server_addr.sin_family = AF_INET;\n   server_addr.sin_port = htons(SERVER_PORT);\n    \n   //ipå¯æ˜¯æ˜¯æœ¬æœåŠ¡å™¨çš„ipï¼Œä¹Ÿå¯ä»¥ç”¨å®INADDR_ANYä»£æ›¿ï¼Œä»£è¡¨0.0.0.0ï¼Œè¡¨æ˜æ‰€æœ‰åœ°å€\n   server_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n \n \n \n   //å¯¹äºbindï¼Œacceptä¹‹ç±»çš„å‡½æ•°ï¼Œé‡Œé¢å¥—æ¥å­—å‚æ•°éƒ½æ˜¯éœ€è¦å¼ºåˆ¶è½¬æ¢æˆ(struct sockaddr *)\n   //bindä¸‰ä¸ªå‚æ•°ï¼šæœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦\n  /*********************************************************************/\n  /*                          2-æœåŠ¡ç«¯ç»‘å®šç›‘å¬çš„IPå’Œpor                  */\n  /*********************************************************************/  \n   if(bind(serverSocket, (struct sockaddr *)&server_addr, sizeof(server_addr)) < 0)\n   {\n      perror(\"connect\");\n      return 1;\n   }\n    \n \n  /*********************************************************************/\n  /*                          3-æœåŠ¡ç«¯å¼€å§‹ç›‘å¬                          */\n  /*********************************************************************/ \n   if(listen(serverSocket, 5) < 0)//å¼€å¯ç›‘å¬ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æœ€å¤§ç›‘å¬æ•°\n   {\n      perror(\"listen\");\n      return 1;\n   }\n   \n  /*********************************************************************/\n  /*                          4-æ¥æ”¶å‘é€æ¶ˆæ¯                            */\n  /*********************************************************************/  \n  printf(\"ç›‘å¬ç«¯å£: %d\\n\", SERVER_PORT);\n  \n  //è°ƒç”¨acceptå‡½æ•°åï¼Œä¼šè¿›å…¥é˜»å¡çŠ¶æ€\n  //acceptè¿”å›ä¸€ä¸ªå¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè¿™æ ·æœåŠ¡å™¨ç«¯ä¾¿æœ‰ä¸¤ä¸ªå¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ\n  //serverSocketå’Œclientã€‚\n  //serverSocketä»ç„¶ç»§ç»­åœ¨ç›‘å¬çŠ¶æ€ï¼Œclientåˆ™è´Ÿè´£æ¥æ”¶å’Œå‘é€æ•°æ®\n  //clientAddræ˜¯ä¸€ä¸ªä¼ å‡ºå‚æ•°ï¼Œacceptè¿”å›æ—¶ï¼Œä¼ å‡ºå®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£å·\n  //addr_lenæ˜¯ä¸€ä¸ªä¼ å…¥-ä¼ å‡ºå‚æ•°ï¼Œä¼ å…¥çš„æ˜¯è°ƒç”¨è€…æä¾›çš„ç¼“å†²åŒºçš„clientAddrçš„é•¿åº¦ï¼Œä»¥é¿å…ç¼“å†²åŒºæº¢å‡ºã€‚\n  //ä¼ å‡ºçš„æ˜¯å®¢æˆ·ç«¯åœ°å€ç»“æ„ä½“çš„å®é™…é•¿åº¦ã€‚\n  //å‡ºé”™è¿”å›-1\n  \n  clientSocket = accept(serverSocket, (struct sockaddr*)&clientAddr, (socklen_t*)&addr_len);\n  \n  if(clientSocket < 0)\n  {\n     perror(\"accept\");\n     \n  }\n   \n  printf(\"ç­‰å¾…æ¶ˆæ¯...\\n\");\n  \n  //inet_ntoa ipåœ°å€è½¬æ¢å‡½æ•°ï¼Œå°†ç½‘ç»œå­—èŠ‚åºIPè½¬æ¢ä¸ºç‚¹åˆ†åè¿›åˆ¶IP\n  //è¡¨è¾¾å¼ï¼šchar *inet_ntoa (struct in_addr);\n  printf(\"IP is %s\\n\", inet_ntoa(clientAddr.sin_addr)); //æŠŠæ¥è®¿é—®çš„å®¢æˆ·ç«¯çš„IPåœ°å€æ‰“å‡ºæ¥\n  printf(\"Port is %d\\n\", htons(clientAddr.sin_port)); \n   \n  while(1)\n  {\n       buffer[0] = '\\0';\n       iDataNum = read(clientSocket, buffer, 1024);\n       if(iDataNum < 0)\n       {\n          continue;\n       }\n       buffer[iDataNum] = '\\0';\n       if(strcmp(buffer, \"quit\") == 0) break;\n       printf(\"æ”¶åˆ°æ¶ˆæ¯: %s\\n\", buffer);\n       printf(\"å‘é€æ¶ˆæ¯:\");\n       scanf(\"%s\", buffer);\n       write(clientSocket, buffer, strlen(buffer)); //æœåŠ¡ç«¯ä¹Ÿå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ \n       if(strcmp(buffer, \"quit\") == 0) break; //è¾“å…¥quitåœæ­¢æœåŠ¡ç«¯ç¨‹åº \n  }\n \n   close(clientSocket);\n   close(serverSocket);\n   \n   return 0;\n    \n}\n```\n\n","tags":["C++"]},{"title":"STL","url":"/2024/03/08/STL/","content":"\n# 1 STLåˆè¯†\n\n## 1.1 STLåŸºæœ¬æ¦‚å¿µ\n\nSTLï¼ˆStandard Template Libraryï¼‰**æ ‡å‡†æ¨¡æ¿åº“**\n\nSTLä»å¹¿ä¹‰ä¸Šåˆ†ä¸ºï¼š**å®¹å™¨(container) ç®—æ³•(algorithm) è¿­ä»£å™¨(iterator)**\n\n**å®¹å™¨**å’Œ**ç®—æ³•**ä¹‹é—´é€šè¿‡**è¿­ä»£å™¨**è¿›è¡Œæ— ç¼è¿æ¥\n\n## 1.2 STLå…­å¤§ç»„ä»¶\n\n**å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€é€‚é…å™¨ã€ç©ºé—´é…ç½®å™¨**\n\n- å®¹å™¨ï¼šå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚vectorã€listã€dequeã€setã€mapç­‰ï¼Œç”¨æ¥å­˜æ”¾æ•°æ®\n- ç®—æ³•ï¼šå„ç§å¸¸ç”¨ç®—æ³•ï¼Œå¦‚sortã€findã€copyã€for_eachç­‰\n- è¿­ä»£å™¨ï¼šæ‰®æ¼”äº†å®¹å™¨ä¸ç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚\n- ä»¿å‡½æ•°ï¼šè¡Œå˜ç±»ä¼¼å‡½æ•°ï¼Œå¯ä½œä¸ºç®—æ³•çš„æŸç§ç­–ç•¥\n- é€‚é…å™¨ï¼šç”¨æ¥ä¿®é¥°å®¹å™¨æˆ–ä»¿å‡½æ•°æˆ–è¿­ä»£å™¨æ¥å£çš„ä¸œè¥¿ã€‚\n- ç©ºé—´é…ç½®å™¨ï¼šè´Ÿè´£ç©ºé—´é…ç½®å’Œç®¡ç†\n\n## 1.3 ç®—æ³•å’Œè¿­ä»£å™¨\n\n### 1.3.1 ç®—æ³•\n\n- è´¨å˜ç®—æ³•ï¼šè¿ç®—è¿‡ç¨‹ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œå¦‚æ‹·è´ã€æ›¿æ¢ã€åˆ é™¤ç­‰\n- éè´¨å˜ç®—æ³•ï¼šè¿ç®—è¿‡ç¨‹ä¸ä¼šæ”¹å˜åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œå¦‚æŸ¥æ‰¾ï¼Œè®¡æ•°ï¼Œéå†ç­‰\n\n### 1.3.2 è¿­ä»£å™¨\n\næ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰å±äºè‡ªå·±çš„è¿­ä»£å™¨ï¼ˆè¿­ä»£å™¨ä¸æŒ‡é’ˆéå¸¸ç±»ä¼¼ï¼‰\n\n![image-20240308164731980](STL/image-20240308164731980.png)\n\nå¸¸ç”¨çš„å®¹å™¨è¿­ä»£å™¨ç±»å‹ä¸º**åŒå‘è¿­ä»£å™¨**å’Œ**éšæœºè®¿é—®è¿­ä»£å™¨**\n\n```cpp\n#include <vector>\n#include <algorithm>\nvoid myPrint(int val){\n    cout << val;\n}\nvoid main(){\n    vector<int> a;\n    a.push_back(10);\n    vector<int>::iterator itBegin = v.begin();\n    vector<int>::iterator itEnd = v.end();\n    //ç¬¬ä¸€ç§éå†æ–¹å¼\n    while(itBegin!=itEnd){\n        cout<<*itBegin<<endl;\n        itBegin++;\n    }\n    //ç¬¬äºŒç§éå†æ–¹å¼\n    for(vector<int>::iterator it = v.begin(); it!=v.end(); it++){\n        cout<<*it<<endl;\n    }\n    //ç¬¬ä¸‰ç§éå†æ–¹å¼\n    for_each(v.begin(), v.end(), myPrint);\n}\n```\n\n# 2 STLå¸¸ç”¨å®¹å™¨\n\n## 2.1 stringå®¹å™¨\n\nstringæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»ï¼Œæ˜¯C++é£æ ¼çš„å­—ç¬¦ä¸²\n\n**string å’Œ char *çš„åŒºåˆ«**\n\n- char *æ˜¯ä¸€ä¸ªæŒ‡é’ˆ\n- stringæ˜¯ä¸€ä¸ªç±»ï¼Œç±»çš„å†…éƒ¨å°è£…äº†char *ï¼Œç®¡ç†è¿™ä¸ªå­—ç¬¦ä¸²\n\n### 2.1.1 stringçš„æ„é€ å‡½æ•°\n\n- `string();`\t\t\t\t\t\t\t\t\t//åˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²\n- `string(const char* s);`\t\t//ä½¿ç”¨å­—ç¬¦ä¸²såˆå§‹åŒ–\n- `string(const string& str);`//ä½¿ç”¨stringå¯¹è±¡åˆå§‹åŒ–\n- `string(int n, char c);`\t\t//ä½¿ç”¨nä¸ªå­—ç¬¦cåˆå§‹åŒ–\n\n```cpp\n//æ‹¬å·æ³•\nstring s1;\nstring s2(\"vicczyq\");\nstring s3(s2);\nstring s4(10,'1');\n\n//æ˜¾ç¤ºæ³•\nstring s1 = string(\"vicczyq\");\n\n//éšå¼è½¬æ¢æ³•\nstring s1 = \"vicczyq\";\nstring s2 = s1;\n```\n\n### 2.1.2 stringèµ‹å€¼æ“ä½œ\n\n```cpp\nstring &operator=(const char *s);\nstring &operator=(const string &s);\nstring &operator=(char c);//æŠŠä¸€ä¸ªå­—ç¬¦èµ‹å€¼ç»™string\nstring &assign(const char *s);\nstring &assign(const char *s, int n);//æŠŠå‰nä¸ªå­—ç¬¦èµ‹å€¼ç»™string\nstring &assign(const string &s);\nstring &assign(int n,char c);\n```\n\n```cpp\nstring s1,s2,s3;\ns1 = \"vicczyq\";\ns2 = s1;\ns3 = 'a';\ns1.assign(\"vicczyq\");\ns1.assign(\"vicczyq\",2);\ns1.assign(s2);\ns1.assgin(10,'a');\n```\n\n### 2.1.3 stringæ‹¼æ¥\n\n```cpp\nstring &operator+=(const char *s);\nstring &operator+=(const char c);\nstring &operator+=(const string &s);\nstring &append(const char *s);\nstring &append(const char c);\nstring &append(const string &s);\nstring &append(const string &s, int pos, int n);\n//å­—ç¬¦ä¸²sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦è¿æ¥åˆ°æœ«å°¾\n```\n\n### 2.1.4 stringæŸ¥æ‰¾å’Œæ›¿æ¢\n\n```cpp\nint find(const string &str, int pos = 0) const;\n\n//æŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®\nint find(const char* s,int pos=0, int n)const;\n\n//æŸ¥æ‰¾stræœ€åå‡ºç°çš„ä½ç½®\nint rfind(const string &str, int pos = npos)const;\n\n//ä»poså¼€å§‹æŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®\nint rfind(const char* s,int pos, int n)const;\n```\n\n```cpp\nstring &replace(int pos, int n, const string &str);\n//ä»poså¼€å§‹nä¸ªå­—ç¬¦æ›¿æ¢ä¸ºstr\n```\n\n**å·§è®°ï¼š**â€œå­—ç¬¦ä¸²åœ¨å‰ä¸ºæŸ¥æ‰¾ï¼Œåœ¨åä¸ºæ›¿æ¢ï¼Œæ‰€ä»¥æ˜¯æŸ¥æ‰¾å’Œæ›¿æ¢â€\n\n### 2.1.5 stirngå­—ç¬¦ä¸²æ¯”è¾ƒ\n\næ ¹æ®å­—ç¬¦ä¸²ASCIIç å€¼è¿›è¡Œæ¯”è¾ƒ\n\n**ç­‰äº**è¿”å›0ï¼Œ**å¤§äº**è¿”å›1ï¼Œ**å°äº**è¿”å›-1\n\nå‡½æ•°åŸå‹ï¼š\n\n- int compare(const string &s)const;\n- int compare(const char *s);\n\n```cpp\nstring s1 = \"vicczyq\", s2=\"vicczyq\";\nif(s1.compare(s2)==0)cout<<\"yes!\"<<endl;\n```\n\nä¹Ÿå¯ä»¥ç”¨è¿ç®—ç¬¦é‡è½½\n\n```cpp\nif(s1==s2)cout<<\"yes\"<<endl;\n```\n\n### 2.1.6 stringå­—ç¬¦å­˜å–\n\næœ‰ä¸¤ç§æ–¹å¼ï¼š\n\n- `char &operator[](int n)`\n- `char &at(int n)`\n\nå–ï¼š\n\n```cpp\nstring s1=\"vicczyq\";\ncout<<s1[0]<<endl;\ncout<<s1.at(0)<<endl;\n```\n\nå­˜ï¼š\n\n```cpp\ns1[0]='V';\ns1.at(0)='v';\n```\n\n### 2.1.7 stringæ’å…¥å’Œåˆ é™¤\n\n- `string& insert(int pos, const char* s)`\t\t\t//æ’å…¥å­—ç¬¦ä¸²\n- `string& inster(int pos, const string &str)`\n- `string& insert(int pos, int n, char c)`\t\t\t//åœ¨æŒ‡å®šä½ç½®æ’å…¥nä¸ªc\n- `string& erase(int pos, int n=npos)`\t\t\t\t\t//åˆ é™¤ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦\n\n### 2.1.8 stringå­ä¸²è·å–\n\n`string substr(int pos=0, int n=npos)const;`\n\n//ä»poså¼€å§‹ï¼Œå¤šå°‘ä¸ªå­—ç¬¦ä½œä¸ºå­ä¸²ï¼Œè¿”å›\n\n### 2.1.9 stringè¿­ä»£å™¨\n\n```cpp\n\tstring str = \"vicczyq\";\n\tfor(string::iterator it = str.begin(); it != str.end(); it++){\n\t\tcout << *it << endl;//vicczyq\n\t}\n\tfor (string::reverse_iterator it = str.rbegin(); it != str.rend(); it++){\n\t\tcout << *it << endl;//qyzcciv\n\t}\n```\n\n## 2.2 vectorå®¹å™¨\n\nvectoræ•°æ®ç»“æ„å’Œæ•°ç»„éå¸¸ç›¸ä¼¼ï¼Œä¹Ÿæˆä¸º**å•ç«¯æ•°ç»„**\n\næ™®é€šæ•°ç»„ç”¨çš„æ˜¯é™æ€ç©ºé—´ï¼Œè€Œvectoré‡‡ç”¨**åŠ¨æ€æ‰©å±•**\n\n### 2.2.0 åŠ¨æ€æ‰©å±•\n\nåŠ¨æ€æ‰©å±•å¹¶ä¸æ˜¯åœ¨å…ƒç©ºé—´çš„åŸºç¡€ä¸Šç»­æ¥æ–°ç©ºé—´ï¼Œè€Œæ˜¯æ‰¾åˆ°æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œå°†åŸæ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ï¼Œå¹¶é‡Šæ”¾åŸç©ºé—´ã€‚\n\nå¯èƒ½ä¼šå¤šæ‰©å±•ä¸€äº›ï¼Œå…·ä½“æ˜¯STLå†…éƒ¨ç®—æ³•å®ç°ã€‚\n\n### 2.2.1 åŸºæœ¬ç»“æ„\n\né‡‡ç”¨æ¨¡æ¿ç±»å®ç°çš„ã€‚\n\n![image-20240309123617832](STL/image-20240309123617832.png)\n\n```cpp\nvector<T> v;\t//é»˜è®¤æ„é€ \nvector<T> v1(v.begin(),v.end());//åŒºé—´æ‹·è´æ„é€ \nvector<T> v2(n, elem);//å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«\nvector<T> v3(const vector &vec);//æ‹·è´æ„é€ \n```\n\n### 2.2.2 èµ‹å€¼æ“ä½œ\n\n```cpp\nvector &operator=(const vector &vec);//é‡è½½ç­‰å·èµ‹å€¼\nassign(beg, end); //å°†[beg,end)ä¹‹é—´çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™è‡ªèº«\nassign(n, elem);//å°†nä¸ªelemèµ‹å€¼ç»™æœ¬èº«\n```\n\n```cpp\nvector<int> v1(10,100),v2;\nv2 = v1;\nv2.assign(v1.begin(),v1.end());\nv2.assign(10,100);\n```\n\n### 2.2.3 å®¹é‡å’Œå¤§å°\n\n```cpp\nempty();\t\t\t\t\t//åˆ¤æ–­æ˜¯å¦ä¸ºç©º\ncapacity()\t\t\t\t\t//å®¹å™¨å®¹é‡\nsize()\t\t\t\t\t\t//å®¹å™¨ä¸­å…ƒç´ ä¸ªæ•°\nresize(int num);\t\t//é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜çŸ­ï¼Œæœ«å°¾è¶…å‡ºçš„å…ƒç´ ä¼šè¢«åˆ é™¤ï¼Œè‹¥å˜é•¿åˆ™ä»¥é»˜è®¤å€¼å¡«å……\nresize(int num, elem);\t//é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜çŸ­ï¼Œæœ«å°¾è¶…å‡ºçš„å…ƒç´ ä¼šè¢«åˆ é™¤ï¼Œè‹¥å˜é•¿åˆ™ä»¥elemå¡«å……æ–°ä½ç½®\n```\n\n### 2.2.4 æ’å…¥å’Œåˆ é™¤\n\n```cpp\npush_back(elem);\t\t\t\t\t//å°¾éƒ¨æ’å…¥elem\npop_back();\t\t\t\t\t\t\t//åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ \ninsert(const_iterator pos, elem);\t\t\t//å‘è¿­ä»£å™¨æŒ‡å‘çš„posä½ç½®æ’å…¥elem\ninsert(const_iterator pos, int n, elem);\t//å‘è¿­ä»£å™¨æŒ‡å‘çš„ä½ç½®æ’å…¥nä¸ªelem\nerase(const_iterator pos);\t\t\t\t\t//åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ \nerase(const_iterator start, const_iterator end);//åˆ é™¤åŒºé—´å†…çš„å…ƒç´ \nclear();\t\t\t\t\t\t\t\t\t//åˆ é™¤å®¹å™¨å†…æ‰€æœ‰å…ƒç´ \n```\n\n### 2.2.5 æ•°æ®å­˜å–\n\n```cpp\nat(int idx);\t//è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®\noperator[];\t\t\nfront();\t\t//è¿”å›ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ \nback();\t\t\t//è¿”å›æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ \n```\n\n### 2.2.6 vectoräº’æ¢å®¹å™¨\n\n```cpp\nswap(vec);\t\t//å°†vecä¸æœ¬èº«çš„å…ƒç´ è¿›è¡Œäº’æ¢\n```\n\n**å®é™…ç”¨é€”ï¼š**å·§ç”¨swapå¯ä»¥æ”¶ç¼©å†…å­˜ç©ºé—´\n\nè§£é‡Šï¼š\n\n```cpp\nfor(int i=0; i<100000; i++){\n\tv.push_back(i);\n}\ncout << \"vçš„å®¹é‡ï¼š\"<< v.capacity() << endl;\ncout << \"vçš„å¤§å°ï¼š\"<< v.size() << endl;\n```\n\n![image-20240309131309430](STL/image-20240309131309430.png)\n\nè™½ç„¶åªå­˜å…¥äº†10000ä¸ªæ•°æ®ï¼Œä½†æ˜¯vectorä¼šå¤šæ‰©å±•ä¸€äº›å†…å­˜ç©ºé—´\n\n```cpp\n//æ­¤æ—¶ä½¿ç”¨\nv.resize(3);\ncout << \"vçš„å®¹é‡ï¼š\"<< v.capacity() << endl;\ncout << \"vçš„å¤§å°ï¼š\"<< v.size() << endl;\n```\n\n![image-20240309131553262](STL/image-20240309131553262.png)\n\nå®¹é‡å¹¶ä¸ä¼šå˜å°ï¼Œè¿™æ ·ä¼šå¯¼è‡´**ç©ºé—´è¿‡äºæµªè´¹**\n\n```cpp\nvector<int>(v).swap(v);\n```\n\n![image-20240309132257980](STL/image-20240309132257980.png)\n\n`vector<int>(v1)`ä¸ºåŒ¿åå¯¹è±¡ï¼Œé€šè¿‡æ‹·è´æ„é€ åˆ›å»ºï¼Œåˆ›å»ºæ—¶ä¼šæŒ‰ç…§vçš„å…ƒç´ ä¸ªæ•°è¿›è¡Œè®¾ç½®å®¹é‡ï¼Œå†å’Œvè¿›è¡Œäº¤æ¢ã€‚\n\nå¦‚æœæ–°åˆ›å»ºä¸€ä¸ªæ™®é€šå¯¹è±¡æ¥äº¤æ¢ä¼šå­˜åœ¨æ›´å¤§çš„ç©ºé—´æµªè´¹ï¼Œä½†æ˜¯åŒ¿åå¯¹è±¡å°±å¯ä»¥è§£å†³\n\n**åŒ¿åå¯¹è±¡ï¼š**å½“å‰è¡Œæ‰§è¡Œå®Œæˆï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œå›æ”¶\n\n### 2.2.7 vectoré¢„ç•™ç©ºé—´\n\n```cpp\nreserve(int len);//å®¹å™¨é¢„ç•™lenä¸ªå…ƒç´ é•¿åº¦ï¼Œé¢„ç•™ä½ç½®ä¸ä¼šåˆå§‹åŒ–ï¼Œå…ƒç´ ä¸å¯è®¿é—®\n```\n\nå¯ä»¥å‡å°‘å†…å­˜é‡æ–°åˆ†é…çš„æ¬¡æ•°\n\n```cpp\n\tvector<int> v;\n\tint num = 0;\n\tint* p = NULL;\n\tfor (int i = 0; i < 1e6; i++) {\n\t\tv.push_back(i);\n\t\tif (p != &v[0]) {\n\t\t\tnum++;\n\t\t\tp = &v[0];\n\t\t}\n\t}\n\tcout << num << endl;//æ­¤æ—¶éœ€è¦å¤šæ¬¡åŠ¨æ€æ‰©å±•\n```\n\n```cpp\n\tvector<int> v;\n\tv.reserve(1e6);//è¿›è¡Œç©ºé—´é¢„ç•™æ“ä½œ\n\tint num = 0;\n\tint* p = NULL;\n\tfor (int i = 0; i < 1e6; i++) {\n\t\tv.push_back(i);\n\t\tif (p != &v[0]) {\n\t\t\tnum++;\n\t\t\tp = &v[0];\n\t\t}\n\t}\n\tcout << num << endl;//æ­¤æ—¶åªéœ€è¦1æ¬¡å†…å­˜åˆ†é…\n```\n\n## 2.3 dequeå®¹å™¨\n\nåŒç«¯æ•°ç»„ï¼Œå¯ä»¥å¯¹å¤´ç«¯å’Œå°¾ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤\n\n**ä¸vectorçš„åŒºåˆ«ï¼š**\n\n- vectorå¯¹äºå¤´éƒ¨æ’å…¥æ•ˆç‡ä½ï¼Œdequeå¯¹å¤´éƒ¨çš„æ’å…¥å’Œåˆ é™¤é€Ÿåº¦å¿«\n- vectorè®¿é—®å…ƒç´ çš„é€Ÿåº¦æ¯”dequeå¿«ï¼ˆä¸å„è‡ªçš„å®ç°åŸç†æœ‰å…³ï¼‰\n\n![image-20240309152351353](STL/image-20240309152351353.png)\n\n**å®ç°åŸç†ï¼š**\n\n![image-20240309152642579](STL/image-20240309152642579.png)\n\nä¸­ç©ºæ°”ç»´æŠ¤æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€ï¼Œä½¿å¾—deque**åƒ**ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´\n\nç¼“å†²åŒºä¸­å­˜æ”¾çœŸå®çš„æ•°æ®ã€‚\n\n### 2.3.1 æ„é€ å‡½æ•°\n\n```cpp\ndeque<T> deq0;\ndeque<T> deq1(deq0.begin(),deq0.end());\ndeque<T> deq2(n, elem);\ndeque<T> deq3(const deque &deq);\n```\n\n### 2.3.2 èµ‹å€¼æ“ä½œ\n\n```cpp\ndeque &operator(const deque &deq);\nassign(beg,end);\nassign(n, elem);\n```\n\n### 2.3.3 å®¹é‡å’Œå¤§å°\n\n```cpp\nempty();\nsize();\nresize(int num);\nresize(int num, elem);\n```\n\ndequeä¸åƒvectoræœ‰capacity\n\n### 2.3.4 æ’å…¥å’Œåˆ é™¤\n\nä¸¤ç«¯æ’å…¥åˆ é™¤æ“ä½œï¼š\n\n```cpp\npush_back(elem);\npush_front(elem);\npop_back(elem);\npush_front(elem);\n```\n\næŒ‡å®šä½ç½®çš„æ“ä½œ\n\n```cpp\ninsert(const_iterator pos, elem);//è¿”å›æ–°æ•°æ®çš„ä½ç½®\ninsert(const_iterator pos, n, elem);//æ— è¿”å›å€¼\ninsert(const_iterator pos, const_iterator begin, const_iterator end);//æ’å…¥[begin,end)ä¹‹é—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼\nclear();\nerase(const_iterator pos);\nerase(const_iterator beg,const_iterator end);\n```\n\n### 2.3.5 æ•°æ®å­˜å–\n\n```cpp\nat(int idx);\noperator[];\nfront();\nback();\n```\n\n```cpp\ndeque<int> deq;\ndeq.push_front(100);\ndeq.push_back(200);\ndeq.front()=0;\ndeq[0]=0;\ndeq.at(0)=0;\ncout<<deq[0]<<deq.at(0)<<deq.front()<<deq.back();\n```\n\n## 2.4 stack å®¹å™¨\n\nå…ˆè¿›åå‡ºï¼ˆFILOï¼‰æ•°æ®ç»“æ„â€”â€”**æ ˆ**\n\nåªæœ‰æ ˆé¡¶å…ƒç´ æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤æ ˆ**ä¸å…è®¸è¢«éå†**\n\n![image-20240309161606134](STL/image-20240309161606134.png)\n\n```cpp\næ„é€ å‡½æ•°ï¼š\n    stack<T> stk;//é»˜è®¤æ„é€ \n\tstack<T> stk(const stack &stk);//æ‹·è´æ„é€ \nèµ‹å€¼æ“ä½œï¼š\n    stack& operator=(const stack &stk);\næ•°æ®å­˜å–ï¼š\n    push(elem);\n\tpop();\n\ttop();\nç©ºé—´å’Œå¤§å°ï¼š\n    empty();\n\tsize();\n```\n\n## 2.5 queue å®¹å™¨\n\nå…ˆè¿›å…ˆå‡ºFIFIOæ•°æ®ç»“æ„â€”â€”**é˜Ÿåˆ—**\n\n![image-20240309162359585](STL/image-20240309162359585.png)\n\nåªæœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾æ‰èƒ½è¢«å¤–ç•Œä½¿ç”¨ï¼Œ**ä¸èƒ½éå†**\n\n```cpp\næ„é€ å‡½æ•°ï¼š\n    queue<T> que;\n\tqueue<T> que(const queue &que);\nèµ‹å€¼æ“ä½œï¼š\n    queue& operator=(const queue &que);\næ•°æ®å­˜å–ï¼š\n    push(elem);\t\t//å…¥é˜Ÿ\n\tpop();\t\t\t//å‡ºé˜Ÿ\n\tback();\t\t\t//è¿”å›æœ€åä¸€ä¸ªå…ƒç´ \n\tfront();\t\t//è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ \nå¤§å°æ“ä½œï¼š\n    empty();\n\tsize();\n```\n\n## 2.6 listå®¹å™¨\n\nå°†æ•°æ®è¿›è¡Œé“¾å¼å­˜å‚¨ï¼Œé“¾è¡¨\n\né“¾è¡¨æ˜¯ç”±ä¸€ç³»åˆ—çš„ç»“ç‚¹ç»„æˆçš„ï¼Œç»“ç‚¹=**æ•°æ®åŸŸ**+**æŒ‡é’ˆåŸŸ**\n\nSTLä¸­çš„é“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨\n\n![image-20240309224548260](STL/image-20240309224548260.png)\n\né“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨çš„è¿­ä»£å™¨åªæ”¯æŒå‰ç§»å’Œåç§»ï¼Œå±äº**åŒå‘è¿­ä»£å™¨**\n\nlistçš„ä¼˜ç‚¹ï¼š\n\n- é‡‡ç”¨åŠ¨æ€çš„å†…å­˜åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜çš„æµªè´¹å’Œæº¢å‡º\n- é“¾è¡¨æ’å…¥å’Œåˆ é™¤ååˆ†æ–¹ä¾¿ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ \n\nlistçš„ç¼ºç‚¹ï¼š\n\n- ç©ºé—´å’Œæ—¶é—´è€—è´¹è¾ƒå¤§\n\n\n\nListæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œæ’å…¥å’Œåˆ é™¤æ“ä½œä¸ä¼šé€ æˆåŸæœ‰çš„listè¿­ä»£å™¨å¤±æ•ˆï¼Œvectorä¼šé€ æˆå¤±æ•ˆ\n\nï¼ˆç”±äºvectoræ’å…¥çš„æ—¶å€™å¦‚æœcapacityå¤§å°ä¸å¤Ÿçš„è¯å°±ä¼šé‡æ–°ç”³è¯·ä¸€ä¸ªç©ºé—´ï¼Œå¹¶å°†æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ï¼Œè€ŒåŸæœ¬çš„è¿­ä»£å™¨ä»»æŒ‡å‘åŸç©ºé—´åœ°å€ï¼‰\n\n### 2.6.1 listæ„é€ å‡½æ•°\n\n```cpp\nlist<T> lst;\t\t\t\t\t\t\t//é»˜è®¤æ„é€ \nlist<T> lst1(lst.begin(), lst.end());\t//å°†lst[begin,end)åŒºé—´çš„å…ƒç´ æ‹·è´\nlist<T> lst2(n, elem);\t\t\t\t\t//å°†nä¸ªelemæ‹·è´ç»™lst2\nlist<T> lst3(const list &lst);\t\t\t//æ‹·è´æ„é€ å‡½æ•°\n```\n\n### 2.6.2 listèµ‹å€¼å’Œäº¤æ¢\n\n```cpp\nassign(lst.begin(),lst.end());\nassign(n , elem);\nlist &operator=(const list &lst);\nswap(lst);\t\t\t\t\t\t\t//å°†lstä¸æœ¬èº«å…ƒç´ è¿›è¡Œäº¤æ¢\n```\n\n### 2.6.3 listç©ºé—´å’Œå¤§å°\n\n```\nsize();\nempty();\nresize(num);\nresize(num, elem);\n```\n\n### 2.6.4 listæ’å…¥å’Œåˆ é™¤\n\n```cpp\npush_back(elem);\npop_back();\npush_front(elem);\npop_front();\ninsert(const_operator pos, elem);\ninsert(const_operator pos, n, elem);\ninsert(const_operator pos, const_operator beg, const_operator end);\nclear();\nerase(const_operator beg, const_operator end);\nerase(const_operator pos);\nremove(elem);//åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ä¸elemå€¼åŒ¹é…çš„å…ƒç´ \n```\n\n### 2.6.5 æ•°æ®å­˜å–\n\n```cpp\nfront();\t//è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ \nback();\t\t//è¿”å›æœ€åä¸€ä¸ªå…ƒç´ \n```\n\n### 2.6.6 liståè½¬å’Œæ’åº\n\n```cpp\nreverse();\n```\n\n```cpp\nlst.sort();\n//lstä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨ï¼Œä¸å¯ä»¥ç”¨æ ‡å‡†çš„æ’åºç®—æ³•\n//ä½†æ˜¯ä¸€èˆ¬å†…éƒ¨éƒ½ä¼šæœ‰æä¾›\n```\n\n## 2.7 set/multiset/unordered_setå®¹å™¨\n\næ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨æ’å…¥æ—¶å€™è‡ªåŠ¨æ’åº\n\n**æœ¬è´¨ï¼š**\n\nsetã€multisetå±äº**å…³è”å¼å®¹å™¨**ï¼Œåº•å±‚ç»“æ„éƒ½æ˜¯äºŒå‰æ ‘å®ç°\n\n`set`ä¸å…è®¸å®¹å™¨å†…æœ‰é‡å¤çš„å…ƒç´ ï¼Œ`multiset`å…è®¸å®¹å™¨å†…æœ‰é‡å¤å…ƒç´ ï¼Œ`unordered_set`ä¸æ’åºè¦å»é‡\n\n### 2.7.1 setçš„æ„é€ å’Œèµ‹å€¼\n\n```cpp\nset<T> st;\nset<T> st1(st);\n```\n\n```cpp\nset& operator=(const set &st);\n```\n\n### 2.7.2 setå¤§å°å’Œäº¤æ¢\n\n```cpp\nsize();\nempty();\nswap(st);\t//äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨\n```\n\nä¸å…è®¸é‡æ–°æŒ‡å®šå¤§å°resize\n\n### 2.7.3 setæ’å…¥å’Œåˆ é™¤\n\n```cpp\ninsert(elem);\nerase(iterator pos);\nerase(iterator begin, iterator end);\nerase(elem);\t//åˆ é™¤å€¼ä¸ºelemçš„å…ƒç´ \nclear();\n```\n\n### 2.7.4 setæŸ¥æ‰¾å’Œç»Ÿè®¡\n\n```cpp\nfind(key);\t//æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨åˆ™è¿”å›å…ƒç´ è¿­ä»£å™¨ï¼Œä¸å­˜åœ¨åˆ™è¿”å›st.end();\ncount(key);\t//ç»Ÿè®¡keyå…ƒç´ çš„ä¸ªæ•°\n```\n\n### 2.7.5 setå®¹å™¨æ’åº\n\né»˜è®¤æ’åºè§„åˆ™ä¸ºä»å°åˆ°å¤§ï¼Œ\n\nåˆ©ç”¨ä»¿å‡½æ•°æ”¹å˜æ’åºè§„åˆ™ã€‚\n\n**1.å†…ç½®æ•°æ®ç±»å‹ï¼š**\n\n```cpp\nclass MyCompare{\npublic:\n    bool operator()(int v1, int v2){//é‡‡ç”¨ä»¿å‡½æ•°\n        return v1 > v2;\n    } \n}\nvoid main(){\n    set<int,MyCompare> s;\n    for(set<int,MyCompare>::iterator it=s.begin();it!=s.end();it++){\n        cout<<*it<<endl;\n    }\n}\n```\n\n**2.è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼š**\n\n```cpp\nclass Person{\npublic:\n   Person(string name,int age){\n       m_Name = name;\n       m_Age = age;\n   }\n   string m_Name;\n   int m_Age;\n}\nclass comparePerson{\npublic:\n    bool operator()(const Person &p1, const Person &p2){\n        return p1.m_Age>p2.m_Age;\n    }\n}\nvoid main(){\n    set<Person,comparePerson> s;\n    s.insert(Person(\"vicczyq\",18));\n    \n}\n```\n\n## 2.8 map/multimapå®¹å™¨\n\n- mapä¸­å…¨éƒ¨å…ƒç´ éƒ½æ˜¯pairå¯¹ç»„\n- pairç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºkey(é”®å€¼)ï¼Œèµ·åˆ°ç´¢å¼•ä½œç”¨ï¼Œç¬¬äºŒä¸ªä¸ºvalue(å®å€¼)\n- æ‰€æœ‰å…ƒç´ éƒ½ä¼šæ ¹æ®å…ƒç´ çš„é”®(key)**è‡ªåŠ¨æ’åº**\n\nmapã€multimapå±äºå…³è”å¼å®¹å™¨ï¼Œåº•å±‚æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚\n\nmapä¸å…è®¸é‡å¤keyå€¼ï¼Œmultimapå¯ä»¥æœ‰é‡å¤key\n\n### 2.8.1 mapæ„é€ å’Œèµ‹å€¼\n\n```cpp\nmap<string,int> mp;\nmap<string,int> mp1(mp);\n```\n\n```cpp\nmap<string,int>& operator=(const map &mp);\n```\n\n### 2.8.2 mapçš„å¤§å°å’Œäº¤æ¢\n\n```cpp\nsize();\nempty();\nswap(st);\n```\n\n### 2.8.3 mapçš„æ’å…¥å’Œåˆ é™¤\n\n```cpp\ninsert(pair);\t//å¦‚ä¸‹ä»£ç æ®µï¼Œæœ‰å‡ ç§æ–¹æ³•\nclear();\nerase(iterator pos);\nerase(iterator beg, iterator end);\nerase(key);\n```\n\n```cpp\nm.insert(pair<int,int>(1,10));\t//ç¬¬ä¸€ç§\nm.insert(make_pair(1,10));\t\t//ç¬¬äºŒç§\nm[1]=10;\t\t\t\t\t\t//ç¬¬ä¸‰ç§ï¼škeyä¸º4,valueä¸º10\n```\n\nä¸å»ºè®®é‡‡ç”¨ç¬¬ä¸‰ç§ï¼Œä½†å¯ä»¥åˆ©ç”¨keyè®¿é—®value\n\n**åŸå› ï¼š**å¦‚æœæ²¡æœ‰èµ‹å€¼valueï¼Œç›´æ¥ç”¨`m[1]`ï¼Œè¿™æ ·ä»–ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªm[1]=0\n\n### 2.8.4 mapçš„æŸ¥æ‰¾å’Œç»Ÿè®¡\n\n```cpp\nfind(key);\t//æŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ è¿­ä»£å™¨ï¼Œå¦‚æœæ²¡æŸ¥åˆ°è¿”å›mp.end();\ncount(key); //ç»Ÿè®¡keyå…ƒç´ ä¸ªæ•°\n```\n\n### 2.8.5 mapçš„æ’åº\n\nåˆ©ç”¨ä»¿å‡½æ•°æ”¹å˜æ’åºè§„åˆ™\n\n```cpp\nclass myCompare{\npublic:\n\tbool operator()(int v1, int v2){\n\t\treturn v1>v2;\n\t}\n}\n\nmap<int,myCompare> mp;\n```\n\n# 3 å‡½æ•°å¯¹è±¡\n\nåœ¨`algorithm`ç®—æ³•åº“ä¸­æœ‰è®¸å¤šå‡½æ•°ï¼Œå¦‚sortã€for_eachã€find_ifç­‰\n\néƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\n\n```cpp\nbool Find(const int &x){\n\treturn x==3;\n}\nint main(){\n\tint a[10]={1,2,3,4,5,6,7,8,9,10};\n\tcout << *(find_if(a,a+10,Find));\n}\n```\n\nè¿™é‡ŒæŸ¥æ‰¾çš„å›ºå®šå€¼æ˜¯**3**ï¼Œä½†æ˜¯å¦‚æœä¸å›ºå®šå‘¢ï¼Œå°±éœ€è¦æŠŠä»–å½“åšä¸€ä¸ªå˜é‡\n\n**è§£å†³æ–¹æ³•ï¼š**\n\n- ç»™å‡½æ•°å†åŠ ä¸€ä¸ªå½¢å‚ï¼šä½†æ˜¯è¿™é‡Œä¼ çš„æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œå½¢å‚èµ‹å€¼ä¸äº†\n- ä½œä¸ºå±€éƒ¨å˜é‡ï¼šä¸èƒ½åœ¨è°ƒç”¨çš„æ—¶å€™ä¼ å…¥ï¼Œæ‰©å±•æ€§ä¸å¼º\n- ä½œä¸ºå…¨å±€å˜é‡ï¼šç»´æŠ¤èµ·æ¥ä¸æ–¹ä¾¿\n- **æˆå‘˜å˜é‡ï¼šå¯ä»¥åœ¨æ„é€ é‡Œä¼ å‚ï¼Œå°†å‚æ•°ä¿æŠ¤åˆ°æˆå‘˜å˜é‡ï¼Œæ˜“äºç»´æŠ¤**\n\n```cpp\ntemplate<typename T> class Find{\npublic:\n    T num;\n    Find(const T& n){\n        num = n;\n    }\n    bool operator()(const T& x){\n        return x==num;\n    }\n}\n```\n\n## 3.1 å‡½æ•°å¯¹è±¡æ¦‚å¿µ\n\n- é‡è½½**å‡½æ•°è°ƒç”¨æ“ä½œç¬¦**çš„ç±»ï¼Œå…¶å¯¹è±¡ç§°ä¸º**å‡½æ•°å¯¹è±¡**\n- å‡½æ•°å¯¹è±¡ä½¿ç”¨é‡è½½çš„()æ—¶ï¼Œè¡Œä¸ºç±»ä¼¼äºå‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå«**ä»¿å‡½æ•°**\n\n**æœ¬è´¨ï¼š**\n\nå‡½æ•°å¯¹è±¡æ˜¯ä¸€ä¸ªç±»ï¼Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°\n\n```cpp\n//å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨ï¼Œå¯ä»¥æœ‰å‚æ•°å’Œè¿”å›å€¼\nclass myAdd{\npublic:\n\tint operator()(int v1, int v2){\n\t\treturn v1+v2;\n\t}\n}\n\nmyAdd myadd;\ncout << myadd(10,10) << endl;\n\n//å‡½æ•°å¯¹è±¡è¶…å‡ºäº†æ™®é€šå‡½æ•°çš„æ¦‚å¿µï¼Œå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€\nclass myPrint{\npublic:\n    myPrint(){\n        this->count=0;\n    }\n    void operator()(string &a){\n        cout << a << endl;\n        count++;\n    }\n \tint count = 0;//è‡ªå·±å†…éƒ¨çŠ¶æ€\n}\n\n//å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’\n```\n\n## 3.2 è°“è¯\n\nè¿”å›**boolç±»å‹**çš„**ä»¿å‡½æ•°**ç§°ä¸º**è°“è¯**\n\nä¸€å…ƒè°“è¯ï¼šoperatoræ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°\n\näºŒå…ƒè°“è¯ï¼šoperatoræ¥å—çš„æ˜¯ä¸¤ä¸ªå‚æ•°\n\n```cpp\nclass myPrint{//ä¸€å…ƒè°“è¯\npublic:\n\tbool operator()(string &a){\n\t\t//\n\t}\n}\n\nclass myCompare{//äºŒå…ƒè°“è¯\npublic:\n    bool operator()(int &a,int &b){\n        return a>b;\n    }\n}\n\nvoid main(){\n    vector<int> a;\n\t//ä¸€ç³»åˆ—çš„æ’å…¥æ“ä½œ   \n    sort(a.begin(),a.end(),myCompare());\n}\n```\n\n## 3.3 å†…å»ºå‡½æ•°å¯¹è±¡\n\n**åˆ†ç±»ï¼š**\n\n- ç®—æ•°ä»¿å‡½æ•°\n- å…³ç³»ä»¿å‡½æ•°\n- é€»è¾‘ä»¿å‡½æ•°\n\nä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡çš„ä¼šåï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶`#include <functional>`\n\n### 3.3.1 ç®—æ•°ä»¿å‡½æ•°\n\n```cpp\ntemplate<typename T> T plus<T>\t\t\t//åŠ æ³•ä»¿å‡½æ•°\ntemplate<typename T> T minus<T>\t\t\t//å‡æ³•ä»¿å‡½æ•°\ntemplate<typename T> T multiplies<T>\t//ä¹˜åŠ ä»¿å‡½æ•°\ntemplate<typename T> T divides<T>\t\t//é™¤æ³•ä»¿å‡½æ•°\ntemplate<typename T> T modulus<T>\t\t//å–æ¨¡ä»¿å‡½æ•°\ntemplate<typename T> T negate<T>\t\t//å–åä»¿å‡½æ•°ï¼ˆä¸€å…ƒï¼‰\n```\n\n```cpp\n#include <functional>\nvoid main(){\n    nagate<int> n1;\n    n1(50);//å–å\n    plus<int> n2;\n    n2(10,20);//ç›¸åŠ \n}\n```\n\n### 3.3.2 å…³ç³»ä»¿å‡½æ•°\n\n```cpp\ntemplate<typename T> bool equal_to<T>\t\t//ç­‰äº\ntemplate<typename T> bool not_equal_to<T>\t//ä¸ç­‰äº\ntemplate<typename T> bool greater<T>\t\t//å¤§äº\ntemplate<typename T> bool greater_equal<T>\t//å¤§äºç­‰äº\ntemplate<typename T> bool less<T>\t\t\t//å°äº\ntemplate<typename T> bool less_equal<T>\t\t//å°äºç­‰äº\n```\n\n```cpp\n#include <functional>\nvoid main(){\n    sort(a, a+10, greater<int>());\n}\n```\n\n### 3.3.3 é€»è¾‘ä»¿å‡½æ•°\n\n```cpp\ntemplate<typename T> bool logical_and<T>\t//ä¸\ntemplate<typename T> bool logical_or<T>\t\t//æˆ–\ntemplate<typename T> bool logical_not<T>\t//é\n```\n\n# 4  ç®—æ³•\n\nä¸»è¦ç”±`algorithm`ã€`functional`ã€`numeric`ç»„æˆ\n\n- `<algorihtm>`ï¼šSTLä¸­æœ€å¤§çš„ä¸€ä¸ªï¼Œæ¶‰åŠåˆ°æ¯”è¾ƒã€äº¤æ¢ã€æŸ¥æ‰¾ã€éå†ã€å¤åˆ¶ã€ä¿®æ”¹ç­‰\n- `<functional>`ï¼šå®šä¹‰äº†ä¸€äº›æ¨¡æ¿ç±»ï¼Œç”¨äºå£°æ˜å‡½æ•°å¯¹è±¡\n- `<numeric>`ï¼šä½“ç§¯å¾ˆå°ï¼ŒåªåŒ…æ‹¬å‡ ä¸ªåºåˆ—ä¸Šé¢è¿›è¡Œç®€å•æ•°å­¦ç®—æ•°è¿ç®—çš„æ¨¡æ¿å‡½æ•°\n\n## 4.1 éå†ç®—æ³•\n\n- `for_each`ï¼šéå†å®¹å™¨\n- `transform`ï¼šæ¬è¿å®¹å™¨åˆ°å¦å¤–ä¸€ä¸ªå®¹å™¨ä¸­\n\n### 4.1.1 for_each\n\n```cpp\nfor_each(iterator beg, iterator end, _func);\n```\n\n```cpp\n#include <algorithm>\n#include <vector>\nusing namespace std;\n//æ™®é€šå‡½æ•°æ–¹å¼\nvoid print01(int &val){\n    cout<<val<<endl;\n}\n//ä»¿å‡½æ•°\nclass print02{\npublic:\n    void operator()(int &val){\n        cout<<val<<endl;\n    }\n}\n\nvoid main(){\n    vector<int> vec;\n    for(int i=0;i<10;i++){\n    \tvec.push_back(i);\n    }\n    for_each(vec.begin(),vec.end(), print01);//æ™®é€šå‡½æ•°æ–¹å¼\n    for_each(vec.begin(),vec.end(), print02());//ä»¿å‡½æ•°æ–¹å¼(å‡½æ•°å¯¹è±¡æ–¹å¼)\n}\n```\n\n### 4.1.2 transform\n\næ¬è¿å®¹å™¨åˆ°å¦å¤–ä¸€ä¸ªå®¹å™¨ä¸­\n\n```cpp\ntransform(iterator beg1, iterator end1, iterator beg2, _func);\n```\n\n_funcå¯ä»¥å®ç°åœ¨æ¬è¿è¿‡ç¨‹ä¸­å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ç”¨**æ™®é€šå‡½æ•°**æˆ–**å‡½æ•°å¯¹è±¡**\n\n```cpp\n#include <algorithm>\n#include <vector>\nusing namespace std;\nclass Transform{\npublic:\n    int operator()(int v){\n        return v;\n    }\n}\n\nvoid main(){\n    vector<int> vec;\n    for(int i=0;i<10;i++)vec.push_back(i);\n    \n    vector<int> vTarget;\n    vTarget.resize(10);\n    transform(vec.begin(),vec.end(),vTarget.begin(),Transform());\n}\n```\n\n## 4.2 æŸ¥æ‰¾ç®—æ³•\n\n- `find`ï¼šæŸ¥æ‰¾å…ƒç´ \n- `find_if`ï¼šæŒ‰æ¡ä»¶æŸ¥æ‰¾\n- `adjacent_find`ï¼šæŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ \n- `binary_search`ï¼šäºŒåˆ†æŸ¥æ‰¾æ³•\n- `count`ï¼šç»Ÿè®¡å…ƒç´ ä¸ªæ•°\n- `count_if`ï¼šæŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°\n\n### 4.2.1 find\n\næŸ¥æ‰¾æŒ‡å®šå…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šå…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨.end()\n\n```cpp\nfind(iterator beg, iterator end, value)\n```\n\n```cpp\nclass Person{\npublic:\n    string m_Name;\n    int m_Age;\n    Person(string &name, int &age){\n        m_Name=name;\n        m_Age=age;\n    }\n    bool operator==(const Person &p){\n        if(m_Name==p.m_name && m_Age==p.m_Age){\n            return true;\n        }\n    }\n}\nvoid main(){\n    //ã€‚ã€‚ã€‚\n    vector<int>::iterator it =find(vec.begin(),vec.end(),Person(\"bbb\",18));\n    //ã€‚ã€‚ã€‚\n}\n```\n\n### 4.2.2 find_if\n\n```cpp\nfind_if(iterator beg, iterator end, _Pred);\n```\n\næŸ¥æ‰¾å…ƒç´ ï¼Œæœ‰è¿‡å­˜åœ¨è¿”å›è¿­ä»£å™¨ï¼Œä¸å­˜åœ¨è¿”å›end()\n\n```cpp\n#include <functional>\n#include <algorithm>\n#include <vector>\nusing namespace std;\nclass GreaterFive{\npublic:\n    bool operator()(int val){\n        return val>5;\n    }\n}\nfind_if(vec.begin(),vec.end(),GreaterFive());\n//æ­¤æ—¶ä¸èƒ½ç”¨å†…ç½®çš„greaterï¼Œå› ä¸ºgreateræ˜¯äºŒå…ƒ\n```\n\n### 4.2.3 adjacent_find\n\næŸ¥æ‰¾ç›¸é‚»çš„é‡å¤å…ƒç´ \n\n```cpp\niterator &adjacent_find(iterator beg, iterator end,);\n```\n\nè¿”å›ç›¸é‚»å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨\n\n### 4.2.4 binary_search\n\näºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›å€¼ä¸ºboolï¼ŒæŸ¥æ‰¾æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨\n\n```cpp\nbool binary_search(iterator beg, iterator end, value);\n```\n\n### 4.2.5 count\n\nç»Ÿè®¡å…ƒç´ ä¸ªæ•°ï¼Œè¿”å›å€¼ä¸ºæ•´æ•°å‹\n\n```cpp\ncount(iterator beg, iterator end, value);\n```\n\n### 4.2.6 count_if\n\næŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°\n\n```cpp\ncount(iterator beg, iterator end, _Pred);\n```\n\n_Predä¸ºè°“è¯\n\n```cpp\nclass MyCount{\npublic:\n\tbool operator()(int val){\n\t\treturn val>5;\n\t}\n}\n\nvector<int> vec;\nfor(int i=0;i<10;i++)vec.push_back(i);\nint c = count(vec.begin(), vec.end(), myCount());\ncout << \"vecä¸­å¤§äº5çš„å…ƒç´ ä¸ªæ•°:\" << c <<endl;\n```\n\n## 4.3 æ’åºç®—æ³•\n\n### 4.3.1 sort\n\n```cpp\nsort(iterator beg, iterator end, _Pred);\n```\n\n_Predé€‰å¡«ï¼Œè°“è¯ï¼Œé»˜è®¤ä¸ºå‡åºæ’åº\n\n```cpp\nclass mySort{\npublic:\n    bool operator()(int &a, int &b){\n        return a>b;\n    }\n}\nvector<int> vec;\nfor(int i=0;i<10;i++)vec.push_back(i);\nsort(vec.begin(),vec.end(),greater<int>());//å†…ç½®ä»¿å‡½æ•°\nsort(vec.begin(),vec.end(),mySort());//è‡ªå®šä¹‰ä»¿å‡½æ•°\n```\n\n### 4.3.2 random_shuffle\n\næ´—ç‰Œï¼ŒæŒ‡å®šèŒƒå›´å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº\n\n```cpp\n#include <ctime>\nsrand((unsigned int)time(NULL));//éšæœºæ•°ç§å­\nrandom_shuffle(iterator beg, iterator end);\n```\n\n### 4.3.3 merge\n\nå°†ä¸¤ä¸ªå®¹å™¨åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦å¤–ä¸€ä¸ªå®¹å™¨\n\n```cpp\nmerge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest_beg);\n```\n\n**æ³¨æ„ï¼š**ä¸¤ä¸ªå®¹å™¨å¿…é¡»æ˜¯**æœ‰åºçš„**\n\n```cpp\nvector<int> v1,v2,vTarget;\nfor(int i=0; i<10;i++){\n\tv1.push_back(i);\n\tv2.push_back(i+1);\n}\nvTarget.resize(20);\nmerge(v1.begin(),v1.end(),v2.begin(),v2.end(),vTarget.begin());\n```\n\nè¾“å‡ºï¼š0,1,1,2,2,3,3,4,4,5.......\n\n### 4.3.4 reverse\n\nåè½¬\n\n```cpp\nreverse(iterator beg, iterator end);\n```\n\n## 4.4 æ‹·è´å’Œæ›¿æ¢\n\n### 4.4.1 copy\n\n```cpp\ncopy(iterator beg, iterator end, iterator dest_beg);\n```\n\n### 4.4.2 replace\n\n```cpp\nreplace(iterator beg, iterator end, old_value, new_value);\n```\n\n### 4.4.3 replace_if\n\n```cpp\nreplace_if(iterator beg, iterator end, _Pred, new_value);\n```\n\n### 4.4.4 swap\n\n```cpp\nswap(container c1, container c2);\n```\n\næ³¨æ„ï¼šå®¹å™¨å¿…é¡»ä¸ºåŒç§ç±»å‹\n\n## 4.5ç®—æ•°ç”Ÿæˆç®—æ³•\n\nå¤´æ–‡ä»¶`#include <numeric>`\n\n### 4.5.1 accumulate\n\n```cpp\naccumulate(iterator beg, iterator end, value);\n//valueä¸ºèµ·å§‹å€¼\n```\n\n```cpp\nvector<int> vec;\nfor(int i =0;i<10;i++)vec.push_back(i);\nint n = accumulate(vec.begin(),vec.end(),0);\ncout << n << endl;\n```\n\n### 4.5.2 fill\n\nå‘å®¹å™¨å†…å¡«å……æŒ‡å®šçš„å®¹å™¨\n\n```cpp\nfill(iterator beg, iterator end, value);\n```\n\n## 4.6 é›†åˆç®—æ³•\n\nå®¹å™¨**å¿…é¡»æœ‰åº**\n\n### 4.6.1 set_intersection\n\næ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†\n\n```cpp\nset_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator Target_beg);\n```\n\n```cpp\nvector<int> v1,v2,vTarget;\nfor(int i=0;i<10;i++){\n    v1.push_back(i);\n    v2.push_back(i+5);\n}\nvTarget.resize(min(v1.size(),v2.size()));\nvector<int>::iterator it = set_intersection(v1.begin(),v1.end(),v2.begin(,v2.end(),vTarget.begin());//è¿”å›çš„æ˜¯äº¤é›†æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®\nfor_each(vTarget.begin(), it, myPrint);\n```\n\n\n\n### 4.6.2 set_union\n\næ±‚ä¸¤ä¸ªå®¹å™¨çš„å¹¶é›†ï¼Œå¿…é¡»æ˜¯**æœ‰åºåºåˆ—**ï¼\n\n```cpp\nset_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator Target_beg);\n```\n\n### 4.6.3 set_difference\n\næ±‚ä¸¤ä¸ªå®¹å™¨çš„å·®é›†\n\n```cpp\nset_difference(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator Target_beg);\n```\n\n","tags":["C++"]},{"title":"C++çŸ¥è¯†è¡¥å……","url":"/2024/03/07/C-plus-plus/","content":"\n# 1.å‡½æ•°\n\n## 1.1 å†…è”å‡½æ•°inline\n\nä¸ºäº†æé«˜ç¨‹åºè¿è¡Œçš„é€Ÿåº¦ï¼Œå¼•å…¥å†…è”å…³é”®å­—`inline`\n\nç¼–è¯‘å™¨ä¼šå°†è°ƒç”¨å‡½æ•°çš„åœ°æ–¹ç›´æ¥æ›¿æ¢ä¸ºå‡½æ•°ä»£ç ã€‚è¿™æ ·ç¨‹åºå°±æ— éœ€è·³è½¬åˆ°å‡½æ•°åœ°å€å†è·³å›æ¥ã€‚å› æ­¤é€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯**ä»£ä»·æ˜¯éœ€è¦å ç”¨æ›´å¤šçš„å†…å­˜**\n\n```cpp\ninline double square(double x){return x*x}\n\nint main(){\n    double a = 13.0;\n    double b = square(a);//æ­¤å¤„å°±ä¼šè¿›è¡Œå‡½æ•°æ›¿æ¢\n}\n```\n\n## 1.2 å¼•ç”¨&\n\nå¼•ç”¨å¯ä»¥ç†è§£ä¸ºå˜é‡çš„**åˆ«å**ï¼Œä½¿å¾—å‡½æ•°ä½¿ç”¨åŸå§‹æ•°æ®ï¼Œè€Œä¸æ˜¯å‰¯æœ¬ã€‚\n\nä¸»è¦çš„ç”¨é€”æ˜¯**ç”¨ä½œå‡½æ•°çš„å½¢å‚**\n\n```cpp\nvoid func(int &b){\n\t//æ­¤æ—¶bå’Œaçš„åœ°å€éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¸ä¼šè¿›è¡Œå‰¯æœ¬åˆ›å»º\n}\nvoid main(){\n\tint a=10;\n\tfunc(a);\n}\n```\n\n**æ³¨æ„**ï¼šå¼•ç”¨åœ¨å£°æ˜çš„æ—¶å€™å°±è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸”åé¢ä¸èƒ½æ”¹å˜ï¼Œâ€œå¿ ä¸€â€\n\nå¦‚æœå¯¹è±¡æ˜¯æ•°ç»„ï¼Œåˆ™ä½¿ç”¨constæŒ‡é’ˆ(å¸¸é‡æŒ‡é’ˆ)\n\n## 1.3 å‡½æ•°é‡è½½\n\nå¯ä»¥æœ‰å¤šä¸ªåŒåçš„å‡½æ•°ï¼Œä½†æ˜¯ä»–ä»¬æœ‰ä¸åŒè¿”å›å€¼æˆ–ä¸åŒçš„å‚æ•°åˆ—è¡¨\n\n```cpp\nint func();\nint func(int a);\nint func(double a);\nvoid func();\nvoid func(int a,int b);\n```\n\nå‡½æ•°é‡è½½**ä¸ä¼šåŒºåˆ†const**å…³é”®å­—ä»¥åŠå¼•ç”¨&\n\næ¯”å¦‚`void func(cont double a)`å’Œ`void func(double a)`ä»¥åŠ`void func(double &a)`éƒ½æ˜¯ä¸€æ ·çš„\n\n# 2.åŸºæœ¬è¯­æ³•\n\n## 2.1 cinã€cin.getã€cin.getlineçš„ä½¿ç”¨\n\n`cin`è¾“å…¥åæ¢è¡Œç¬¦ä¼šç•™åœ¨è¾“å…¥ç¼“å†²åŒºä¸­\n\n`cin.getline(name,length)`è¾“å…¥ä¸€è¡Œåä¼šä¸¢å¼ƒæ¢è¡Œç¬¦ï¼Œç”¨ç©ºå­—ç¬¦'\\0'æ›¿æ¢æ¢è¡Œç¬¦\n\n`cin.get(name,length)`è¾“å…¥ä¸€è¡Œåä¸ä¸¢å¼ƒæ¢è¡Œç¬¦ï¼ŒåŒæ—¶ä¼šæŠŠæ¢è¡Œç¬¦ç•™åœ¨è¾“å…¥ç¼“å†²åŒºä¸­\n\nä½†æ˜¯ï¼ŒåŒæ—¶ä½¿ç”¨cinè¾“å…¥æ—¶ï¼Œ**>>ä¼šè‡ªåŠ¨è·³è¿‡ç©ºå­—ç¬¦**(åŒ…æ‹¬æ¢è¡Œç¬¦)\n\n```cpp\nstring str;\ncin >> str;//æ­¤æ—¶æ¢è¡Œç¬¦ä¼šç•™åœ¨ç¼“å†²åŒºä¸­\ncin.get();//è·å¾—æ¢è¡Œç¬¦\ncin.getline(str,10);\n```\n\n```cpp\ncin.get(str,10).get();\n//å¯ä»¥å®ç°ç±»ä¼¼äºgeilineçš„æ•ˆæœ\n```\n\n### 2.2 å…±ç”¨ä½“Union\n\nå…±ç”¨ä½“å¸¸ç”¨äºèŠ‚çœå†…å­˜ï¼Œå¯ä»¥è¯´æ˜¯å¯¹ä¸€ä¸ªå†…å­˜çš„å¤ç”¨\n\n```cpp\nUnion m_Union{\n\tint int_val;\n\tdouble double_val;\n\tlong long_val;\n};\n```\n\nç”³è¯·çš„ç©ºé—´é•¿åº¦ç­‰äºå…±ç”¨ä½“å†…æœ€é•¿çš„æ•°æ®ç±»å‹çš„å¤§å°ã€‚\n\n```cpp\nvoid main(){\n    m_Union a;\n    a.int_val=10;\n}\n```\n\n## 2.3 extern \"C\"\n\nextern â€œCâ€ ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®å®ç° C++ ä»£ç è°ƒç”¨å…¶ä»– [C è¯­è¨€](https://www.codersrc.com/cè¯­è¨€åŸºç¡€)ä»£ç ã€‚\n\n[extern â€œCâ€](https://www.codersrc.com/archives/9358.html) ä¼šæŒ‡ç¤ºç¼–è¯‘å™¨è¿™éƒ¨åˆ†ä»£ç æŒ‰ C è¯­è¨€çš„è¿›è¡Œç¼–è¯‘ï¼Œè€Œä¸æ˜¯ C++ã€‚\n\n# 3.çº¿ç¨‹å’Œè¿›ç¨‹\n\nçº¿ç¨‹æ˜¯è½»é‡çº§çš„è¿›ç¨‹\n\n**åŒºåˆ«ï¼š**\n\n- **è¿›ç¨‹**æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œå¤šä¸ª**çº¿ç¨‹**å…¬ç”¨åŒä¸€ä¸ªåœ°å€ç©ºé—´\n- **è¿›ç¨‹**æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œ**çº¿ç¨‹**æ˜¯æ“ä½œç³»ç»Ÿçš„æœ€å°è°ƒåº¦å•ä½\n- çº¿ç¨‹åœ¨CPUä¸Šçš„ä¸Šä¸‹æ–‡åˆ‡æ¢é€Ÿåº¦æ›´å¿«\n\n## 3.1 çº¿ç¨‹\n\nåˆ›å»ºçº¿ç¨‹éœ€è¦åŒ…å«`<pthread>`å¤´æ–‡ä»¶ï¼Œéœ€è¦é“¾æ¥åŠ¨æ€åº“`-lpthread`\n\næ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰å”¯ä¸€çš„çº¿ç¨‹idï¼Œæ•°æ®ç±»å‹ä¸º`pthread_t`\n\nå¯ä»¥é€šè¿‡`pthread_self()`å‡½æ•°è·å–å½“å‰çº¿ç¨‹id\n\n```cpp\npthread_t tid = pthread_self(void);\n```\n\n### 3.1.1 åˆ›å»º\n\n```cpp\nint pthread_create(pthread_t *tid, NULL, void *func, void *arg);\n```\n\n- tidï¼šçº¿ç¨‹åˆ›å»ºæˆåŠŸä¼šå†™å…¥çº¿ç¨‹idåˆ°æ­¤å¤„\n- çº¿ç¨‹çš„å±æ€§, ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤å±æ€§å³å¯, å†™NULL\n- funcï¼šå‡½æ•°æŒ‡é’ˆï¼Œåˆ›å»ºå‡ºçš„å­çº¿ç¨‹çš„å¤„ç†åŠ¨ä½œ\n- argï¼šä½œä¸ºå®å‚ä¼ é€’åˆ° start_routine æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°å†…éƒ¨\n- è¿”å›å€¼ï¼šçº¿ç¨‹åˆ›å»ºæˆåŠŸè¿”å›0ï¼Œåˆ›å»ºå¤±è´¥è¿”å›å¯¹åº”çš„é”™è¯¯å·\n\n```cpp\n// pthread_create.c \n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <string.h>\n#include <pthread.h>\n\n// å­çº¿ç¨‹çš„å¤„ç†ä»£ç \nvoid* working(void* arg)\n{\n    printf(\"æˆ‘æ˜¯å­çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<9; ++i)\n    {\n        printf(\"child == i: = %d\\n\", i);\n    }\n    return NULL;\n}\n\nint main()\n{\n    // 1. åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹\n    pthread_t tid;\n    pthread_create(&tid, NULL, working, NULL);\n\n    printf(\"å­çº¿ç¨‹åˆ›å»ºæˆåŠŸ, çº¿ç¨‹ID: %ld\\n\", tid);\n    \n    // 2. å­çº¿ç¨‹ä¸ä¼šæ‰§è¡Œä¸‹è¾¹çš„ä»£ç , ä¸»çº¿ç¨‹æ‰§è¡Œ\n    printf(\"æˆ‘æ˜¯ä¸»çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<3; ++i)\n    {\n        printf(\"i = %d\\n\", i);\n    }\n    return 0;\n}\n\n```\n\n### 3.1.2 é€€å‡º\n\nä¸Šè¿°ä¾‹å­ä¸­ï¼Œå­çº¿ç¨‹è¢«åˆ›å»ºå‡ºæ¥ä¹‹åéœ€è¦æŠ¢cpuæ—¶é—´ç‰‡, æŠ¢ä¸åˆ°å°±ä¸èƒ½è¿è¡Œï¼Œä¸€æ—¦ä¸»çº¿ç¨‹é€€å‡ºäº†, è™šæ‹Ÿåœ°å€ç©ºé—´å°±è¢«é‡Šæ”¾äº†, å­çº¿ç¨‹å°±ä¸€å¹¶è¢«é”€æ¯äº†ã€‚\n\nå¦‚æœæƒ³è¦è®©çº¿ç¨‹é€€å‡ºï¼Œä½†æ˜¯ä¸ä¼šå¯¼è‡´è™šæ‹Ÿåœ°å€ç©ºé—´çš„é‡Šæ”¾ï¼ˆé’ˆå¯¹äºä¸»çº¿ç¨‹ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨çº¿ç¨‹åº“ä¸­çš„çº¿ç¨‹é€€å‡ºå‡½æ•°ï¼Œåªè¦è°ƒç”¨è¯¥å‡½æ•°å½“å‰çº¿ç¨‹å°±é©¬ä¸Šé€€å‡ºäº†ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“åˆ°å…¶ä»–çº¿ç¨‹çš„æ­£å¸¸è¿è¡Œï¼Œä¸ç®¡æ˜¯åœ¨å­çº¿ç¨‹æˆ–è€…ä¸»çº¿ç¨‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\n```cpp\n#include <pthread.h>\nvoid pthread_exit(void *retval);\n```\n\n- \n  å‚æ•°: çº¿ç¨‹é€€å‡ºçš„æ—¶å€™æºå¸¦çš„æ•°æ®ï¼Œå½“å‰å­çº¿ç¨‹çš„ä¸»çº¿ç¨‹ä¼šå¾—åˆ°è¯¥æ•°æ®ã€‚å¦‚æœä¸éœ€è¦ä½¿ç”¨ï¼ŒæŒ‡å®šä¸ºNULL\n\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <string.h>\n#include <pthread.h>\n\n// å­çº¿ç¨‹çš„å¤„ç†ä»£ç \nvoid* working(void* arg)\n{\n    sleep(1);\n    printf(\"æˆ‘æ˜¯å­çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<9; ++i)\n    {\n        if(i==6)\n        {\n            pthread_exit(NULL);\t// ç›´æ¥é€€å‡ºå­çº¿ç¨‹\n        } \n        printf(\"child == i: = %d\\n\", i);\n    }\n    return NULL;\n}\n\nint main()\n{\n    // 1. åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹\n    pthread_t tid;\n    pthread_create(&tid, NULL, working, NULL);\n\n    printf(\"å­çº¿ç¨‹åˆ›å»ºæˆåŠŸ, çº¿ç¨‹ID: %ld\\n\", tid);\n    // 2. å­çº¿ç¨‹ä¸ä¼šæ‰§è¡Œä¸‹è¾¹çš„ä»£ç , ä¸»çº¿ç¨‹æ‰§è¡Œ\n    printf(\"æˆ‘æ˜¯ä¸»çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<3; ++i)\n    {\n        printf(\"i = %d\\n\", i);\n    }\n\n    // ä¸»çº¿ç¨‹è°ƒç”¨é€€å‡ºå‡½æ•°é€€å‡º, åœ°å€ç©ºé—´ä¸ä¼šè¢«é‡Šæ”¾\n    pthread_exit(NULL);\n    \n    return 0;\n}\n```\n\n### 3.1.3 å›æ”¶\n\nå­çº¿ç¨‹é€€å‡ºæ—¶ï¼Œå†…æ ¸èµ„æºä¸»è¦ç”±ä¸»çº¿ç¨‹å›æ”¶ï¼Œé€šè¿‡`pthread_join()`å‡½æ•°å®ç°\n\næ­¤å‡½æ•°ä¸ºé˜»å¡å‡½æ•°ï¼Œå‡½æ•°è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œåªèƒ½å›æ”¶ä¸€ä¸ªå­çº¿ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªå­çº¿ç¨‹åˆ™éœ€è¦å¾ªç¯è¿›è¡Œå›æ”¶ã€‚\n\n```cpp\n#include <pthread.h>\n// è¿™æ˜¯ä¸€ä¸ªé˜»å¡å‡½æ•°, å­çº¿ç¨‹åœ¨è¿è¡Œè¿™ä¸ªå‡½æ•°å°±é˜»å¡\n// å­çº¿ç¨‹é€€å‡º, å‡½æ•°è§£é™¤é˜»å¡, å›æ”¶å¯¹åº”çš„å­çº¿ç¨‹èµ„æº, ç±»ä¼¼äºå›æ”¶è¿›ç¨‹ä½¿ç”¨çš„å‡½æ•° wait()\nint pthread_join(pthread_t thread, void **retval);\n```\n\n```cpp\n// pthread_join.c\n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <string.h>\n#include <pthread.h>\n\n// å®šä¹‰ç»“æ„\nstruct Persion\n{\n    int id;\n    char name[36];\n    int age;\n};\n\n// å­çº¿ç¨‹çš„å¤„ç†ä»£ç \nvoid* working(void* arg)\n{\n    printf(\"æˆ‘æ˜¯å­çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<9; ++i)\n    {\n        printf(\"child == i: = %d\\n\", i);\n        if(i == 6)\n        {\n            struct Persion p;\n            p.age  =12;\n            strcpy(p.name, \"tom\");\n            p.id = 100;\n            // è¯¥å‡½æ•°çš„å‚æ•°å°†è¿™ä¸ªåœ°å€ä¼ é€’ç»™äº†ä¸»çº¿ç¨‹çš„pthread_join()\n            pthread_exit(&p);\n        }\n    }\n    return NULL;\t// ä»£ç æ‰§è¡Œä¸åˆ°è¿™ä¸ªä½ç½®å°±é€€å‡ºäº†\n}\n\nint main()\n{\n    // 1. åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹\n    pthread_t tid;\n    pthread_create(&tid, NULL, working, NULL);\n\n    printf(\"å­çº¿ç¨‹åˆ›å»ºæˆåŠŸ, çº¿ç¨‹ID: %ld\\n\", tid);\n    // 2. å­çº¿ç¨‹ä¸ä¼šæ‰§è¡Œä¸‹è¾¹çš„ä»£ç , ä¸»çº¿ç¨‹æ‰§è¡Œ\n    printf(\"æˆ‘æ˜¯ä¸»çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<3; ++i)\n    {\n        printf(\"i = %d\\n\", i);\n    }\n\n    // é˜»å¡ç­‰å¾…å­çº¿ç¨‹é€€å‡º\n    void* ptr = NULL;\n    // ptræ˜¯ä¸€ä¸ªä¼ å‡ºå‚æ•°, åœ¨å‡½æ•°å†…éƒ¨è®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€å—æœ‰æ•ˆå†…å­˜\n    // è¿™ä¸ªå†…å­˜åœ°å€å°±æ˜¯pthread_exit() å‚æ•°æŒ‡å‘çš„å†…å­˜\n    pthread_join(tid, &ptr);\n    // æ‰“å°ä¿¡æ¯\n    struct Persion* pp = (struct Persion*)ptr;\n    printf(\"å­çº¿ç¨‹è¿”å›æ•°æ®: name: %s, age: %d, id: %d\\n\", pp->name, pp->age, pp->id);\n    printf(\"å­çº¿ç¨‹èµ„æºè¢«æˆåŠŸå›æ”¶...\\n\");\n    \n    return 0;\n}\n```\n\n### 3.1.4 çº¿ç¨‹åˆ†ç¦»\n\nå¦‚æœé‡‡ç”¨`pthread_join()`ï¼Œä¸»çº¿ç¨‹å°±ä¼šä¸€ç›´é˜»å¡ç­‰å¾…å­çº¿ç¨‹è¿è¡Œå®Œæˆï¼Œ\n\né‡‡ç”¨`pthread_detach()`å³å¯å®Œæˆçº¿ç¨‹åˆ†ç¦»ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¹‹åæŒ‡å®šçš„å­çº¿ç¨‹å°±å¯ä»¥å’Œä¸»çº¿ç¨‹åˆ†ç¦»ï¼Œå½“å­çº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œå…¶å ç”¨çš„å†…æ ¸èµ„æºå°±è¢«**ç³»ç»Ÿçš„å…¶ä»–è¿›ç¨‹**æ¥ç®¡å¹¶å›æ”¶äº†ã€‚çº¿ç¨‹åˆ†ç¦»ä¹‹ååœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨`pthread_join()`å°±å›æ”¶ä¸åˆ°å­çº¿ç¨‹èµ„æºäº†ã€‚\n\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <string.h>\n#include <pthread.h>\n\n// å­çº¿ç¨‹çš„å¤„ç†ä»£ç \nvoid* working(void* arg)\n{\n    printf(\"æˆ‘æ˜¯å­çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<9; ++i)\n    {\n        printf(\"child == i: = %d\\n\", i);\n    }\n    return NULL;\n}\n\nint main()\n{\n    // 1. åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹\n    pthread_t tid;\n    pthread_create(&tid, NULL, working, NULL);\n\n    printf(\"å­çº¿ç¨‹åˆ›å»ºæˆåŠŸ, çº¿ç¨‹ID: %ld\\n\", tid);\n    // 2. å­çº¿ç¨‹ä¸ä¼šæ‰§è¡Œä¸‹è¾¹çš„ä»£ç , ä¸»çº¿ç¨‹æ‰§è¡Œ\n    printf(\"æˆ‘æ˜¯ä¸»çº¿ç¨‹, çº¿ç¨‹ID: %ld\\n\", pthread_self());\n    for(int i=0; i<3; ++i)\n    {\n        printf(\"i = %d\\n\", i);\n    }\n\n    // è®¾ç½®å­çº¿ç¨‹å’Œä¸»çº¿ç¨‹åˆ†ç¦»\n    pthread_detach(tid);\n\n    // è®©ä¸»çº¿ç¨‹è‡ªå·±é€€å‡ºå³å¯\n    pthread_exit(NULL);\n    \n    return 0;\n}\n```\n\n### 3.1.5 çº¿ç¨‹å–æ¶ˆ\n\n```cpp\n#include <pthread.h>\n// å‚æ•°æ˜¯å­çº¿ç¨‹çš„çº¿ç¨‹ID\nint pthread_cancel(pthread_t thread);\n```\n\n- å‚æ•°ï¼šè¦æ€æ­»çš„çº¿ç¨‹çš„çº¿ç¨‹ID\n- è¿”å›å€¼ï¼šå‡½æ•°è°ƒç”¨æˆåŠŸè¿”å›0ï¼Œè°ƒç”¨å¤±è´¥è¿”å›é0é”™è¯¯å·ã€‚\n\n### 3.1.6 pthread_tçš„æ¯”è¾ƒ\n\n```cpp\n#include <pthread.h>\nint pthread_equal(pthread_t t1, pthread_t t2);\n```\n\n- å‚æ•°ï¼št1 å’Œ t2 æ˜¯è¦æ¯”è¾ƒçš„çº¿ç¨‹çš„çº¿ç¨‹ID\n- è¿”å›å€¼ï¼šå¦‚æœä¸¤ä¸ªçº¿ç¨‹IDç›¸ç­‰è¿”å›é0å€¼ï¼Œå¦‚æœä¸ç›¸ç­‰è¿”å›0\n\n# 4.C++11æ–°ç‰¹æ€§\n\n## 4.1 lamada\n\næœ¬è´¨æ˜¯åŒ¿åå‡½æ•°å¯ä»¥è®©ä»£ç å˜å¾—ç®€æ´.å¹¶ä¸”å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§\n\n```cpp\n#include <algorithm>\n#include <cmath>\n\nvoid abssort(float* x, unsigned n) {\n    std::sort(x, x + n,\n        // ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ `Lambda è¡¨è¾¾å¼`\n        [](float a, float b) {\n            return (std::abs(a) < std::abs(b));\n        } \n    ); \n}\n\n```\n\n> **æ•è·åˆ—è¡¨**ï¼šï¼ˆcapture listï¼‰ï¼ˆåœ¨ C++ è§„èŒƒä¸­ä¹Ÿç§°ä¸º Lambda å¼•å¯¼ã€‚ï¼‰\n> **å‚æ•°åˆ—è¡¨ï¼š**ï¼ˆparameters listï¼‰ï¼ˆå¯é€‰ï¼‰ã€‚ ï¼ˆä¹Ÿç§°ä¸º Lambda å£°æ˜ç¬¦ï¼‰\n> **mutable è§„èŒƒï¼š**ï¼ˆå¯é€‰ï¼‰ã€‚\n> **å¼‚å¸¸è¯´æ˜ï¼š**exception-specificationï¼ˆå¯é€‰ï¼‰ã€‚\n> **è¿”å›ç±»å‹ï¼š**trailing-return-typeï¼ˆå¯é€‰ï¼‰ã€‚\n> **Lambda ä½“ï¼š**ä¹Ÿå°±æ˜¯å‡½æ•°ä½“ã€‚\n\n![æ ‡è¯† lambda è¡¨è¾¾å¼çš„å„ä¸ªéƒ¨åˆ†çš„ç¤ºæ„å›¾ã€‚](C-plus-plus/b8cd9d17b7074f4785cb2dcdb59c9bf3.png)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](C-plus-plus/0c46c0d657aa4b378267aa0eb397b081.png)\n\nLambdaè¡¨è¾¾å¼çš„æ•è·åˆ—è¡¨ç”¨äºæŒ‡å®šLambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å¤–éƒ¨å˜é‡ã€‚æ•è·åˆ—è¡¨å¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n\n- []ï¼šä¸æ•è·ä»»ä½•å¤–éƒ¨å˜é‡ï¼›\n- [&]ï¼šä»¥å¼•ç”¨æ–¹å¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼›\n- [=]ï¼šä»¥å€¼æ–¹å¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼›\n- [var1, var2, ...]ï¼šæŒ‡å®šæ•è·ç‰¹å®šçš„å¤–éƒ¨å˜é‡ï¼›\n- [&, var1, var2, ...]ï¼šä»¥å¼•ç”¨æ–¹å¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼Œå¹¶æŒ‡å®šæ•è·ç‰¹å®šçš„å¤–éƒ¨å˜é‡ï¼›\n- [=, &var1, &var2, ...]ï¼šä»¥å€¼æ–¹å¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼Œå¹¶ä»¥å¼•ç”¨æ–¹å¼æ•è·ç‰¹å®šçš„å¤–éƒ¨å˜é‡ã€‚\n\næ•è·å¯ä»¥è¯´æ˜¯å¼•ç”¨ï¼Œä¼ å‚æ˜¯ä¼ å‰¯æœ¬ã€‚\n\n## 4.2 auto\n\nautoå…³é”®å­—å¯ä»¥è¿›è¡Œè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼ŒèŠ‚çœä»£ç é‡\n\n```cpp\nvector<int> vec;\nvector<int>::iterator it = vec.begin();//åŸæ¥\nauto it = vec.begin();//C++11 auto\n```\n\n## 4.3 åŒºåŸŸforå¾ªç¯\n\n```cpp\nfor(const auto & num : nums){\n\tcout << num << endl;\n}\n```\n\n## 4.4 æ™ºèƒ½æŒ‡é’ˆ\n\n### 4.4.1 unique_ptr\n\nå¤´æ–‡ä»¶ä¸º`<memory>`\n\nå¯¹`*`å’Œ`->`è¿ç®—ç¬¦è¿›è¡Œé‡è½½ï¼Œä½¿unique_ptrå¯¹è±¡å…·æœ‰æŒ‡é’ˆä¸€æ ·çš„è¡Œä¸ºã€‚\n\næ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼å‡½æ•°åé¢åŠ ä¸Š`=delete`ï¼Œé˜²æ­¢å¤–éƒ¨è¿›è¡Œè°ƒç”¨\n\n#### 4.4.1.1 æ¨¡æ‹Ÿå®ç°\n\n```cpp\n\ttemplate<class T>\n\tclass unique_ptr\n\t{\n\tpublic:\n\t\t// RAII\n\t\t// ä¿å­˜èµ„æº\n\t\tunique_ptr(T* ptr)\n\t\t\t:_ptr(ptr)\n\t\t{}\n\t\t// é‡Šæ”¾èµ„æº\n\t\t~unique_ptr()\n\t\t{\n\t\t\t//delete[] _ptr;\n\t\t\tdelete _ptr;\n\t\t\tcout << _ptr << endl;\n\t\t}\n\n\t\tunique_ptr(const unique_ptr<T>& up) = delete;\n\t\tunique_ptr<T>& operator=(const unique_ptr<T>& up) = delete;\n\n\t\t// åƒæŒ‡é’ˆä¸€æ ·\n\t\tT& operator*()\n\t\t{\n\t\t\treturn *_ptr;\n\t\t}\n\n\t\tT* operator->()\n\t\t{\n\t\t\treturn return _ptr;\n\t\t}\n\n\t\tT& operator[](size_t pos)\n\t\t{\n\t\t\treturn _ptr[pos];\n\t\t}\n\tprivate:\n\t\tT* _ptr;\n\t};\n\n```\n\n#### 4.4.1.2 å£°æ˜\n\n```cpp\nstd::unique_ptr<int> up1(new int(0));\n```\n\n### 4.4.2 shared_ptr\n\nshared_ptræ˜¯C++11çš„æ™ºèƒ½æŒ‡é’ˆï¼Œé€šè¿‡å¼•ç”¨è®¡æ•°çš„æ–¹å¼è§£å†³æ™ºèƒ½æŒ‡é’ˆçš„æ‹·è´é—®é¢˜ã€‚\n\nå¼•ç”¨è®¡æ•°çš„æ–¹å¼èƒ½å¤Ÿæ”¯æŒå¤šä¸ªå¯¹è±¡ä¸€èµ·ç®¡ç†ä¸€ä¸ªèµ„æºï¼Œä¹Ÿå°±æ”¯æŒæ™ºèƒ½æŒ‡é’ˆçš„æ‹·è´ï¼Œåªæœ‰å½“èµ„æºçš„å¼•ç”¨è®¡æ•°å‡ä¸º0æ—¶æ‰ä¼šé‡Šæ”¾ï¼Œä¿è¯äº†åŒä¸€ä¸ªèµ„æºä¸ä¼šè¢«å¤šæ¬¡é‡Šæ”¾ï¼š\n\n```cpp\nint main()\n{\n\tstd::shared_ptr<int> sp1(new int(1));\n\tstd::shared_ptr<int> sp2(sp1);\n\t*sp1 = 10;\n\t*sp2 = 20;\n\tcout << sp1.use_count() << endl; //2\n    //use_countï¼šç”¨äºè·å–å½“å‰å¯¹è±¡ç®¡ç†çš„èµ„æºå¯¹åº”çš„å¼•ç”¨è®¡æ•°ã€‚\n\tstd::shared_ptr<int> sp3(new int(1));\n\tstd::shared_ptr<int> sp4(new int(2));\n\tsp3 = sp4;\n\tcout << sp3.use_count() << endl; //2\n\treturn 0;\n}\n\n```\n\n#### 4.4.2.1æ¨¡æ‹Ÿå®ç°\n\n```cpp\n\ttemplate<class T>\n\tclass shared_ptr\n\t{\n\tpublic:\n\t\t// RAII\n\t\t// ä¿å­˜èµ„æº\n\t\tshared_ptr(T* ptr):_ptr(ptr), _pcount(new int(1)){}\n\t\t// é‡Šæ”¾èµ„æº\n\t\t~shared_ptr(){\n\t\t\tRelease();\n\t\t}\n\n\t\tshared_ptr(const shared_ptr<T>& sp):_ptr(sp._ptr), _pcount(sp._pcount){\n\t\t\t++(*_pcount);\n\t\t}\n\n\t\tvoid Release(){\n\t\t\tif (--(*_pcount) == 0){\n\t\t\t\tdelete _pcount;\n\t\t\t\tdelete _ptr;\n\t\t\t}\n\t\t}\n        \n        //sp1 = sp1;\n        //sp1 = sp2;//sp2å¦‚æœæ˜¯sp1çš„æ‹·è´å‘¢ï¼Ÿ\n\t\tshared_ptr<T>& operator=(const shared_ptr<T>& sp){\n\t\t\tif (_ptr != sp._ptr)//èµ„æºåœ°å€ä¸ä¸€æ ·\n\t\t\t{\n\t\t\t\tRelease();\n\t\t\t\t_pcount = sp._pcount;\n\t\t\t\t_ptr = sp._ptr;\n\t\t\t\t++(*_pcount);\n\t\t\t}\n\n\t\t\treturn *this;\n\t\t}\n        \n        int use_count()\n\t\t{\n\t\t\treturn *_pcount;\n\t\t}\n\n\t\t// åƒæŒ‡é’ˆä¸€æ ·\n\t\tT& operator*()\n\t\t{\n\t\t\treturn *_ptr;\n\t\t}\n\n\t\tT* operator->()\n\t\t{\n\t\t\treturn _ptr;\n\t\t}\n\n\t\tT& operator[](size_t pos)\n\t\t{\n\t\t\treturn _ptr[pos];\n\t\t}\n\tprivate:\n\t\tT* _ptr;\n\t\tint* _pcount;\n\t};\n\n```\n\n","tags":["C++"]},{"title":"Makefileå’ŒCMake","url":"/2024/03/06/Makefileå’ŒCMake/","content":"\nCMakeç”¨äºè‡ªåŠ¨ç”Ÿæˆ`Makefile`æ–‡ä»¶\n\n![img](Makefileå’ŒCMake/1702265901352-3cfb487d-7d91-438d-9f32-6fa0a1de8403.jpeg)\n\nMakefileé€šå¸¸ä¾èµ–äºå½“å‰çš„ç¼–è¯‘å¹³å°ï¼Œè€Œä¸”ç¼–å†™ makefile çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ï¼Œè§£å†³ä¾èµ–å…³ç³»æ—¶ä¹Ÿå®¹æ˜“å‡ºé”™ã€‚\n\n**CMakeçš„ä¼˜ç‚¹ï¼š**è·¨å¹³å°ã€èƒ½å¤Ÿç®¡ç†å¤§å‹é¡¹ç›®ã€ç®€åŒ–ç¼–è¯‘æ„å»ºè¿‡ç¨‹å’Œç¼–è¯‘è¿‡ç¨‹ã€å¯æ‰©å±•ï¼ˆå¯ä»¥ä¸º cmake ç¼–å†™ç‰¹å®šåŠŸèƒ½çš„æ¨¡å—ï¼Œæ‰©å…… cmake åŠŸèƒ½ï¼‰\n\n### 1ã€Cmakeçš„ä½¿ç”¨\n\nå‰è¨€ï¼š`Cmake`ä¸åŒºåˆ†å¤§å°å†™ï¼Œåœ¨ç¼–å†™`CMakelists.txt`éšç¼˜\n\n#### 1.1æ³¨é‡Š\n\n```cmake\n#è¿™æ˜¯è¦æ³¨é‡Šçš„å†…å®¹\ncmake_minimum_required(VERSION 3.0.0)\n#[[ è¿™æ˜¯ä¸€ä¸ª CMakeLists.txt æ–‡ä»¶ã€‚\nè¿™æ˜¯ä¸€ä¸ª CMakeLists.txt æ–‡ä»¶\nè¿™æ˜¯ä¸€ä¸ª CMakeLists.txt æ–‡ä»¶]]\ncmake_minimum_required(VERSION 3.0.0)\n```\n\n#### 1.2æºæ–‡ä»¶\n\nå‡è®¾åœ¨æŸå¤„å­˜åœ¨å¦‚ä¸‹å‡ ä¸ªæºæ–‡ä»¶\n\n```c\n#include <stdio.h>\n#include \"head.h\"\n\nint add(int a, int b)\n{\n    return a+b;\n}\n#include <stdio.h>\n#include \"head.h\"\n\n// ä½ å¥½\nint subtract(int a, int b)\n{\n    return a-b;\n}\n#include <stdio.h>\n#include \"head.h\"\n\nint multiply(int a, int b)\n{\n    return a*b;\n}\n#include <stdio.h>\n#include \"head.h\"\n\ndouble divide(int a, int b)\n{\n    return (double)a/b;\n}\n#include <stdio.h>\n#include \"head.h\"\n\nint main()\n{\n    int a = 20;\n    int b = 12;\n    printf(\"a = %d, b = %d\\n\", a, b);\n    printf(\"a + b = %d\\n\", add(a, b));\n    printf(\"a - b = %d\\n\", subtract(a, b));\n    printf(\"a * b = %d\\n\", multiply(a, b));\n    printf(\"a / b = %f\\n\", divide(a, b));\n    return 0;\n}\n#ifndef _HEAD_H\n#define _HEAD_H\n// åŠ æ³•\nint add(int a, int b);\n// å‡æ³•\nint subtract(int a, int b);\n// ä¹˜æ³•\nint multiply(int a, int b);\n// é™¤æ³•\ndouble divide(int a, int b);\n#endif\n```\n\nç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n\n![img](Makefileå’ŒCMake/1702265727682-b726d840-5930-44a1-9e14-6d772a785bd1.png)\n\n##### 1.2.1ç¼–å†™CMakeLists.txt\n\nåœ¨åŒçº§ç›®å½•åˆ›å»º`CMakeLists.txt`æ–‡ä»¶\n\n**å†…å®¹å¦‚ä¸‹ï¼š**\n\n```cmake\ncmake_minimum_required(VERSION 3.0)\t#æŒ‡å®šä½¿ç”¨çš„ cmake çš„æœ€ä½ç‰ˆæœ¬,å¯é€‰éå¿…é¡»ï¼Œä¸åŠ å¯èƒ½ä¼šæœ‰è­¦å‘Š\nproject(CALC)\t\nadd_executable(app add.c div.c main.c mult.c sub.c)#å®šä¹‰å·¥ç¨‹ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº\n```\n\nprojectï¼šå®šä¹‰å·¥ç¨‹åç§°ï¼Œå¹¶å¯æŒ‡å®šå·¥ç¨‹çš„ç‰ˆæœ¬ã€å·¥ç¨‹æè¿°ã€webä¸»é¡µåœ°å€ã€æ”¯æŒçš„è¯­è¨€ï¼ˆé»˜è®¤æƒ…å†µæ”¯æŒæ‰€æœ‰è¯­è¨€ï¼‰ï¼Œå¦‚æœä¸éœ€è¦è¿™äº›éƒ½æ˜¯å¯ä»¥å¿½ç•¥çš„ï¼Œåªéœ€è¦æŒ‡å®šå‡ºå·¥ç¨‹åå­—å³å¯ã€‚\n\n```cmake\n# PROJECT æŒ‡ä»¤çš„è¯­æ³•æ˜¯ï¼š\nproject(<PROJECT-NAME> [<language-name>...])\nproject(<PROJECT-NAME>\n       [VERSION <major>[.<minor>[.<patch>[.<tweak>]]]]\n       [DESCRIPTION <project-description-string>]\n       [HOMEPAGE_URL <url-string>]\n       [LANGUAGES <language-name>...])\n```\n\nadd_executableï¼šç”Ÿæˆå¯æ‰§è¡Œç¨‹åº\n\n```cmake\nadd_executable(å¯æ‰§è¡Œç¨‹åºå æºæ–‡ä»¶åç§°)\n\nå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªæºæ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªä¹‹é—´ç”¨ç©ºæ ¼æˆ–â€œ;â€éš”å¼€\n# æ ·å¼1\nadd_executable(app add.c div.c main.c mult.c sub.c)\n# æ ·å¼2\nadd_executable(app add.c;div.c;main.c;mult.c;sub.c)\n```\n\næ³¨æ„ï¼šå¯æ‰§è¡Œç¨‹åºåå’Œprojectä¸­çš„é¡¹ç›®åæ²¡æœ‰ä»»ä½•å…³ç³»\n\n##### 1.2.2æ‰§è¡Œcmake\n\n```powershell\ncmake CMakeLists.txtæ–‡ä»¶æ‰€åœ¨è·¯å¾„\n```\n\n![img](Makefileå’ŒCMake/1702266095713-a4473858-5cb5-4732-9121-c57ce8f3c11f.png)\n\næ‰§è¡Œå®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°å½“å‰ç›®å½•å¤šäº†è®¸å¤šæ–‡ä»¶ï¼Œå…¶ä¸­å°±åŒ…æ‹¬`Makefile`æ–‡ä»¶\n\n![img](Makefileå’ŒCMake/1702266185034-23049925-8629-4bdc-8aed-e41ec0728328.png)\n\næ‰§è¡Œ`make`å³å¯å¾—åˆ°ç›®æ ‡æ‰§è¡Œç¨‹åºæ–‡ä»¶\n\n![img](Makefileå’ŒCMake/1702266259478-008c3471-c721-4d11-8dcc-469b0023fbc1.png)\n\n##### 1.2.3ç‹¬ç«‹CMakeç›¸å…³æ–‡ä»¶\n\nå¦‚æœåœ¨`CMakeLists.txt`æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œäº†`cmake`å‘½ä»¤ä¹‹åå°±ä¼šç”Ÿæˆä¸€äº›ç›®å½•å’Œæ–‡ä»¶ï¼ˆåŒ…æ‹¬ makefile æ–‡ä»¶ï¼‰ï¼Œå¦‚æœå†åŸºäºmakefileæ–‡ä»¶æ‰§è¡Œmakeå‘½ä»¤ï¼Œç¨‹åºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¿˜ä¼šç”Ÿæˆä¸€äº›ä¸­é—´æ–‡ä»¶å’Œä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ•´ä¸ªé¡¹ç›®ç›®å½•çœ‹èµ·æ¥å¾ˆæ··ä¹±ï¼Œä¸å¤ªå®¹æ˜“ç®¡ç†å’Œç»´æŠ¤ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥æŠŠç”Ÿæˆçš„è¿™äº›ä¸é¡¹ç›®æºç æ— å…³çš„æ–‡ä»¶ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªå¯¹åº”çš„ç›®å½•é‡Œè¾¹ï¼Œæ¯”å¦‚å°†è¿™ä¸ªç›®å½•å‘½åä¸ºbuildï¼š\n\n```powershell\nmakedir build\ncd build\ncmake ..\n```\n\nå½“å‘½ä»¤æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œåœ¨buildç›®å½•ä¸­ä¼šç”Ÿæˆä¸€ä¸ªmakefileæ–‡ä»¶\n\n#### 1.3å®šä¹‰å˜é‡\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ä¸€å…±æä¾›äº†5ä¸ªæºæ–‡ä»¶ï¼Œå‡è®¾è¿™äº”ä¸ªæºæ–‡ä»¶éœ€è¦åå¤è¢«ä½¿ç”¨ï¼Œæ¯æ¬¡éƒ½ç›´æ¥å°†å®ƒä»¬çš„åå­—å†™å‡ºæ¥ç¡®å®æ˜¯å¾ˆéº»çƒ¦ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå°†æ–‡ä»¶åå¯¹åº”çš„å­—ç¬¦ä¸²å­˜å‚¨èµ·æ¥ï¼Œåœ¨cmakeé‡Œå®šä¹‰å˜é‡éœ€è¦ä½¿ç”¨setã€‚\n\n```cmake\n# SET æŒ‡ä»¤çš„è¯­æ³•æ˜¯ï¼š\n# [] ä¸­çš„å‚æ•°ä¸ºå¯é€‰é¡¹, å¦‚ä¸éœ€è¦å¯ä»¥ä¸å†™\nSET(VAR [VALUE] [CACHE TYPE DOCSTRING [FORCE]])\n```\n\n- VARï¼šå˜é‡å\n- VALUEï¼šå˜é‡å€¼\n\n```cmake\n# æ–¹å¼1: å„ä¸ªæºæ–‡ä»¶ä¹‹é—´ä½¿ç”¨ç©ºæ ¼é—´éš”\nset(SRC_LIST add.c  div.c   main.c  mult.c  sub.c)\n\n# æ–¹å¼2: å„ä¸ªæºæ–‡ä»¶ä¹‹é—´ä½¿ç”¨åˆ†å· ; é—´éš”\nset(SRC_LIST add.c;div.c;main.c;mult.c;sub.c)\nadd_executable(app  ${SRC_LIST})\n```\n\n#### 1.4æŒ‡å®šC++ç‰ˆæœ¬\n\n```cmake\n$ g++ *.cpp -std=c++11 -o app\n```\n\nä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡å‚æ•°-std=c++11æŒ‡å®šå‡ºè¦ä½¿ç”¨c++11æ ‡å‡†ç¼–è¯‘ç¨‹åº\n\nC++æ ‡å‡†å¯¹åº”æœ‰ä¸€å®å«åš`DCMAKE_CXX_STANDARD`ã€‚\n\n**åœ¨CMakeä¸­æƒ³è¦æŒ‡å®šC++æ ‡å‡†æœ‰ä¸¤ç§æ–¹å¼ï¼š**\n\n1. åœ¨ CMakeLists.txt ä¸­é€šè¿‡ set å‘½ä»¤æŒ‡å®š\n\n```cmake\n#å¢åŠ -std=c++11\nset(CMAKE_CXX_STANDARD 11)\n#å¢åŠ -std=c++14\nset(CMAKE_CXX_STANDARD 14)\n#å¢åŠ -std=c++17\nset(CMAKE_CXX_STANDARD 17)\n```\n\n1. åœ¨æ‰§è¡Œ cmake å‘½ä»¤çš„æ—¶å€™æŒ‡å®šå‡ºè¿™ä¸ªå®çš„å€¼\n\n```shell\n#å¢åŠ -std=c++11\ncmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=11\n#å¢åŠ -std=c++14\ncmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=14\n#å¢åŠ -std=c++17\ncmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=17\n```\n\n#### 1.5æŒ‡å®šè¾“å‡ºè·¯å¾„\n\nåœ¨CMakeä¸­æŒ‡å®šå¯æ‰§è¡Œç¨‹åºè¾“å‡ºçš„è·¯å¾„ï¼Œä¹Ÿå¯¹åº”ä¸€ä¸ªå®ï¼Œå«åš`EXECUTABLE_OUTPUT_PATH`ï¼Œå®ƒçš„å€¼é€šè¿‡setå‘½ä»¤è¿›è¡Œè®¾ç½®:\n\n```shell\nset(HOME /home/robin/Linux/Sort)\nset(EXECUTABLE_OUTPUT_PATH ${HOME}/bin)\n```\n\nå¦‚æœè¿™ä¸ªè·¯å¾„ä¸­çš„å­ç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€è‡ªå·±æ‰‹åŠ¨åˆ›å»º\n\n#### 1.7æœç´¢æ–‡ä»¶\n\nåœ¨ç¼–å†™CMakeLists.txtæ–‡ä»¶çš„æ—¶å€™ä¸å¯èƒ½å°†é¡¹ç›®ç›®å½•çš„å„ä¸ªæ–‡ä»¶ç½—åˆ—å‡ºæ¥ï¼Œè¿™æ ·å¤ªéº»çƒ¦ä¹Ÿä¸ç°å®ã€‚\n\næ‰€ä»¥ï¼Œåœ¨CMakeä¸­ä¸ºæˆ‘ä»¬æä¾›äº†æœç´¢æ–‡ä»¶çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨`aux_source_directory`å‘½ä»¤æˆ–è€…`file`å‘½ä»¤ã€‚\n\n##### 1.7.1 aux_source_directoryæ–¹å¼\n\nå‘½ä»¤æ ¼å¼ï¼š`aux_source_directory(< dir > < variable >)`\n\n- dirï¼šè¦æœç´¢çš„ç›®å½•\n- variableï¼šå°†ä»dirç›®å½•ä¸‹æœç´¢åˆ°çš„æºæ–‡ä»¶åˆ—è¡¨å­˜å‚¨åˆ°è¯¥å˜é‡ä¸­\n\n```shell\ncmake_minimum_required(VERSION 3.0)\nproject(CALC)\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\n# æœç´¢ src ç›®å½•ä¸‹çš„æºæ–‡ä»¶\naux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/src SRC_LIST)\nadd_executable(app  ${SRC_LIST})\n```\n\n##### 1.7.2 fileæ–¹å¼\n\nå‘½ä»¤æ ¼å¼ï¼š`file(GLOB/GLOB_RECURSE å˜é‡å è¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç±»å‹)`\n\n- GLOB: å°†æŒ‡å®šç›®å½•ä¸‹æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­ã€‚\n- GLOB_RECURSEï¼šé€’å½’æœç´¢æŒ‡å®šç›®å½•ï¼Œå°†æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­ã€‚\n\n```shell\nfile(GLOB MAIN_SRC ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)\nfile(GLOB MAIN_HEAD ${CMAKE_CURRENT_SOURCE_DIR}/include/*.h)\n```\n\næ³¨é‡Šï¼š`CMAKE_CURRENT_SOURCE_DIR` å®è¡¨ç¤ºå½“å‰è®¿é—®çš„ CMakeLists.txt æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ã€‚\n\n\n\n#### 1.8å¤´æ–‡ä»¶\n\nåœ¨ç¼–è¯‘é¡¹ç›®æºæ–‡ä»¶çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™éƒ½éœ€è¦å°†æºæ–‡ä»¶å¯¹åº”çš„å¤´æ–‡ä»¶è·¯å¾„æŒ‡å®šå‡ºæ¥ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç¼–è¯‘å™¨èƒ½å¤Ÿæ‰¾åˆ°è¿™äº›å¤´æ–‡ä»¶ï¼Œå¹¶é¡ºåˆ©é€šè¿‡ç¼–è¯‘ã€‚åœ¨CMakeé€šè¿‡`include_directories`å³å¯æŒ‡å®š\n\n```shell\nåŸºæœ¬æ ¼å¼ï¼šinclude_directories(headpath)\nä¾‹ï¼š\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\n#PROJECT_SOURCE_DIRå®å¯¹åº”çš„å€¼å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨cmakeå‘½ä»¤æ—¶ï¼Œåé¢ç´§è·Ÿçš„ç›®å½•ï¼Œä¸€èˆ¬æ˜¯å·¥ç¨‹çš„æ ¹ç›®å½•\n```\n\n#### 1.9åˆ¶ä½œé™æ€åº“å’ŒåŠ¨æ€åº“\n\nå‘½ä»¤æ ¼å¼ï¼š`add_library(åº“åç§° STATIC æºæ–‡ä»¶1 [æºæ–‡ä»¶2] ...)`\n\né™æ€åº“åå­—åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šlib+åº“åå­—+.aï¼Œæ­¤å¤„åªéœ€è¦æŒ‡å®šå‡ºåº“åå­—å³å¯\n\n```shell\ncmake_minimum_required(VERSION 3.0)\nproject(CALC)\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\nfile(GLOB SRC_LIST \"${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp\")\n#åˆ¶ä½œé™æ€åº“,ç”Ÿæˆlibcalc.a\nadd_library(calc STATIC ${SRC_LIST})\n#åˆ¶ä½œåŠ¨æ€åº“,ç”Ÿæˆlibcalc.so\nadd_library(calc SHARED ${SRC_LIST})\n```\n\nè¿™æ ·æœ€ç»ˆå°±ä¼šç”Ÿæˆå¯¹åº”çš„é™æ€åº“æ–‡ä»¶`libcalc.a`å’Œ`libcalc.so`ã€‚\n\n##### 1.9.1æŒ‡å®šé™æ€åº“å’ŒåŠ¨æ€åº“çš„è¾“å‡ºè·¯å¾„ï¼š\n\nä½¿ç”¨`LIBRARY_OUTPUT_PATH`ï¼Œè¿™ä¸ªå®å¯¹åº”é™æ€åº“æ–‡ä»¶å’ŒåŠ¨æ€åº“æ–‡ä»¶éƒ½é€‚ç”¨ã€‚\n\n```shell\ncmake_minimum_required(VERSION 3.0)\nproject(CALC)\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\nfile(GLOB SRC_LIST \"${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp\")\n# è®¾ç½®åŠ¨æ€åº“/é™æ€åº“ç”Ÿæˆè·¯å¾„\nset(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)\n# ç”ŸæˆåŠ¨æ€åº“\n#add_library(calc SHARED ${SRC_LIST})\n# ç”Ÿæˆé™æ€åº“\nadd_library(calc STATIC ${SRC_LIST})\n```\n\n#### 1.10é“¾æ¥é™æ€åº“å’ŒåŠ¨æ€åº“\n\n##### 1.10.1é“¾æ¥é™æ€åº“\n\nå‘½ä»¤æ ¼å¼ï¼š`link_libraries(<static lib> [<static lib>...])`\n\n- å¯ä»¥æ˜¯å…¨å libxxx.a\n- ä¹Ÿå¯ä»¥æ˜¯æå¤´ï¼ˆlibï¼‰å»å°¾ï¼ˆ.aï¼‰ä¹‹åçš„åå­— xxx\n\nå¦‚æœè¯¥é™æ€åº“ä¸æ˜¯ç³»ç»Ÿæä¾›çš„ï¼ˆè‡ªå·±åˆ¶ä½œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„é™æ€åº“ï¼‰å¯èƒ½å‡ºç°é™æ€åº“æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œæ­¤æ—¶å¯ä»¥å°†é™æ€åº“çš„è·¯å¾„ä¹ŸæŒ‡å®šå‡ºæ¥ï¼š`link_directories(<lib path>)`\n\n```shell\ncmake_minimum_required(VERSION 3.0)\nproject(CALC)\n# æœç´¢æŒ‡å®šç›®å½•ä¸‹æºæ–‡ä»¶\nfile(GLOB SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)\n# åŒ…å«å¤´æ–‡ä»¶è·¯å¾„\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\n# åŒ…å«é™æ€åº“è·¯å¾„\nlink_directories(${PROJECT_SOURCE_DIR}/lib)\n# é“¾æ¥é™æ€åº“\nlink_libraries(calc)\nadd_executable(app ${SRC_LIST})\n```\n\n##### 1.10.2é“¾æ¥åŠ¨æ€åº“\n\n```cmake\ntarget_link_libraries(\n    <target> \n    <PRIVATE|PUBLIC|INTERFACE> <item>... \n    [<PRIVATE|PUBLIC|INTERFACE> <item>...]...)\n```\n\n- targetï¼šåŠ¨æ€åº“åï¼›\n- PRIVATE|PUBLIC|INTERFACEï¼šåŠ¨æ€åº“å¯è§†æƒé™ï¼Œé»˜è®¤ä¸ºPUBLIC\n\nåŠ¨æ€åº“çš„`é“¾æ¥å…·æœ‰ä¼ é€’æ€§`ï¼Œå¦‚æœåŠ¨æ€åº“ A é“¾æ¥äº†åŠ¨æ€åº“Bã€Cï¼ŒåŠ¨æ€åº“Dé“¾æ¥äº†åŠ¨æ€åº“Aï¼Œæ­¤æ—¶åŠ¨æ€åº“Dç›¸å½“äºä¹Ÿé“¾æ¥äº†Bã€C\n\n```cmake\ncmake_minimum_required(VERSION 3.0)\nproject(TEST)\nfile(GLOB SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp)\n# æŒ‡å®šæºæ–‡ä»¶æˆ–è€…åŠ¨æ€åº“å¯¹åº”çš„å¤´æ–‡ä»¶è·¯å¾„\ninclude_directories(${PROJECT_SOURCE_DIR}/include)\n# æŒ‡å®šè¦é“¾æ¥çš„åŠ¨æ€åº“çš„è·¯å¾„\nlink_directories(${PROJECT_SOURCE_DIR}/lib)\n# æ·»åŠ å¹¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº\nadd_executable(app ${SRC_LIST})\n# æŒ‡å®šè¦é“¾æ¥çš„åŠ¨æ€åº“\ntarget_link_libraries(app pthread calc)\n```\n\n### 2ã€æ—¥å¿—message\n\n`message`å‡½æ•°å¯ä»¥ä¸ºç”¨æˆ·æ‰“å°ä¸€æ¡æ¶ˆæ¯\n\n```cmake\nmessage([STATUS|WARNING|AUTHOR_WARNING|FATAL_ERROR|SEND_ERROR] \"message to display\" ...)\n```\n\n- (æ— ) ï¼šé‡è¦æ¶ˆæ¯\n- STATUS ï¼šéé‡è¦æ¶ˆæ¯\n- WARNINGï¼šCMake è­¦å‘Š, ä¼šç»§ç»­æ‰§è¡Œ\n- AUTHOR_WARNINGï¼šCMake è­¦å‘Š (dev), ä¼šç»§ç»­æ‰§è¡Œ\n- SEND_ERRORï¼šCMake é”™è¯¯, ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¼šè·³è¿‡ç”Ÿæˆçš„æ­¥éª¤\n- FATAL_ERRORï¼šCMake é”™è¯¯, ç»ˆæ­¢æ‰€æœ‰å¤„ç†è¿‡ç¨‹\n\n### 3ã€å˜é‡æ“ä½œ\n\n#### 3.1æ‹¼æ¥\n\n```cmake\ncmake_minimum_required(VERSION 3.0)\nproject(TEST)\nset(TEMP \"hello,world\")\nfile(GLOB SRC_1 ${PROJECT_SOURCE_DIR}/src1/*.cpp)\nfile(GLOB SRC_2 ${PROJECT_SOURCE_DIR}/src2/*.cpp)\n# è¿½åŠ (æ‹¼æ¥)\nset(SRC_1 ${SRC_1} ${SRC_2} ${TEMP})\nmessage(STATUS \"message: ${SRC_1}\")\ncmake_minimum_required(VERSION 3.0)\nproject(TEST)\nset(TEMP \"hello,world\")\nfile(GLOB SRC_1 ${PROJECT_SOURCE_DIR}/src1/*.cpp)\nfile(GLOB SRC_2 ${PROJECT_SOURCE_DIR}/src2/*.cpp)\n# è¿½åŠ (æ‹¼æ¥)\nlist(APPEND SRC_1 ${SRC_1} ${SRC_2} ${TEMP})\nmessage(STATUS \"message: ${SRC_1}\")\n```\n\n#### 3.2å­—ç¬¦ä¸²ç§»é™¤\n\n```cmake\ncmake_minimum_required(VERSION 3.0)\nproject(TEST)\nset(TEMP \"hello,world\")\nfile(GLOB SRC_1 ${PROJECT_SOURCE_DIR}/*.cpp)\n# ç§»é™¤å‰æ—¥å¿—\nmessage(STATUS \"message: ${SRC_1}\")\n# ç§»é™¤ main.cpp\nlist(REMOVE_ITEM SRC_1 ${PROJECT_SOURCE_DIR}/main.cpp)\n# ç§»é™¤åæ—¥å¿—\nmessage(STATUS \"message: ${SRC_1}\")\n```\n\n### 4ã€å®å®šä¹‰\n\n```c\n#include <stdio.h>\n#define NUMBER  3\nint main()\n{\n    int a = 10;\n    #ifdef DEBUG\n    printf(\"æˆ‘æ˜¯ä¸€ä¸ªç¨‹åºçŒ¿, æˆ‘ä¸ä¼šçˆ¬æ ‘...\\n\");\n    #endif\n    for(int i=0; i<NUMBER; ++i)\n    {\n        printf(\"hello, GCC!!!\\n\");\n    }\n    return 0;\n}\n```\n\nä¸ºäº†è®©æµ‹è¯•æ›´çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥ä¸åœ¨ä»£ç ä¸­å®šä¹‰è¿™ä¸ªå®ï¼Œè€Œæ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™å»æŠŠå®ƒå®šä¹‰å‡ºæ¥ï¼Œå…¶ä¸­ä¸€ç§æ–¹å¼å°±æ˜¯åœ¨gcc/g++å‘½ä»¤ä¸­å»æŒ‡å®šï¼Œå¦‚ä¸‹ï¼š\n\n```\n$ gcc test.c -DDEBUG -o app\n```\n\nåœ¨gcc/g++å‘½ä»¤ä¸­é€šè¿‡å‚æ•° `-D`æŒ‡å®šå‡ºè¦å®šä¹‰çš„å®çš„åå­—ï¼Œå…¶åå­—ä¸º`DEBUG`ã€‚\n\nåœ¨CMakeä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥åšç±»ä¼¼çš„äº‹æƒ…ï¼Œå¯¹åº”çš„å‘½ä»¤å«åš`add_definitions`\n\n```c\ncmake_minimum_required(VERSION 3.0)\nproject(TEST)\n# è‡ªå®šä¹‰ DEBUG å®\nadd_definitions(-DDEBUG)\nadd_executable(app ./test.c)\n```\n\n### 5ã€é¢„å®šä¹‰å®\n\n![image-20240306212818441](Makefileå’ŒCMake/image-20240306212818441.png)\n\n### 6ã€åµŒå¥—çš„CMake\n\nå¦‚æœé¡¹ç›®å¾ˆå¤§ï¼Œæˆ–è€…é¡¹ç›®ä¸­æœ‰å¾ˆå¤šçš„æºç ç›®å½•ï¼Œå°±å¾—ç»™æ¯ä¸ªæºç ç›®å½•éƒ½æ·»åŠ ä¸€ä¸ª`CMakeLists.txt`æ–‡ä»¶ï¼ˆå¤´æ–‡ä»¶ç›®å½•ä¸éœ€è¦ï¼‰ï¼Œè¿™æ ·æ¯ä¸ªæ–‡ä»¶éƒ½ä¸ä¼šå¤ªå¤æ‚ï¼Œè€Œä¸”æ›´çµæ´»ï¼Œæ›´å®¹æ˜“ç»´æŠ¤ã€‚\n\n```c\n$ tree\n.\nâ”œâ”€â”€ build\nâ”œâ”€â”€ calc\nâ”‚   â”œâ”€â”€ add.cpp\nâ”‚   â”œâ”€â”€ CMakeLists.txt\nâ”‚   â”œâ”€â”€ div.cpp\nâ”‚   â”œâ”€â”€ mult.cpp\nâ”‚   â””â”€â”€ sub.cpp\nâ”œâ”€â”€ CMakeLists.txt\nâ”œâ”€â”€ include\nâ”‚   â”œâ”€â”€ calc.h\nâ”‚   â””â”€â”€ sort.h\nâ”œâ”€â”€ sort\nâ”‚   â”œâ”€â”€ CMakeLists.txt\nâ”‚   â”œâ”€â”€ insert.cpp\nâ”‚   â””â”€â”€ select.cpp\nâ”œâ”€â”€ test1\nâ”‚   â”œâ”€â”€ calc.cpp\nâ”‚   â””â”€â”€ CMakeLists.txt\nâ””â”€â”€ test2\n    â”œâ”€â”€ CMakeLists.txt\n    â””â”€â”€ sort.cpp\n\n6 directories, 15 files\n```\n\nå¯ä»¥é€šè¿‡add_subdirectoryå»ºç«‹çˆ¶å­èŠ‚ç‚¹å…³ç³»\n\n```\nadd_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL])\n```\n\næ³¨ï¼šå­èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨è¯»å–çˆ¶èŠ‚ç‚¹ä¸­çš„å˜é‡\n\n```cmake\ncmake_minimum_required(VERSION 3.0)\nproject(test)\n# å®šä¹‰å˜é‡\n# é™æ€åº“ç”Ÿæˆçš„è·¯å¾„\nset(LIB_PATH ${CMAKE_CURRENT_SOURCE_DIR}/lib)\n# æµ‹è¯•ç¨‹åºç”Ÿæˆçš„è·¯å¾„\nset(EXEC_PATH ${CMAKE_CURRENT_SOURCE_DIR}/bin)\n# å¤´æ–‡ä»¶ç›®å½•\nset(HEAD_PATH ${CMAKE_CURRENT_SOURCE_DIR}/include)\n# é™æ€åº“çš„åå­—\nset(CALC_LIB calc)\nset(SORT_LIB sort)\n# å¯æ‰§è¡Œç¨‹åºçš„åå­—\nset(APP_NAME_1 test1)\nset(APP_NAME_2 test2)\n# æ·»åŠ å­ç›®å½•\nadd_subdirectory(calc)\nadd_subdirectory(sort)\nadd_subdirectory(test1)\nadd_subdirectory(test2)\ncmake_minimum_required(VERSION 3.0)\nproject(CALCLIB)\naux_source_directory(./ SRC)\ninclude_directories(${HEAD_PATH})\nset(LIBRARY_OUTPUT_PATH ${LIB_PATH})\nadd_library(${CALC_LIB} STATIC ${SRC})\ncmake_minimum_required(VERSION 3.0)\nproject(SORTLIB)\naux_source_directory(./ SRC)\ninclude_directories(${HEAD_PATH})\nset(LIBRARY_OUTPUT_PATH ${LIB_PATH})\nadd_library(${SORT_LIB} SHARED ${SRC})\ncmake_minimum_required(VERSION 3.0)\nproject(CALCTEST)\naux_source_directory(./ SRC)\ninclude_directories(${HEAD_PATH})\nlink_directories(${LIB_PATH})\nlink_libraries(${CALC_LIB})\nset(EXECUTABLE_OUTPUT_PATH ${EXEC_PATH})\nadd_executable(${APP_NAME_1} ${SRC})\ncmake_minimum_required(VERSION 3.0)\nproject(SORTTEST)\naux_source_directory(./ SRC)\ninclude_directories(${HEAD_PATH})\nset(EXECUTABLE_OUTPUT_PATH ${EXEC_PATH})\nlink_directories(${LIB_PATH})\nadd_executable(${APP_NAME_2} ${SRC})\ntarget_link_libraries(${APP_NAME_2} ${SORT_LIB})\n```\n\n### 7ã€æµç¨‹æ§åˆ¶\n\n#### 7.1æ¡ä»¶åˆ¤æ–­\n\n##### 7.1.1åŸºæœ¬è¡¨è¾¾å¼\n\n```cmake\nif(<condition>)\n  <commands>\nelseif(<condition>) # å¯é€‰å¿«, å¯ä»¥é‡å¤\n  <commands>\nelse()              # å¯é€‰å¿«\n  <commands>\nendif()\n```\n\n`if`å’Œ`endif`å¿…é¡»æˆå¯¹å‡ºç°\n\n##### 7.1.2é€»è¾‘åˆ¤æ–­\n\n```cmake\nif(<cond1> AND <cond2>)ä¸”\nif(<cond1> OR <cond2>)æˆ–\nif(NOT <conditon>)é\n```\n\n##### 7.1.3æ¯”è¾ƒ\n\n```cmake\nå°äºï¼šif(<variable|string> LESS <variable|string>)\nå¤§äºï¼šif(<variable|string> GREATER <variable|string>)\nç­‰äºï¼šif(<variable|string> EQUAL <variable|string>)\nå°äºç­‰äºï¼šif(<variable|string> LESS_EQUAL <variable|string>)\nå¤§äºç­‰äºï¼šif(<variable|string> GREATER_EQUAL <variable|string>)\n```\n\n##### 7.1.4æ–‡ä»¶æ“ä½œ\n\n```cmake\n#åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨\nif(EXISTS path-to-file-or-directory)\n#åˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•\nif(IS_DIRECTORY path)\n#åˆ¤æ–­æ˜¯å¦æ˜¯è½¯é“¾æ¥\nif(IS_SYMLINK file-name)\n#åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„\nif(IS_ABSOLUTE path)\n```\n\n#### 7.2å¾ªç¯\n"},{"title":"Gitä½¿ç”¨æ–¹æ³•","url":"/2024/03/06/Gitä½¿ç”¨æ–¹æ³•/","content":"\nGiteeå’ŒGitHubéƒ½ä¸º **ä»£ç æ‰˜ç®¡å¹³å°**\n\n### ç”Ÿæˆå…¬ç§é’¥\n\n```\nssh-keygen -t rsa -C \"xxxxx@xxx.xx\"\n```\n\nxxxxx@xxxxx.xxæ˜¯ä½ è‡ªå·±çš„è´¦å·é‚®ç®±ã€‚\n\næŸ¥çœ‹å…¬é’¥`cat ~/.ssh/id_rsa.pub`\n\n### å°†keyæ·»åŠ åˆ°gitee\n\næ‰“å¼€Gitee->è®¾ç½®->sshå…¬é’¥\n\n![img](Gitä½¿ç”¨æ–¹æ³•/1699105694521-5d268d30-726b-4b5a-9895-2d45fd23ef52.png)\n\nç²˜è´´ç”Ÿæˆçš„å…¬é’¥åˆ°gitee\n\n![img](Gitä½¿ç”¨æ–¹æ³•/1699105780347-636db41e-af68-422d-89b8-e1588fffa6b2.png)\n\n### å…‹éš†\n\næ‰¾åˆ°ç©ºç™½æ–‡ä»¶å¤¹å³é”®æ‰“å¼€â€œopen git bash hereâ€\n\n```\ngit clone xx@xxxxxxxxxx:xx/xx\n```\n\nå…¶ä¸­â€œxx@xxxxxxxxxx:xx/xxâ€åœ¨giteeé¡¹ç›®å¯ä»¥æ‰¾åˆ°\n\n![img](Gitä½¿ç”¨æ–¹æ³•/1699105942560-56328cfc-867f-4c7d-9368-e7b10435a1fa.png)\n\n![img](Gitä½¿ç”¨æ–¹æ³•/1699105982587-6855caff-ae6e-4da1-9d59-b298c2ded13c.png)\n\n### å…³è”æœ¬åœ°å·¥ç¨‹åˆ°è¿œç¨‹ä»“åº“\n\næˆ‘ä»¬å¦‚æœæœ¬åœ°æœ‰äº†å·¥ç¨‹æ–‡ä»¶ï¼Œç„¶åå†åœ¨giteeä¸Šåˆ›å»ºä»“åº“ã€‚\næ­¤æ—¶ï¼Œå¯åœ¨æœ¬åœ°åº“ä¸Šä½¿ç”¨å‘½ä»¤ git remote addæŠŠå®ƒå’Œ gitee çš„è¿œç¨‹åº“å…³è”ï¼Œå¦‚ä¸‹\n\n```\ngit remote add æœ¬åœ°å·¥ç¨‹ git@gitee.com:vicczyq/test.git\n```\n\n`git remote -v`æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯\n\n`git remote rm åº“å`åˆ é™¤å·²æœ‰çš„è¿œç¨‹åº“\n\n### æ·»åŠ æ–‡ä»¶\n\n![img](Gitä½¿ç”¨æ–¹æ³•/1699106355673-79f18f62-a1da-4157-8619-6d830a0982e5.png)\n\n### å¸¸ç”¨å‘½ä»¤\n\n```cpp\ngit init \t\t\t\t\t#æŠŠå½“å‰ç›®å½•å˜æˆgitå¯ä»¥ç®¡ç†çš„ä»“åº“\ngit clone gitåœ°å€ \t\t\t#å…‹éš†é¡¹ç›®\ngit add readme.txt \t\t\t#æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–‡ä»¶å¤¹\ngit add -A \t\t\t\t\t#æ·»åŠ å…¨éƒ¨æ–‡ä»¶\ngit rm test.txt \t\t\t#åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ é™¤æ–‡ä»¶å¤¹\ngit commit -a -m â€œsome commitâ€ #æäº¤ä¿®æ”¹\ngit status \t\t\t\t\t#æŸ¥çœ‹æ˜¯å¦è¿˜æœ‰æœªæäº¤\ngit log \t\t\t\t\t#æŸ¥çœ‹æœ€è¿‘æ—¥å¿—\ngit reset --hard HEAD^ \t\t#ç‰ˆæœ¬å›é€€ä¸€ä¸ªç‰ˆæœ¬\ngit reset --hard HEAD^^ \t#ç‰ˆæœ¬å›é€€ä¸¤ä¸ªç‰ˆæœ¬\ngit reset --hard HEAD~100 \t#ç‰ˆæœ¬å›é€€å¤šä¸ªç‰ˆæœ¬\ngit remote add origin +åœ°å€ #è¿œç¨‹ä»“åº“çš„æäº¤ï¼ˆç¬¬ä¸€æ¬¡é“¾æ¥ï¼‰\ngit push -u origin master\t#ä»“åº“å…³è”\ngit push \t\t\t\t\t#è¿œç¨‹ä»“åº“çš„æäº¤ï¼ˆç¬¬äºŒæ¬¡åŠä¹‹åï¼‰\ngit fetch \t\t\t\t\t#ä»è¿œç¨‹è·å–ä»£ç åº“\ngit tag xxx \t\t\t\t#æ‰“tag\ngit tag \t\t\t\t\t#æ˜¾ç¤ºæ‰€æœ‰tag\ngit push --tag \t\t\t\t#æäº¤tag\ngit branch -a \t\t\t\t#æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯\ngit checkout åˆ†æ”¯å \t\t#åˆ‡æ¢åˆ†æ”¯\ngit merge gitåˆ†æ”¯ \t\t\t#åˆå¹¶åˆ†æ”¯\n ç„¶åç»§ç»­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n //1ã€åˆå§‹åŒ–ä»“åº“    \n $ git init\n //2ã€æŠŠæœ¬åœ°æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒº\n $ git add .\n //3ã€æŠŠ æš‚å­˜åŒºæ–‡ä»¶æ”¾å…¥æœ¬åœ°ä»“åº“\n git commit -m \"ä¸ªäººä¸»é¡µ\"\n //4ã€git remote add origin ä½ çš„ä»“åº“åœ°å€\n git remote add origin https://gitee.com/.......\n //5.æŠŠæœ¬åœ°ä»“åº“çš„ç½‘ç«™æ¨é€åˆ°ç äº‘è¿œç¨‹ä»“åº“\n git push -u origin master\n```\n"},{"title":"QT6å¼€å‘","url":"/2024/03/04/QT6å¼€å‘/","content":"\n[çˆ±ç¼–ç¨‹çš„å¤§ä¸™](https://subingwen.cn/qt/qt-primer/)\n\n# ç®€ä»‹\n\nQtæ˜¯ä¸€ä¸ª**è·¨å¹³å°çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶**ï¼Œä¹Ÿæ˜¯ä¸»æµçš„C++æ¡†æ¶\n\nQT = å¼€å‘å·¥å…· + åº“ç±»\n\n# 1 é¡¹ç›®åˆ›å»º\n\n- é¡¹ç›®å·¥ç¨‹è·¯å¾„ä¸è¦æœ‰ç‰¹æ®Šç¬¦å·ï¼Œä¸è¦æœ‰ä¸­æ–‡\n- åˆ›å»ºç±»çš„åŸºç±»ï¼š**å¸¦èœå•æ çš„çª—å£**ï¼ˆQMainWindowï¼‰ï¼Œ**ç©ºç™½çª—å£**ï¼ˆQWidgetï¼‰ï¼Œ**å¯¹è¯æ¡†çª—å£**ï¼ˆQDialogï¼‰\n\n![image-20240313172002211](QT6å¼€å‘/image-20240313172002211.png)\n\n# 2 åŸºç¡€çŸ¥è¯†\n\n## 2.1 çª—å£æ˜¾ç¤º\n\n![çª—å£ç±»ç»§æ‰¿å…³ç³»](QT6å¼€å‘/image-20200909165056959-9643bd7ed74c4966a3cb02f59a3366fd.png)\n\n**å†…åµŒçª—å£ï¼š**\n\n- çª—å£ä¾é™„äºæŸä¸€ä¸ªå¤§çª—å£ï¼Œä½œä¸ºå¤§çª—å£çš„ä¸€éƒ¨åˆ†\n- å¤§çª—å£å°±æ˜¯è¿™ä¸ªå†…åµŒçª—å£çš„çˆ¶çª—å£\n- **çˆ¶çª—å£æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå†…åµŒçª—å£å°±è¢«æ˜¾ç¤ºå‡ºæ¥äº†**\n\n```cpp\n#include \"widget.h\"\n#include \"ui_widget.h\"\n#include \"testwindow.h\"\nWidget::Widget(QWidget *parent) :\n    QWidget(parent),\n    ui(new Ui::Widget)\n{\n    ui->setupUi(this);\n    TestWindow *t=new TestWindow(this);//å†…åµŒçª—å£ï¼Œæ— éœ€show\n}\n\nWidget::~Widget()\n{\n    delete ui;\n}\n```\n\n**éå†…åµŒçª—å£ï¼š**\n\n- éœ€è¦è°ƒç”¨show()å‡½æ•°æ‰å¯ä»¥æ˜¾ç¤º\n\n### 2.1.1 Dialogçš„æ¨¡æ€å’Œéæ¨¡æ€\n\n```cpp\nTestWindow *t=new TestWindow(this);\nt->show();//éæ¨¡æ€ï¼Œé¼ æ ‡èšç„¦ä¸ä¼šé”å®š\nt->exec();//æ¨¡æ€ï¼Œé¼ æ ‡èšç„¦ä¼šé”å®š\n```\n\næ¨¡æ€æ—¶å€™ä¸å…³é—­å½“å‰çª—å£ï¼Œå…¶ä»–çª—å£æ— æ³•ç‚¹å‡»\n\n## 2.2 åæ ‡ä½“ç³»\n\n![image-20240313181750885](QT6å¼€å‘/image-20240313181750885.png)\n\nå­çª—å£çš„åˆå§‹ä½ç½®é‡‡ç”¨çš„æ˜¯**çˆ¶çª—å£çš„åæ ‡ç³»**\n\n![image-20240313182128608](QT6å¼€å‘/image-20240313182128608.png)\n\n## 2.3 å†…å­˜å›æ”¶æœºåˆ¶\n\n![å¯¹è±¡æ ‘](QT6å¼€å‘/image-20200909165237496-61f1fa9d723c49ebb21df56de70f04b1.png)\n\nQtä¸­æœ‰å†…å­˜å›æ”¶æœºåˆ¶, ä½†æ˜¯ä¸æ˜¯æ‰€æœ‰è¢«newå‡ºçš„å¯¹è±¡è¢«è‡ªåŠ¨å›æ”¶, æ»¡è¶³æ¡ä»¶æ‰å¯ä»¥å›æ”¶\n\n- åˆ›å»ºçš„å¯¹è±¡å¿…é¡»æ˜¯QObjectç±»çš„å­ç±»(é—´æ¥å­ç±»ä¹Ÿå¯ä»¥)\n\n- åˆ›å»ºå‡ºçš„ç±»å¯¹è±¡, å¿…é¡»è¦æŒ‡å®šå…¶çˆ¶å¯¹è±¡æ˜¯è°, ä¸€èˆ¬æƒ…å†µä¸‹æœ‰ä¸¤ç§æ“ä½œæ–¹å¼:\n\n```cpp\n// æ–¹å¼1: é€šè¿‡æ„é€ å‡½æ•°\n// parent: å½“å‰çª—å£çš„çˆ¶å¯¹è±¡, æ‰¾æ„é€ å‡½æ•°ä¸­çš„ parent å‚æ•°å³å¯\nQWidget::QWidget(QWidget *parent = Q_NULLPTR, Qt::WindowFlags f = Qt::WindowFlags());\nQTimer::QTimer(QObject *parent = nullptr);\n\n// æ–¹å¼2: é€šè¿‡setParent()æ–¹æ³•\n// å‡è®¾è¿™ä¸ªæ§ä»¶æ²¡æœ‰åœ¨æ„é€ çš„æ—¶å€™æŒ‡å®šç¬¦å¯¹è±¡, å¯ä»¥è°ƒç”¨QWidgetçš„apiæŒ‡å®šçˆ¶çª—å£å¯¹è±¡\nvoid QWidget::setParent(QWidget *parent);\nvoid QObject::setParent(QObject *parent);\n```\n\nQObjectç±»æ˜¯æ²¡æœ‰çˆ¶ç±»çš„, Qtä¸­æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†ç±»éƒ½æ˜¯ä»è¿™ä¸ªç±»æ´¾ç”Ÿå‡ºå»çš„\n\nQtä¸­ä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„çª—å£ç±»å’Œæ§ä»¶éƒ½æ˜¯ QObject çš„ç›´æ¥æˆ–é—´æ¥çš„å­ç±»\n\n## 2.4 QTæ•°æ®\n\n### 2.4.1 åŸºç¡€æ•°æ®ç±»å‹\n\nQtä¸­ä¹Ÿå®šä¹‰äº†ä¸€äº›å±äºè‡ªå·±çš„æ•°æ®ç±»å‹, å®šä¹‰åœ¨`#include <QtGlobal>` ä¸­,\n\nå…·ä½“è§ï¼š[QTåŸºæœ¬æ•°æ®ç±»å‹](https://subingwen.cn/qt/qt-basetype/#1-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B)\n\n### 2.4.2 æ—¥å¿—è¾“å‡º\n\n> åœ¨Qtä¸­è¿›è¡Œlogè¾“å‡º, ä¸€èˆ¬ä¸ä½¿ç”¨cä¸­çš„`printf`, ä¹Ÿä¸æ˜¯ä½¿ç”¨C++ä¸­çš„`cout`,\n>\n> Qtæ¡†æ¶æä¾›äº†ä¸“é—¨ç”¨äºæ—¥å¿—è¾“å‡ºçš„ç±», å¤´æ–‡ä»¶åä¸º `QDebug`\n\n```cpp\n#include <QDebug>\n// åŒ…å«äº†QDebugå¤´æ–‡ä»¶, ç›´æ¥é€šè¿‡å…¨å±€å‡½æ•° qDebug() å°±å¯ä»¥è¿›è¡Œæ—¥å¿—è¾“å‡ºäº†\nqDebug() << \"èŠœæ¹–\" << endl;\n```\n\nå¦‚æœè¦åœ¨ç”Ÿæˆçš„exeè¿è¡Œæ—¶ï¼Œçœ‹åˆ°debugçš„ä¿¡æ¯ï¼Œå¯åšä»¥ä¸‹æ“ä½œ\n\nåœ¨`.pro`æ„å»ºæ–‡ä»¶ä¸­ä¿®æ”¹`CONFIG`ï¼Œè®¾ç½®`CONFIG += console`\n\nä¸ä»…æœ‰`qDebug()`ï¼Œè¿˜æœ‰`qWarning()`ã€`qInfo()`ã€`qCritical() `\n\n### 2.4.3 å­—ç¬¦ä¸²ç±»å‹\n\n> C => char *\n>\n> C++ => string\n>\n> QT => QByteArrayã€QString\n\n#### 2.4.3.1 QBtreArray\n\næ„é€ å‡½æ•°\n\n```cpp\n// æ„é€ ç©ºå¯¹è±¡, é‡Œè¾¹æ²¡æœ‰æ•°æ®\nQByteArray::QByteArray();\n// å°†dataä¸­çš„sizeä¸ªå­—ç¬¦è¿›è¡Œæ„é€ , å¾—åˆ°ä¸€ä¸ªå­—èŠ‚æ•°ç»„å¯¹è±¡\n// å¦‚æœ size==-1 å‡½æ•°å†…éƒ¨è‡ªåŠ¨è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦, è®¡ç®—æ–¹å¼ä¸º: strlen(data)\nQByteArray::QByteArray(const char *data, int size = -1);\n// æ„é€ ä¸€ä¸ªé•¿åº¦ä¸ºsizeä¸ªå­—èŠ‚, å¹¶ä¸”æ¯ä¸ªå­—èŠ‚å€¼éƒ½ä¸ºchçš„å­—èŠ‚æ•°ç»„\nQByteArray::QByteArray(int size, char ch);\n```\n\næ•°æ®æ“ä½œ\n\n```cpp\n// åœ¨å°¾éƒ¨è¿½åŠ æ•°æ®\nQByteArray &QByteArray::append(const QByteArray &ba);\nvoid QByteArray::push_back(const QByteArray &other);\n\n// å¤´éƒ¨æ·»åŠ æ•°æ®\nQByteArray &QByteArray::prepend(const QByteArray &ba);\nvoid QByteArray::push_front(const QByteArray &other);\n\n// æ’å…¥æ•°æ®, å°†baæ’å…¥åˆ°æ•°ç»„ç¬¬ i ä¸ªå­—èŠ‚çš„ä½ç½®(ä»0å¼€å§‹)\nQByteArray &QByteArray::insert(int i, const QByteArray &ba);\n\n// åˆ é™¤æ•°æ®\n// ä»å¤§å­—ç¬¦ä¸²ä¸­åˆ é™¤lenä¸ªå­—ç¬¦, ä»ç¬¬posä¸ªå­—ç¬¦çš„ä½ç½®å¼€å§‹åˆ é™¤\nQByteArray &QByteArray::remove(int pos, int len);\n// ä»å­—ç¬¦æ•°ç»„çš„å°¾éƒ¨åˆ é™¤ n ä¸ªå­—èŠ‚\nvoid QByteArray::chop(int n);\n// ä»å­—èŠ‚æ•°ç»„çš„ pos ä½ç½®å°†æ•°ç»„æˆªæ–­ (å‰è¾¹éƒ¨åˆ†ç•™ä¸‹, åè¾¹éƒ¨åˆ†è¢«åˆ é™¤)\nvoid QByteArray::truncate(int pos);\n// å°†å¯¹è±¡ä¸­çš„æ•°æ®æ¸…ç©º, ä½¿å…¶ä¸ºnull\nvoid QByteArray::clear();\n\n// å­—ç¬¦ä¸²æ›¿æ¢\n// å°†å­—èŠ‚æ•°ç»„ä¸­çš„ å­å­—ç¬¦ä¸² before æ›¿æ¢ä¸º after\nQByteArray &QByteArray::replace(const QByteArray &before, const QByteArray &after);\n```\n\næŸ¥æ‰¾å’Œåˆ¤æ–­\n\n```cpp\n// åˆ¤æ–­å­—èŠ‚æ•°ç»„ä¸­æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸² ba, åŒ…å«è¿”å›true, å¦åˆ™è¿”å›false\nbool QByteArray::contains(const QByteArray &ba) const;\nbool QByteArray::contains(const char *ba) const;\n// åˆ¤æ–­å­—èŠ‚æ•°ç»„ä¸­æ˜¯å¦åŒ…å«å­å­—ç¬¦ ch, åŒ…å«è¿”å›true, å¦åˆ™è¿”å›false\nbool QByteArray::contains(char ch) const;\n\n// åˆ¤æ–­å­—èŠ‚æ•°ç»„æ˜¯å¦ä»¥å­—ç¬¦ä¸² ba å¼€å§‹, æ˜¯è¿”å›true, ä¸æ˜¯è¿”å›false\nbool QByteArray::startsWith(const QByteArray &ba) const;\nbool QByteArray::startsWith(const char *ba) const;\n// åˆ¤æ–­å­—èŠ‚æ•°ç»„æ˜¯å¦ä»¥å­—ç¬¦ ch å¼€å§‹, æ˜¯è¿”å›true, ä¸æ˜¯è¿”å›false\nbool QByteArray::startsWith(char ch) const;\n\n// åˆ¤æ–­å­—èŠ‚æ•°ç»„æ˜¯å¦ä»¥å­—ç¬¦ä¸² ba ç»“å°¾, æ˜¯è¿”å›true, ä¸æ˜¯è¿”å›false\nbool QByteArray::endsWith(const QByteArray &ba) const;\nbool QByteArray::endsWith(const char *ba) const;\n// åˆ¤æ–­å­—èŠ‚æ•°ç»„æ˜¯å¦ä»¥å­—ç¬¦ ch ç»“å°¾, æ˜¯è¿”å›true, ä¸æ˜¯è¿”å›false\nbool QByteArray::endsWith(char ch) const;\n```\n\néå†\n\n```cpp\n// ä½¿ç”¨è¿­ä»£å™¨\niterator QByteArray::begin();\niterator QByteArray::end();\n\n// ä½¿ç”¨æ•°ç»„çš„æ–¹å¼è¿›è¡Œéå†\n// içš„å–å€¼èŒƒå›´ 0 <= i < size()\nchar QByteArray::at(int i) const;\nchar QByteArray::operator[](int i) const;\n```\n\nç©ºé—´å’Œå¤§å°\n\n```cpp\n// è¿”å›å­—èŠ‚æ•°ç»„å¯¹è±¡ä¸­å­—ç¬¦çš„ä¸ªæ•°\nint QByteArray::length() const;\nint QByteArray::size() const;\nint QByteArray::count() const;\n\n// è¿”å›å­—èŠ‚æ•°ç»„å¯¹è±¡ä¸­ å­å­—ç¬¦ä¸²ba å‡ºç°çš„æ¬¡æ•°\nint QByteArray::count(const QByteArray &ba) const;\nint QByteArray::count(const char *ba) const;\n// è¿”å›å­—èŠ‚æ•°ç»„å¯¹è±¡ä¸­ å­—ç¬¦ä¸²ch å‡ºç°çš„æ¬¡æ•°\nint QByteArray::count(char ch) const;\n```\n\næ•°æ®ç±»å‹è½¬æ¢\n\n```cpp\n// å°†QByteArrayç±»å‹çš„å­—ç¬¦ä¸² è½¬æ¢ä¸º char* ç±»å‹\nchar *QByteArray::data();\nconst char *QByteArray::data() const;\n\n// int, short, long, float, double -> QByteArray\nQByteArray &QByteArray::setNum(int n, int base = 10);\nQByteArray &QByteArray::setNum(short n, int base = 10);\nQByteArray &QByteArray::setNum(qlonglong n, int base = 10);\nQByteArray &QByteArray::setNum(float n, char f = 'g', int prec = 6);\nQByteArray &QByteArray::setNum(double n, char f = 'g', int prec = 6);\n[static] QByteArray QByteArray::number(int n, int base = 10);\n[static] QByteArray QByteArray::number(qlonglong n, int base = 10);\n[static] QByteArray QByteArray::number(double n, char f = 'g', int prec = 6);\n\n// QByteArray -> int, short, long, float, double\nint QByteArray::toInt(bool *ok = Q_NULLPTR, int base = 10) const;\nshort QByteArray::toShort(bool *ok = Q_NULLPTR, int base = 10) const;\nlong QByteArray::toLong(bool *ok = Q_NULLPTR, int base = 10) const;\nfloat QByteArray::toFloat(bool *ok = Q_NULLPTR) const;\ndouble QByteArray::toDouble(bool *ok = Q_NULLPTR) const;\n\n// std::string -> QByteArray\n[static] QByteArray QByteArray::fromStdString(const std::string &str);\n// QByteArray -> std::string\nstd::string QByteArray::toStdString() const;\n\n// æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™\nQByteArray QByteArray::toUpper() const;\n// æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™\nQByteArray QByteArray::toLower() const;\n```\n\n#### 2.4.3.2 QString\n\næ„é€ å‡½æ•°\n\n```cpp\n// æ„é€ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²å¯¹è±¡\nQString::QString();\n// å°† char* å­—ç¬¦ä¸² è½¬æ¢ä¸º QString ç±»å‹\nQString::QString(const char *str);\n// å°† QByteArray è½¬æ¢ä¸º QString ç±»å‹\nQString::QString(const QByteArray &ba);\n```\n\næ•°æ®æ“ä½œ\n\n```cpp\n// å°¾éƒ¨è¿½åŠ æ•°æ®\nQString &QString::append(const QString &str);\nQString &QString::append(const char *str);\nQString &QString::append(const QByteArray &ba);\nvoid QString::push_back(const QString &other);\n\n// å¤´éƒ¨æ·»åŠ æ•°æ®\nQString &QString::prepend(const QString &str);\nQString &QString::prepend(const char *str);\nQString &QString::prepend(const QByteArray &ba);\nvoid QString::push_front(const QString &other);\n\n// æ’å…¥æ•°æ®, å°† str æ’å…¥åˆ°å­—ç¬¦ä¸²ç¬¬ position ä¸ªå­—ç¬¦çš„ä½ç½®(ä»0å¼€å§‹)\nQString &QString::insert(int position, const QString &str);\nQString &QString::insert(int position, const char *str);\nQString &QString::insert(int position, const QByteArray &str);\n\n// åˆ é™¤æ•°æ®\n// ä»å¤§å­—ç¬¦ä¸²ä¸­åˆ é™¤lenä¸ªå­—ç¬¦, ä»ç¬¬posä¸ªå­—ç¬¦çš„ä½ç½®å¼€å§‹åˆ é™¤\nQString &QString::remove(int position, int n);\n\n// ä»å­—ç¬¦ä¸²çš„å°¾éƒ¨åˆ é™¤ n ä¸ªå­—ç¬¦\nvoid QString::chop(int n);\n// ä»å­—èŠ‚ä¸²çš„ position ä½ç½®å°†å­—ç¬¦ä¸²æˆªæ–­ (å‰è¾¹éƒ¨åˆ†ç•™ä¸‹, åè¾¹éƒ¨åˆ†è¢«åˆ é™¤)\nvoid QString::truncate(int position);\n// å°†å¯¹è±¡ä¸­çš„æ•°æ®æ¸…ç©º, ä½¿å…¶ä¸ºnull\nvoid QString::clear();\n\n// å­—ç¬¦ä¸²æ›¿æ¢\n// å°†å­—èŠ‚æ•°ç»„ä¸­çš„ å­å­—ç¬¦ä¸² before æ›¿æ¢ä¸º after\n// å‚æ•° cs ä¸ºæ˜¯å¦åŒºåˆ†å¤§å°å†™, é»˜è®¤åŒºåˆ†å¤§å°å†™\nQString &QString::replace(const QString &before, const QString &after, Qt::CaseSensitivity cs = Qt::CaseSensitive);\n```\n\næŸ¥æ‰¾å’Œåˆ¤æ–­\n\n```cpp\n// å‚æ•° cs ä¸ºæ˜¯å¦åŒºåˆ†å¤§å°å†™, é»˜è®¤åŒºåˆ†å¤§å°å†™\n\n// åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸² str, åŒ…å«è¿”å›true, å¦åˆ™è¿”å›false\nbool QString::contains(const QString &str, Qt::CaseSensitivity cs = Qt::CaseSensitive) const;\n\n// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥å­—ç¬¦ä¸² ba å¼€å§‹, æ˜¯è¿”å›true, ä¸æ˜¯è¿”å›false\nbool QString::startsWith(const QString &s, Qt::CaseSensitivity cs = Qt::CaseSensitive) const;\n\n// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥å­—ç¬¦ä¸² ba ç»“å°¾, æ˜¯è¿”å›true, ä¸æ˜¯è¿”å›false\nbool QString::endsWith(const QString &s, Qt::CaseSensitivity cs = Qt::CaseSensitive) const;\n```\n\néå†\n\n```cpp\n// ä½¿ç”¨è¿­ä»£å™¨\niterator QString::begin();\niterator QString::end();\n\n// ä½¿ç”¨æ•°ç»„çš„æ–¹å¼è¿›è¡Œéå†\n// içš„å–å€¼èŒƒå›´ 0 <= position < size()\nconst QChar QString::at(int position) const\nconst QChar QString::operator[](int position) const;\n```\n\nç©ºé—´å’Œå¤§å°\n\n```cpp\n// è¿”å›å­—èŠ‚æ•°ç»„å¯¹è±¡ä¸­å­—ç¬¦çš„ä¸ªæ•° (å­—ç¬¦ä¸ªæ•°å’Œå­—èŠ‚ä¸ªæ•°æ˜¯ä¸åŒçš„æ¦‚å¿µ)\nint QString::length() const;\nint QString::size() const;\nint QString::count() const;\n\n// è¿”å›å­—èŠ‚ä¸²å¯¹è±¡ä¸­ å­å­—ç¬¦ä¸² str å‡ºç°çš„æ¬¡æ•°\n// å‚æ•° cs ä¸ºæ˜¯å¦åŒºåˆ†å¤§å°å†™, é»˜è®¤åŒºåˆ†å¤§å°å†™\nint QString::count(const QStringRef &str, Qt::CaseSensitivity cs = Qt::CaseSensitive) const;\n```\n\næ•°æ®ç±»å‹è½¬æ¢\n\n```cpp\n// å°†int, short, long, float, double è½¬æ¢ä¸º QString ç±»å‹\nQString &QString::setNum(int n, int base = 10);\nQString &QString::setNum(short n, int base = 10);\nQString &QString::setNum(long n, int base = 10);\nQString &QString::setNum(float n, char format = 'g', int precision = 6);\nQString &QString::setNum(double n, char format = 'g', int precision = 6);\n[static] QString QString::number(long n, int base = 10);\n[static] QString QString::number(int n, int base = 10);\n[static] QString QString::number(double n, char format = 'g', int precision = 6);\n\n// å°† QString è½¬æ¢ä¸º int, short, long, float, double ç±»å‹\nint QString::toInt(bool *ok = Q_NULLPTR, int base = 10) const;\nshort QString::toShort(bool *ok = Q_NULLPTR, int base = 10) const;\nlong QString::toLong(bool *ok = Q_NULLPTR, int base = 10) const\nfloat QString::toFloat(bool *ok = Q_NULLPTR) const;\ndouble QString::toDouble(bool *ok = Q_NULLPTR) const;\n\n// å°†æ ‡å‡†C++ä¸­çš„ std::string ç±»å‹ è½¬æ¢ä¸º QString ç±»å‹\n[static] QString QString::fromStdString(const std::string &str);\n// å°† QString è½¬æ¢ä¸º æ ‡å‡†C++ä¸­çš„ std::string ç±»å‹\nstd::string QString::toStdString() const;\n\n// QString -> QByteArray\n// è½¬æ¢ä¸ºæœ¬åœ°ç¼–ç , è·Ÿéšæ“ä½œç³»ç»Ÿ\nQByteArray QString::toLocal8Bit() const;\n// è½¬æ¢ä¸º Latin-1 ç¼–ç çš„å­—ç¬¦ä¸² ä¸æ”¯æŒä¸­æ–‡\nQByteArray QString::toLatin1() const;\n// è½¬æ¢ä¸º utf8 ç¼–ç æ ¼å¼çš„å­—ç¬¦ä¸² (å¸¸ç”¨)\nQByteArray QString::toUtf8() const;\n\n// æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™\nQString QString::toUpper() const;\n// æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™\nQString QString::toLower() const;\n```\n\n### 2.4.4 QVariant\n\nå‡ ç§ä¸åŒçš„æ•°æ®ç±»å‹éœ€è¦ä¼ é€’ï¼Œå¦‚æœç”¨ç»“æ„ä½“ï¼Œåˆä¸å¤§æ–¹ä¾¿ï¼Œå®¹å™¨ä¿å­˜çš„ä¹Ÿåªæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œè€ŒQVariantåˆ™å¯ä»¥ç»Ÿç»Ÿæå®šã€‚\n","tags":["C++"]},{"title":"C++","url":"/2024/02/29/C/","content":"\n# å‰åºçŸ¥è¯†\n\n**å˜é‡**ï¼šç»™ä¸€æ®µæŒ‡å®šçš„å†…å­˜ç©ºé—´èµ·åï¼Œæ–¹ä¾¿æ“ä½œè¿™æ®µå†…å­˜ã€‚\n\n\n\nC++å®šä¹‰å¸¸é‡çš„ä¸¤ç§æ–¹å¼ï¼š\n\n1. **#define**å®å¸¸é‡ï¼š`#define å¸¸é‡å å¸¸é‡å€¼`\n2. **const**ä¿®é¥°çš„å˜é‡ï¼š`const æ•°æ®ç±»å‹ å¸¸é‡å = å¸¸é‡å€¼`\n\n\n\næ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™ï¼š\n\n- æ ‡è¯†ç¬¦ä¸èƒ½æ˜¯å…³é”®å­—\n- æ ‡è¯†ç¬¦åªèƒ½ç”±<u>å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿</u>ç»„æˆ\n- ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»ä¸ºå­—æ¯æˆ–ä¸‹åˆ’çº¿\n- æ ‡è¯†ç¬¦å­—æ¯åŒºåˆ†å¤§å°å†™\n\n\n\n# 1 åˆè¯†çŸ¥è¯†\n\n## 1.1æ•°æ®ç±»å‹\n\næ•°æ®ç±»å‹å­˜åœ¨çš„æ„ä¹‰ï¼šç»™å˜é‡åˆ†é…åˆé€‚çš„å†…å­˜ç©ºé—´\n\n### 1.1.1æ•´å‹\n\n![image-20240229211305122](C/image-20240229211305122.png)\n\n### 1.1.2æµ®ç‚¹å‹\n\n![image-20240229211916435](C/image-20240229211916435.png)\n\n### 1.1.3å­—ç¬¦å‹\n\nå­—ç¬¦å‹å˜é‡ç”¨äºæ˜¾ç¤ºå•ä¸ªå­—ç¬¦\n\nè¯­æ³•ï¼š`char ch = 'a'`\n\næ³¨æ„ï¼š\n\n- Cå’ŒC++ä¸­å­—ç¬¦å‹å˜é‡åªå ç”¨1ä¸ªå­—èŠ‚\n- å­—ç¬¦å‹å˜é‡å¹¶ä¸æ˜¯æŠŠå­—ç¬¦æœ¬èº«æ”¾åˆ°å†…å­˜ä¸­è¿›è¡Œå­˜å‚¨ï¼Œè€Œæ˜¯å°†å¯¹åº”çš„ASCIIç å­˜å‚¨\n\n### 1.1.4è½¬ä¹‰å­—ç¬¦\n\nç”¨äºè¡¨ç¤ºä¸€äº›ä¸èƒ½æ˜¾ç¤ºå‡ºæ¥çš„ASCIIå­—ç¬¦\n\n![image-20240229212521459](C/image-20240229212521459.png)\n\n### 1.1.5å­—ç¬¦ä¸²\n\nCé£æ ¼å­—ç¬¦ä¸²ï¼š`char str[ ] = \"abcdefg\"`\n\nC++é£æ ¼å­—ç¬¦ä¸²ï¼š`string str = \"abcdefg\"`\n\n```cpp\n#include <iostream>\n#include <string>\n//æ³¨æ„ï¼ŒC++é£æ ¼è¦åŠ stringå¤´æ–‡ä»¶\nusing namespace std;\nint main()\n{\n    char str1[]=\"abcd\";\n    string str2=\"abcd\";\n    return 0;\n}\n```\n\n### 1.1.6å¸ƒå°”ç±»å‹\n\n**ä½œç”¨ï¼š**å¸ƒå°”æ•°æ®ç±»å‹ä»£è¡¨çœŸæˆ–è€…å‡çš„å€¼\n\nboolå ç”¨1ä¸ªå­—èŠ‚çš„å¤§å°\n\n### 1.1.7æ•°æ®çš„è¾“å…¥å’Œè¾“å‡º\n\nå…³é”®å­—ï¼šcinã€cout\n\nè¯­æ³•ï¼š`cin >> å˜é‡å`å’Œ`cout << å˜é‡å`\n\n### 1.1.8ç¨‹åºçš„æµç¨‹ç»“æ„\n\nC/C++æ”¯æŒæœ€åŸºæœ¬çš„ä¸‰ç§ç¨‹åºè¿è¡Œç»“æ„ï¼š==é¡ºåºç»“æ„==ã€==é€‰æ‹©ç»“æ„==ã€==å¾ªç¯ç»“æ„==\n\n### 1.1.9ä¸€ç»´æ•°ç»„\n\nä¸€ç»´ç´ ç»„å®šä¹‰çš„ä¸‰ç§æ–¹å¼ï¼š\n\n- `int a[10]={1,2,3,4}`\n- `int a[]={1,2,3,4} `\n\n### 1.1.10ä¸€ç»´æ•°ç»„-å†’æ³¡æ’åº\n\n```cpp\n#include <iostream>\nusing namespace std;\nint main()\n{\n\tint a[] = {4,5,3,10,2,8,32};\n    //å¯»æ‰¾nè½®æœ€å¤§å€¼\n\tfor (int i = 0; i < 7; i++)\n\t{\n        //æ¯ä¸€è½®è¿›è¡Œn-i-1æ¬¡åˆ¤æ–­å’Œäº¤æ¢ï¼Œå¾—å‡ºè¯¥è½®çš„æœ€å¤§å€¼\n\t\tfor (int j = 0; j < 7-i-1; j++)\n\t\t{\n\t\t\tif (a[j] < a[j + 1])\n\t\t\t{\n\t\t\t\tint temp = a[j];\n\t\t\t\ta[j] = a[j + 1];\n\t\t\t\ta[j + 1] = temp;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i = 0; i < 7; i++)cout << a[i] << '\\t';\n\treturn 0;\n}\n```\n\n- æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚\n- å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ€å¤§å€¼ã€‚\n- é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œæ¯æ¬¡æ¯”è¾ƒæ•°-1ï¼Œç›´åˆ°ä¸éœ€è¦æ¯”è¾ƒã€‚\n\n![img](C/afb80e39ce7684d6330fdc66b0873abd.gif)\n\n### 1.1.11äºŒç»´æ•°ç»„\n\n**å®šä¹‰æ–¹å¼ï¼š**\n\n`int a[2][2]={{æ•°æ®1,æ•°æ®2},{æ•°æ®3,æ•°æ®4}}`\n\n`int a[2][2]={æ•°æ®1,æ•°æ®2,æ•°æ®3,æ•°æ®4}`\n\n`int a[][2]={æ•°æ®1,æ•°æ®2,æ•°æ®3,æ•°æ®4}`\n\næ³¨æ„ï¼šå¿…é¡»è¦æŒ‡æ˜**åˆ—æ•°**ï¼Œè¡Œæ•°å¯ä»¥æ— éœ€æŒ‡æ˜\n\n### *1.1.12å‡½æ•°çš„åˆ†æ–‡ä»¶ç¼–å†™\n\næ­¥éª¤ï¼š\n\n- åˆ›å»ºåç¼€åä¸º.hçš„å¤´æ–‡ä»¶ï¼Œåœ¨å¤´æ–‡ä»¶ä¸­å†™å‡½æ•°å£°æ˜\n- åˆ›å»ºåç¼€åä¸º.cppçš„æºæ–‡ä»¶ï¼Œåœ¨æºæ–‡ä»¶ä¸­å†™å‡½æ•°çš„å®ç°\n\nmainæ–‡ä»¶\n\n```cpp\n#include <iostream>\n#include \"swap.h\"\nusing namespace std;\nint main()\n{\n    int a=0,b=1;\n    swap(&a,&b);\n    cout<<a<<b<<endl;\n    return 0;\n}\n```\n\nswap.h\n\n```cpp\nvoid swap(int *a,int *b);\n```\n\nswap.cpp\n\n```cpp\n#include \"swap.h\"\nvoid swap(int *a,int *b)\n{\n\tint temp=*a;\n    *a=*b;\n    *b=temp;\n}\n```\n\n### 1.1.13æŒ‡é’ˆç›¸å…³\n\næŒ‡é’ˆçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶çš„æ•°ï¼Œç”¨äºè¡¨ç¤ºåœ°å€ï¼Œåœ¨32ä½ä¸‹å ç”¨4å­—èŠ‚ï¼Œ64ä½ä¸‹å ç”¨8å­—èŠ‚\n\n**ç©ºæŒ‡é’ˆ**ï¼šæŒ‡å‘ç¼–å·ä¸º0çš„ç©ºé—´ï¼Œç”¨äºåˆå§‹åŒ–æŒ‡é’ˆå˜é‡ï¼Œ`int *a = NULL`ï¼Œ\n\næ³¨æ„ï¼šç©ºæŒ‡é’ˆæ˜¯==ä¸å¯è®¿é—®çš„==ï¼Œ0~255ä¹‹é—´çš„ç¼–å·æ˜¯ç³»ç»Ÿå ç”¨çš„ï¼Œå› æ­¤ä¸å¯è®¿é—®\n\n**é‡æŒ‡é’ˆ**ï¼šæŒ‡å‘éæ³•çš„å†…å­˜ç©ºé—´ï¼ˆä¸æ˜¯è‡ªå·±ç”³è¯·çš„ç©ºé—´ï¼‰ï¼Œ`int *p=(int *)0x1100`\n\n**constä¿®é¥°æŒ‡é’ˆ**ï¼š\n\n1. constä¿®é¥°æŒ‡é’ˆï¼š**å¸¸é‡æŒ‡é’ˆ**`const int * p`\n2. constä¿®é¥°å¸¸é‡ï¼š**æŒ‡é’ˆå¸¸é‡** `int * const p `\n3. constæ—¢ä¿®é¥°æŒ‡é’ˆï¼Œåˆä¿®é¥°å¸¸é‡`const int * const p`\n\n```cpp\nconst int *p = &a; //å¸¸é‡æŒ‡é’ˆ\np = &b;\n*p = 20;//è¿™ä¸ªæ“ä½œæ˜¯é”™è¯¯çš„\n//ç‰¹ç‚¹:æŒ‡é’ˆæŒ‡å‘å¯ä»¥æ”¹ï¼Œä½†æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸å¯ä»¥æ”¹\n```\n\n```cpp\nint * const p = &a;//æŒ‡é’ˆå¸¸é‡\np = &b;//è¿™ä¸ªæ“ä½œæ˜¯é”™è¯¯çš„\n*p = 20;\n//ç‰¹ç‚¹ï¼šæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä»¥æ”¹ï¼Œä½†æŒ‡é’ˆæŒ‡å‘çš„å€¼å¯ä»¥æ”¹\n```\n\n```cpp\nconst int* const p=&a;\n//ç‰¹ç‚¹ï¼šæŒ‡é’ˆæŒ‡å‘å’Œå€¼éƒ½ä¸å¯ä»¥æ”¹\n```\n\nçœ‹constä½ç½®ï¼Œåªè¦**constç´§è·Ÿ**çš„å°±å¯ä»¥ä¿®æ”¹ï¼Œå¯ä»¥ç†è§£ä¸ºé”å®šå˜é‡æŒ‡é’ˆ\n\n### 1.1.14ç»“æ„ä½“\n\nè¯­æ³•ï¼š`struct ç»“æ„ä½“å {æˆå‘˜åˆ—è¡¨}`\n\n```cpp\nstruct student\n{\n\tstring name;\n\tint age;\n\tint score;\n};\n\nint main()\n{\n    struct student Stu1={\"ZhangSan\",18,90};\n    //C++ä¸­ç»“æ„ä½“åˆ›å»ºstructå…³é”®å­—å¯ä»¥çœç•¥\n    student Stu2 = {\"LiSi\",18,80};\n    return 0;\n}\n```\n\n```cpp\nstruct student\n{\n\tstring name;\n\tint age;\n\tint score;\n}Stu;//é¡ºä¾¿å®šä¹‰\n\nint main()\n{\n    Stu.name=\"ZhangSan\";\n    Stu.age=18;\n    Stu.score=90;\n    return 0;\n}\n```\n\n## 1.2 climitså¤´æ–‡ä»¶\n\nå®šä¹‰äº†å„ç§æ•´å‹æ•°æ®çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\n\n```cpp\n#include <climits>\n```\n\n![image-20240305105400635](C/image-20240305105400635.png)\n\n![image-20240305105423398](C/image-20240305105423398.png)\n\n```cpp\n#define INT_MAX 2147483647\n```\n\nå¤´æ–‡ä»¶ä¸­æœ‰è®¸å¤šå¦‚ä¸Šçš„æŒ‡ä»¤\n\n`#define`ä¹Ÿæ˜¯ä¸€ä¸ªé¢„å¤„ç†ç¼–è¯‘æŒ‡ä»¤ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨å°†INT_MAXæ›¿æ¢ä¸º2147483647\n\n# 2 C++æ ¸å¿ƒç¼–ç¨‹\n\n## 2.1å†…å­˜åˆ†åŒºæ¨¡å‹\n\nC++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º**4ä¸ªåŒºåŸŸ**\n\n- ä»£ç åŒºï¼šç”¨äºå­˜æ”¾å‡½æ•°çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†\n- å…¨å±€åŒºï¼šå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡(static)ä»¥åŠå¸¸é‡(const)\n- æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°å‚æ•°å’Œå±€éƒ¨å˜é‡ç­‰\n- å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸç”±æ“ä½œç³»ç»Ÿå›æ”¶\n\nå†…å­˜åˆ†åŒºçš„æ„ä¹‰ï¼šä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ›´ä¸ºçµæ´»çš„ç¼–ç¨‹\n\nä»£ç åŒºå’Œå…¨å±€åŒºéƒ½æ˜¯åœ¨**ç¨‹åºè¿è¡Œå‰**å°±å­˜åœ¨ï¼Œæ ˆåŒºå’Œå †åŒºéƒ½åœ¨**ç¨‹åºè¿è¡Œæ—¶**æ‰ä¼šåˆ†é…\n\n### 2.1.1å †åŒºå¼€è¾Ÿå’Œé‡Šæ”¾\n\n```cpp\nint * p1 = new int(10);//p1æŒ‡å‘ä¸€ä¸ªå€¼ä¸º10çš„intæ•°\nint * p2 = new int[20];//å¼€è¾Ÿ20é•¿åº¦çš„æ•°ç»„ç©ºé—´\nint * p3 = (int *)malloc(20*sizeof(int));\n//æŒ‡é’ˆp1,p2,p3æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ”¾åœ¨æ ˆä¸Šçš„ï¼Œä½†æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´åœ¨å †åŒº\n```\n\n```cpp\ndelete(p1);\nfree(p2);\n```\n\n## 2.2å¼•ç”¨&\n\næœ¬è´¨å°±æ˜¯æŒ‡é’ˆå¸¸é‡(`int* const ref = &a`)ï¼Œ**æŒ‡å‘ä¸å¯æ”¹å˜ï¼Œå€¼å¯æ”¹**\n\n```cpp\nint a=10;\nint &b=a;\n```\n\næ³¨æ„ï¼Œbå¹¶ä¸æ˜¯æŒ‡é’ˆï¼Œæ˜¯å¯¹açš„å¼•ç”¨ï¼Œ**ç»™ä¸€ä¸ªå˜é‡èµ·åˆ«å**\n\nåŒºåˆ«å°±åœ¨äºï¼Œå¼•ç”¨**å¿…é¡»åˆå§‹åŒ–**ï¼Œåˆ›å»ºåä¸å¯ä»¥æ”¹å˜æŒ‡å‘ï¼ŒæŒ‡é’ˆå¯ä»¥ä¿®æ”¹æŒ‡å‘\n\n**æ³¨æ„**ï¼šå¼•ç”¨å¯ä»¥ç”¨ä½œå‡½æ•°è¿”å›å€¼ï¼Œä½†æ˜¯ä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œå› ä¸ºåœ¨å‡½æ•°ç»“æŸåï¼Œæ ˆåŒºä¼šé‡Šæ”¾ã€‚\n\n## 2.3å‡½æ•°æé«˜\n\n### 2.3.1å‡½æ•°å½¢å‚\n\nåœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨å¯ä»¥è®¾ç½®é»˜è®¤å€¼\n\n```cpp\nint func(int a,int b = 10, int c=20)\n{\n\t//é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥b/cå°±æŒ‰é»˜è®¤å€¼æ¥\n    //æ³¨æ„ï¼šæ­¤æ—¶çš„aå¿…é¡»ä¼ å…¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n}\n```\n\nå¦‚æœæŸä¸ªä½ç½®å·²ç»æœ‰äº†é»˜è®¤å‚æ•°ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œéƒ½å¿…é¡»æœ‰é»˜è®¤å‚æ•°\n\n```cpp\nint func(int a,int b =10, int c)//è¿™ç§æƒ…å†µä¼šæŠ¥é”™\n```\n\nå‡½æ•°çš„å£°æ˜å’Œå®ç°**åªèƒ½ä¸€ä¸ªæœ‰é»˜è®¤å‚æ•°**ï¼Œä¸èƒ½åŒæ—¶æœ‰\n\n```cpp\nint func(int a,int b=10,int c=20);//å£°æ˜\nint func(int a, int b,int c){\t}//å®ç°\n\nint func(int a, int b,int c);//å£°æ˜\nint func(int a, int b=10, int c=20){ }//å®ç°\n```\n\n### 2.3.2å ä½å‚æ•°\n\n```cpp\nvoid func(int a, int){ }\n```\n\nè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥å‚æ•°\n\n```cpp\nfunc(1,100);//100å³å¡«å……ï¼Œå¯ä»¥å¡«ä»»æ„æ•°\n```\n\n### 2.3.3å‡½æ•°é‡è½½\n\n**ä½œç”¨ï¼š**å‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§\n\n- åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹ï¼Œå‡½æ•°åç›¸åŒ\n- å‡½æ•°å‚æ•° **ç±»å‹ä¸åŒ** æˆ– **ä¸ªæ•°ä¸åŒ** æˆ– **é¡ºåºä¸åŒ**\n\n```cpp\nvoid func(int a)\n{\n\tcout<<\"intå‡½æ•°:\"<<a<<endl;\n}\nvoid func(double a)\n{\n\tcout<<\"doubleå‡½æ•°ï¼š\"<<a<<endl;\n}\n```\n\n**æ³¨æ„ï¼š**\n\nå‡½æ•°é‡è½½ç¢°åˆ°é»˜è®¤å‚æ•°æ—¶ï¼Œé»˜è®¤å‚æ•°æ˜¯ä¸è®¡çš„\n\n```cpp\nint func(int a,int b=10,int c=20){ }\nint func(int a);\n//ä¸Šé¢ä»£ç æ˜¯é”™è¯¯çš„ï¼Œæ— æ³•å‘ç”Ÿå‡½æ•°é‡è½½\n```\n\nå‡½æ•°é‡è½½ç¢°åˆ°å¼•ç”¨æ—¶ï¼Œ\n\n```cpp\nvoid func(int &a)//è°ƒç”¨func(a)å˜é‡\n\nvoid func(const int &a)//è°ƒç”¨func(10)å¸¸é‡\n```\n\n## 2.4ç±»å’Œå¯¹è±¡\n\nC++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾ï¼š**<u>å°è£…</u>**ã€**<u>ç»§æ‰¿</u>**ã€**<u>å¤šæ€</u>**\n\nä¸‡äº‹ä¸‡ç‰©çš†ä¸ºå¯¹è±¡ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º\n\n- struct é»˜è®¤æƒé™ä¸ºå…¬å…± public\n- class é»˜è®¤æƒé™ä¸ºç§æœ‰ private\n\n### 2.4.1å°è£…\n\nå°è£…çš„æ„ä¹‰ï¼š\n\n- å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©\n- å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass circle\n{\npublic://è®¿é—®æƒé™ï¼šå…¬å…±æƒé™\n    double r;\n    const double PI = 3.1415926;//å±æ€§\n    \n    double calculateZC()//è¡Œä¸º\n    {\n        return 2 * PI * r;\n    }\n};//æ³¨æ„è¿™é‡Œçš„åˆ†å·\nint main()\n{\n    circle c1;//åˆ›å»ºå¯¹è±¡(å®ä¾‹åŒ–)\n    c1.r = 1.0;//èµ‹å€¼\n    cout << c1.calculateZC() << endl;\n    return 0;\n}\n```\n\n### 2.4.2æƒé™\n\n- **public** å…¬å…±æƒé™\n- **protected** ä¿æŠ¤æƒé™\n- **private** ç§æœ‰æƒé™ï¼ˆé»˜è®¤ï¼‰\n\n```cpp\n//å…¬å…±æƒé™\tpublic\t\tç±»å†…å¯ä»¥è®¿é—®ï¼Œç±»å¤–ä¹Ÿå¯ä»¥è®¿é—®\n//ä¿æŠ¤æƒé™\tprotected\tç±»å†…å¯ä»¥è®¿é—®ï¼Œç±»å¤–ä¸å¯ä»¥è®¿é—®(å­ç±»å¯ä»¥è®¿é—®)\n//ç§æœ‰æƒé™\tprivate\t\tç±»å†…å¯ä»¥è®¿é—®ï¼Œç±»å¤–ä¸å¯ä»¥è®¿é—®(å­ç±»ä¸èƒ½è®¿é—®)\nclass Person\n{\npublic:\n\tstring name;    \nprotected:\n    string id;\nprivate:\n    int password;\n};\n```\n\nç±»ä¸­æˆå‘˜çš„é»˜è®¤æƒé™ä¸º**private**\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass Cube\n{\nprivate:\n    double l, w, h;\npublic:\n    void setLWH(double ll, double ww, double hh)\n    {\n        l = ll;\n        w = ww;\n        h = hh;\n    }\n    double getV()\n    {\n        return l * w * h;\n    }\n    double getA()\n    {\n        return 2 * (l * w + w * h + l * h);\n    }\n    bool ifequ(Cube x)\n    {\n        return x.l == l && x.h == h && x.w == w ? true : false;\n    }\n};\nint main()\n{\n    Cube a,b;\n    a.setLWH(1, 2, 3);\n    b.setLWH(1, 2, 3);\n    cout << \"é¢ç§¯ä¸ºï¼š\" << a.getA() << \"ä½“ç§¯ä¸ºï¼š\" << a.getV() << endl;\n    cout << \"æ˜¯å¦ç›¸ç­‰\" << a.ifequ(b) << endl;\n    return 0;\n}\n```\n\n### 2.4.3å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†(æ„é€ å’Œææ„)\n\nå¦‚æœæˆ‘ä»¬ä¸æä¾›æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šæä¾›**ç©ºå®ç°**çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°\n\n- **æ„é€ å‡½æ•°ï¼š**ä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨\n- **ææ„å‡½æ•°ï¼š**ä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡é”€æ¯å‰ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œ\n\næ„é€ å‡½æ•°å¯ä»¥**æœ‰å‚æ•°**ï¼Œå¯ä»¥å‘ç”Ÿé‡è½½\n\nææ„å‡½æ•°**ä¸èƒ½æœ‰å‚æ•°**ï¼Œä¸èƒ½å‘ç”Ÿé‡è½½\n\n```cpp\nclass Person\n{\npublic:\n    Person()//æ„é€ å‡½æ•°\n    {\n        \n    }\n    ~Person()//ææ„å‡½æ•°\n    {\n        \n    }\n};\n```\n\n#### 2.4.3.1æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨\n\n**åˆ†ç±»ï¼š**æœ‰å‚æ„é€ ã€æ— å‚æ„é€ ï¼ˆæ™®é€šæ„é€ ï¼‰/æ‹·è´æ„é€ \n\n**è°ƒç”¨ï¼š**æ‹¬å·æ³•ã€æ˜¾ç¤ºæ³•ã€éšå¼è½¬æ¢æ³•\n\n```cpp\nclass Person\n{\npublic:\n    int age;\n    Person()//æ™®é€šæ„é€ \n    {\n        cout<<\"æ— å‚æ„é€ å‡½æ•°è°ƒç”¨\"<<endl;\n    }\n    Person(int a)//æ™®é€šæ„é€ \n    {\n        age = a;\n        cout<<\"æœ‰å‚æ„é€ å‡½æ•°è°ƒç”¨\"<<endl;\n    }\n    Person(const Person &p )//æ‹·è´æ„é€ \n    {\n        age = p.age;\n    }\n}\n```\n\n```cpp\nvoid test()\n{\n    1ã€æ‹¬å·æ³•\n    Person p1;//é»˜è®¤æ„é€ å‡½æ•°ï¼Œä¸éœ€è¦åŠ ()ï¼Œå¦‚æœåŠ äº†()ç¼–è¯‘å™¨ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜\n    Person p2(10);//æœ‰å‚æ„é€ å‡½æ•°\n    Person p3(p2);//æ‹·è´æ„é€ å‡½æ•°\n\n\t2ã€æ˜¾ç¤ºæ³•\n    Person p2 = Person(10);\n    Person p3 = Person(p2);\n    \tè¡¥å……ï¼šPerson(10);//åŒ¿åå¯¹è±¡ ç‰¹ç‚¹ï¼šå½“å‰è¡Œæ‰§è¡Œç»“æŸå°±å›æ”¶\n    \n    3ã€éšå¼è½¬æ¢æ³•\n    Person p4 = 10;\n    Person p5 = p4;\n}\n```\n\n#### 2.4.3.2æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº\n\n- ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–æ–°å¯¹è±¡\n- å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼\n- ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡\n\n```cpp\nvoid test01()\n{\n\tPerson p;\n\tPerson p1(p);\n}\n```\n\n```cpp\nvoid doWork(Person p)\n{\n}\nvoid test02()\n{\n\tPerson p;\n\tdoWork(p);\n}\n```\n\n```cpp\nPerson doWork()\n{\n\tPerson p3;\n\treturn p3;\n}\nvoid test03()\n{\n    Person p = doWork();\n}\n```\n\n#### 2.4.3.3æ„é€ å‡½æ•°çš„è°ƒç”¨è§„åˆ™\n\né»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ä¼šè¿›è¡Œ**å€¼æ‹·è´**ï¼Œå…¶ä»–çš„æ„é€ å‡½æ•°éƒ½æ˜¯ç©ºå®ç°çš„\n\n- å¦‚æœç”¨æˆ·å®šä¹‰äº†æœ‰å‚æ„é€ å‡½æ•°ï¼ŒC++ä¸å†æä¾›é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°ï¼Œä½†ä¼šæä¾›é»˜è®¤çš„æ‹·è´æ„é€ \n- å¦‚æœç”¨æˆ·å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼ŒC++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•°\n\n#### 2.4.3.4æ·±æ‹·è´å’Œæµ…æ‹·è´\n\n**æµ…æ‹·è´**ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ(=)\n\n**æ·±æ‹·è´**ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ\n\næ‹·è´æ„é€ å¸¦æ¥çš„é—®é¢˜ï¼š\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass Stu\n{\npublic:\n\tstring name;\n\tint* m_height;\n\tStu(string a, int height)\n\t{\n\t\tname = a;\n\t\tm_height = new int(height);\n\t}\n\t~Stu()\n\t{\n\t\tif (m_height != NULL)\n\t\t{\n\t\t\tdelete(m_height);\n\t\t\tm_height = NULL;\n\t\t}\n\t}\n};\nint main()\n{\n\tStu c1(\"vicczyq\", 172);\n\tStu c2(c1);\n\treturn 0;\n}\n\n```\n\nè¿™æ®µä»£ç ï¼Œc2ä¼šæ‹·è´c1çš„å€¼ï¼Œä½†æ˜¯ä»–æ‹·è´çš„æ˜¯**æŒ‡é’ˆ**ï¼Œæ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œå½“c2å…ˆææ„åï¼Œc1ææ„æ—¶å€™é‡Šæ”¾å†…å­˜ä¼šå‡ºé”™å´©æºƒ\n\n![image-20240301224532559](C/image-20240301224532559.png)\n\nå› æ­¤ï¼Œåœ¨è¿›è¡Œæ‹·è´æ—¶ï¼Œè¦æ–°ç”³è¯·ä¸€ä¸ªç©ºé—´ï¼Œè¿™æ ·æ‰èƒ½è§£å†³\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass Stu\n{\npublic:\n\tstring name;\n\tint* m_height;\n\tStu(string a, int height)\n\t{\n\t\tname = a;\n\t\tm_height = new int(height);\n\t}\n    Stu(const Stu &p)\n    {\n        //m_height = p.m_height;//æµ…æ‹·è´(ä¸ä¼šç”³è¯·æ–°çš„ç©ºé—´)\n        m_height = new int(*p.m_height);//æ·±æ‹·è´(ç”³è¯·æ–°ç©ºé—´)\n        name = p.name;\n    }\n\t~Stu()\n\t{\n\t\tif (m_height != NULL)\n\t\t{\n\t\t\tdelete(m_height);\n\t\t\tm_height = NULL;\n\t\t}\n\t}\n};\nint main()\n{\n\tStu c1(\"vicczyq\", 172);\n\tStu c2(c1);\n\treturn 0;\n}\n```\n\n#### 2.4.3.5åˆå§‹åŒ–åˆ—è¡¨\n\n```cpp\nclass Person\n{\npublic:\n\tint m_a,m_b,m_c;\n\tPerson(int a, int b, int c) : m_a(a),m_b(b),m_c(c)\n\t{\n\t\n\t}\n};\n```\n\n#### 2.4.3.6ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass A\n{\npublic:\n\tA()\n\t{\n\t\tcout << \"Aæ„é€ \" << endl;\n\t}\n};\nclass B\n{\n\tA a;\npublic:\n\tB()\n\t{\n\t\tcout << \"Bæ„é€ \" << endl;\n\t}\n};\nint main()\n{\n\tB x;\n\treturn 0;\n}\n```\n\n![image-20240301230820745](C/image-20240301230820745.png)\n\nè¯æ˜ï¼Œæ„é€ Bæ—¶ï¼Œéœ€è¦å…ˆå®ŒæˆAçš„æ„é€ \n\n#### 2.4.3.7 staticé™æ€æˆå‘˜å˜é‡\n\n- æ‰€æœ‰å¯¹è±¡éƒ½å…±äº«åŒä¸€ä»½æ•°æ®ã€‚\n\n- ç¼–è¯‘é˜¶æ®µå°±ä¼šè¿›è¡Œå†…å­˜åˆ†é…ï¼ˆå…¨å±€åŒºï¼‰\n- ç±»å†…å£°æ˜ï¼Œç±»å¤–è¿›è¡Œåˆå§‹åŒ–æ“ä½œ\n\n```cpp\nclass Person\n{\npublic:\n\tstatic int m_A;//ç±»å†…å£°æ˜\n}\nint Person::m_A = 100;//ç±»å¤–åˆå§‹åŒ–\n\nvoid test()\n{\n    Person p1;\n    cout<< p1.m_A <<endl;//è¾“å‡º100\n    Person p2;\n    p2.m_A=200;\n    cout << p1.m_A << endl;//è®¿é—®çš„ä»»ç„¶æ˜¯p1,ä½†è¾“å‡º200\n}\n```\n\né™æ€æˆå‘˜å˜é‡ä¸å±äºä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½**å…±äº«ä¸€ä»½æ•°æ®**ã€‚\n\næ‰€ä»¥å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œè®¿é—®ï¼š\n\n```cpp\nPerson p1;\ncout << p1.m_A << endl;//åˆ›å»ºå¯¹è±¡è¿›è¡Œè®¿é—®\ncout << Person::m_A <<endl;//é€šè¿‡ç±»åè¿›è¡Œè®¿é—®\n```\n\n#### 2.4.3.8 staticé™æ€æˆå‘˜å‡½æ•°\n\næ‰€æœ‰å¯¹è±¡éƒ½å…±äº«ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡\n\n```cpp\nclass Person\n{\npublic:\n\tstatic int m_A;\n\t\n\tstatic void func()\n\t{\n\t\tcout << \"static void funcè°ƒç”¨\" << endl;\n        cout << m_A << endl; //åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡\n\t}\n}\nint Person::m_A = 100;\n\nvoid test()\n{\n\tPerson p1;\n    p1.func();//é€šè¿‡å¯¹è±¡è®¿é—®\n    \n    Person::func();//é€šè¿‡ç±»åè®¿é—®\n}\n```\n\n### 2.4.4 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ\n\n#### 2.4.4.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨\n\næ³¨æ„ï¼šé™æ€æˆå‘˜å˜é‡æˆ–å‡½æ•°ä¸å±äºä»»ä½•ä¸€ä¸ªå¯¹è±¡ä¸Šã€‚\n\nç©ºå¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´å¤§å°ä¸ºï¼š**1**\n\nåªæœ‰éé™æ€æˆå‘˜å˜é‡**å±äº**ç±»çš„å¯¹è±¡ä¸Šï¼Œ\n\nå…¶ä»–(é™æ€æˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°)éƒ½ä¸å±äºç±»çš„å¯¹è±¡ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸€ä»½ã€‚\n\n#### 2.4.4.2 thisæŒ‡é’ˆ\n\nç”±2.4.4.1å¯çŸ¥ï¼Œå¤šä¸ªå¯¹è±¡ä¼šå…±äº«ï¼ˆé™æ€æˆå‘˜å˜é‡ã€é™æ€æˆå‘˜å‡½æ•°å’Œéé™æ€æˆå‘˜å‡½æ•°ï¼‰ã€‚\n\nå¯ä»¥é€šè¿‡**this**æŒ‡é’ˆåŒºåˆ†å¯¹è±¡è°ƒç”¨\n\nthisæŒ‡é’ˆæŒ‡å‘**è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡**\n\n**ç”¨é€”ï¼š**\n\n- å½“å‡½æ•°å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ä»¥ç”¨thisæ¥åŒºåˆ†\n- å½“ç±»çš„éé™æ€æˆå‘˜å‡½æ•°è¿”å›å¯¹è±¡æœ¬èº«æ—¶ï¼Œå¯ä»¥ç”¨`return *this`\n\n```cpp\nclass Person\n{\npublic:\n\tstring name;\n\tvoid setName(string name)\n    {\n    \tthis->name = name;\n    }\n    Person getInfo()\n    {\n        return *this;\n    }\n}\n```\n\n### 2.4.5 constä¿®é¥°æˆå‘˜å‡½æ•°(å¸¸å‡½æ•°)\n\n- å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§\n- æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—`mutable`åï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹\n\nå¯¹è±¡åˆ›å»ºæ—¶ï¼ŒåŠ constç§°ä¸ºå¸¸å¯¹è±¡ï¼Œå¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°ã€‚\n\n**ä¸»è¦æ˜¯å¯¹å‡½æ•°å†…thisæŒ‡é’ˆçš„é™åˆ¶**\n\n```cpp\nclass Person\n{\npublic:\n\tvoid showPerson() const\n\t{\n\t\tthis -> m_A = 100;//æŠ¥é”™ï¼Œconstä¿®é¥°thisæŒ‡å‘çš„å€¼ä¸å¯ä¿®æ”¹\n\t\tthis -> m_B = 100;//æœ‰mutableå…³é”®å­—å¯ä¿®æ”¹\n\t}\n\t\n\tint m_A;\n\tmutable int m_B;\n}\n```\n\n### 2.4.6 å‹å…ƒ friend\n\nè®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­çš„ç§æœ‰æˆå‘˜\n\n**å‹å…ƒçš„ä¸‰ç§å®ç°ï¼š**\n\n- å…¨å±€å‡½æ•°åšå‹å…ƒ\n- ç±»åšå‹å…ƒ\n- æˆå‘˜å‡½æ•°åšå‹å…ƒ\n\n```cpp\n#include <iostream>\nusing namespace std;\nclass Building{\nfriend void goodGay(Building* building);//å£°æ˜å‹å…ƒå‡½æ•°\npublic:\n\tstring m_SittingRoom;//å®¢å…\n\tBuilding()\n\t{\n\t\tm_SittingRoom = \"å®¢å…\";\n\t\tm_BedRoom = \"å§å®¤\";\n\t}\nprivate:\n\t string m_BedRoom;//å§å®¤\n};\n\nvoid goodGay(Building *building)\n{\n\tcout << \"Gay:\" << building->m_SittingRoom << endl;\n\tcout << \"Gay:\" << building->m_BedRoom << endl;\n}\nvoid main()\n{\n\tBuilding a;\n\tgoodGay(&a);\n}\n```\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass Building {\n\tfriend class GoodGay;\npublic:\n\tstring m_SittingRoom;//å®¢å…\n\tBuilding()\n\t{\n\t\tm_SittingRoom = \"å®¢å…\";\n\t\tm_BedRoom = \"å§å®¤\";\n\t}\nprivate:\n\tstring m_BedRoom;\n};\n\nclass GoodGay {\npublic:\n\tBuilding* building = new Building;\n\tvoid visit();//å‡½æ•°å£°æ˜ï¼Œå¯ä»¥åœ¨ç±»å†…å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»å¤–\n};\n\nvoid GoodGay::visit()//ç±»å¤–å®ç°æˆå‘˜å‡½æ•°\n{\n\tcout << \"Gay:\" << building->m_SittingRoom << endl;\n\tcout << \"Gay:\" << building->m_BedRoom << endl;\n}\n\nvoid main()\n{\n\tGoodGay gay;\n}\n```\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass Home;\nclass GoodGay {\npublic:\n\tvoid func(Home* home);\n};\nclass Home {\nfriend void GoodGay::func(Home * home);\nprivate:\n\tint id = 10;\n};\n\nvoid GoodGay::func(Home* home)\n{\n\tcout << home->id << endl;\n}\nvoid main()\n{\n\tGoodGay a;\n\tHome home;\n\ta.func(&home);\n}\n```\n\n### 2.4.7 è¿ç®—ç¬¦é‡è½½\n\nå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨çŸ¥é“æ€ä¹ˆè¿›è¡Œæ•°æ®è¿ç®—\n\nä½†æ˜¯å¯¹äºå…¶ä»–çš„æ•°æ®ç±»å‹ï¼Œéœ€è¦è‡ªå·±å®šä¹‰è®¡ç®—æ–¹æ³•\n\n#### 2.4.7.1 åŠ å·è¿ç®—é‡è½½\n\n```cpp\nPerson p3 = p1+p2\n```\n\né€šè¿‡**æˆå‘˜å‡½æ•°**é‡è½½â€+â€œ\n\n```cpp\nPerson operator+ (Person &p)\n{\n\tPerson temp;\n\ttemp.m_A = this->m_A + p.m_A;\n\ttemp.m_B = this->m_B + p.m_B;\n\treturn temp;\n}\n```\n\né€šè¿‡**å…¨å±€å‡½æ•°**é‡è½½â€+â€œ\n\n```cpp\nPerson operator+ (Person &p1, Person &p2)\n{\n    Person temp;\n    temp.m_A = p1.m_A + p2.m_A;\n    temp.m_B = p1.m_B + p2.m_B;\n    return temp;\n}\n```\n\n#### 2.4.7.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½\n\nä½œç”¨ï¼šè‡ªå®šä¹‰è¾“å‡ºå†…å®¹\n\nåªèƒ½ç”¨å…¨å±€å‡½æ•°è¿›è¡Œé‡è½½\n\n```cpp\nostream & operator<<(ostream &cout,Person p)\n{\n\tcout << p.m_A;\n\treturn cout;\n }\n```\n\n#### 2.4.7.3 é€’å¢/å‡è¿ç®—ç¬¦é‡è½½\n\nä½œç”¨ï¼šé€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass MyInt {\n\tfriend ostream & operator<<(ostream& out, MyInt& p);\npublic:\n\t//é‡è½½å‰ç½®++è¿ç®—ç¬¦\n\t//è¿”å›å¼•ç”¨çš„åŸå› æ˜¯è¦å¯¹åŒä¸€ä¸ªæ•°æ®ç©ºé—´è¿›è¡Œæ“ä½œ\n\t//å¦‚æœä¸ç”¨å¼•ç”¨ï¼Œä¼šå¤åˆ¶å‡ºä¸€ä¸ªå‰¯æœ¬\n\tMyInt &operator++()\n\t{\n\t\ti++;\n\t\treturn *this;\n\t}\n\t//é‡è½½åç½®++è¿ç®—ç¬¦\n\tMyInt operator++(int)//è¿”å›çš„æ˜¯å€¼ï¼Œå› ä¸ºtempåœ¨å‡½æ•°ç»“æŸåå°±ä¼šé‡Šæ”¾\n\t{\n\t\tMyInt temp = *this;\n\t\ti++;\n\t\treturn temp;\n\t}\nprivate:\n\tstring name = \"vicczyq\";\n\tint i = 10;\n};\n\nostream & operator<<(ostream &out, MyInt &p)\n{\n\tout << p.name << p.i;\n\treturn out;\n}\nvoid main()\n{\n\tMyInt a;\n\tcout << a << endl;\n\t++(++a);\n\tcout << a << endl;\n}\n```\n\n#### 2.4.7.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½\n\n```cpp\nclass Person\n{\npublic:\n\tint *m_age;\n\tPerson(int x)\n\t{\n\t\tm_age = new int(x);\n\t}\n\t\n\tPerson & operator=(Person & p)\n\t{\n\t\tif(m_age!=NULL)\n\t\t{\n\t\t\tdelete m_age;\n\t\t\tm_age = NULL;\n\t\t}\n\t\tm_age = new int(p.m_age);//æ·±æ‹·è´\n\t\treturn *this;\n\t}\n}\n```\n\n#### 2.4.7.5 å…³ç³»è¿ç®—ç¬¦é‡è½½\n\n```cpp\nclass Person\n{\npublic:\n\tstring name;\n\tint id;\n\tbool operator==(Person &p)\n\t{\n\t\tif(p.name==name && p.id==id)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse return false;\n\t}\n}\n```\n\n### 2.4.8 ç»§æ‰¿\n\nä¸‹çº§åˆ«æˆå‘˜æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œåˆæœ‰è‡ªå·±çš„ç‰¹ç‚¹ã€‚**å‡å°‘é‡å¤ä»£ç **ã€‚\n\n![image-20240303191037932](C/image-20240303191037932.png)\n\n#### 2.4.8.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•\n\nåŸºæœ¬è¯­æ³•ï¼š`class å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±»`\n\nå­ç±» ä¹Ÿç§°ä¸º **æ´¾ç”Ÿç±»**\n\nçˆ¶ç±» ä¹Ÿç§°ä¸º **åŸºç±»**\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\n\nclass BasePage {\npublic:\n\tvoid Print()\n\t{\n\t\tcout << \"çˆ¶ç±»çš„æ‰“å°å‡½æ•°\" << endl;\n\t}\n};\nclass Page1 : public BasePage //æ­¤å¤„å®ç°ç»§æ‰¿æ“ä½œï¼Œæ³¨æ„æ˜¯ä¸€ä¸ªå†’å·\n{\n\n};\nvoid main()\n{\n\tPage1 p;\n\tp.Print();//å­ç±»å¯¹è±¡è®¿é—®çˆ¶ç±»çš„æ–¹æ³•\n}\n```\n\n#### 2.4.8.2ç»§æ‰¿æ–¹å¼\n\n```cpp\nclass A\n{\npublic:\n\tint a;\nprotected:\n\tint b;\nprivate:\n\tint c;\n};\n```\n\n- å…¬å…±ç»§æ‰¿\n\n  ```cpp\n  class B : public A\n  {\n  public:\n  \tint a;\n  protected:\n  \tint b;\n  };\n  ```\n\n- ä¿æŠ¤ç»§æ‰¿\n\n  ```cpp\n  class C : protected A\n  {\n  protected:\n  \tint a;\n  \tint b;\n  }\n  ```\n\n- ç§æœ‰ç»§æ‰¿\n\n  ```cpp\n  class D : private A\n  {\n  private:\n  \tint a;\n  \tint b;\n  }\n  ```\n\næ‰€è°“çš„ç»§æ‰¿æ–¹å¼å°±æ˜¯**ç»§æ‰¿æˆä¸ºå¯¹åº”æƒé™**ï¼Œé™¤äº†å…¬å…±ç»§æ‰¿éœ€è¦è€ƒè™‘protectedçš„å¤„ç†ã€‚\n\næ³¨æ„ï¼šçˆ¶ç±»çš„privateä¸ç®¡æ€ä¹ˆæ ·éƒ½æ˜¯ä¸èƒ½ç»§æ‰¿çš„\n\n#### 2.4.8.3 ç»§æ‰¿å…³ç³»\n\n```cpp\nclass BasePage {\npublic:\n\tint a;\nprotected:\n\tint b;\nprivate:\n\tint c;\n};\nclass Page1 : public BasePage\n{\n\t\n};\nvoid main()\n{\n\tPage1 p;\n\tcout << sizeof(p) << endl;\n    //æ­¤å¤„ä¼šè¾“å‡º12ï¼Œå› æ­¤ç»§æ‰¿äº†a,b,cä½†æ˜¯cè¢«éšè—\n}\n```\n\nçˆ¶ç±»ä¸­æ‰€æœ‰çš„éé™æ€æˆå‘˜å±æ€§éƒ½ä¼šè¢«å­ç±»ç»§æ‰¿ä¸‹å»ï¼Œä½†æ˜¯ç§æœ‰çš„å±æ€§è¢«ç¼–è¯‘å™¨éšè—äº†ã€‚\n\n#### 2.4.8.4 æ„é€ å’Œææ„é¡ºåº\n\nå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œ\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nclass BasePage {\npublic:\n\tBasePage()\n\t{\n\t\tcout << \"çˆ¶ç±»æ„é€ å‡½æ•°\" << endl;\n\t}\n\t~BasePage()\n\t{\n\t\tcout << \"çˆ¶ç±»ææ„å‡½æ•°\" << endl;\n\t}\n};\nclass Page1 : public BasePage\n{\npublic:\n\tPage1()\n\t{\n\t\tcout << \"å­ç±»æ„é€ å‡½æ•°\" << endl;\n\t}\n\t~Page1()\n\t{\n\t\tcout << \"å­ç±»ææ„å‡½æ•°\" << endl;\n\t}\n};\nvoid main()\n{\n\tPage1 p;\n}\n```\n\nå…ˆè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°\n\nå…ˆè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°ï¼Œå†è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°\n\n![image-20240303195651224](C/image-20240303195651224.png)\n\n#### 2.4.8.5 åŒåæˆå‘˜å¤„ç†æ–¹å¼\n\n- è®¿é—®å­ç±»ä¸­çš„åŒåæˆå‘˜ï¼šç›´æ¥è®¿é—®å³å¯\n- è®¿é—®çˆ¶ç±»ä¸­çš„åŒåæˆå‘˜ï¼šéœ€è¦æ·»åŠ ä½œç”¨åŸŸ\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\n\nclass BasePage {\npublic:\n\tstring str=\"çˆ¶ç±»\";\n\tvoid func()\n\t{\n\t\tcout << \"åŒåæˆå‘˜å‡½æ•°ï¼šçˆ¶ç±»\" << endl;\n\t}\n};\nclass Page1 : public BasePage\n{\npublic:\n\tstring str=\"å­ç±»\";\n\tvoid func()\n\t{\n\t\tcout << \"åŒåæˆå‘˜å‡½æ•°ï¼šå­ç±»\" << endl;\n\t}\n};\nvoid main()\n{\n\tPage1 p;\n\tcout << p.str << endl;\n\tcout << p.BasePage::str << endl;//çˆ¶ç±»ä½œç”¨åŸŸ\n\tp.func();\n\tp.BasePage::func();//çˆ¶ç±»ä½œç”¨åŸŸè®¿é—®åŒåæˆå‘˜å‡½æ•°\n}\n```\n\n#### 2.4.8.6 å¤šç»§æ‰¿è¯­æ³•\n\nè¯­æ³•ï¼š``class å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±»1, ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 ...`\n\nå¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­åŒåæˆå‘˜çš„å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸè¿›è¡ŒåŒºåˆ†ï¼Œ\n\n**C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿**\n\n#### 2.4.8.7 è±å½¢ç»§æ‰¿/è™šç»§æ‰¿\n\nä¸¤ä¸ªç±»ç»§æ‰¿äºåŒä¸€ä¸ªçˆ¶ç±»ï¼Œåˆæœ‰æŸä¸ªç±»åŒæ—¶é›†æˆäºè¿™ä¸¤ä¸ªç±»\n\n![img](C/c32a9478f218278aacca70b56bcb83bf.jpeg)\n\nç”±ä¸Šå›¾å¯çŸ¥ï¼Œç¾Šé©¼ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ä¸¤æ¬¡ï¼Œæˆ‘ä»¬çœŸå®æƒ…å†µåªéœ€è¦ä¸€ä¸ªæ•°æ®å°±è¡Œ\n\n```cpp\nclass Animal{\npublic:\n\tint m_Age;\n};\nclass Sheep : public Animal{};\nclass Tuo : public Animal{};\nclass SheepTuo : public Sheep, public Tuo{};\nvoid main()\n{\n\tSheepTuo st;\n\tst.Sheep::m_Age = 18;\n\tst.Tuo::m_Age = 28;//ä¼šå‡ºç°ä¸¤ä¸ªæƒ…å†µ\n}\n```\n\nè™šç»§æ‰¿å³å¯è§£å†³\n\n```cpp\nclass Animal{\npublic:\n\tint m_Age;\n};\nclass Sheep :virtual public Animal{};\nclass Tuo :virtual public Animal{};//åˆ©ç”¨virtualå…³é”®å­—å®ç°è™šç»§æ‰¿\nclass SheepTuo : public Sheep, public Tuo{};\nvoid main()\n{\n\tSheepTuo st;\n\tst.Sheep::m_Age = 18;//æ­¤æ—¶ä¸ç®¡è®¿é—®Sheepè¿˜æ˜¯Tuoéƒ½æ˜¯18\n    st.Tuo::m_Age = 28;//æ­¤æ—¶ä¸ç®¡è®¿é—®Sheepè¿˜æ˜¯Tuoéƒ½æ˜¯28\n}\n```\n\n### 2.4.9 å¤šæ€\n\n<u>å¯¹äºåŒä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸åŒçš„å‚æ•°ä¼šååº”å‡ºä¸åŒçš„çŠ¶æ€ï¼Œå³æ‰§è¡Œä¸åŒçš„å†…å®¹ã€‚</u>\n\n- é™æ€å¤šæ€ï¼šå‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½\n- åŠ¨æ€å¤šæ€ï¼š å­ç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶çš„å¤šæ€\n\né™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€çš„åŒºåˆ«ï¼š\n\n- é™æ€å¤šæ€ï¼šç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€ï¼ˆæ—©ç»‘å®šï¼‰\n- åŠ¨æ€å¤šæ€ï¼šè¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€ï¼ˆæ™šç»‘å®šï¼‰\n\n```cpp\nclass Animal{\npublic:\n\tvoid speak()\n\t{\n\t\tcout<<\"åŠ¨ç‰©æ­£åœ¨è¯´è¯\"<<endl;\n\t}\n};\nclass Cat : public Animal{\npublic:\n\tvoid speak()\n\t{\n\t\tcout<<\"å°çŒ«åœ¨è¯´è¯\"<<endl;\n\t}\n};\n//åœ°å€è¿›è¡Œäº†æ—©ç»‘å®šï¼Œåœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šäº†å‡½æ•°åœ°å€ï¼Œ\n//è¾“å‡ºå†…å®¹ä¸ºï¼šâ€œåŠ¨ç‰©åœ¨è¯´è¯â€\nvoid doSpeak(Animal & animal)\n{\n\tanimal.speak();\n}\nvoid main()\n{\n\tCat cat;\n\tdoSpeak(cat);\n}\n```\n\n```cpp\nclass Animal{\npublic:\n\tvirtual void speak()//é€šè¿‡virtualï¼Œè™šå‡½æ•°å®ç°åŠ¨æ€å¤šæ€\n\t{\n\t\tcout<<\"åŠ¨ç‰©æ­£åœ¨è¯´è¯\"<<endl;\n\t}\n};\nclass Cat : public Animal{\npublic:\n\tvoid speak()\n\t{\n\t\tcout<<\"å°çŒ«åœ¨è¯´è¯\"<<endl;\n\t}\n};\n//æ­¤æ—¶è¾“å‡ºâ€œå°çŒ«åœ¨è¯´è¯â€\nvoid doSpeak(Animal & animal)\n{\n\tanimal.speak();\n}\nvoid main()\n{\n\tCat cat;\n\tdoSpeak(cat);\n}\n```\n\n**åŠ¨æ€å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š**\n\n1. æœ‰ç»§æ‰¿å…³ç³»\n2. å­ç±»è¦é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°\n\né‡å†™ï¼šå‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç±»å‹éƒ½å¿…é¡»ç›¸åŒã€‚\n\né‡è½½ï¼šå‡½æ•°åç›¸åŒï¼Œå‚æ•°ã€è¿”å›å€¼ç±»å‹å¯èƒ½ä¸åŒã€‚\n\n#### 2.4.9.1å¤šæ€çš„åŸç†å‰–æ\n\n```cpp\nclass Animal\n{\n\tvoid doSpeak()\n\t{\n\t\tcout << \"åŠ¨ç‰©æ­£åœ¨è¯´è¯\" << endl;\n\t}\n};\næ­¤æ—¶sizeof(Animal)ä¸º1\nclass Animal\n{\n\tvoid virtual doSpeak()\n\t{\n\t\tcout << \"åŠ¨ç‰©æ­£åœ¨è¯´è¯\" << endl;\n\t}\n};\næ­¤æ—¶çš„sizeof(Animal)ä¸º4\n```\n\n4ä¸ªå­—èŠ‚çš„åŸå› æ˜¯æŒ‡é’ˆå ç”¨ã€‚\n\n`virtual`å…³é”®å­—ä¼šå½¢æˆä¸€ä¸ª`vfptr`æŒ‡é’ˆï¼ˆ**è™šå‡½æ•°è¡¨æŒ‡é’ˆ**ï¼‰virtual function pointer\n\n![image-20240304194459436](C/image-20240304194459436.png)\n\nå½“å­ç±»ç»§æ‰¿æ—¶ï¼Œä¼šé‡å†™doSpeakå‡½æ•°ï¼Œvfptrçš„æŒ‡é’ˆæŒ‡å‘çš„åœ°å€å°±ä¼šå‘ç”Ÿæ”¹å˜ã€‚\n\n![image-20240304195120122](C/image-20240304195120122.png)\n\nåœ¨æ¯æ¬¡è°ƒç”¨æ—¶å€™ï¼Œä¼šç›´æ¥è°ƒç”¨å½“å‰ç±»çš„å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥å®ç°å¤šæ€ã€‚\n\n\n\n#### 2.4.9.2 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»\n\né€šå¸¸å‘ç”Ÿå¤šæ€åï¼Œçˆ¶ç±»ä¸­çš„å‡½æ•°å°±æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œä¸»è¦æ˜¯ç”¨äºè°ƒç”¨å­ç±»é‡å†™å†…å®¹ï¼Œ\n\nå› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸º**çº¯è™šå‡½æ•°**\n\nè¯­æ³•ï¼š`virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å (å‚æ•°åˆ—è¡¨) = 0; `\n\nå½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»å°±ç§°ä¸º**æŠ½è±¡ç±»**ã€‚\n\n\n\n**æŠ½è±¡ç±»ç‰¹ç‚¹ï¼š**æ— æ³•å®ä¾‹åŒ–å¯¹è±¡ï¼Œå­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»\n\n```cpp\nclass Animal{//æŠ½è±¡ç±»\npublic:\n\tvirtual void doSpeak() = 0;//çº¯è™šå‡½æ•°\n};\n\nclass Cat : public Animal{\npublic:\n\tvoid doSpeak()\n\t{\n\t\tcout<<\"å°çŒ«åœ¨è¯´è¯\"<<endl;\n\t}\n};\n```\n\n#### 2.4.9.3 è™šææ„å’Œçº¯è™šææ„\n\nå¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å¼€è¾Ÿåˆ°å †åŒºçš„æ•°æ®ï¼Œçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç \n\nçˆ¶ç±»æŒ‡é’ˆåœ¨è¿›è¡Œææ„çš„æ—¶å€™ï¼Œä¸ä¼šè°ƒç”¨å­ç±»ä¸­çš„ææ„å‡½æ•°ï¼Œå¯¼è‡´å­ç±»çš„å †åŒºæ•°æ®ï¼Œå‡ºç°å†…å­˜æ³„æ¼ã€‚\n\né‡‡ç”¨ **è™šææ„** å’Œ **çº¯è™šææ„** å³å¯è§£å†³ã€‚\n\n```cpp\n//è™šææ„\nvirtual ~ç±»å(){\n    //è™šææ„å®ç°\n}\n\n//çº¯è™šææ„ï¼Œå±äºæŠ½è±¡ç±»\nvirtual ~ç±»å() = 0; \n/*å…¨å±€ä½œç”¨åŸŸ*/\nAnimal::~Animal()\n{\n    //çº¯è™šææ„å®ç°\n}\n```\n\n## 2.5æ–‡ä»¶æ“ä½œ\n\nC++å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶**`<fstream>`**\n\næ–‡æœ¬æ–‡ä»¶ä»¥**ASCIIç **å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ä»¥**äºŒè¿›åˆ¶**å½¢å¼å­˜å‚¨\n\nä¸‰å¤§ç±»ï¼š\n\n- ofstreamï¼šå†™æ“ä½œ\n- ifstreamï¼šè¯»æ“ä½œ\n- fstreamï¼šè¯»å†™æ“ä½œ\n\n### 2.5.1 æ–‡æœ¬æ–‡ä»¶\n\n**æ‰“å¼€æ–¹å¼ï¼š**\n\n![image-20240304204659205](C/image-20240304204659205.png)\n\n#### 2.5.1.1 å†™æ–‡ä»¶\n\n```cpp\n#include <fstream>\nint main()\n{\n    ofstream ofs;\n    ofs.open(\"æ–‡ä»¶è·¯å¾„\", ios::out);\n    ofs << \"å†™å…¥çš„æ•°æ®\";\n    ofs.close();\n    return 0;\n}\n```\n\næ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œå¦‚`ios::out | ios::binary`å°±æ˜¯ä»¥äºŒè¿›åˆ¶å½¢å¼å†™å‡º\n\n#### 2.5.1.2 è¯»æ–‡ä»¶\n\n```cpp\n#include <fstream>\n#include <iostream>\nint main()\n{\n    ifsteam ifs;\n    ifs.open(\"æ–‡ä»¶è·¯å¾„\", ios::in);\n    \n    if(!ifs.isopen())\n    {\n        cout<<\"æ–‡ä»¶æ‰“å¼€å¤±è´¥\"<<endl;\n    \treturn 0;\n    }\n    \n    //è¯»æ•°æ®\n    \n    ifs.close();\n    return 0;\n}\n```\n\n**è¯»æ•°æ®ï¼š**\n\næ–¹æ³•ä¸€ï¼š\n\n```cpp\nchar buf[1024] = {0};//å¯ä»¥ç”¨string\nwhile( ifs >> buf )\n{\n    cout << buf << endl;\n}\n```\n\næ–¹æ³•äºŒï¼š\n\n```cpp\nchar buf[1024] = {0};//å¯ä»¥ç”¨string\nwhile( ifs.getline(buf),1024 )//æˆ–è€…ç”¨sizeof\n{\n    cout << buf << endl;\n}\n```\n\næ–¹æ³•ä¸‰ï¼š\n\n```cpp\nstring buf;\nwhile( getline(ifs, buf))\n{\n    cout << buf;\n}\n```\n\næ–¹æ³•å››ï¼š\n\n```cpp\nchar c;\nwhile( (c=ifs.get()) != EOF )\n{\n    cout << c;\n}\n```\n\n**æ€»ç»“**\n\n```cpp\n#include <fstream>\n#include <iostream>\nusing namespace std;\nint main()\n{\n\tofstream ofs;\n\tofs.open(\"test.txt\", ios::out);\n\tofs << \"å¼ ä¸‰\" << endl;\n\tofs << \"18å²\" << endl;\n\tofs << \"ç”·\" << endl;\n\tofs.close();\n\n\tifstream ifs;\n\tifs.open(\"test.txt\", ios::in);\n\tif (!ifs.is_open())return 0;\n\tstring str;\n\twhile ( ifs>>str )\n\t{\n\t\tcout << str<<endl;\n\t}\n    ifs.close();\n\treturn 0;\n}\n```\n\n### 2.5.2 äºŒè¿›åˆ¶æ–‡ä»¶\n\næ‰“å¼€æ–¹å¼éœ€è¦æ·»åŠ `ios::binary`\n\n#### 2.5.2.1 å†™æ–‡ä»¶\n\n```cpp\nPerson p = {\"å¼ ä¸‰\",18};//åˆ—è¡¨åˆå§‹åŒ–ï¼Œç­‰æ•ˆäºp(\"å¼ ä¸‰\",18)\nofstream ofs;\nofs.open(\"æ–‡ä»¶åœ°å€\", ios::binary | ios::out);\nofs.write((const char*)p, sizeof(Person));\nofs.close();\n```\n\n#### 2.5.2.1 è¯»æ–‡ä»¶\n\n```cpp\nPerson p;\nifstream ifs;\nifs.open(\"æ–‡ä»¶åœ°å€\", ios::binary | ios::in);\n\nif(!ifs.is_open())return 0;\n\nifs.read((const char*)p, sizeof(Person));\nifs.close();\n```\n\n## 2.6 æ¨¡æ¿\n\n### 2.6.1åŸºæœ¬è¯­æ³•\n\n```cpp\nvoid swapInt(int &a, int &b)\n{\n    int temp = a;\n    a = b;\n    b = temp;\n}\nvoid swapDouble(double &a, double &b)\n{\n    double temp = a;\n    a = b;\n    b = temp;\n}\n```\n\næ•°æ®ç±»å‹ä¸åŒï¼Œä½†æ˜¯ä»£ç é€»è¾‘æ˜¯ç›¸åŒçš„ï¼Œé‡‡ç”¨æ¨¡æ¿å¯ä»¥æ”¹å†™ä¸º\n\n```cpp\ntemplate <typename T>//å£°æ˜ä¸€ä¸ªæ¨¡æ¿ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨åé¢çš„Tæ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®ç±»å‹\n//typenameå¯ä»¥ç”¨classä»£æ›¿\nvoid Myswap(T &a, T &b)\n{\n    T temp = a;\n    a = b;\n    b = temp;\n}\n\nvoid main()\n{\n    int a=10,b=20;\n    Myswap(a,b);//è‡ªåŠ¨ç±»å‹æ¨å¯¼\n    Myswap<int>(a,b);//æ‰‹åŠ¨æŒ‡å®šæ•°æ®ç±»å‹\n}\n```\n\n**æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹æ‰èƒ½æ­£å¸¸ä½¿ç”¨**\n\næ¡ˆä¾‹ï¼šé€‰æ‹©æ’åº\n\n```cpp\n#include <iostream>\nusing namespace std;\ntemplate <class T>\nvoid Swap_element(T &a,T &b)\n{\n\tT temp;\n\ttemp = a;\n\ta = b;\n\tb = temp;\n}\ntemplate <class T>\nvoid SelectSort(T &arr)\n{\n\tint len = sizeof(arr) / sizeof(arr[0]);\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tint maxFlag = i;\n\t\tfor (int j = i + 1; j < len; j++)\n\t\t{\n\t\t\tif (arr[j] > arr[maxFlag])\n\t\t\t{\n\t\t\t\tmaxFlag = j;\n\t\t\t}\n\t\t}\n\t\tif (maxFlag != i)\n\t\t{\n\t\t\tSwap_element(arr[maxFlag], arr[i]);\n\t\t}\n\t}\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tcout << arr[i] << \" \";\n\t}\n}\n\nint main()\n{\n\tint a[] = { 2,3,4,1,0,2,9,10 };\n\tSelectSort(a);\n\tchar str[] = \"gfbseqa\";\n\tSelectSort(str);\n\treturn 0;\n}\n```\n\n### 2.6.2 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«\n\næ™®é€šå‡½æ•°å¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢\n\nå‡½æ•°æ¨¡æ¿(è‡ªåŠ¨ç±»å‹æ¨å¯¼)ï¼Œä¸å¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢\n\nå‡½æ•°æ¨¡æ¿(æ‰‹åŠ¨æŒ‡å®šç±»å‹)ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢\n\n```cpp\nint Add_pt(int &a,int &b){\n    return a+b;\n}\n\ntemplate <typename T>\nT Add_mb(T &a, T &b){\n    return a+b;\n}\n\nvoid main(){\n    int a=1,b=2;\n    char c=3;\n    Add_pt(a,c);//æ™®é€šå‡½æ•°éšå¼ç±»å‹è½¬æ¢ï¼Œå°†cè½¬ä¸ºäº†intç±»å‹\n    Add_mb(a,c);//æ­¤å¤„ä¼šæŠ¥é”™ï¼Œè‡ªåŠ¨æ¨å¯¼\n    add_mb<int>(a,c);//éšå¼ç±»å‹è½¬æ¢\n}\n```\n\n### 2.6.3 æ™®é€šå‡½æ•°å’Œå‡½æ•°æ¨¡æ¿è°ƒç”¨è§„åˆ™\n\n- å¦‚æœæ™®é€šå‡½æ•°å’Œå‡½æ•°æ¨¡æ¿éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨**æ™®é€šå‡½æ•°**\n- å¯ä»¥é€šè¿‡**ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨**æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿\n- å‡½æ•°æ¨¡æ¿é¡µä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½\n- å¦‚æœå‡½æ•°æ¨¡æ¿äº§ç”Ÿæ›´å¥½çš„åŒ¹é…ï¼Œä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿\n\n```cpp\nvoid Print(int a,int b){\n\tcout<<\"è°ƒç”¨æ™®é€šå‡½æ•°\"<<endl;\n}\n\ntemplate<class T>\nvoid Print(T a,T b){\n    cout<<\"è°ƒç”¨æ¨¡æ¿å‡½æ•°\"<<endl;\n}\n\ntemplate<typename T>\nvoid Print(T a,T b,T c){\n    cout<<\"è°ƒç”¨é‡è½½çš„å‡½æ•°æ¨¡æ¿\"<<endl;\n}\nvoid main()\n{\n    Print(1,1);//ä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°\n    Print<>(1,1);//å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿\n    Print(1,1,1);//è°ƒç”¨é‡è½½å‡½æ•°æ¨¡æ¿\n    Print('a','b');\n    //ä¼šä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿ï¼Œäº§ç”Ÿäº†æ›´å¥½çš„åŒ¹é…ï¼Œä¸éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢(char->int)\n}\n```\n\n### 2.6.4 æ¨¡æ¿å±€é™æ€§\n\næ¨¡æ¿å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœä¼ å…¥ aå’Œbæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¨¡æ¿å°±æ— æ³•å®ç°\n\n```cpp\ntemplate <class T>\nvoid f(T a, T b){\n\ta = b;\n}\n```\n\nå¦‚æœä¼ å…¥çš„æ˜¯åƒPersonè¿™æ ·çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œ\n\n```cpp\ntemplate <class T>\nbool f(T a,T b){\n\tif(a > b){.....}\n}\n```\n\n**è§£å†³æ–¹æ³•ï¼š**1.è¿ç®—ç¬¦é‡è½½ã€2.å…·ä½“åŒ–Person\n\n```cpp\ntemplate<> bool f(Person &p1, Person &p2){\n\tif(p1.m_Name==p2.m_Name)return true;\n\telse return false;\n}\n```\n\n### 2.6.5 ç±»æ¨¡æ¿\n\nç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°åªæœ‰åœ¨**è°ƒç”¨æ—¶å€™**æ‰ä¼šè¿›è¡Œåˆ›å»ºï¼Œæ™®é€šç±»ä¸­çš„æˆå‘˜å‡½æ•°åœ¨ä¸€å¼€å§‹å°±åˆ›å»ºåœ¨ä»£ç åŒº\n\n(å¯ä»¥è®°æˆï¼Œä¸åŒçš„ä¸€ç»„typenameå°±æ˜¯ä¸åŒçš„classï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨è®¿é—®çš„æ—¶å€™éœ€è¦ç”¨<>)\n\n#### 2.6.5.1 åŸºæœ¬è¯­æ³•\n\n```cpp\n#include <iostream>\nusing namespace std;\n\ntemplate <typename NameType,typename AgeType>\nclass Person {\npublic:\n\tNameType m_Name;\n\tAgeType m_Age;\n\tPerson(NameType name, AgeType age){\n\t\tm_Name = name;\n\t\tm_Age = age;\n\t}\n};\nint main()\n{\t\n\tPerson<string,int> p(\"vicczyq\",18);//å¿…é¡»æ‰‹åŠ¨æŒ‡å®šç±»å‹\n\treturn 0;\n}\n```\n\n#### 2.6.5.2 ç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿çš„åŒºåˆ«\n\n1. ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼\n2. ç±»æ¨¡æ¿åœ¨æœ¨æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰**é»˜è®¤å‚æ•°**\n\n```cpp\ntemplate <typename NameType, typename AgeType =int>\nclass Person{\npublic:\n    NameType m_Name;\n    AgeType\t m_Age;\n};\n```\n\n#### 2.6.5.3 ç±»æ¨¡æ¿å¯¹è±¡ä½œå‡½æ•°å‚æ•°\n\n```CPP\ntemplate <typename NameType, typename AgeType>\nclass Person{\npublic:\n    NameType m_Name;\n    AgeType\t m_Age;\n};\n```\n\n- æŒ‡å®šä¼ å…¥ç±»å‹\t--ç›´æ¥æŒ‡å®šå¯¹è±¡çš„æ•°æ®ç±»å‹\n\n```cpp\nvoid printPerson(Person<string,int> &p){\n    \n}\nvoid main(){\n    Person<string,int> p(\"vicczyq\",18);\n    printPerson(p);\n}\n```\n\n- å‚æ•°æ¨¡æ¿åŒ–        --å°†å¯¹è±¡ä¸­çš„å‚æ•°å˜ä¸ºæ¨¡æ¿è¿›è¡Œä¼ é€’\n\n```cpp\ntemplate<typename T1, typename T2>\nvoid printPerson(Person<T1,T2> &p){\n    \n}\nvoid main(){\n    Person<string,int> p(\"vicczyq\",18);\n    printPerson(p);\n}\n```\n\n- æ•´ä¸ªç±»æ¨¡æ¿åŒ–    --å°†è¿™ä¸ªå¯¹è±¡ç±»å‹æ¨¡æ¿åŒ–è¿›è¡Œä¼ é€’\n\n```cpp\ntemplate<typename T>\nvoid printPerson(T &p){\n    \n}\nvoid main()\n{\n    Person<string,int> p(\"vicczyq\",18);\n    printPerson(p);//åˆ©ç”¨æ¨¡æ¿å‡½æ•°è‡ªåŠ¨ç±»å‹æ¨å¯¼\n}\n```\n\n#### 2.6.5.4 ç±»æ¨¡æ¿ç»§æ‰¿\n\nå½“çˆ¶ç±»æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿æ—¶ï¼Œå­ç±»ç»§æ‰¿éœ€è¦æŒ‡å‡ºçˆ¶ç±»ä¸­çš„æ•°æ®ç±»å‹\n\nå¦‚æœæƒ³çµæ´»ä½¿ç”¨æ•°æ®ç±»å‹ï¼Œå­ç±»ä¹Ÿå¿…é¡»ä¸ºç±»æ¨¡æ¿\n\n```cpp\ntemplate <typename NameType,typename AgeType>\nclass Person{\npublic:\n    NameType m_Name;\n    AgeType m_Age;\n}\n\nclass Son : public Person<string,int>{\n    \n}\n\ntemplate <typename T1, typename T2, typename T3>\nclass Son : public Person<T1,T2>\n{\npublic:\n    T3 sex;\n}\n```\n\n#### 2.6.5.5 ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°\n\n```cpp\ntemplate <typename NameType>\nclass Person{\npublic:\n\tNameType m_Name;\n\tvoid getName();\n    Person();\n};\n\ntemplate <typename T>\nT Person<T>::getName()\n{\n\treturn m_Name;\n}\n\ntemplate <typename T>\nPerson<T>::Person(){\n\n}\n```\n\n#### 2.6.5.6 ç±»æ¨¡æ¿ä»½æ–‡ä»¶ç¼–å†™\n\nç”±äºç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯åœ¨è°ƒç”¨é˜¶æ®µï¼Œå¯¼è‡´ä»½æ–‡ä»¶ç¼–å†™æ—¶å€™æ— æ³•é“¾æ¥ã€‚\n\n**è§£å†³æ–¹æ³•ï¼š**\n\n- è§£å†³æ–¹æ³•1ï¼šç›´æ¥åŒ…å«cppæºæ–‡ä»¶\n\nperson.h\n\n```cpp\ntemplate <typename NameType>\nclass Person{\npublic:\n\tNameType m_Name;\n\tvoid getName();\n    Person();\n};\n```\n\nperson.cpp\n\n```cpp\n#include \"person.h\"\n\ntemplate <typename T>\nT Person<T>::getName()\n{\n\treturn m_Name;\n}\n\ntemplate <typename T>\nPerson<T>::Person(){\n\n}\n```\n\nmainå‡½æ•°\n\n```cpp\n#include \"person.cpp\"\nvoid main(){\n\tPerson<string> p;\n}\n```\n\n- è§£å†³æ–¹æ³•2ï¼šå°†å£°æ˜å’Œå®ç°å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶æ›´æ”¹åç¼€åä¸º`.hpp`ï¼ˆ.hppåªæ˜¯çº¦å®šåç§°ï¼Œä¸æ˜¯å¼ºåˆ¶é™åˆ¶ï¼‰ç›¸å½“äºç›´æ¥å†™åœ¨äº†.hæ–‡ä»¶ä¸­\n\nmainå‡½æ•°\n\n```cpp\n#include \"person.hpp\"\nvoid main(){\n\tPerson<string> p;\n}\n```\n\nperson.hpp\n\n```cpp\ntemplate <typename NameType>\nclass Person{\npublic:\n\tNameType m_Name;\n\tvoid getName();\n    Person();\n};\ntemplate <typename T>\nT Person<T>::getName()\n{\n\treturn m_Name;\n}\n\ntemplate <typename T>\nPerson<T>::Person(){\n\n}\n```\n\n#### 2.6.5.7 ç±»æ¨¡æ¿ä¸å‹å…ƒ\n\n```cpp\ntemplate <typename NameType, typename AgeType>\nclass Person{\n    //å…¶å®æ˜¯å…¨å±€å‡½æ•°ï¼Œå‹å…ƒå‡½æ•°ç›´æ¥åœ¨è¿™é‡Œå®ç°\n    friend void PrintInfo(Person<NameType,AgeType> &p)\n    {\n        cout << p.m_Name << p.m_Age;\n    }\n\tprivate:\n    \tNameType m_Name;\n    \tAgeType\t m_Age;\n};\n```\n\n","tags":["C++"]},{"title":"è®¡ç®—æœºç»„æˆåŸç†-(2)","url":"/2024/02/06/è®¡ç®—æœºç»„æˆåŸç†äºŒ/","content":"\n# ä¸€ã€å­˜å‚¨ç³»ç»Ÿ\n\n## 1.1æ•°æ®å­˜å‚¨å’Œæ’åˆ—\n\n### 1.1.1å¤§å°ç«¯æ¨¡å¼\n\nè‹¥æœ‰4å­—èŠ‚çš„ intï¼š01 23 45 67 H\n\nå¤šå­—èŠ‚æ•°æ®åœ¨å†…å­˜é‡Œä¸€å®šæ˜¯å **è¿ç»­çš„**å‡ ä¸ªå­—èŠ‚ï¼Œ01ä¸ºæœ€é«˜æœ‰æ•ˆå­—èŠ‚(MSB)ï¼Œ67ä¸ºæœ€ä½æœ‰æ•ˆå­—èŠ‚(LSB)\n\n**å¤§ç«¯æ–¹å¼ï¼š**ä¾¿äºäººç±»é˜…è¯»\n\n![image-20240206163512612](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240206163512612.png)\n\n**å°ç«¯æ–¹å¼ï¼š**ä¾¿äºæœºå™¨å¤„ç†\n\n![image-20240206163632872](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240206163632872.png)\n\n### 1.1.2è¾¹ç•Œå¯¹é½\n\nå‡è®¾å­˜å‚¨å­—é•¿ä¸º32ä½ï¼Œåˆ™1ä¸ªå­—=32bitï¼ŒåŠå­—=16bitã€‚æ¯æ¬¡è®¿å­˜åªèƒ½è¯»/å†™1ä¸ªå­—\n\n**è¾¹ç•Œå¯¹é½çš„æ–¹å¼ï¼š**\n\n![image-20240206170756798](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240206170756798.png)\n\n**è¾¹ç•Œä¸å¯¹é½æ–¹å¼ï¼š**\n\n![image-20240206170910990](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240206170910990.png)\n\nç”±äºè¾¹ç•Œä¸å¯¹é½ï¼Œè‹¥è¦è¯»å–åŠå­—1ï¼Œåˆ™å…ˆè¦è¯»å–ç¬¬ä¸€ä¸ªå­—(ç¬¬ä¸€è¡Œ)ï¼Œå†è¯»å–ç¬¬äºŒä¸ªå­—(ç¬¬äºŒè¡Œ)ï¼Œæœ€åå°†åŠå­—1-1å’ŒåŠå­—1-2æ‹¼æ¥ã€‚æ‰€ä»¥è®¿é—®**ä¸€ä¸ªå­—/åŠå­—**å¯èƒ½éœ€è¦**ä¸¤æ¬¡è®¿å­˜**\n\né‡‡ç”¨è¾¹ç•Œå¯¹é½çš„æ–¹å¼ï¼Œè®¿é—®**ä¸€ä¸ªå­—/åŠå­—**éƒ½åªéœ€è¦ä¸€æ¬¡è®¿å­˜å³å¯ã€‚ç‰ºç‰²æ‰éƒ¨åˆ†ç©ºé—´ï¼Œä½†æ˜¯èƒ½åŠ å¿«è®¿å­˜æ•ˆç‡ã€‚\n\n## 1.2æµ®ç‚¹æ•°çš„è¡¨ç¤ºå’Œè¿ç®—\n\n### 1.2.1å‰è¨€\n\n**å®šç‚¹æ•°çš„å±€é™æ€§ï¼š**å®šç‚¹æ•°å¯ä»¥è¡¨ç¤ºçš„æ•°å­—èŒƒå›´æœ‰é™ï¼Œä½†æˆ‘ä»¬ä¸èƒ½æ— é™åˆ¶çš„å¢åŠ æ•°æ®é•¿åº¦\n\n### 1.2.2æµ®ç‚¹æ•°çš„è¡¨ç¤º\n\n$$\nå¯ä»¥ç±»ä¼¼äºç§‘å­¦è®¡æ•°æ³•ï¼Œ+3.026Ã—10^{+21}\n\\\\+/-è¡¨ç¤ºå°æ•°ç‚¹åç§»/å‰ç§»å¤šå°‘ä½\n\\\\æµ®ç‚¹æ•°çš„çœŸå€¼:N=r^EÃ—M\n\\\\rä¸ºé˜¶ç çš„åº•ï¼Œé€šå¸¸ä¸º2ï¼ˆäºŒè¿›åˆ¶ï¼‰\n\\\\Eååº”æµ®ç‚¹æ•°è¡¨ç¤ºèŒƒå›´ä»¥åŠå°æ•°ç‚¹çš„çœŸæ˜¯ä½ç½®\n\\\\Mæ•°å€¼éƒ¨åˆ†çš„ä½æ•°ååº”æµ®ç‚¹æ•°çš„ç²¾åº¦\n\\\\é˜¶ç :å¸¸ç”¨è¡¥ç æˆ–ç§»ç è¡¨ç¤ºçš„å®šç‚¹æ•´æ•°\n\\\\å°¾æ•°:å¸¸ç”¨åŸç æˆ–è¡¥ç è¡¨ç¤ºçš„å®šç‚¹å°æ•°\n$$\n\n![image-20240206171958125](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240206171958125.png)\n\n\n\n### 1.2.3æµ®ç‚¹æ•°å°¾æ•°è§„æ ¼åŒ–\n\n![image-20240206174421304](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240206174421304.png)\n\n## 1.3å­˜å‚¨å™¨\n\n### 1.3.1å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„\n\n![image-20240208143405738](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240208143405738.png)\n\n**è¾…å­˜ï¼š**ç£ç›˜ã€å¯ç§»åŠ¨ä»‹è´¨\n\nè¾…å­˜ä¸­çš„æ•°æ®è¦è°ƒå…¥åˆ°ä¸»å­˜ä¸­æ‰èƒ½è¢«CPUè®¿é—®\n\n![image-20240208145434194](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240208145434194.png)\n\n**ç¼“å­˜ï¼š**é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨Cache\n\n**ä¸»å­˜-è¾…å­˜ï¼š**å®ç°äº†è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿï¼Œè§£å†³äº†ä¸»å­˜å®¹é‡ä¸è¶³çš„é—®é¢˜\n\n**Cache-ä¸»å­˜ï¼š**è§£å†³äº†ä¸»å­˜ä¸CPUé€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜\n\n### 1.3.2å­˜å‚¨å™¨çš„åˆ†ç±»\n\n#### 1.3.2.1æŒ‰è®¡ç®—æœºä¸­çš„å±‚æ¬¡åˆ†ç±»\n\n(1)ä¸»å­˜å‚¨å™¨ã€‚ç®€ç§°**ä¸»å­˜**ï¼Œåˆç§°ä¸º**å†…å­˜**ã€‚ç”¨æ¥å­˜æ”¾è®¡ç®—æœº**è¿è¡ŒæœŸé—´**æ‰€éœ€çš„ç¨‹åºå’Œæ•°æ®ï¼ŒCPUå¯ä»¥ç›´æ¥éšæœºçš„å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨Cacheé—´æ¥è®¿é—®ã€‚\n\n(2)è¾…åŠ©å­˜å‚¨å™¨ã€‚ç®€ç§°**è¾…å­˜**ï¼Œåˆç§°**å¤–å­˜**ã€‚ç”¨æ¥å­˜æ”¾æš‚æ—¶ä¸ç”¨çš„ç¨‹åºå’Œæ•°æ®ï¼Œä»¥åŠä¸€äº›æ°¸ä¹…æ€§ä¿å­˜çš„ä¿¡æ¯ã€‚è¾…å­˜çš„å†…å®¹è¦è°ƒå…¥ä¸»å­˜åæ‰èƒ½è¢«CPUè®¿é—®ã€‚\n\n(3)é«˜æ•°ç¼“å†²å­˜å‚¨å™¨ã€‚ç®€ç§°**Cache**ï¼Œç”¨æ¥å­˜æ”¾CPUç»å¸¸ä½¿ç”¨çš„æŒ‡ä»¤å’Œæ•°æ®ï¼ŒCPUå¯ä»¥é«˜é€Ÿè®¿é—®ä»–ä»¬ã€‚\n\n#### 1.3.2.2æŒ‰å­˜å‚¨ä»‹è´¨åˆ†ç±»\n\nç£è¡¨é¢å­˜å‚¨å™¨(ç£ç›˜ã€ç£å¸¦)ã€ç£èŠ¯å­˜å‚¨å™¨ã€åŠå¯¼ä½“å­˜å‚¨å™¨(MOSå‹å­˜å‚¨å™¨ã€åŒæå‹å­˜å‚¨å™¨)å’Œå…‰å­˜å‚¨å™¨(å…‰ç›˜)\n\n#### 1.3.2.3æŒ‰ä¿¡æ¯çš„å¯ä¿å­˜æ€§åˆ†ç±»\n\næ˜“å¤±æ€§å­˜å‚¨å™¨ï¼šRAM\n\néæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼šROM\n\n### 1.3.3å­˜å‚¨å™¨èŠ¯ç‰‡çš„åŸºæœ¬åŸç†\n\n ![image-20240209152642087](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240209152642087.png)\n$$\næ§åˆ¶ç”µè·¯ï¼šç­‰å¾…MARç¨³å®šåæ‰è¿›è¡Œè¯‘ç æ“ä½œï¼Œç­‰å¾…MDRç¨³å®šåæ‰è¿›è¡Œè¯»å†™æ“ä½œ\n\\\\ç‰‡é€‰çº¿ (\\overline{CS}æˆ–\\overline{CE})ï¼šä¸€ä¸ªå†…å­˜æ¡ä¸Šå¯èƒ½åŒ…å«å¤šå—å­˜å‚¨èŠ¯ç‰‡,ç”¨äºé€‰æ‹©èŠ¯ç‰‡(Chip Selectæˆ–Chip Enable)\n\\\\è¯»æ§åˆ¶çº¿(\\overline{WE})ï¼šå…è®¸å†™\n\\\\å†™æ§åˆ¶çº¿(\\overline{OE})ï¼šå…è®¸è¯»\n$$\n\n### 1.3.4DRAMå’ŒSRAM\n\nDynamic Random Access Memoryï¼Œå³**åŠ¨æ€RAM**\n\nStatic Random Access Memoryï¼Œå³**é™æ€RAM**\n\nDRAMç”¨äºä¸»å­˜ï¼ŒSRAMç”¨äºCache\n\n\n\nDRAMä¾é <font color=red>æ …æç”µå®¹</font>å®ç°ï¼ŒSRAMä¾é <font color=green>åŒç¨³æ€è§¦å‘å™¨</font>å®ç°\n\n![image-20240225134448490](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240225134448490.png)\n\n```\næ …æç”µå®¹æ”¾ç”µä¿¡æ¯ä¼šè¢«ç ´åï¼Œæ˜¯ç ´åæ€§è¯»å‡ºã€‚è¯»å‡ºåéœ€è¦â€œé‡å†™â€æ“ä½œï¼Œä¹Ÿæˆä¸ºâ€œå†ç”Ÿâ€ã€‚\nåŒç¨³æ€è§¦å‘å™¨æ— éœ€é‡å†™ï¼Œæ˜¯éç ´åæ€§è¯»å‡ºã€‚\n```\n\nç”±äºSRAMä¸éœ€è¦é‡æ–°æ‰€ä»¥è¯»å‡ºé€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯æˆæœ¬æ›´é«˜ã€‚å¹¶ä¸”ç”±äºå­˜å‚¨å…ƒåˆ¶é€ æ›´å¤æ‚ï¼Œé›†æˆåº¦å°±æ›´ä½ã€‚\n\n**æ³¨æ„ï¼š**DRAMå’ŒSRAMéƒ½æ˜¯æ˜“å¤±æ€§çš„ï¼ˆæ–­ç”µåä¿¡æ¯ä¼šæ¶ˆå¤±ï¼‰\n\n#### 1.3.4.1 DRAMçš„åˆ·æ–°\n\nç”±äºDRAMç”µå®¹å†…çš„ç”µè·åªèƒ½ç»´æŒ2msã€‚å³ä¾¿ä¸æ–­ç”µï¼Œ2msåä¿¡æ¯ä¹Ÿä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥è¦ä¸æ–­çš„è¿›è¡Œåˆ·æ–°(å……ç”µ)\n\n### 1.3.5 ROM\n\nROMèŠ¯ç‰‡--éæ˜“å¤±ï¼Œæ–­ç”µåæ•°æ®ä»ç„¶å¯ä»¥ä¿å­˜\n\n```\nMROM:æ©æ¨¡å¼åªè¯»å­˜å‚¨å™¨(å‚å®¶æŒ‰å®¢æˆ·éœ€æ±‚åœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­å†™å…¥ï¼Œä¹‹åä¸å¯é‡å†™)\nPROM:å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨(ç”¨æˆ·å¯ä»¥ç”¨ä¸“é—¨çš„å†™å…¥å™¨å†™å…¥ä¿¡æ¯ï¼Œä¹‹åä¸å¯é‡å†™)\nEPROM:å¯æ“¦é™¤å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨(å…è®¸ç”¨æˆ·å†™å…¥ï¼Œä¹‹åæ“¦é™¤ï¼Œå¯ä»¥å¤šæ¬¡é‡å†™)\nUVEPROM:ç´«å¤–çº¿ç…§å°„å¯æ“¦é™¤æ‰€æœ‰ä¿¡æ¯\nEEPROM:ç”µæ“¦é™¤ï¼Œå¯æ“¦é™¤ç‰¹å®šçš„å­—\n\nFlash Memory:é—ªé€Ÿå­˜å‚¨å™¨(Uç›˜ï¼ŒSDå¡)\næ³¨æ„ï¼šé—ªå­˜éœ€è¦å…ˆæ“¦é™¤å†å†™å…¥ï¼Œå› æ­¤\"å†™\"é€Ÿåº¦æ¯”\"è¯»\"é€Ÿåº¦æ›´æ…¢\nSSDï¼šå›ºæ€ç¡¬ç›˜(ç”±æ§åˆ¶å•å…ƒå’ŒFlashèŠ¯ç‰‡æ„æˆ)\n```\n\nè®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œä¸»å­˜RAMæ²¡æœ‰ä»»ä½•æŒ‡ä»¤ï¼Œæ‰€ä»¥éœ€è¦ä¸»æ¿ä¸Šçš„BIOSèŠ¯ç‰‡(ROM)å­˜å‚¨äº†\"è‡ªä¸¾è£…å…¥ç¨‹åº\"ï¼Œè´Ÿè´£å¼•å¯¼è£…å…¥æ“ä½œç³»ç»Ÿ\n\n### 1.3.6 å†…å­˜æ‰©å±•\n\n#### 1.3.6.1 ä½æ‰©å±•-å¢åŠ ä¸»å­˜çš„å­˜å‚¨å­—é•¿\n\n![image-20240229103326507](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229103326507.png)\n\nä»¥æ­¤ç±»æ¨ï¼Œæ‹“å±•ä¸º8ä½ï¼Œè¿æ¥æ–¹å¼å¦‚ä¸‹ï¼š\n\n![image-20240229103815314](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229103815314.png)\n\n8ç‰‡8Kx1ä½çš„å­˜å‚¨èŠ¯ç‰‡ -> 8Kx8ä½çš„å­˜å‚¨å™¨ï¼Œå®¹é‡ä¸º8KB(64Kbit)\n\n#### 1.3.6.2 å­—æ‰©å±•-å¢åŠ ä¸»å­˜çš„å­˜å‚¨å­—æ•°\n\nåˆ©ç”¨ç‰‡é€‰ä½¿èƒ½çº¿è¿›è¡Œï¼Œ(1-2è¯‘ç å™¨)ï¼Œåˆ©ç”¨A13çš„ä¸¤ç§çŠ¶æ€è¿›è¡Œé€‰æ‹©\n\n![image-20240229105813018](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229105813018.png)\n\nåˆ©ç”¨2-4è¯‘ç å™¨è¿›è¡Œæ‰©å±•ï¼š\n\n![image-20240229110201046](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229110201046.png)\n\n#### 1.3.6.3 å­—ä½åŒæ—¶æ‰©å±•\n\n![image-20240229110325854](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229110325854.png)\n\n## 1.4 Cache\n\n### 1.4.1 Cacheçš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†\n\n#### 1.4.1.0 æ¦‚å¿µç†è§£\n\nCPUéœ€è¦ä»ä¸»å­˜ä¸€æ¡ä¸€æ¡åœ°è¯»å–æŒ‡ä»¤ï¼ŒCPUå¤„ç†é€Ÿåº¦å¾ˆå¿«ï¼Œå†…å­˜(ä¸»å­˜)çš„è¯»å†™é€Ÿåº¦å¾ˆæ…¢ï¼Œå¯¼è‡´é€Ÿåº¦ä¸åŒ¹é…ï¼Œæ‰§è¡Œæ•ˆç‡å°±ä¼šå¾ˆä½ï¼Œå› æ­¤å¼•å…¥Cache\n\n![image-20240229111235187](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229111235187.png)Cacheçš„è¯»å†™é€Ÿåº¦å¾ˆå¿«ï¼Œå¯ä»¥ç¼“å’Œé€Ÿåº¦çŸ›ç›¾\n\n**ç©ºé—´å±€é™æ€§ï¼š**åœ¨æœ€è¿‘çš„æœªæ¥è¦ç”¨åˆ°çš„ä¿¡æ¯(æŒ‡ä»¤å’Œæ•°æ®)ï¼Œå¾ˆå¯èƒ½ä¸ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ä¿¡æ¯åœ¨å­˜å‚¨ç©ºé—´ä¸Šæ˜¯ç›¸é‚»çš„\n\n**æ—¶é—´å±€é™æ€§ï¼š**åœ¨æœ€è¿‘çš„æœªæ¥è¦ç”¨åˆ°çš„ä¿¡æ¯ï¼Œå¾ˆå¯èƒ½æ˜¯ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ä¿¡æ¯\n\næ ¹æ®ä¸¤ä¸ªåŸç†å¯ä»¥å‘ç°ï¼Œå¯ä»¥æŠŠCPUç›®å‰è®¿é—®åœ°å€\"å‘¨å›´\"çš„éƒ¨åˆ†æ•°æ®æ”¾åˆ°Cacheä¸­ã€‚\n\n#### 1.4.1.1æ€§èƒ½åˆ†æ\n\n$$\nè®¾t_cä¸ºè®¿é—®ä¸€æ¬¡Cacheæ‰€éœ€æ—¶é—´ï¼Œt_mä¸ºè®¿é—®ä¸€æ¬¡ä¸»å­˜é”éœ€è¦çš„æ—¶é—´\\\\\nå‘½ä¸­ç‡Hï¼šCPUè®¿é—®çš„ä¿¡æ¯å·²åœ¨Cacheä¸­çš„æ¦‚ç‡\\\\\nç¼ºå¤±ç‡M=1-H\\\\\nç³»ç»Ÿçš„å¹³å‡è®¿é—®æ—¶é—´tä¸º:\\\\\nt=Ht_c+(1-H)(t_c+t_m)\n$$\n\nä¸Šè¿°ä¾‹å­CPUä¼šä¼˜å…ˆè®¿é—®Cacheï¼Œè‹¥Cache missed(æœªå‘½ä¸­)å†è®¿é—®ä¸»å­˜\n\nè¿˜å­˜åœ¨ä¸€ç§CPU<font color=red>åŒæ—¶è®¿é—®</font>Cacheå’Œä¸»å­˜ï¼Œè‹¥Cacheå‘½ä¸­åˆ™ç«‹å³åœæ­¢è®¿é—®ä¸»å­˜çš„æ–¹å¼\n$$\nt=Ht_c+(1-H)t_m\\\\\n$$\n\n#### 1.4.1.2æ•°æ®äº¤æ¢\n\nå°†ä¸»å­˜çš„å­˜å‚¨ç©ºé—´è¿›è¡Œ\"åˆ†å—\"ï¼Œå¦‚ï¼šæ¯1KBä¸ºä¸€å—ï¼Œä¸»å­˜å’ŒCacheä¹‹é—´ä»¥\"<font color=green>å—</font>\"ä¸ºå•ä½è¿›è¡Œæ•°æ®äº¤æ¢\n\n![image-20240229113716226](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229113716226.png)\n\næ³¨æ„ï¼šæ¯æ¬¡è¢«è®¿é—®çš„ä¸»å­˜å—ï¼Œä¸€å®šä¼šè¢«ç«‹å³è°ƒå…¥Cache\n\n#### 1.4.1.3Cacheå’Œä¸»å­˜çš„æ˜ å°„æ–¹å¼\n\n**(1)å…¨ç›¸è”æ˜ å°„(éšæ„æ”¾)**\n\næ ‡è®°ï¼šè®°å½•ä¸»å­˜å—çš„ç´¢å¼•\n\n![image-20240229122754368](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229122754368.png)\n$$\nå‡è®¾æŸä¸ªè®¡ç®—æœºå†…å­˜åœ°å€ç©ºé—´å¤§å°ä¸º256MBï¼ŒæŒ‰å­—èŠ‚ç¼–å€ï¼Œå…¶æ•°æ®Cacheæœ‰8ä¸ªCacheè¡Œ(å³Cacheå—)ï¼Œè¡Œé•¿ä¸º64B\\\\\n256MB=2^{28}B\\\\\né»˜è®¤ä¸€ä¸ªå­˜å‚¨å•å…ƒä¸º1å­—èŠ‚(1B)å› æ­¤æœ‰2^{28}ä¸ªåœ°å€\\\\\nå› æ­¤ï¼Œå—å†…åœ°å€ä¸º6ä½ï¼Œä¸»å­˜å—å·æœ‰22ä½\n$$\nè®¿å­˜è¿‡ç¨‹ï¼š\n\nâ‘ ä¸»å­˜åœ°å€çš„å‰22ä½å¯¹æ¯”Cacheä¸­æ‰€æœ‰å—çš„æ ‡è®°\n\nâ‘¡è‹¥æ ‡è®°åŒ¹é…ä¸”æœ‰æ•ˆä½ä¸º1ï¼Œåˆ™Cacheå‘½ä¸­ï¼Œè®¿é—®å—å†…åœ°å€å•å…ƒ\n\nâ‘¢è‹¥æœªå‘½ä¸­åˆ™æ­£å¸¸è¿›è¡Œè®¿é—®ä¸»å­˜\n\n**(2)ç›´æ¥æ˜ å°„**\n\næ¯ä¸ªä¸»å­˜å—åªèƒ½æ”¾åˆ°ä¸€ä¸ªç‰¹å®šçš„ä½ç½®ï¼š\n$$\nCacheå—å·=ä¸»å­˜å—å·\\%Cacheæ€»å—æ•°\n$$\n![image-20240229123419792](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229123419792.png)\n\n**(3)ç»„ç›¸è”æ˜ å°„**\n\nCacheå—æ°›å›´è‹¥å¹²ç»„ï¼Œæ¯ä¸ªä¸»å­˜å—å¯ä»¥å­˜æ”¾åˆ°ç‰¹å®šåˆ†ç»„çš„ä»»æ„ä¸€ä¸ªä½ç½®\n$$\nç»„å·=ä¸»å­˜å—å·\\%åˆ†ç»„æ•°\n$$\n![image-20240229123614460](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229123614460.png)\n\n\n\n### 1.4.2 æ›¿æ¢ç®—æ³•\n\n#### 1.4.2.1éšæœºç®—æ³•(RAND)\n\nè‹¥Cacheå·²æ»¡ï¼Œåˆ™éšæœºé€‰æ‹©ä¸€å—è¿›è¡Œæ›¿æ¢\n\n![image-20240229125852091](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229125852091.png)\n\néšæœºç®—æ³•å®ç°ç®€å•ï¼Œä½†æ˜¯æ²¡è€ƒè™‘å±€éƒ¨æ€§ï¼Œå‘½ä¸­ç‡ä½ï¼Œå®é™…æ•ˆæœå¾ˆä¸ç¨³å®š\n\n#### 1.4.2.2å…ˆè¿›å…ˆå‡ºç®—æ³•(FIFO)\n\nè‹¥Cacheå·²æ»¡ï¼Œåˆ™æ›¿æ¢æœ€å…ˆè¢«è°ƒå…¥çš„Cacheå—\n\n![image-20240229130033994](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229130033994.png)\n\nå®ç°ç®€å•ï¼Œä½†ä¾ç„¶æ²¡æœ‰è€ƒè™‘å±€éƒ¨æ€§ï¼Œæœ€å…ˆè¢«è°ƒå…¥Cacheçš„å—ä¹Ÿæœ‰å¯èƒ½æ˜¯è¢«é¢‘ç¹è®¿é—®çš„\n\n#### 1.4.2.3è¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•(LRU,Least Recently Used)\n\nä¸ºæ¯ä¸€ä¸ªCacheå—è®¾ç½®ä¸€ä¸ª\"è®¡æ•°å™¨\"ï¼Œç”¨äºè®°å½•æ¯ä¸ªå—å·²ç»å¤šä¹…æ²¡æœ‰è¢«è®¿é—®ï¼Œå½“Cacheæ»¡åæ›¿æ¢\"è®¡æ•°å™¨\"æœ€å¤§çš„\n\n![image-20240229130404308](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229130404308.png)\n\n- å‘½ä¸­æ—¶ï¼Œæ‰€å‘½ä¸­çš„å—çš„è®¡æ•°å™¨è¦<font color=red>æ¸…é›¶</font>ï¼Œå…¶ä½™ä¸å˜\n- æœªå‘½ä¸­ä¸”è¿˜æœ‰ç©ºé—²å—æ—¶å€™ï¼Œæ–°è£…å…¥çš„å—çš„è®¡æ•°å™¨<font color=red>ç½®é›¶</font>ï¼Œå…¶ä½™éç©ºé—²å—å…¨åŠ 1\n- æœªå‘½ä¸­ä¸”æ— ç©ºé—²å—æ—¶ï¼Œè®¡æ•°å€¼æœ€å¤§çš„å—è¢«æ·˜æ±°ï¼Œæ–°è£…å…¥çš„å—çš„è®¡æ•°å™¨ç½®é›¶ï¼Œå…¶ä½™åŠ 1\n\n#### 1.4.2.4æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•(LFU,Least Frequently Used)\n\nä¸ºæ¯ä¸€ä¸ªCacheå—è®¾ç½®ä¸€ä¸ª\"è®¡æ•°å™¨\"ï¼Œç”¨äºè®°å½•æ¯ä¸ªCacheå—è¢«è®¿é—®äº†å‡ æ¬¡ï¼Œå½“Cacheæ»¡åæ›¿æ¢\"è®¡æ•°å™¨\"æœ€å°çš„\n\nPSï¼šè‹¥æœ‰å¤šä¸ªæœ€å°çš„å—ï¼Œå¯æŒ‰è¡Œå·é€’å¢æˆ–FIFOç­–ç•¥è¿›è¡Œæ›¿æ¢\n\n![image-20240229131139169](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229131139169.png)\n\n### 1.4.3 Cacheå†™ç­–ç•¥(æ•°æ®ä¸€è‡´æ€§)\n\n#### 1.4.3.1å†™å‘½ä¸­\n\n(**1)å†™å›æ³•**\n\n![image-20240229132354989](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229132354989.png)\n\n**(2)å…¨å†™æ³•**\n\n![image-20240229132301833](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229132301833-1709184184141-1.png)\n\nä½¿ç”¨å†™ç¼“å†²ï¼ŒCPUçš„å†™é€Ÿåº¦å¾ˆå¿«ï¼Œè‹¥å†™æ“ä½œå¾ˆé¢‘ç¹ï¼Œå¯èƒ½å›å› ä¸ºå†™ç¼“å†²é¥±å’Œè€Œå‘ç”Ÿé˜»å¡ï¼Œæ­¤æ—¶CPUå°±è¦ç­‰å¾…ã€‚\n\n#### 1.4.3.2å†™ä¸å‘½ä¸­\n\n**ï¼ˆ1ï¼‰å†™åˆ†é…æ³•(write-allocate)**\n\nå½“CPUå¯¹Cacheå†™ä¸å‘½ä¸­æ—¶ï¼ŒæŠŠä¸»å­˜çš„å—è°ƒå…¥Cacheï¼Œå†åœ¨Cacheä¸­ä¿®æ”¹ï¼Œæœ€åé‡‡ç”¨<font color=red>å†™å›æ³•</font>\n\n**ï¼ˆ2ï¼‰éå†™åˆ†é…æ³•**\n\nå½“CPUå¯¹Cacheå†™ä¸å‘½ä¸­æ—¶ï¼Œåªå†™å…¥ä¸»å­˜ï¼Œä¸è°ƒå…¥Cacheï¼Œæ­é…<font color=red>å…¨å†™æ³•</font>ä½¿ç”¨\n\n## 1.5é¡µå¼å­˜å‚¨å™¨\n\nä¸€ä¸ªç¨‹åº(è¿›ç¨‹)åœ¨é€»è¾‘ä¸Šè¢«åˆ†ä¸ºè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„\"é¡µé¢\"ï¼Œ\"é¡µé¢\"å¤§å°ä¸\"å—\"çš„å¤§å°ç›¸ç­‰ï¼Œæ¯ä¸ªé¡µé¢å¯ä»¥ç¦»æ•£çš„æ”¾åœ¨ä¸åŒçš„ä¸»å­˜å—ä¸­ã€‚\n\nèƒŒæ™¯è§£æï¼šå¦‚æœä¸è¿™æ ·åšï¼Œå°±éœ€è¦åœ¨ä¸»å­˜ä¸­å¯»æ‰¾åˆ°è¿ç»­çš„ç©ºé—´ï¼Œå¯¼è‡´ä¸»å­˜åˆ©ç”¨ç‡ä¸é«˜ã€‚\n\n### 1.5.1åœ°å€å˜æ¢æ–¹å¼\n\n![image-20240229134940178](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229134940178.png)\n\n### 1.5.2å¼•å…¥å¿«è¡¨(TLB)çš„å˜æ¢\n\n![image-20240229135553300](è®¡ç®—æœºç»„æˆåŸç†äºŒ/image-20240229135553300.png)\n\n","tags":["è®¡ç®—æœºåŸºç¡€"]},{"title":"hexoåšå®¢æ–‡ç« åŠ å¯†","url":"/2024/01/29/hexoåšå®¢æ–‡ç« åŠ å¯†/","content":"\né™æ€åšå®¢åŠ å¯†æ’ä»¶ï¼š[hexo-blog-encrypt](https://www.npmjs.com/package/hexo-blog-encrypt)ï¼Œæ­é…æ­¤æ’ä»¶ä½ å¯ä»¥å†™ä¸€äº›ç§å¯†åšå®¢ï¼Œé€šè¿‡å¯†ç éªŒè¯çš„æ–¹å¼è®©äººä¸èƒ½éšæ„æµè§ˆã€‚\n\n### å®‰è£…ï¼š\n\n```shell\nnpm install hexo-blog-encrtpt\n```\n\n### ç”¨æ³•ï¼š\n\næ–‡ç« å¤´æ·»åŠ å…³é”®å­—<font color=red>password</font>å³å¯è®¾ç½®æ–‡ç« è®¿é—®å¯†ç \n\n```c\n---\ntitle: Hello World\ndate: 2016-03-30 21:18:02\npassword: hello\n---\n```\n\né«˜çº§ç”¨æ³•ï¼š\n\n```c\n---\ntitle: Hello World\ndate: 2016-03-30 21:12:21\npassword: hello\nabstract: Here's something encrypted, password is required to continue reading.\nmessage: Hey, password is required here.\nwrong_pass_message: Oh, this is an invalid password. Check and try again, please.\n---\n```\n\n- `abstract`ï¼šç”¨äºè®¾ç½®åŠ å¯†æ–‡ç« æ˜¾ç¤ºçš„æ‘˜è¦ã€‚\n- `message`ï¼šè¾“å…¥å¯†ç æç¤ºã€‚\n- `wrong_pass_message`: è¾“å…¥é”™è¯¯æç¤ºã€‚\n","tags":["hexo"]},{"title":"HPCGameè®°å½•","url":"/2024/01/23/HPCGameè®°å½•/","content":"\nå‰è¨€ï¼šå‚åŠ å®ŒASCï¼Œå›å®¶ä¸¤å¤©ï¼Œçœ‹åˆ°HPCGameå¼€èµ›å¿ƒç—’ç—’\n\n## A.æ¬¢è¿å‚èµ›ï¼\n\nè¿™ä¸ªé¢˜å°±æ˜¯ä»‹ç»ä¸€ä¸‹æ¯”èµ›çš„ç›¸å…³å†…å®¹ï¼Œç›´æ¥æäº¤åå°±ä¼šè¿”å›æä¾›çš„é›†ç¾¤è´¦å·å¯†ç \n\n## B.æµé‡å¸­å·åœŸè±†\n\n  [æµé‡å¸­å·åœŸè±†.mhtml](æµé‡å¸­å·åœŸè±†.mhtml) \n\nè¿™ä¸ªé¢˜æŒºæœ‰æ„æ€çš„ï¼Œåˆšå¼€å§‹çœ‹åˆ°é¢˜çš„æ—¶å€™è¯´å®è¯æˆ‘äººæœ‰ç‚¹æ…Œäº†(å¥½å¤šå­—)å†·é™ä¸‹æ¥è®¤çœŸè¯»é¢˜åå‘ç°ï¼Œå°±æ˜¯ä¸€ä¸ªä½œä¸šæäº¤å’Œè½¯ä»¶ä½¿ç”¨è€Œå·²ã€‚\n\n**è§£é¢˜æ­¥éª¤å¦‚ä¸‹ï¼š**\n\n1ã€srunæäº¤å‘½ä»¤æå– SSH æµé‡ï¼š\n\nï¼ˆèµ›é¢˜ä¸­æä¾›çš„è·¯å¾„æœ‰é—®é¢˜ï¼Œæ‰¾äº†ä¸€ä¸‹è¿˜æœ‰ä¸€å±‚å­ç›®å½•pcapsï¼‰\n\n```\nsrun -p C064M0256G -N4 --ntasks-per-node=4 bash -c 'tshark -r /lustre/shared_data/potato_kingdom_univ_trad_cluster/pcaps/$SLURM_PROCID.pcap -Y ssh -w $SLURM_PROCID.ssh.pcap'\n```\n\nå½“å‰è·¯å¾„å°±ä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶\n\n![image-20240123134122253](HPCGameè®°å½•/image-20240123134122253.png)\n\n2ã€åˆå¹¶ PCAP æ–‡ä»¶ï¼š\n\n```\nmergecap -w merged.pcap *.ssh.pcap\n```\n\n![image-20240123134322241](HPCGameè®°å½•/image-20240123134322241.png)\n\n3ã€ç ´è§£å¯†ç ï¼š\n\n```\nquantum-cracker merged.pcap\n```\n\n![image-20240123134517990](HPCGameè®°å½•/image-20240123134517990.png)\n\n4ã€è·å– Slurm JobID\n\n```\nsacct -u $(whoami) --format JobID | tail\n```\n\n![image-20240123134612339](HPCGameè®°å½•/image-20240123134612339.png)\n\nå–æœ€åä¸€ä¸ªçš„æ•´æ•°ï¼Œæäº¤å³å¯ã€‚\n\n## C.ç®€å•çš„ç¼–è¯‘\n\n [ç®€å•ç¼–è¯‘.mhtml](ç®€å•ç¼–è¯‘.mhtml) \n\nè¿™é“é¢˜å°±æ˜¯å†™Makefileå’ŒCMakeLists.txt\n\n```\nåœ¨æœ¬é¢˜ä¸­ï¼Œä½ éœ€è¦å†™ä¸€ä¸ªç®€å•çš„Makefileæ–‡ä»¶ï¼Œå’Œä¸€ä¸ªç®€å•çš„CMakeLists.txtæ–‡ä»¶ï¼Œæ¥ç¼–è¯‘ Handout ä¸­æ‰€æä¾›çš„ä¸‰ä¸ªç®€å•ç¨‹åºã€‚\n\nå…¶ä¸­ï¼Œhello_cuda.cuæ˜¯ä¸€ä¸ªç®€å•çš„cudaç¨‹åºï¼Œhello_mpi.cppæ˜¯ä¸€ä¸ªç®€å•çš„mpiç¨‹åºï¼Œhello_omp.cppæ˜¯ä¸€ä¸ªç®€å•çš„ OpenMP ç¨‹åºã€‚å®ƒä»¬éƒ½åšäº†åŒä¸€ä¸ªç®€å•çš„äº‹æƒ…ï¼šä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªå‘é‡å¹¶æ±‚å’Œã€‚\n\nä½ éœ€è¦ä¸Šä¼ Makefileå’ŒCMakeLists.txtæ–‡ä»¶ã€‚æˆ‘ä»¬ä¼šæ ¹æ®ä»¥ä¸‹ç­–ç•¥æ¥è¯„æµ‹ä½ æ‰€å†™çš„é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§ã€‚\n\nå¯¹äºMakefileæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œmakeå‘½ä»¤ã€‚ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ£€æŸ¥ç¨‹åºæ˜¯å¦è¢«ç”Ÿæˆï¼Œå¹¶è¿è¡Œä»¥æ£€æµ‹æ­£ç¡®æ€§ã€‚\nå¯¹äºCMakeLists.txtæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œmkdir build; cd build; cmake ..; makeã€‚ç„¶åæˆ‘ä»¬ä¼šåœ¨buildç›®å½•ä¸‹æ£€æŸ¥ç¨‹åºæ˜¯å¦è¢«æ­£ç¡®ç”Ÿæˆï¼Œå¹¶è¿è¡Œä»¥æ£€æµ‹æ­£ç¡®æ€§ã€‚\nå¯¹äºæ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼Œhello_cuda.cuæ‰€ç¼–è¯‘å‡ºçš„æ–‡ä»¶ååº”ä¸ºhello_cudaï¼›hello_mpi.cppæ‰€ç¼–è¯‘å‡ºçš„æ–‡ä»¶ååº”ä¸ºhello_mpiï¼›hello_omp.cppæ‰€ç¼–è¯‘å‡ºçš„æ–‡ä»¶ååº”ä¸ºhello_ompã€‚\n```\n\né›†ç¾¤GPUèŠ‚ç‚¹è¿ä¸ä¸Šï¼Œç”¨è®°äº‹æ¿æ‰‹æ“äº†ä¸€ä¸‹ï¼Œæäº¤ä¸Šå»Makefileä¸€ç›´æŠ¥é”™ï¼Œ\n\næŸ¥äº†ä¸€ä¸‹æ˜¯tabç¼©è¿›çš„é—®é¢˜ï¼Œåæ¥åœ¨ç»ˆç«¯é‡Œé¢ç”¨vimç¼–å†™ï¼Œå¤åˆ¶ï¼Œå®Œç¾è§£å†³\n\nï¼ˆé•¿è®°æ€§äº†ï¼Œç”¨vimæ¥ç¼–è¾‘æ‰èƒ½æ­£å¸¸è¯†åˆ«tabï¼‰\n\n```makefile\n.PHONY: all clean\n\nall: hello_cuda hello_mpi hello_omp\n\nhello_cuda: hello_cuda.cu\n\tnvcc -o hello_cuda hello_cuda.cu\n\nhello_mpi: hello_mpi.cpp\n\tmpic++ -o hello_mpi hello_mpi.cpp\n\nhello_omp: hello_omp.cpp\n\tg++ -fopenmp -o hello_omp hello_omp.cpp\n\nclean:\n\trm -f hello_cuda hello_mpi hello_omp\n```\n\n```cmake\ncmake_minimum_required(VERSION 3.10)\nproject(test)\n\nenable_language(CUDA)\nadd_executable(hello_cuda hello_cuda.cu)\n\nfind_package(MPI REQUIRED)\nadd_executable(hello_mpi hello_mpi.cpp)\ntarget_link_libraries(hello_mpi MPI::MPI_CXX)\n\nfind_package(OpenMP REQUIRED)\nadd_executable(hello_omp hello_omp.cpp)\ntarget_link_libraries(hello_omp OpenMP::OpenMP_CXX)\n```\n\n## D.å°åŒ—é—®ç­” Classic\n\n [å°åŒ—é—®ç­” Classic.mhtml](å°åŒ—é—®ç­”.mhtml) \n\n![image-20240123135107256](HPCGameè®°å½•/image-20240123135107256.png)\n\n```\nç­”æ¡ˆï¼š{\"t1\":\"65.396\",\"t2.1\":\"105.26\",\"t2.2\":\"107.14\",\"t3\":\"iv. GCC\",\"t4.1\":\"ii. è¿›ç¨‹\",\"t4.2\":\"i. çº¿ç¨‹\",\"t4.3\":\"i. çº¿ç¨‹\",\"t5.1\":\"8\",\"t5.2\":\"i. åœ¨ CPU ä¸­è®¾è®¡ç‹¬ç«‹çš„ AVX512 è¿ç®—å•å…ƒï¼Œä½†æœ‰å¯èƒ½å¯¼è‡´è°ƒç”¨ AVX512 æŒ‡ä»¤é›†æ—¶å› åŠŸè€—è¿‡å¤§è€Œé™é¢‘\",\"t5.3\":\"ii. å¤ç”¨ä¸¤ä¸ª AVX2 è¿ç®—å•å…ƒæ‰§è¡Œ AVX512 è¿ç®—\",\"t6\":\"iv. OpenGL\",\"t8\":\"iv. PCIe\",\"t9\":\"ii. Slurm\",\"t10\":\"i. ç¼“å­˜æœªå‘½ä¸­\",\"t7\":\"iii,iv\"}\n```\n\n## E.é½å¿ƒååŠ›\n\n [é½å¿ƒååŠ›.mhtml](é½å¿ƒååŠ›.mhtml) \n\nè¿™é“é¢˜å¡äº†ä¸¤å¤©ï¼ŒRayé›†ç¾¤è€æ˜¯å‡ºé”™ï¼Œåæ¥å¶ç„¶äº¤äº†ä¸€å‘è¿‡äº†\n\nåæ¥å‘ç°æç¤ºé‡Œæœ‰æ”¾ç½®ç»„çš„æ¦‚å¿µï¼Œå­¦ä¹ äº†ä¸€ä¸‹ï¼Œæ”¹äº†ä¸€ä¸‹ä»£ç ï¼Œ111.6/120åˆ†ï¼Œæ»¡è¶³äº†\n\n```python\nimport ray\nimport numpy as np\nimport os\n\n@ray.remote(num_cpus=1)\nclass Counter:\n    def __init__(self, flag_index):\n        self.weight_matrix = np.load(f\"weights/weight_{flag_index}.npy\")\n    \n    def process(self, input_matrix):\n        return np.maximum(0, np.dot(input_matrix, self.weight_matrix))\n\nif __name__ == \"__main__\":\n    ray.init(address=os.environ['RAY_CLUSTER_ADDR'])\n\n    # åˆ›å»ºæ”¾ç½®ç»„ï¼Œæ¯ç»„æœ‰ 4 ä¸ª CPU\n    placement_groups = [ray.util.placement_group([{\"CPU\": 4}], strategy=\"STRICT_PACK\") for _ in range(4)]\n    ray.get([pg.ready() for pg in placement_groups])  # ç­‰å¾…æ”¾ç½®ç»„å°±ç»ª\n\n    if not os.path.exists(\"outputs\"):\n        os.makedirs(\"outputs\")\n\n    # åœ¨æ¯ä¸ªæ”¾ç½®ç»„ä¸­åˆ›å»º Counter å®ä¾‹\n    counters = [[Counter.options(placement_group=placement_groups[i], placement_group_bundle_index=0).remote(j) for j in range(4)] for i in range(4)]\n\n    output_results = []\n    for i in range(100):\n        input_matrix = np.load(f\"inputs/input_{i}.npy\")\n        result = input_matrix\n        for counter in counters[i % 4]:\n            result = counter.process.remote(result)\n        output_results.append(result)\n\n    # æ”¶é›†å’Œä¿å­˜ç»“æœ\n    for i, result in enumerate(output_results):\n        output = ray.get(result)\n        np.save(f\"outputs/output_{i}.npy\", output)\n```\n\n\n\n## F.é«˜æ€§èƒ½æ•°æ®æ ¡éªŒ\n\n [é«˜æ€§èƒ½æ•°æ®æ ¡éªŒ.mhtml](é«˜æ€§èƒ½æ•°æ®æ ¡éªŒ.mhtml) \n\nè¿™é“é¢˜ä¸€å¼€å§‹éšä¾¿å¼€äº†ä¸ªMPIç«Ÿç„¶å°±æœ‰80å¤šåˆ†ï¼Œè€Œä¸”æˆ‘é¢˜éƒ½æ²¡è®¤çœŸçœ‹ï¼Œåæ¥éšä¾¿æ”¹æ”¹å¡åˆ°äº†90ï¼ˆæ²¡é”™ï¼Œæ˜¯å¡bugåˆ°äº†90ï¼‰é¢˜ç›®é‡æµ‹åç›´æ¥å›å½’0åˆ†ï¼Œç€æ€¥ï¼\n\nä»”ç»†è¯»äº†ä¸€ä¸‹é¢˜ï¼Œçœ‹åˆ°æå‡é‡Œçš„SHA512å‡½æ•°ï¼Œå°±æƒ³ç€ç”¨SHA512æ›¿æ¢åŸæ¥çš„ä¸€å †å‡½æ•°ï¼ˆæ²¡æœ‰è®¤çœŸå»çœ‹é‚£å‡ ä¸ªå‡½æ•°ï¼‰ï¼Œç„¶åå°±é™·å…¥äº†æ­»å¾ªç¯é‡Œï¼ŒSHA512æ²¡æ³•è¿›è¡Œå¹¶è¡Œè®¡ç®—ï¼Œç¬¬iä¸ªå—çš„è®¡ç®—ä¾èµ–äºç¬¬i-1ä¸ªã€‚\n\nåæ¥å¶ç„¶çš„ä»”ç»†çœ‹äº†ä¸€ä¸‹ä»£ç ï¼Œå‘baselineä»£ç ä¸­çš„å‡½æ•°å®Œå…¨è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥æ‹†å¼€åšï¼Œåªéœ€è¦ç”¨æ›´å¤šçš„æ•°ç»„æ¥è®°å½•ä¸€ä¸‹å°±è¡Œäº†![image-20240125213452456](HPCGameè®°å½•/image-20240125213452456.png)\n\nä¿®æ”¹äº†ä¸€ä¸‹ä»£ç ï¼š\n\n```cpp\nvoid checksum(uint8_t *data, size_t len, uint8_t *obuf) {\n  int num_block = (len + BLOCK_SIZE - 1) / BLOCK_SIZE;\n  \n  EVP_MD *sha512 = EVP_MD_fetch(nullptr, \"SHA512\", nullptr);\n  EVP_MD_CTX *ctx[num_block];\n  for(int i=0; i<num_block; i++)//å¤šåˆ›å»ºä¸€ç‚¹ctxè®©è®°å½•æ•°æ®å’Œæ ¡éªŒä½åˆ†å¼€è®¡ç®—\n  {\n    ctx[i]=EVP_MD_CTX_new();\n    EVP_DigestInit_ex(ctx[i], sha512, nullptr);\n  }\n  uint8_t prev_md[SHA512_DIGEST_LENGTH];\n  SHA512(nullptr, 0, prev_md);\n  for (int i = 0; i < num_block; i++) {\n    uint8_t buffer[BLOCK_SIZE]{};\n    EVP_DigestInit_ex(ctx[i], sha512, nullptr);\n    std::memcpy(buffer, data + i * BLOCK_SIZE, std::min(BLOCK_SIZE, len - i * BLOCK_SIZE));\n    EVP_DigestUpdate(ctx[i], buffer, BLOCK_SIZE);\n  }\n  for(int i=0;i<num_block;i++)\n  {\n    EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n    unsigned int len = 0;\n    EVP_DigestFinal_ex(ctx[i], prev_md, &len);\n    EVP_MD_CTX_free(ctx[i]);\n  }\n  std::memcpy(obuf, prev_md, SHA512_DIGEST_LENGTH);\n  EVP_MD_free(sha512);\n}\n```\n\nå°±è¿™ä¸€æ”¹ï¼Œrunäº†ä¸€ä¸‹ï¼Œæˆäº†ï¼æ€è·¯æ­£ç¡®ï¼æµ‹è¯•äº†ä¸€ä¸‹å‡ ä¸ªforå¾ªç¯çš„è€—æ—¶ï¼Œä¸­é—´æ•°æ®å¤„ç†çš„å¾ªç¯å æ¯”æœ€é«˜![image-20240125213808760](HPCGameè®°å½•/image-20240125213808760.png)\n\né‚£å°±æ²¡é—®é¢˜äº†ï¼Œå¼€å§‹ä¿®æ”¹MPIå¹¶è¡Œç¨‹åºï¼š\n\n```cpp\n#include <algorithm>\n#include <chrono>\n#include <cstring>\n#include <filesystem>\n#include <fstream>\n#include <iostream>\n#include <mpi.h>\n#include <openssl/evp.h>\n#include <openssl/sha.h>\n\nnamespace fs = std::filesystem;\n\nconstexpr size_t BLOCK_SIZE = 1024 * 1024;\n\nvoid print_checksum(std::ostream &os, uint8_t *md, size_t len);\n\nint main(int argc, char *argv[]) {\n\n  MPI_Init(&argc, &argv);\n\n  int rank, nprocs;\n  MPI_Comm_rank(MPI_COMM_WORLD, &rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &nprocs);\n\n  if (rank == 0) {\n    if (argc < 3) {\n      std::cout << \"Usage: \" << argv[0] << \" <input_file> <output_file>\"\n                << std::endl;\n      MPI_Abort(MPI_COMM_WORLD, 1);\n    }\n  }\n    fs::path input_path = argv[1];\n    fs::path output_path = argv[2];\n\n    auto total_begin_time = std::chrono::high_resolution_clock::now();\n\n    auto file_size = fs::file_size(input_path);\n    std::cout << input_path << \" size: \" << file_size << std::endl;\n    int num_block = (file_size + BLOCK_SIZE - 1) / BLOCK_SIZE;\n    int proc_num_block = num_block / 8;\n    auto len = file_size / 8;\n    uint8_t *buffer = nullptr;\n    if (file_size != 0) {\n      buffer = new uint8_t[len];\n      std::ifstream istrm(input_path, std::ios::binary);\n      istrm.seekg(rank*len);\n      istrm.read(reinterpret_cast<char *>(buffer), len);\n    }\n\n    auto begin_time = std::chrono::high_resolution_clock::now();\n    \n    EVP_MD *sha512 = EVP_MD_fetch(nullptr, \"SHA512\", nullptr);\n    EVP_MD_CTX *ctx[proc_num_block];\n    for(int i=0; i<proc_num_block; i++)\n    {\n      ctx[i]=EVP_MD_CTX_new();\n      EVP_DigestInit_ex(ctx[i], sha512, nullptr);\n    }\n\n    uint8_t prev_md[SHA512_DIGEST_LENGTH];\n    \n    for (int i = 0; i < proc_num_block; i++) {\n      uint8_t buffer_temp[BLOCK_SIZE]{};\n      std::memcpy(buffer_temp, buffer + i * BLOCK_SIZE, std::min(BLOCK_SIZE, len - i * BLOCK_SIZE));\n      EVP_DigestUpdate(ctx[i], buffer_temp, BLOCK_SIZE);\n    }\n    delete[] buffer;\n\n    if(rank==0){\n      SHA512(nullptr, 0, prev_md);\n      for(int i=0;i<proc_num_block;i++)\n      {\n        EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n        unsigned int len_ex = 0;\n        EVP_DigestFinal_ex(ctx[i], prev_md, &len_ex);\n        EVP_MD_CTX_free(ctx[i]);\n      }\n      MPI_Send(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, 1, 0, MPI_COMM_WORLD);\n    }else if(rank>0 && rank<7)\n    {\n      MPI_Recv(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, rank - 1, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n      for(int i=0;i<proc_num_block;i++)\n      {\n        EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n        unsigned int len_ex = 0;\n        EVP_DigestFinal_ex(ctx[i], prev_md, &len_ex);\n        EVP_MD_CTX_free(ctx[i]);\n      }\n      MPI_Send(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, rank + 1, 0, MPI_COMM_WORLD);      \n    }else if(rank==7){\n      MPI_Recv(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, rank - 1, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n      for(int i=0;i<proc_num_block;i++)\n      {\n        EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n        unsigned int len_ex = 0;\n        EVP_DigestFinal_ex(ctx[i], prev_md, &len_ex);\n        EVP_MD_CTX_free(ctx[i]);\n      }\n    }\n\n    EVP_MD_free(sha512);\n  \n  if(rank==7)\n  {\n    auto end_time = std::chrono::high_resolution_clock::now();\n\n    // print debug information\n    std::cout << \"checksum: \";\n    print_checksum(std::cout, prev_md, SHA512_DIGEST_LENGTH);\n    std::cout << std::endl;\n\n    auto duration = std::chrono::duration_cast<std::chrono::milliseconds>(\n        end_time - begin_time);\n\n    std::cout << \"checksum time cost: \" << std::dec << duration.count() << \"ms\"\n              << std::endl;\n\n    // write checksum to output file\n    std::ofstream output_file(output_path);\n\n    print_checksum(output_file, prev_md, SHA512_DIGEST_LENGTH);\n  \n    auto total_end_time = std::chrono::high_resolution_clock::now();\n\n    auto total_duration = std::chrono::duration_cast<std::chrono::milliseconds>(\n        total_end_time - total_begin_time);\n\n    std::cout << \"total time cost: \" << total_duration.count() << \"ms\"\n              << std::endl;\n  \n  }\n\n  MPI_Finalize();\n  return 0;\n}\n\nvoid print_checksum(std::ostream &os, uint8_t *md, size_t len) {\n  for (int i = 0; i < len; i++) {\n    os << std::setw(2) << std::setfill('0') << std::hex\n       << static_cast<int>(md[i]);\n  }\n}\n```\n\næ•ˆæœä¸ç®—ç‰¹åˆ«å¥½ï¼Œ90/120åˆ†ï¼Œæ£€æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°è¯»å–å ç”¨æ—¶é—´å¤ªé•¿ï¼Œ\n\nå¶ç„¶æƒ³åˆ°å¯ä»¥ä¸ç”¨ä¸€æ¬¡æ€§è¯»å…¥å…¨éƒ¨æ•°æ®ï¼Œè®©IOå’ŒCPUå½¢æˆæµæ°´çº¿å³å¯\n\n```c\n#include <algorithm>\n#include <chrono>\n#include <cstring>\n#include <filesystem>\n#include <fstream>\n#include <iostream>\n#include <mpi.h>\n#include <openssl/evp.h>\n#include <openssl/sha.h>\n\nnamespace fs = std::filesystem;\n\nconstexpr size_t BLOCK_SIZE = 1024 * 1024;\n\nvoid print_checksum(std::ostream &os, uint8_t *md, size_t len);\n\nint main(int argc, char *argv[]) {\n\n  MPI_Init(&argc, &argv);\n\n  int rank, nprocs;\n  MPI_Comm_rank(MPI_COMM_WORLD, &rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &nprocs);\n\n  if (rank == 0) {\n    if (argc < 3) {\n      std::cout << \"Usage: \" << argv[0] << \" <input_file> <output_file>\"\n                << std::endl;\n      MPI_Abort(MPI_COMM_WORLD, 1);\n    }\n  }\n    fs::path input_path = argv[1];\n    fs::path output_path = argv[2];\n\n    auto total_begin_time = std::chrono::high_resolution_clock::now();\n\n    auto file_size = fs::file_size(input_path);\n    std::cout << input_path << \" size: \" << file_size << std::endl;\n    int num_block = (file_size + BLOCK_SIZE - 1) / BLOCK_SIZE;\n    int proc_num_block = num_block / 8;\n    auto len = file_size / 8;\n\n    auto begin_time = std::chrono::high_resolution_clock::now();\n    \n    EVP_MD *sha512 = EVP_MD_fetch(nullptr, \"SHA512\", nullptr);\n    EVP_MD_CTX *ctx[proc_num_block];\n    for(int i=0; i<proc_num_block; i++)\n    {\n      ctx[i]=EVP_MD_CTX_new();\n      EVP_DigestInit_ex(ctx[i], sha512, nullptr);\n    }\n\n    uint8_t prev_md[SHA512_DIGEST_LENGTH];\n    std::ifstream istrm(input_path, std::ios::binary);\n    uint8_t buffer_temp[BLOCK_SIZE];\n    for (int i = 0; i < proc_num_block; i++) {\n      istrm.seekg(rank*len + i*BLOCK_SIZE);\n      istrm.read(reinterpret_cast<char *>(buffer_temp),BLOCK_SIZE);\n        //IOå’ŒCPUæµæ°´çº¿\n      EVP_DigestUpdate(ctx[i], buffer_temp, BLOCK_SIZE);\n    }\n\n    if(rank==0){\n      SHA512(nullptr, 0, prev_md);\n      for(int i=0;i<proc_num_block;i++)\n      {\n        EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n        unsigned int len_ex = 0;\n        EVP_DigestFinal_ex(ctx[i], prev_md, &len_ex);\n        EVP_MD_CTX_free(ctx[i]);\n      }\n      MPI_Send(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, 1, 0, MPI_COMM_WORLD);\n    }else if(rank>0 && rank<7)\n    {\n      MPI_Recv(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, rank - 1, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n      for(int i=0;i<proc_num_block;i++)\n      {\n        EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n        unsigned int len_ex = 0;\n        EVP_DigestFinal_ex(ctx[i], prev_md, &len_ex);\n        EVP_MD_CTX_free(ctx[i]);\n      }\n      MPI_Send(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, rank + 1, 0, MPI_COMM_WORLD);      \n    }else if(rank==7){\n      MPI_Recv(prev_md, SHA512_DIGEST_LENGTH, MPI_UINT8_T, rank - 1, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n      for(int i=0;i<proc_num_block;i++)\n      {\n        EVP_DigestUpdate(ctx[i], prev_md, SHA512_DIGEST_LENGTH);\n        unsigned int len_ex = 0;\n        EVP_DigestFinal_ex(ctx[i], prev_md, &len_ex);\n        EVP_MD_CTX_free(ctx[i]);\n      }\n    }\n\n    EVP_MD_free(sha512);\n  \n  if(rank==7)\n  {\n    auto end_time = std::chrono::high_resolution_clock::now();\n\n    // print debug information\n    std::cout << \"checksum: \";\n    print_checksum(std::cout, prev_md, SHA512_DIGEST_LENGTH);\n    std::cout << std::endl;\n\n    auto duration = std::chrono::duration_cast<std::chrono::milliseconds>(\n        end_time - begin_time);\n\n    std::cout << \"checksum time cost: \" << std::dec << duration.count() << \"ms\"\n              << std::endl;\n\n    // write checksum to output file\n    std::ofstream output_file(output_path);\n\n    print_checksum(output_file, prev_md, SHA512_DIGEST_LENGTH);\n  \n    auto total_end_time = std::chrono::high_resolution_clock::now();\n\n    auto total_duration = std::chrono::duration_cast<std::chrono::milliseconds>(\n        total_end_time - total_begin_time);\n\n    std::cout << \"total time cost: \" << total_duration.count() << \"ms\"\n              << std::endl;\n  \n  }\n  MPI_Finalize();\n  return 0;\n}\n\nvoid print_checksum(std::ostream &os, uint8_t *md, size_t len) {\n  for (int i = 0; i < len; i++) {\n    os << std::setw(2) << std::setfill('0') << std::hex\n       << static_cast<int>(md[i]);\n  }\n}\n```\n\né€Ÿåº¦å¾—åˆ°äº†éå¸¸æ˜¾è‘—çš„æå‡ï¼Œgetæ»¡åˆ†\n\n## H.çŸ©é˜µä¹˜æ³•\n\n [çŸ©é˜µä¹˜æ³•.mhtml](çŸ©é˜µä¹˜æ³•.mhtml) \n\nç»å…¸é¢˜ç›®ï¼ŒåŒæ ·çš„é…æ–¹ï¼Œç”¨AVX512+Openmp+åˆ†å—è®¡ç®—åŸºæœ¬å°±èƒ½æœ‰ä¸é”™çš„æ•ˆæœï¼Œä¸è¿‡æˆ‘ä¹Ÿåªæ‹¿åˆ°äº†73/100åˆ†ï¼ˆèœå°±è¯¥å¤šç»ƒï¼‰ï¼Œç›´æ¥æŠŠprintfå»æ‰äº†éƒ½æ‹¿ä¸åˆ°é«˜åˆ†â”­â”®ï¹â”­â”®\n\n```cpp\n#include <iostream>\n#include <chrono>\n#include <immintrin.h>\n#include <omp.h>\n#include <cmath>\n#define BLOCKSIZE 128\n#define AVX_F_CAPACITY 8\n\nvoid mul(double* a, double* b, double* c, uint64_t n1, uint64_t n2, uint64_t n3) {\n#pragma omp parallel for\n    for (uint64_t i = 0; i < n1; i+=BLOCKSIZE) {\n        for (uint64_t j = 0; j < n2; j+=BLOCKSIZE) {\n            for (uint64_t k = 0; k < n3; k+=BLOCKSIZE) {\n\n                for(uint64_t ii=i; ii<i+BLOCKSIZE; ii+=AVX_F_CAPACITY)\n                {\n                    for(uint64_t kk=k; kk<k+BLOCKSIZE; kk+=16)\n                    {\n                        __m512d vc0,vc1,vc2,vc3,vc4,vc5,vc6,vc7,vc8,vc9,vc10,vc11,vc12,vc13,vc14,vc15,vb,vb1;\n                        vc0 = _mm512_load_pd(&c[ii*n3+kk]);\n                        vc8 = _mm512_load_pd(&c[ii*n3+kk+8]);\n                        vc1 = _mm512_load_pd(&c[(ii+1)*n3+kk]);\n                        vc9 = _mm512_load_pd(&c[(ii+1)*n3+kk+8]);\n                        vc2 = _mm512_load_pd(&c[(ii+2)*n3+kk]);\n                        vc10 = _mm512_load_pd(&c[(ii+2)*n3+kk+8]);\n                        vc3 = _mm512_load_pd(&c[(ii+3)*n3+kk]);\n                        vc11 = _mm512_load_pd(&c[(ii+3)*n3+kk+8]);\n                        vc4 = _mm512_load_pd(&c[(ii+4)*n3+kk]);\n                        vc12 = _mm512_load_pd(&c[(ii+4)*n3+kk+8]);\n                        vc5 = _mm512_load_pd(&c[(ii+5)*n3+kk]);\n                        vc13 = _mm512_load_pd(&c[(ii+5)*n3+kk+8]);\n                        vc6 = _mm512_load_pd(&c[(ii+6)*n3+kk]);\n                        vc14 = _mm512_load_pd(&c[(ii+6)*n3+kk+8]);\n                        vc7 = _mm512_load_pd(&c[(ii+7)*n3+kk]);\n                        vc15 = _mm512_load_pd(&c[(ii+7)*n3+kk+8]);\n\n                        for(uint64_t jj=j; jj<j+BLOCKSIZE; jj+=AVX_F_CAPACITY)\n                        {\n                            vb=_mm512_load_pd(&b[jj*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[jj*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj]),vb1,vc15);\n                        \n\n                            vb=_mm512_load_pd(&b[(jj+1)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+1)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+1]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+1]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+1]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+1]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+1]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+1]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+1]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+1]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+1]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+1]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+1]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+1]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+1]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+1]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+1]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+1]),vb1,vc15);\n\n                            vb=_mm512_load_pd(&b[(jj+2)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+2)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+2]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+2]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+2]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+2]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+2]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+2]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+2]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+2]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+2]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+2]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+2]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+2]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+2]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+2]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+2]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+2]),vb1,vc15);\n\n                            vb=_mm512_load_pd(&b[(jj+3)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+3)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+3]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+3]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+3]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+3]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+3]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+3]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+3]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+3]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+3]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+3]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+3]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+3]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+3]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+3]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+3]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+3]),vb1,vc15);\n                            \n                            vb=_mm512_load_pd(&b[(jj+4)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+4)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+4]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+4]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+4]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+4]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+4]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+4]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+4]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+4]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+4]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+4]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+4]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+4]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+4]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+4]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+4]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+4]),vb1,vc15);\n\n                            vb=_mm512_load_pd(&b[(jj+5)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+5)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+5]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+5]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+5]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+5]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+5]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+5]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+5]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+5]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+5]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+5]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+5]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+5]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+5]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+5]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+5]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+5]),vb1,vc15);\n                            \n\n                            vb=_mm512_load_pd(&b[(jj+6)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+6)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+6]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+6]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+6]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+6]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+6]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+6]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+6]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+6]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+6]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+6]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+6]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+6]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+6]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+6]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+6]),vb,vc7);\n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+6]),vb1,vc15);\n\n                            vb=_mm512_load_pd(&b[(jj+7)*n3 + kk]);\n                            vb1=_mm512_load_pd(&b[(jj+7)*n3 + kk+8]);\n                            vc0 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+7]),vb,vc0);\n                            vc8 = _mm512_fmadd_pd(_mm512_set1_pd(a[ii*n2+jj+7]),vb1,vc8);\n                            vc1 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+7]),vb,vc1);\n                            vc9 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+1)*n2+jj+7]),vb1,vc9);\n                            vc2 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+7]),vb,vc2);\n                            vc10 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+2)*n2+jj+7]),vb1,vc10);\n                            vc3 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+7]),vb,vc3);\n                            vc11 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+3)*n2+jj+7]),vb1,vc11);\n                            vc4 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+7]),vb,vc4);\n                            vc12 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+4)*n2+jj+7]),vb1,vc12);\n                            vc5 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+7]),vb,vc5);\n                            vc13 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+5)*n2+jj+7]),vb1,vc13);\n                            vc6 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+7]),vb,vc6);\n                            vc14 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+6)*n2+jj+7]),vb1,vc14);\n                            vc7 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+7]),vb,vc7);                            \n                            vc15 = _mm512_fmadd_pd(_mm512_set1_pd(a[(ii+7)*n2+jj+7]),vb1,vc15);\n                        }\n                        _mm512_store_pd(&c[ii*n3 + kk],vc0);\n                        _mm512_store_pd(&c[ii*n3 + kk+8],vc8);\n                        _mm512_store_pd(&c[(ii+1)*n3 + kk],vc1);\n                        _mm512_store_pd(&c[(ii+1)*n3 + kk+8],vc9);\n                        _mm512_store_pd(&c[(ii+2)*n3 + kk],vc2);\n                        _mm512_store_pd(&c[(ii+2)*n3 + kk+8],vc10);\n                        _mm512_store_pd(&c[(ii+3)*n3 + kk],vc3);\n                        _mm512_store_pd(&c[(ii+3)*n3 + kk+8],vc11);\n                        _mm512_store_pd(&c[(ii+4)*n3 + kk],vc4);\n                        _mm512_store_pd(&c[(ii+4)*n3 + kk+8],vc12);\n                        _mm512_store_pd(&c[(ii+5)*n3 + kk],vc5);\n                        _mm512_store_pd(&c[(ii+5)*n3 + kk+8],vc13);\n                        _mm512_store_pd(&c[(ii+6)*n3 + kk],vc6);\n                        _mm512_store_pd(&c[(ii+6)*n3 + kk+8],vc14);\n                        _mm512_store_pd(&c[(ii+7)*n3 + kk],vc7);\n                        _mm512_store_pd(&c[(ii+7)*n3 + kk+8],vc15);\n                    }\n                }\n            \n            }\n        }\n    }\n}\nint main() {\n uint64_t n1, n2, n3;\n FILE* fi;\n\n fi = fopen(\"conf.data\", \"rb\");\n fread(&n1, 1, 8, fi);\n fread(&n2, 1, 8, fi);\n fread(&n3, 1, 8, fi);\n\n double* a = (double*)_mm_malloc(n1 * n2 * 8,64);\n double* b = (double*)_mm_malloc(n2 * n3 * 8,64);\n double* c = (double*)_mm_malloc(n1 * n3 * 8,64);\n\n fread(a, 1, n1 * n2 * 8, fi);\n fread(b, 1, n2 * n3 * 8, fi);\n fclose(fi);\n\n for (uint64_t i = 0; i < n1; i++) {\n  for (uint64_t k = 0; k < n3; k++) {\n   c[i * n3 + k] = 0;\n  }\n }\n\n\n auto t1 = std::chrono::steady_clock::now();\n mul(a, b, c, n1, n2, n3);\n auto t2 = std::chrono::steady_clock::now();\n int d1 = std::chrono::duration_cast<std::chrono::milliseconds>(t2 - t1).count();\n printf(\"%d\\n\", d1);\n// printf(\"c:%.4lf\\n\",c[202]);\n\n fi = fopen(\"out.data\", \"wb\");\n fwrite(c, 1, n1 * n3 * 8, fi);\n fclose(fi);\n\n return 0;\n}\n```\n\n\n\n## I.logistic æ–¹ç¨‹\n\n [Logisticæ–¹ç¨‹.mhtml](Logisticæ–¹ç¨‹.mhtml) \n\nè¿™é¢˜å¡äº†ä¸€ä¸‹åˆï¼Œåˆ†æ•°ä¸€ç›´æ˜¯20å¤šåˆ†ï¼Œå®åœ¨çœ‹ä¸ä¸‹å»\n\nä¸€å¼€å§‹åªæ˜¯å¯¹itã€itvå‡½æ•°è¿›è¡Œç®€å•çš„AVXå’Œopenmpå¤„ç†ï¼Œå‡ºæ¥çš„ç»“æœå®åœ¨ä¸è®©äººæ»¡æ„ï¼Œåæ¥ç»è¿‡å¯¹å‡½æ•°ç»“æ„çš„è§‚å¯Ÿï¼Œå‘ç°ä¸¤ä¸ªå¾ªç¯å¯ä»¥æ¢ä½ç½®ï¼Œäºæ˜¯äº¤æ¢äº†ä¸€ä¸‹ï¼Œå†åœ¨å†…éƒ¨å¼€openmpï¼Œç¡®å®è¿˜æ˜¯å·®ç‚¹æ„æ€ï¼Œæƒ³åˆ°è¿™é“é¢˜åå¤å¼ºè°ƒå‘é‡åŒ–ï¼Œå°±å°è¯•å°†è¿­ä»£æ¬¡æ•°å‡å°‘ä¸€éƒ¨åˆ†ï¼Œæ”¾è¿›å†…éƒ¨å¾ªç¯ï¼Œæ­¤æ—¶å‘ç°æ•ˆæœè¿˜å¯ä»¥ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```cpp\n#define N 8\ndouble count_itv(double r, double x) {\n    return r * x * (1.0 - x);\n}\n\nvoid itv(double r, double* x, int64_t n, int64_t itn) {\n    #pragma omp parallel\n    {\n        for (int64_t j = 0; j < itn/N; j++) {\n            #pragma omp for\n            for (int64_t i = 0; i < n; i++) {\n                for (int64_t k = 0; k <N; k++) {\n                    x[i] = count_itv(r, x[i]);\n                }\n            }\n        }\n    }\n}\n```\n\næ•°å­—16æ˜¯ç»è¿‡åå¤å°è¯•ï¼Œè°ƒæ•´å‡ºæ¥çš„æœ€å¥½ç»“æœï¼Œå› ä¸ºitn=32768ï¼Œæ‰€ä»¥å¿…é¡»é€‰æ‹©å¯ä»¥é™¤å°½çš„æ•°\n\n![image-20240124010147362](HPCGameè®°å½•/image-20240124010147362.png)\n\nè¿˜å·®4åˆ†ï¼Œéš¾å—ï¼Œæ”¹äº†ä¸€ä¸‹æ‰‹åŠ¨å‘é‡åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```cpp\n    __m512d avx_one = _mm512_set1_pd(1.0);\n    __m512d avx_r = _mm512_set1_pd(r);\n    #pragma omp parallel\n    {\n        for (short i=0; i<itn/N; ++i) {\n            #pragma omp for\n            for (int64_t j=0; j<n; j+=8) {\n                __m512d avx_x = _mm512_load_pd(&x[j]);\n                for (short k=0; k<N; ++k) {\n                    __m512d avx_tmp = _mm512_mul_pd(avx_r, avx_x);\n                    avx_x = _mm512_mul_pd(avx_tmp, _mm512_sub_pd(avx_one, avx_x));\n                }\n                _mm512_store_pd(&x[j], avx_x);\n            }\n        }\n    }\n```\n\n![image-20240124013348557](HPCGameè®°å½•/image-20240124013348557.png)\n\né¢(âŠ™oâŠ™)â€¦æ¯ç­å§ï¼Œæˆ‘ç´¯äº†\n\nåæœŸçªç„¶æ³¨æ„åˆ°ï¼Œopenmpå¼€é”™äº†ï¼Œè¿™é“é¢˜è¿˜æ˜¯openmp+å‘é‡åŒ–ï¼Œä½†æ˜¯æˆ‘ç¥å¥‡èˆ¬çš„è¿‡äº†...å¡äº†ä¸ªbug\n\næ¥è‡ªä¸€ä½å­¦é•¿çš„**ä¿®æ­£ï¼š**\n\n```cpp\n#include <iostream>\n#include <chrono>\n#include <omp.h>\n#include <immintrin.h>\n\n// Define macro for aligning memory to 64 bytes for AVX-512\n#define ALIGNMENT 64\n\ndouble it(double r, double x, int64_t itn) {\n    for (int64_t i = 0; i < itn; i++) {\n        x = r * x * (1.0 - x);\n    }\n    return x;\n}\n\nvoid itv(double r, double* x, int64_t n, int64_t itn) {\n    __builtin_assume_aligned(x, 64);\n    __m512d r_vec=_mm512_set1_pd(r);\n    __m512d vec_1=_mm512_set1_pd(1.0);\n    #pragma omp parallel for collapse(1) \n    #pragma vector aligned\n    for (int64_t i = 0; i < n; i += 64) {\n        __m512d x_vec1 = _mm512_loadu_pd(&x[i]);\n        __m512d x_vec2 = _mm512_loadu_pd(&x[i+8]);\n        __m512d x_vec3 = _mm512_loadu_pd(&x[i+16]);\n        __m512d x_vec4 = _mm512_loadu_pd(&x[i+24]);\n        __m512d x_vec5 = _mm512_loadu_pd(&x[i+32]);\n        __m512d x_vec6 = _mm512_loadu_pd(&x[i+40]);\n        __m512d x_vec7 = _mm512_loadu_pd(&x[i+48]);\n        __m512d x_vec8 = _mm512_loadu_pd(&x[i+56]);\n        for (int64_t j = 0; j < itn; j++) {\n            x_vec1 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec1),\n                                   _mm512_sub_pd(vec_1, x_vec1));\n            x_vec2 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec2),\n                       \t\t\t   _mm512_sub_pd(vec_1, x_vec2));\n            x_vec3 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec3),\n                       \t\t\t   _mm512_sub_pd(vec_1, x_vec3));\n            x_vec4 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec4),\n                       \t\t\t   _mm512_sub_pd(vec_1, x_vec4));\n            x_vec5 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec5),\n                       \t\t\t   _mm512_sub_pd(vec_1, x_vec5));\n            x_vec6 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec6),\n                       \t\t\t   _mm512_sub_pd(vec_1, x_vec6));\n            x_vec7 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec7),\n                       \t\t\t   _mm512_sub_pd(vec_1, x_vec7));\n            x_vec8 = _mm512_mul_pd(_mm512_mul_pd(r_vec, x_vec8),\n           \t\t\t   \t\t\t   _mm512_sub_pd(vec_1, x_vec8));\n        }\n        _mm512_storeu_pd(&x[i], x_vec1);\n        _mm512_storeu_pd(&x[i+8], x_vec2);\n        _mm512_storeu_pd(&x[i+16], x_vec3);\n        _mm512_storeu_pd(&x[i+24], x_vec4);\n        _mm512_storeu_pd(&x[i+32], x_vec5);\n        _mm512_storeu_pd(&x[i+40], x_vec6);\n        _mm512_storeu_pd(&x[i+48], x_vec7);\n        _mm512_storeu_pd(&x[i+56], x_vec8);\n    }\n}\n\nint main(){\n    FILE* fi;\n    fi = fopen(\"conf.data\", \"rb\");\n\n    int64_t itn;\n    double r;\n    int64_t n;\n    double* x;\n\n    fread(&itn, 1, 8, fi);\n    fread(&r, 1, 8, fi);\n    fread(&n, 1, 8, fi);\n\n    // Allocate aligned memory for better AVX-512 performance\n    x = (double*)_mm_malloc(n * 8, ALIGNMENT);\n\n    fread(x, 1, n * 8, fi);\n    fclose(fi);\n\n    auto t1 = std::chrono::steady_clock::now();\n\n    // Use OpenMP for parallelization and AVX-512 for vectorization\n    itv(r, x, n, itn);\n\n    auto t2 = std::chrono::steady_clock::now();\n    int d1 = std::chrono::duration_cast<std::chrono::milliseconds>(t2 - t1).count();\n    printf(\"%d\\n\", d1);\n\n    fi = fopen(\"out.data\", \"wb\");\n    fwrite(x, 1, n * 8, fi);\n    fclose(fi);\n\n    // Free aligned memory\n    _mm_free(x);\n\n    return 0;\n}\n```\n\n\n\n## J.H-66\n\n [H-66.mhtml](H-66.mhtml) \n\nå…ˆç”¨äº†gprofè¿›è¡Œäº†çƒ­ç‚¹åˆ†æï¼Œç»“æœå¦‚ä¸‹ï¼š\n\n![image-20240124102831082](HPCGameè®°å½•/image-20240124102831082.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯èŠ±è´¹åœ¨äº†getspå‡½æ•°ä¸Šï¼Œactå‡½æ•°ä¹Ÿæ˜¯ä¸ªå°çƒ­ç‚¹ï¼Œ\n\nå…ˆæ‹¿getspå¼€åˆ€ï¼Œ\n\n1æœˆ29æ—¥ï¼šâ€œé—æ†¾ï¼Œç©ä¸åŠ¨è¿™é“é¢˜â€\n\n## L.æ´ªæ°´å›°å…½\n\n [æ´ªæ°´å›°å…½.mhtml](æ´ªæ°´å›°å…½.mhtml) \n\nç­¾åˆ°é€åˆ†é¢˜ï¼ŒOpenMPç›´æ¥è¿‡\n\n```cpp\n#include <array>\n#include <fstream>\n#include <iostream>\n#include <omp.h>\n#include <vector>\n#include <cmath>\n#include <tuple>\n\nusing std::vector, std::array, std::tuple, std::string;\n\nvoid particle2grid(int resolution, int numparticle,\n                   const vector<double> &particle_position,\n                   const vector<double> &particle_velocity,\n                   vector<double> &velocityu, vector<double> &velocityv,\n                   vector<double> &weightu, vector<double> &weightv) {\n    double grid_spacing = 1.0 / resolution;\n    double inv_grid_spacing = 1.0 / grid_spacing;\n    auto get_frac = [&inv_grid_spacing](double x, double y) {\n        int xidx = floor(x * inv_grid_spacing);\n        int yidx = floor(y * inv_grid_spacing);\n        double fracx = x * inv_grid_spacing - xidx;\n        double fracy = y * inv_grid_spacing - yidx;\n        return tuple(array<int, 2>{xidx, yidx},\n                     array<double, 4>{fracx * fracy, (1 - fracx) * fracy,\n                                      fracx * (1 - fracy),\n                                      (1 - fracx) * (1 - fracy)});\n    };\n\n    #pragma omp parallel for\n    for (int i = 0; i < numparticle; i++) {\n        array<int, 4> offsetx = {0, 1, 0, 1};\n        array<int, 4> offsety = {0, 0, 1, 1};\n\n        auto [idxu, fracu] =\n            get_frac(particle_position[i * 2 + 0],\n                     particle_position[i * 2 + 1] - 0.5 * grid_spacing);\n        auto [idxv, fracv] =\n            get_frac(particle_position[i * 2 + 0] - 0.5 * grid_spacing,\n                     particle_position[i * 2 + 1]);\n\n        for (int j = 0; j < 4; j++) {\n            int tmpidx_u = (idxu[0] + offsetx[j]) * resolution + (idxu[1] + offsety[j]);\n            int tmpidx_v = (idxv[0] + offsetx[j]) * (resolution + 1) + (idxv[1] + offsety[j]);\n//å…³é”®ç‚¹å°±åœ¨è¿™é‡Œ,çŸ¥é“æœ‰è¿™ä¸ªæ“ä½œå°±èƒ½ç­¾åˆ°æˆåŠŸï¼Œä½†çœ‹åˆ°æœ‰äººæ‰‹å†™é”å¥½åƒä¹ŸæˆåŠŸäº†\n            #pragma omp atomic\n            velocityu[tmpidx_u] += particle_velocity[i * 2 + 0] * fracu[j];\n\n            #pragma omp atomic\n            weightu[tmpidx_u] += fracu[j];\n\n            #pragma omp atomic\n            velocityv[tmpidx_v] += particle_velocity[i * 2 + 1] * fracv[j];\n\n            #pragma omp atomic\n            weightv[tmpidx_v] += fracv[j];\n        }\n    }\n}\n\nint main(int argc, char *argv[]) {\n    if (argc < 2) {\n        printf(\"Usage: %s inputfile\\n\", argv[0]);\n        return -1;\n    }\n\n    string inputfile(argv[1]);\n    std::ifstream fin(inputfile, std::ios::binary);\n    if (!fin) {\n        printf(\"Error opening file\");\n        return -1;\n    }\n    \n    int resolution;\n    int numparticle;\n    vector<double> particle_position;\n    vector<double> particle_velocity;\n\n    fin.read((char *)(&resolution), sizeof(int));\n    fin.read((char *)(&numparticle), sizeof(int));\n    \n    particle_position.resize(numparticle * 2);\n    particle_velocity.resize(numparticle * 2);\n    \n    printf(\"resolution: %d\\n\", resolution);\n    printf(\"numparticle: %d\\n\", numparticle);\n    \n    fin.read((char *)(particle_position.data()),\n             sizeof(double) * particle_position.size());\n    fin.read((char *)(particle_velocity.data()),\n             sizeof(double) * particle_velocity.size());\n\n    vector<double> velocityu((resolution + 1) * resolution, 0.0);\n    vector<double> velocityv((resolution + 1) * resolution, 0.0);\n    vector<double> weightu((resolution + 1) * resolution, 0.0);\n    vector<double> weightv((resolution + 1) * resolution, 0.0);\n\n\n    string outputfile;\n\n    particle2grid(resolution, numparticle, particle_position,\n                    particle_velocity, velocityu, velocityv, weightu,\n                    weightv);\n    outputfile = \"output.dat\";\n\n    std::ofstream fout(outputfile, std::ios::binary);\n    if (!fout) {\n        printf(\"Error output file\");\n        return -1;\n    }\n    fout.write((char *)(&resolution), sizeof(int));\n    fout.write(reinterpret_cast<char *>(velocityu.data()),\n               sizeof(double) * velocityu.size());\n    fout.write(reinterpret_cast<char *>(velocityv.data()),\n               sizeof(double) * velocityv.size());\n    fout.write(reinterpret_cast<char *>(weightu.data()),\n               sizeof(double) * weightu.size());\n    fout.write(reinterpret_cast<char *>(weightv.data()),\n               sizeof(double) * weightv.size());\n\n    return 0;\n}\n```\n\n## å…¶ä½™é¢˜ï¼š\n\n [å…‰ä¹‹æ¸¸æˆ.mhtml](å…‰ä¹‹æ¸¸æˆ.mhtml) \n\n [3Dç”Ÿå‘½æ¸¸æˆ.mhtml](3Dç”Ÿå‘½æ¸¸æˆ.mhtml) \n\nRISC-Vçš„é¢˜æ²¡æœ‰æ”¾\n","tags":["æ¯”èµ›"]},{"title":"è®¡ç®—æœºç»„æˆåŸç†-(1)","url":"/2024/01/22/è®¡ç®—æœºç»„æˆåŸç†ä¸€/","content":"\n# å‰è¨€çŸ¥è¯†ï¼š\n\nç­‰å·®æ•°åˆ—å…¬å¼ï¼š\n$$\na_n=a_1+(n-1)d\\\\\nS_n=\\frac {n(a_1+a_n)}{2}=na_1+\\frac {n(n-1)}{2}d\n$$\nç­‰æ¯”æ•°åˆ—å…¬å¼ï¼š\n$$\na_n=a_1q^{n-1}(q\\neq0)\\\\\nS_n=\\frac {a_1(1-q^n)}{1-q}=\\frac{a_1-a_nq}{1-q}\n$$\n\n\n# ä¸€ã€è®¡ç®—æœºç³»ç»Ÿæ¦‚è®º\n\n## 1.1è®¡ç®—æœºç³»ç»Ÿç®€ä»‹\n\n**ç‰©è”ç½‘ï¼š**æŠŠ<font color=red>ä¼ æ„Ÿå™¨</font>åµŒå…¥å’Œè£…å¤‡åˆ°å„ç§ç‰©ä½“ä¸­ï¼Œå¹¶ä¸”è¢«æ™®éè¿æ¥\n\nè®¡ç®—æœºç³»ç»Ÿç”±<u>**ç¡¬ä»¶**</u>å’Œ<u>**è½¯ä»¶**</u>ç»„æˆ\n\n- ç¡¬ä»¶ï¼šè®¡ç®—æœºçš„å®ä½“ï¼Œå¦‚ä¸»æœºã€å¤–è®¾ç­‰\n\n- è½¯ä»¶ï¼šç”±å…·æœ‰å„ç±»ç‰¹æ®ŠåŠŸèƒ½çš„ç¨‹åºç»„æˆ \n\n  ```\n  ç³»ç»Ÿè½¯ä»¶ï¼šç”¨æ¥ç®¡ç†æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿï¼Œå¦‚è¯­è¨€å¤„ç†ç¨‹åºã€æ“ä½œç³»ç»Ÿã€æœåŠ¡æ€§ç¨‹åºã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€ç½‘ç»œè½¯ä»¶(å¦‚tcp/ipåè®®çš„æ¨¡å—)\n  åº”ç”¨è½¯ä»¶ï¼šæŒ‰ä»»åŠ¡éœ€è¦è´¬å€¼çš„å„ç§ç¨‹åº\n  ```\n\n## 1.2è®¡ç®—æœºç¡¬ä»¶åŸºæœ¬ç»„æˆ\n\n### 1.2.1å†¯è¯ºä¾æ›¼æœº\n\nç¬¬ä¸€å°è®¡ç®—æœºENIAC(åŸƒå°¼äºšå…‹)é€šè¿‡æ‰‹åŠ¨æ¥çº¿çš„æ–¹å¼è¿›è¡Œæ§åˆ¶è®¡ç®—ï¼Œæ•ˆç‡å—åˆ°æ¥çº¿çš„é™åˆ¶\n\nå†¯è¯ºä¾æ›¼æå‡ºâ€œ**å­˜å‚¨ç¨‹åº**â€ï¼šå°†æŒ‡ä»¤ä»¥äºŒè¿›åˆ¶ä»£ç çš„å½¢å¼å®ç°è¾“å…¥åˆ°è®¡ç®—æœºçš„ä¸»å­˜å‚¨å™¨ï¼Œç„¶åä»é¦–åœ°å€å¼€å§‹æŒ‰åºæ‰§è¡ŒæŒ‡ä»¤\n\n**æ—©æœŸå†¯è¯ºä¾æ›¼ä½“ç³»ç»“æ„ï¼š**\n\n![image-20240122152233293](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240122152233293.png)\n\n<img src=\"è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240122152116407.png\" alt=\"image-20240122152116407\" style=\"zoom:80%;\" />\n\næ­¥éª¤ï¼š\n\n```\næ•°æ®æˆ–ç¨‹åºå…ˆè¿›å…¥è¾“å…¥è®¾å¤‡ï¼Œå°†ä¿¡æ¯è½¬æ¢ä¸ºæœºå™¨èƒ½è¯†åˆ«çš„å½¢å¼\næ•°æ®é€šè¿‡è¿ç®—å™¨è¿›è¡Œä¸­è½¬åˆ°å­˜å‚¨å™¨ä¸­\næ§åˆ¶å™¨è¯»å…¥å­˜å‚¨å™¨ä¸­çš„è¿ç®—æŒ‡ä»¤ï¼ˆåŠ ã€ä¹˜ç­‰ï¼‰æ§åˆ¶è¿ç®—å™¨åšç®—æœ¯è¿ç®—æˆ–é€»è¾‘è¿ç®—\nç»è¿‡è¿ç®—åçš„æ•°æ®é€šè¿‡è¾“å‡ºè®¾å¤‡è½¬æ¢ä¸ºäººä»¬èƒ½è¯†åˆ«çš„ç»“æœ\n```\n\nå†¯è¯ºä¾æ›¼è®¡ç®—æœºçš„ç‰¹ç‚¹ï¼š\n\n```\nè®¡ç®—æœºç”±äº”å¤§éƒ¨åˆ†ç»„æˆï¼šè¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡ã€æ§åˆ¶å™¨ã€è¿ç®—å™¨ã€å­˜å‚¨å™¨\næŒ‡ä»¤å’Œæ•°æ®ä»¥åŒç­‰åœ°ä½å­˜äºå­˜å‚¨å™¨ï¼Œå¯æŒ‰å€å¯»è®¿\næŒ‡ä»¤å’Œæ•°æ®ç”¨äºŒè¿›åˆ¶è¡¨ç¤º\næŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆ\nå­˜å‚¨ç¨‹åºï¼šæå‰æŠŠæŒ‡ä»¤å’Œæ•°æ®å­˜å‚¨åˆ°å­˜å‚¨å™¨ä¸­\nä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒï¼ˆè¾“å…¥/è¾“å‡ºä¸å­˜å‚¨å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“é€šè¿‡è¿ç®—å™¨å®Œæˆï¼‰\n```\n\n### 1.2.2ç°ä»£è®¡ç®—æœºçš„ç»“æ„\n\nä»¥<font color=red>**å­˜å‚¨å™¨**</font>ä¸ºä¸­å¿ƒ\n\n<img src=\"è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240122154625927.png\" alt=\"image-20240122154625927\" style=\"zoom:80%;\" />\n\nCPU=è¿ç®—å™¨+æ§åˆ¶å™¨\n\n![image-20240122154923848](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240122154923848.png)\n\n<img src=\"è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240122192046146.png\" alt=\"image-20240122192046146\" style=\"zoom:80%;\" />\n\n**ä¸»å­˜ï¼š**RAMè¿è¡Œå†…å­˜\n\n**è¾…å­˜ï¼š**ROMå­˜å‚¨å¤§å°\n\n### 1.2.3ä¸»å­˜å‚¨å™¨\n\n![image-20240122210202202](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240122210202202.png)\n\n**è¯»å–ï¼š**CPUå°†åœ°å€ä¼ å…¥MARï¼Œä»MDRè·å¾—æ•°æ®ï¼Œæ§åˆ¶å™¨æ§åˆ¶ä¸»å­˜å‚¨å™¨æ‰§è¡Œ\"è¯»\"æ“ä½œ\n\n**å†™å…¥ï¼š**CPUå°†åœ°å€ä¼ å…¥MARï¼Œæ•°æ®ä¼ å…¥MDRï¼Œæ§åˆ¶å™¨æ§åˆ¶ä¸»å­˜å‚¨å™¨è¿›è¡Œ\"å†™\"æ“ä½œ\n\n**ã€å­˜å‚¨ä½“ã€‘ï¼š**\n\næ•°æ®éƒ½åœ¨å­˜å‚¨ä½“å†…æŒ‰<font color=red>åœ°å€</font>å­˜å‚¨\n\n![image-20240203175618433](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203175618433.png)\n\nå­˜å‚¨å•å…ƒï¼šå­˜å‚¨å™¨æœ€å°çš„å­˜å‚¨å•ä½ï¼Œæ˜¯ä¸€ä¸²å­˜æ”¾äºŒè¿›åˆ¶ä»£ç çš„ç©ºé—´\n\nå­˜å‚¨å­—ï¼ˆwordï¼‰ï¼šå­˜å‚¨å•å…ƒä¸­äºŒè¿›åˆ¶ä»£ç çš„ç»„åˆ\n\nå­˜å‚¨å­—é•¿ï¼šå­˜å‚¨å•å…ƒä¸­äºŒè¿›åˆ¶ä»£ç çš„ä½æ•°ï¼ˆé€šå¸¸ä¸º8bitçš„æ•´æ•°å€ï¼‰\n\nå­˜å‚¨å…ƒï¼šç”¨äºå­˜å‚¨äºŒè¿›åˆ¶çš„çš„ç”µå­å…ƒä»¶ï¼ˆç”µå®¹ï¼‰ï¼Œæ¯ä¸ªå­˜å‚¨å…ƒå¯ä»¥å­˜1bit\n\nå› æ­¤ï¼ŒMARä½æ•°å¯ä»¥åæ˜ å­˜å‚¨å•å…ƒçš„ä¸ªæ•°ï¼ŒMDRçš„ä½æ•°ç­‰äºå­˜å‚¨å­—é•¿\n\n### 1.2.4è¿ç®—å™¨\n\nç”¨äºå®ç°ç®—æœ¯è¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰ï¼Œé€»è¾‘è¿ç®—ï¼ˆå¸ƒå°”è¿ç®—ï¼‰\n\n![image-20240203175555484](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203175555484.png)\n\n```\nACC:ç´¯åŠ å™¨ã€‚ç”¨äºå­˜æ”¾æ“ä½œæ•°æˆ–è¿ç®—ç»“æœã€‚\nMQ:ä¹˜å•†å¯„å­˜å™¨ï¼Œåœ¨ä¹˜é™¤è¿ç®—æ—¶ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°æˆ–è¿ç®—ç»“æœã€‚\nXï¼šé€šç”¨æ“ä½œæ•°å¯„å­˜å™¨ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°\nALUï¼šç®—æœ¯é€»è¾‘å•å…ƒï¼Œé€šè¿‡å†…éƒ¨ç”µè·¯å®ç°ç®—æ•°è¿ç®—ï¼Œé€»è¾‘è¿ç®—ã€‚\n```\n\n![image-20240203151052252](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203151052252.png)\n\n### 1.2.5æ§åˆ¶å™¨\n\n![image-20240203175515496](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203175515496.png)\n\n```\nCU(Control Unit):æ§åˆ¶å•å…ƒï¼Œåˆ†ææŒ‡ä»¤ï¼Œç»™å‡ºæ§åˆ¶ä¿¡å·\nIR(Instruction Register):æŒ‡ä»¤å¯„å­˜å™¨ï¼Œå­˜æ”¾å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤\nPC(Program Counter):å­˜æ”¾ä¸‹ä¸€è·³æŒ‡ä»¤çš„åœ°å€ï¼Œæœ‰è‡ªåŠ¨åŠ 1çš„åŠŸèƒ½\n```\n\nå®Œæˆä¸€æ¡æŒ‡ä»¤éœ€è¦ï¼š\n\nä»PCå–æŒ‡ä»¤æ”¾å…¥IRä¸­ï¼ŒCUåˆ†æIRä¸­çš„æŒ‡ä»¤ï¼Œä»è€Œæ§åˆ¶å…¶ä»–é…ä»¶è¿›è¡ŒæŒ‡ä»¤æ‰§è¡Œ\n\n![image-20240203153331340](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203153331340.png)\n\n[bilibiliè§†é¢‘ç›´è¾¾](https://www.bilibili.com/video/BV1ps4y1d73V/?p=5&spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=10960c964c9089624e6f92b8d20ed3e0)\n\n## 1.3è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„\n\n![image-20240203155707352](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203155707352.png)\n\nä¸‹å±‚æ˜¯ä¸Šå±‚çš„åŸºç¡€ï¼Œä¸Šå±‚æ˜¯ä¸‹å±‚çš„æ‹“å±•ã€‚\n\n\n\n**ç¼–è¯‘ç¨‹åºï¼š**å°†é«˜çº§è¯­è¨€ç¼–å†™çš„æºç¨‹åºå…¨éƒ¨è¯­å¥ä¸€æ¬¡æ€§ç¿»è¯‘æˆæœºå™¨è¯­è¨€ç¨‹åºï¼Œè€Œåç›´æ¥æ‰§è¡Œæœºå™¨è¯­è¨€ç¨‹åº(.exe)ï¼Œå¦‚C/C++ï¼ŒJava\n\n**è§£é‡Šç¨‹åºï¼š**å°†æºç¨‹åºçš„ä¸€æ¡è¯­å¥ç¿»è¯‘æˆå¯¹åº”çš„æœºå™¨è¯­è¨€çš„é›¨å…·ï¼Œå¹¶ç«‹å³æ‰§è¡Œï¼Œç´§æ¥ç€ç¿»è¯‘ä¸‹ä¸€å¥ï¼ˆæ¯æ¬¡æ‰§è¡Œéƒ½è¦ç¿»è¯‘ï¼‰å¦‚Pythonã€JavaScriptã€shell\n\n![image-20240203160113764](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203160113764.png)\n\n## 1.4è®¡ç®—æœºæ€§èƒ½æŒ‡æ ‡\n\n### 1.4.1å­˜å‚¨å™¨çš„æ€§èƒ½æŒ‡æ ‡\n\n**æ€»å®¹é‡ï¼š**\n\n- å­˜å‚¨å•å…ƒä¸ªæ•°*å­˜å‚¨å­—é•¿ bit\n- å­˜å‚¨å•å…ƒä¸ªæ•°*å­˜å‚¨å­—é•¿/8 Byte\n\nEgï¼šMARä¸º32ä½ï¼ŒMDRä¸º8ä½\n$$\næ€»å®¹é‡ = 2^{32}*8=32Gbit=4GB\n$$\nMARä½æ•°åæ˜ å­˜å‚¨å•å…ƒçš„ä¸ªæ•°ï¼ŒMDRä½æ•°åæ˜ æ¯ä¸ªå­˜å‚¨å•å…ƒçš„å¤§å°\n\n### 1.4.2CPUçš„æ€§èƒ½æŒ‡æ ‡\n\n$$\nK=Kilo=åƒ=10^3\\\\\nM=Milion=ç™¾ä¸‡=10^6\\\\\nG=Giga=åäº¿=10^9\\\\\nT=Tera=ä¸‡äº¿=10^{12}\n$$\n\nKã€Mã€G å’Œ T åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­å¯ä»¥è¡¨ç¤ºä¸åŒçš„å«ä¹‰ï¼Œå…·ä½“å–å†³äºæ˜¯ä»¥ 2 çš„ 10 æ¬¡æ–¹ï¼ˆ1024 çš„å€æ•°ï¼‰è¿˜æ˜¯ä»¥ 10 çš„ 3 æ¬¡æ–¹ï¼ˆ1000 çš„å€æ•°ï¼‰ä¸ºåŸºç¡€ã€‚\n\n1. **äºŒè¿›åˆ¶ï¼ˆä»¥ 2 ä¸ºåŸºç¡€ï¼‰ï¼š**\n\n   - K è¡¨ç¤º 2^10ï¼Œå³ 1024ã€‚\n   - M è¡¨ç¤º 2^20ï¼Œå³ 1024 * 1024ã€‚\n   - G è¡¨ç¤º 2^30ï¼Œå³ 1024 * 1024 * 1024ã€‚\n   - T è¡¨ç¤º 2^40ï¼Œå³ 1024 * 1024 * 1024 * 1024ã€‚\n\n   åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œé€šå¸¸ä½¿ç”¨äºŒè¿›åˆ¶å®šä¹‰å­˜å‚¨å®¹é‡ï¼Œå¦‚ç¡¬ç›˜å®¹é‡ã€å†…å­˜å¤§å°ç­‰ã€‚\n\n2. **åè¿›åˆ¶ï¼ˆä»¥ 10 ä¸ºåŸºç¡€ï¼‰ï¼š**\n\n   - K è¡¨ç¤º 10^3ï¼Œå³ 1000ã€‚\n   - M è¡¨ç¤º 10^6ï¼Œå³ 1000 * 1000ã€‚\n   - G è¡¨ç¤º 10^9ï¼Œå³ 1000 * 1000 * 1000ã€‚\n   - T è¡¨ç¤º 10^12ï¼Œå³ 1000 * 1000 * 1000 * 1000ã€‚\n\n   åœ¨ä¸€äº›å…¶ä»–ä¸Šä¸‹æ–‡ï¼Œå¦‚å›½é™…åˆ¶åº¦å’Œç½‘ç»œé€Ÿåº¦ï¼Œé€šå¸¸ä½¿ç”¨åè¿›åˆ¶å®šä¹‰å•ä½ï¼Œè¡¨ç¤ºæ–‡ä»¶å¤§å°ã€å¸¦å®½ç­‰ã€‚\n\n**(1)CPUä¸»é¢‘ï¼š**\n\nCPUå†…æ•°å­—è„‰å†²ä¿¡å·æŒ¯è¡çš„é¢‘ç‡\n$$\nCPUä¸»é¢‘ï¼ˆæ—¶é’Ÿé¢‘ç‡ï¼‰=1/CPUæ—¶é’Ÿå‘¨æœŸ\n$$\n**(2)CPIï¼ˆClock cycle Per Instructionï¼‰**\n\næ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€è¦çš„æ—¶é’Ÿå‘¨æœŸï¼ˆä¸åŒçš„æŒ‡ä»¤CPIä¸åŒï¼Œç”šè‡³ç›¸åŒçš„æŒ‡ä»¤CPIä¹Ÿä¼šæœ‰å˜åŒ–ï¼‰\n\n<font color=red>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„è€—æ—¶</font>=CPI*CPUæ—¶é’Ÿå‘¨æœŸ\n\nEgï¼šæŸCPUä¸»é¢‘ä¸º1000Hzï¼ŒæŸç¨‹åºåŒ…å«100æ¡æŒ‡ä»¤ï¼Œå¹³å‡æ¥çœ‹æŒ‡ä»¤çš„CPI=3ï¼Œåˆ™è¯¥ç¨‹åºè¦åœ¨è¯¥CPUä¸Šæ‰§è¡Œå®Œæˆéœ€è¦å¤šä¹…ï¼Ÿ\n$$\n100*3*(1/1000)=0.3s\n$$\n**(3)IPS  (Instructions Per Second)**\n\næ¯ç§’æ‰§è¡Œå¤šå°‘æ¡æŒ‡ä»¤\n\nIPS = 1/(CPI*æ—¶é’Ÿå‘¨æœŸ)= ä¸»é¢‘/CPI\n\n**(4)FLOPS (Floating-point Operations Per Second)**\n\næ¯ç§’æ‰§è¡Œå¤šå°‘æ¬¡æµ®ç‚¹è¿ç®—\n\n### 1.4.3ç³»ç»Ÿæ•´ä½“æ€§èƒ½æŒ‡æ ‡\n\n(1)æ•°æ®é€šè·¯å¸¦å®½ï¼šæ•°æ®æ€»çº¿ä¸€æ¬¡èƒ½å¹¶è¡Œä¼ é€çš„ä½æ•°\n\n(2)ååé‡ï¼šç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°é‡\n\n(3)å“åº”æ—¶é—´ï¼šæŒ‡çš„æ˜¯ç”¨æˆ·å‘è®¡ç®—æœºå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°ç³»ç»Ÿå¯¹è¯¥è¯·æ±‚åšå‡ºå“åº”å¹¶è·å¾—æ‰€éœ€è¦çš„ç»“æœçš„ç­‰å¾…æ—¶é—´\n\n# äºŒã€æ•°æ®çš„è¡¨ç¤ºå’Œè¿ç®—\n\n## 2.1 è¿›ä½è®¡æ•°åˆ¶\n\n$$\näºŒè¿›åˆ¶:0,1\\\\\nå…«è¿›åˆ¶:0,1,2,3,4,5,6,7\\\\\nåè¿›åˆ¶:0,1,2,3,4,5,6,7,8,9\\\\\nåå…­è¿›åˆ¶:0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F\\\\\n$$\n\n\n$$\näºŒè¿›åˆ¶ï¼š101.1->1*2^2+2*2^1+1*2^0+1*2^{-1}=5.5 \\\\\nå…«è¿›åˆ¶ï¼š5.4->5*8^0+4*8^{-1}=5.5\\\\\nåè¿›åˆ¶ï¼š5.5->5*10^1+5*10^{-1}=5.5\\\\\nåå…­è¿›åˆ¶ï¼š5.8->5*16^0+8*16^{-1}=5.5\n$$\nç±»æ¨ï¼šrè¿›åˆ¶è®¡æ•°æ³•\n$$\n(K_nK_{n-1}...K_2K_1K_0K_{-1}K_{-2}...K_{-m})æ•´ä½“çš„ä¸€ä¸ªæ•°è½¬åè¿›åˆ¶  \\\\\n=K_n*r^n+K_{n-1}*r^{n-1}+...+K_2*r^2+K_1*r^1+K_0*r_0+K_{-1}*r^{-1}+K_{-2}*r^{-2}+...+K_{-m}*r^{-m}\n$$\n**åè¿›åˆ¶è½¬æ¢ä»»æ„è¿›åˆ¶**\n\n![image-20240203192543394](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203192543394.png)\n\n![image-20240203193019989](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203193019989.png)\n\n[äºŒè¿›å¿«é€Ÿåˆ¶è½¬æ¢å…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶](https://cooc.cqmu.edu.cn/Course/KnowledgePoint/14960.aspx?AspxAutoDetectCookieSupport=1)\n\n```\nçœŸå€¼ï¼šäººç±»ä¹ æƒ¯çš„æ•°å­—\næœºå™¨æ•°ï¼šæ•°å­—å®é™…å­˜åœ¨æœºå™¨é‡Œçš„å½¢å¼ï¼ˆæ­£è´Ÿå·éœ€è¦è¢«â€œæ•°å­—åŒ–â€ï¼Œ0è¡¨ç¤ºæ­£ï¼Œ1è¡¨ç¤ºè´Ÿï¼‰\n\n+15  0 1111\n-8\t 1 1000\n```\n\n## 2.2 BCDç \n\n### 2.2.1 8421ç \n\n![image-20240203193932518](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203193932518.png)\n\næ¯4bitè¡¨ç¤ºä¸€ä¸ªæ•°å­—ï¼Œå¦‚12å°±å¯ä»¥è¡¨ç¤ºä¸ºâ€œ0001 0010â€çš„å½¢å¼\n$$\nåè¿›åˆ¶:5+8=13\\\\\n8421ç :0101+1000=1101(ä¸åœ¨æ˜ å°„è¡¨ä¸­)\\\\\nå¦‚æœä¸åœ¨æ˜ å°„è¡¨å†…ï¼Œ8421ä¸­1010~1111æ²¡æœ‰æ„ä¹‰\\\\\n+6(0110)ä¿®æ­£å³å¯\\\\\n0101+1000=1101+0110=0001\\quad0011\n$$\næ³¨æ„ï¼šå¦‚æœåœ¨æ˜ å°„è¡¨ä¸­å°±æ— éœ€ä¿®æ­£ã€‚\n\n### 2.2.2 ä½™3ç \n\nä½™3ç ï¼š8421ç +(0011)\n\n![image-20240203194903126](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203194903126.png)\n\n### 2.2.3 2421ç \n\n![image-20240203195017632](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240203195017632.png)\n\nå‰äº”ä¸ªæ•°å­—ç¬¬ä¸€ä½éƒ½ä¸º0ï¼Œåäº”ä¸ªæ•°å­—ç¬¬ä¸€ä½éƒ½ä¸º1\n\n## 2.3æ— ç¬¦å·æ•´æ•°çš„åŠ å‡æ³•è¿ç®—\n\n- ![image-20240205144647536](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205144647536.png)\n\n### 2.3.1æ— ç¬¦å·æ•´æ•°çš„åŠ æ³•è¿ç®—\n\n**è®¡ç®—æœºç¡¬ä»¶ï¼š**ä»æœ€ä½ä½å¼€å§‹ï¼ŒæŒ‰ä½ç›¸åŠ ï¼Œå¹¶å¾€æ›´é«˜ä½è¿›ä½\n\n![image-20240205144805187](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205144805187.png)\n\n### 2.3.2æ— ç¬¦å·æ•´æ•°çš„å‡æ³•è¿ç®—\n\n**è®¡ç®—æœºç¡¬ä»¶ï¼š**\"è¢«å‡æ•°\"ä¸å˜ï¼Œ\"å‡æ•°\"å…¨éƒ¨æŒ‰ä½å–åï¼Œæœ«å°¾+1ï¼Œå‡æ³•å˜åŠ æ³•ï¼ˆåŠ æ³•ç”µè·¯é€ ä»·ä¾¿å®œï¼‰---æ•°è®º\n\n![image-20240205145050472](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205145050472.png)\n\n\n\n## 2.4å¸¦ç¬¦å·æ•´æ•°(å®šç‚¹æ•´æ•°)åœ¨è®¡ç®—æœºä¸­çš„åº”ç”¨\n\nå¸¦ç¬¦å·æ•´æ•°çš„è¡¨ç¤ºï¼šåŸç ã€è¡¥ç ã€åç \n\nï¼ˆåŒä¸€ä¸ªå«ä¹‰ï¼Œåªæ˜¯ç¼–ç æ–¹å¼ä¸åŒï¼Œä¸åŒçš„ç¼–ç æ–¹å¼æœ‰ä¸åŒçš„ä¼˜ç¼ºç‚¹ï¼‰\n\n![image-20240205181042323](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205181042323.png)\n\n### 2.4.1åŸç \n\n![image-20240205145757764](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205145757764.png)\n\nç¬¦å·ä½\"0\"è¡¨ç¤ºæ­£ï¼Œ\"1\"è¡¨ç¤ºè´Ÿï¼Œå‰©ä½™çš„ä¸ºæ•°å€¼ä½\n\nè‹¥æœºå™¨å­—é•¿ä¸º**n+1**ä½ï¼Œåˆ™åŸç è¡¨ç¤ºèŒƒå›´ä¸º\n$$\n-(2^{n}-1)\\leq x \\leq 2^n-1\n$$\nçœŸå€¼0æœ‰ä¸¤ç§å½¢å¼ï¼Œ+0å’Œ-0, [+0]åŸ=0 0000000ï¼Œ[-0]åŸ=1 0000000\n\n#### åŸç çš„ç¼ºç‚¹\n\nç¬¦å·ä½ä¸èƒ½å‚ä¸è¿ç®—ï¼Œéœ€è¦è®¾è®¡å¤æ‚çš„ç¡¬ä»¶ç”µè·¯æ‰èƒ½å¤„ç†\n\n![image-20240205150427986](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205150427986.png)\n\n### 2.4.2è¡¥ç \n\n![image-20240205150537453](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205150537453.png)\n\nè¡¥ç è½¬åç åªéœ€è¦æœ«ä½-1å³å¯ï¼Œä½†æ˜¯æ“ä½œéº»çƒ¦ï¼Œæ‰€ä»¥å¯ä»¥å…ˆç”¨è¡¥ç ç®—å‡ºåŸç ï¼Œå†è½¬åç ï¼Œä»¥ä¸‹ä¸ºæ–¹æ³•2ï¼š\n\næ­¤ä¸ºæ‰‹ç®—å¿«é€Ÿè½¬æ¢æŠ€å·§ï¼Œè®¡ç®—æœºä¸­å¹¶ä¸æ˜¯è¿™æ ·å®ç°çš„\n\n![image-20240205151427416](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205151427416.png)\n\n#### è¡¥ç çš„åŠ æ³•è¿ç®—\n\nè®¡ç®—æœºç¡¬ä»¶ä»æœ€ä½ä½å¼€å§‹ï¼ŒæŒ‰ä½ç›¸åŠ ï¼ˆç¬¦å·ä½å‚ä¸è¿ç®—ï¼‰ï¼Œå¹¶å¾€æ›´é«˜ä½è¿›ä½\n\n![image-20240205154907313](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205154907313.png)\n\n#### è¡¥ç çš„å‡æ³•è¿ç®—\n\n![image-20240205155804452](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205155804452.png)\n\næ³¨æ„ï¼šåŸç è½¬è¡¥ç ç¬¦å·ä½ä¸ç”¨æŒ‰ä½å–åï¼Œè¡¥ç è½¬è¡¥ç çš„è´Ÿè¦å…¨éƒ¨ä½æŒ‰ä½å–åã€‚\n\næ— ç¬¦å·æ•´æ•°å’Œæœ‰ç¬¦å·æ•´æ•°çš„å‡æ³•éƒ½æ˜¯å…¨éƒ¨ä½æŒ‰ä½å–åæœ«ä½+1ï¼Œæ‰€ä»¥å¯ä»¥ç”¨åŒä¸€å¥—ç”µè·¯\n\n![image-20240205180517867](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205180517867.png)\n\n### 2.4.3ç§»ç \n\nè¡¥ç çš„åŸºç¡€ä¸Šå°†ç¬¦å·ä½å–åã€‚æ³¨æ„ï¼šç§»ç ç”¨äºè¡¨ç¤ºæ•´æ•°\n\n![image-20240205180910511](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205180910511.png)\n\n## 2.5å®šç‚¹å°æ•°\n\n<font color=green>å®šç‚¹æ•´æ•°</font>çš„ç¼–ç è¡¨ç¤ºï¼šåŸç ã€åç ã€è¡¥ç ã€ç§»ç \n\n<font color=red>å®šç‚¹å°æ•°</font>çš„ç¼–ç è¡¨ç¤ºï¼šåŸç ã€åç ã€è¡¥ç \n\n### 2.5.1å®šç‚¹å°æ•°åŸç ã€åç ã€ç§»ç \n\n![image-20240205181911503](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205181911503.png)\n\n![image-20240205182022160](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205182022160.png)\n\n![image-20240205184110792](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205184110792.png)\n\n## 2.6å¥‡å¶æ ¡éªŒç \n\n**å¥‡æ ¡éªŒç ï¼š**æ•´ä¸ªæ ¡éªŒç ï¼ˆæœ‰æ•ˆä¿¡æ¯ä½å’Œæ ¡éªŒä½ï¼‰ä¸­â€œ1â€çš„ä¸ªæ•°ä¸ºå¥‡æ•°ã€‚\n\n**å¶æ ¡éªŒç ï¼š**æ•´ä¸ªæ ¡éªŒç ï¼ˆæœ‰æ•ˆä¿¡æ¯ä½å’Œæ ¡éªŒä½ï¼‰ä¸­â€œ1â€çš„ä¸ªæ•°ä¸ºå¶æ•°ã€‚\n\n![image-20240205185809301](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205185809301.png)\n\nEgï¼šç»™å‡ºä¸¤ä¸ªç¼–ç 1001101å’Œ1010111\n\nå¥‡æ ¡éªŒï¼š<font color=red>1</font>1001101\t\t<font color=red>0</font>1010111\n\nå¶æ ¡éªŒï¼š<font color=green>0</font>1001101\t\t<font color=green>1</font>1010111\n\n**å¥‡å¶æ ¡éªŒç çš„å±€é™æ€§ï¼š**å¦‚æœå‘ç”Ÿäº†ä¸¤ä¸ªä½ç½®çš„é”™è¯¯ï¼Œä¼šå‡ºç°æ ¡éªŒä¸å‡ºçš„æƒ…å†µ\n\n**ç¡¬ä»¶å®ç°å¶æ ¡éªŒ**é€šè¿‡å¼‚æˆ–ï¼ˆâŠ•ï¼‰è¿ç®—æ±‚å¾—æ ¡éªŒä½\n\n1âŠ•0âŠ•0âŠ•1âŠ•1âŠ•0âŠ•1=0æ‰€ä»¥ç¬¬ä¸€ä¸ªç¼–ç çš„å¶æ ¡éªŒä½ä¸º0\n\n## 2.7ç¬¦å·æ‹“å±•\n\n![image-20240205234947265](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205234947265.png)\n\næ³¨æ„è´Ÿæ•°åç å’Œè¡¥ç çš„æ‹“å±•ï¼\n\n# ä¸‰ã€ç”µè·¯çš„å®ç°\n\n## 3.1ç®—æœ¯é€»è¾‘å•å…ƒï¼ˆALUï¼‰--Arithmetic and Logic Unit\n\n![image-20240205191909131](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205191909131.png)\n\n## 3.2é—¨ç”µè·¯ï¼š\n\n![img](è®¡ç®—æœºç»„æˆåŸç†ä¸€/u=3886467858,546682409&fm=253&fmt=auto&app=138&f=PNG.png)\n\n**<font color=red>è¿ç®—ä¼˜å…ˆçº§</font>**ï¼šä¸>æˆ–\n\n## 3.3å¸ƒå°”è¿ç®—å®šå¾‹\n\n![image-20240205205622135](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205205622135.png)\n\n## 3.4ä¸€ä½å…¨åŠ å™¨\n\nå¦‚åŒæ‰‹ç®—ä¸€æ ·ï¼Œä»ä½ä½åˆ°é«˜ä½è¿›è¡ŒåŠ æ³•è¿ç®—\n\n![image-20240205211137735](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205211137735.png)\n\n### 3.4.1ä¸²è¡ŒåŠ æ³•å™¨\n\n#### 3.4.1.1å•ä¸²è¡ŒåŠ æ³•å™¨\n\nåªæœ‰ä¸€ä¸ªå…¨åŠ å™¨ï¼Œæ•°æ®é€ä½ä¸²è¡Œé€å…¥åˆ°åŠ æ³•å™¨ä¸­è¿›è¡Œè®¡ç®—ï¼Œè¿›ä½è§¦å‘å™¨ç”¨æ¥å¯„å­˜è¿›ä½ä¿¡å·ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡è¿ç®—ã€‚\n\nå¦‚æœæ“ä½œæ•°é•¿ä½nä½ï¼Œåˆ™è¦è¿›è¡Œnæ¬¡è¿ç®—ï¼Œæ¯æ¬¡äº§ç”Ÿä¸€ä½å’Œï¼Œå¹¶ä¸”é€ä½é€å›å¯„å­˜å™¨ä¸­ï¼Œè¿™æ ·æ•ˆç‡ä¸é«˜ã€‚\n\n![image-20240205211809002](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205211809002.png)\n\n#### 3.4.1.2ä¸²è¡Œè¿›ä½çš„åŠ æ³•å™¨\n\næŠŠnä¸ªå…¨åŠ å™¨ä¸²æ¥èµ·æ¥ï¼Œå¯ä»¥è¿›è¡Œä¸¤ä¸ªnä½æ•°çš„ç›¸åŠ ã€‚\n\n![image-20240205212245672](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205212245672.png)\n\nå§‹ç»ˆä¾èµ–äºä½ä½çš„è¿›ä½ä¿¡å·ï¼Œè¿ç®—é€Ÿåº¦è¿˜æ˜¯æ¯”è¾ƒæ…¢ã€‚\n\n### 3.4.2å¹¶è¡ŒåŠ æ³•å™¨\n\n$$\nå¯¹äºæ¯ä¸€ä½éƒ½è¦è¿›è¡Œ\\\\C_i=A_iB_i+(A_iâŠ•B_i)C_{i-1}\\\\S_i=A_iâŠ•B_iâŠ•C_{i-1}\n\\\\è®¾G_i=A_iB_i \\quad P_i=A_0âŠ•B_0\n\\\\åˆ™åŸå¼=G_i+P_iC_{i-1}\n\\\\\n\\\\\né€šè¿‡å±•å¼€å¯å¾—ï¼š\\\\\nC_1=G_1+P_1C_0\\\\\nC_2=G_2+P_2C_1=G_2+P_2G_1+P_2P_1C_0\\\\\nC_3=G_3+P_3C_2=G_3+P_3G_2+P_3P_2G_1+P_3P_2P_1C_0\n\\\\...\n\\\\C_içš„å€¼ä¾èµ–äºPã€Gã€C_0ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è¿›è¡Œå¹¶è¡Œè®¡ç®—\n\\\\ç¬¬ié¡¹ä¸­çš„P_iC_{i-1}åœ¨åç»­é¡¹ä¸­å‡å­˜åœ¨ï¼Œæ‰€ä»¥å¯ä»¥è®¾è®¡ç®€åŒ–ä¸€ä¸‹ç”µè·¯\n$$\n\n![image-20240205220840672](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205220840672.png)\n\nç»§ç»­å±•å¼€ä¼šå¯¼è‡´ç”µè·¯è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸€èˆ¬åªå±•å¼€4ä¸ª(4ä¸ªFA)å½¢æˆ4ä½çš„CLAåŠ æ³•å™¨\n\n![image-20240205222133269](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205222133269.png)\n\n## 3.5è¡¥ç åŠ å‡è¿ç®—å™¨\n\n**åŸºæœ¬ï¼ˆæ‰‹ç®—ï¼‰æ–¹æ³•ï¼š**\n\n```\nn bitçš„è¡¥ç X+Yï¼šæŒ‰ä½ç›¸åŠ å³å¯\nn bitçš„è¡¥ç X-Yï¼šå°†è¡¥ç Yå…¨éƒ¨æŒ‰ä½å–åï¼Œæœ«ä½+1ï¼Œå¾—åˆ°[-Y]è¡¥ï¼Œå‡æ³•å˜ä¸ºäº†åŠ æ³•\n```\n\n![image-20240205224540144](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205224540144.png)\n\nsub=1å³é‡‡ç”¨å‡æ³•æ“ä½œï¼Œéé—¨å¯¹Yè¿›è¡ŒæŒ‰ä½å–åï¼ŒCin=Sub=1å³å¯¹Yçš„æœ«å°¾+1å¾—åˆ°[-Y]è¡¥\n\n**æ­¤ç”µè·¯åŒæ—¶ä¹Ÿé€‚åˆæ— ç¬¦å·æ•°çš„åŠ å‡æ³•è¿ç®—**\n\n## 3.6åŠ å‡æº¢å‡ºåˆ¤æ–­\n\n$$\n[A+B]_è¡¥=A_è¡¥+B_è¡¥\\\\\n[A-B]_è¡¥=A_è¡¥+[-B]_è¡¥\n$$\n\nåªæœ‰â€œæ­£æ•°+æ­£æ•°â€æ‰ä¼š<font color=red>**ä¸Šæº¢**</font>--æ­£+æ­£=è´Ÿ\n\nåªæœ‰â€œè´Ÿæ•°+è´Ÿæ•°â€æ‰ä¼š<font color=red>**ä¸‹æº¢**</font>--è´Ÿ+è´Ÿ=æ­£\n\n### 3.6.1æº¢å‡ºåˆ¤æ–­æ–¹æ³•ä¸€\n\nå¯ä»¥æ ¹æ®ä¸Šé¢çš„è§„å¾‹å¾—åˆ°çœŸå€¼è¡¨\n\n![image-20240206002645564](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206002645564.png)\n\n$$\nV=A_sB_s\\overline S_s + \\overline A_s\\overline B_sS_s\\\\\nA_sè¡¨ç¤ºç¬¬ä¸€ä¸ªæ•°çš„ç¬¦å·ä½ï¼ŒB_sè¡¨ç¤ºç¬¬äºŒä¸ªæ•°çš„ç¬¦å·ä½ï¼ŒS_sè¡¨ç¤ºæœ€ç»ˆç»“æœç¬¦å·ä½\n$$\n\nè‹¥V=0ï¼Œè¡¨ç¤ºæ— æº¢å‡ºï¼›\n\nè‹¥V=1ï¼Œè¡¨ç¤ºæœ‰æº¢å‡ºã€‚\n\n### 3.6.2æº¢å‡ºåˆ¤æ–­æ–¹æ³•äºŒ\n\né‡‡ç”¨ç¬¦å·ä½è¿›ä½å’Œæœ€é«˜æ•°å€¼ä½çš„è¿›ä½è¿›è¡Œå¼‚æˆ–âŠ•è¿ç®—åˆ¤æ–­\n\n![image-20240206003024065](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206003024065.png)\n\n![image-20240206002710848](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206002710848.png)\n$$\nV=C_sâŠ•C_1\n$$\n\n### 3.6.3æº¢å‡ºåˆ¤æ–­æ–¹æ³•ä¸‰\n\né‡‡ç”¨åŒç¬¦å·ä½ï¼Œæ­£æ•°çš„ç¬¦å·ä½ä¸º00ï¼Œè´Ÿæ•°çš„ç¬¦å·ä½ä¸º11\n\n![image-20240205233933203](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240205233933203.png)\n\nå¯¹ä¸¤ä¸ªç¬¦å·ä½S1S2è¿›è¡Œå¼‚æˆ–è¿ç®—å³å¯\n\n**<font color=red>æ‹“å±•ï¼š</font>**\n\n1. åŒç¬¦å·ä½è¡¥ç åˆç§°ä¸ºæ¨¡4è¡¥ç ï¼Œå•ç¬¦å·ä½è¡¥ç åˆç§°ä¸ºæ¨¡2è¡¥ç \n2. åŒç¬¦å·ä½å®é™…å­˜å‚¨æ—¶åªå­˜å‚¨ä¸€ä¸ªç¬¦å·ä½ï¼Œè¿ç®—æ—¶ä¼šå¤åˆ¶ä¸€ä¸ªç¬¦å·ä½ï¼Œä¸ä¼šå¢åŠ å­˜å‚¨ç©ºé—´\n\n## 3.7æ ‡å¿—ä½çš„ç”Ÿæˆ\n\n![image-20240206002729636](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206002729636.png)\n\n<font color=red>**æ³¨æ„ï¼š**</font>OF(Overflow Flag)å’ŒSF(Sign Flag)åªå¯¹**æœ‰ç¬¦å·æ•°**åŠ å‡è¿ç®—æœ‰æ„ä¹‰ï¼ŒCF(Carry Flag)åªå¯¹**æ— ç¬¦å·æ•°**åŠ å‡è¿ç®—æœ‰æ„ä¹‰ï¼ŒZF(Zero Flag)å‡æœ‰æ„ä¹‰ã€‚\n\n![image-20240206000841222](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206000841222.png)\n\n## 3.8ç§»ä½è¿ç®—\n\næ³¨æ„ï¼šç”±äºåŸã€åã€è¡¥ç çš„ä½æ•°æœ‰é™ï¼Œå› æ­¤æŸäº›æ—¶å€™ç§»ä½æ“ä½œä¸èƒ½ç²¾ç¡®ç­‰æ•ˆäºä¹˜ã€é™¤æ³•ã€‚\n\n### 3.8.1ç®—æ•°ç§»ä½\n\n**ç§»ä½ï¼š**é€šè¿‡æ”¹å˜å„ä¸ªæ•°å€¼ä½å’Œå°æ•°ç‚¹çš„ç›¸å¯¹ä½ç½®ï¼Œæ”¹å˜å„ä¸ªæ•°å€¼ä½çš„ä½æƒï¼Œå®ç°ä¹˜é™¤æ³•è¿ç®—\n$$\nrè¿›åˆ¶æ•°ï¼šK_nK_{n-1}...K_2K_1K_0K_{-1}K_{-2}...K{-n}\n\\\\å°æ•°ç‚¹å‰ç§»xä½ç›¸å½“äºÃ·r^x\n\\\\å°æ•°ç‚¹åç§»ç›¸å½“äºÃ—r^x\n$$\n![image-20240206122447048](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206122447048.png)\n\n#### 3.8.1.1åŸç çš„ç®—æ•°ç§»ä½\n\nç¬¦å·ä½ä¿æŒä¸å˜ï¼Œä»…å¯¹æ•°å€¼ä½è¿›è¡Œä½ç§»ã€‚\n\n**å³ç§»ï¼š**é«˜ä½è¡¥0ï¼Œä½ä½èˆå¼ƒã€‚è‹¥èˆå¼ƒçš„ä½=0ï¼Œåˆ™ç›¸å½“äºÃ·rï¼Œè‹¥èˆå¼ƒçš„ä½â‰ 0ï¼Œåˆ™ä¸¢å¤±ç›¸åº”çš„ç²¾åº¦\n\n![image-20240206121350996](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206121350996.png)\n\n**å·¦ç§»ï¼š**ä½ä½è¡¥0ï¼Œé«˜ä½èˆå¼ƒã€‚è‹¥èˆå¼ƒçš„ä½=0ï¼Œåˆ™ç›¸å½“äºÃ—rï¼Œè‹¥èˆå¼ƒçš„ä½â‰ 0ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯\n\n![image-20240206121305855](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206121305855.png)\n\n#### 3.8.1.2åç çš„ç®—æ•°ç§»ä½\n\nåç <u>**æ­£æ•°**</u>çš„ç®—æ•°ä½ç§»ä¸åŸç çš„ä¸€æ ·ï¼Œ\n\nè´Ÿæ•°ç”±äºåç æ•°å€¼ä½äºåŸç ç›¸åï¼Œå› æ­¤ï¼Œ\n\n**å³ç§»ï¼š**é«˜ä½è¡¥1ï¼Œä½ä½èˆå¼ƒã€‚\n\n**å·¦ç§»ï¼š**ä½ä½è¡¥1ï¼Œé«˜ä½èˆå¼ƒã€‚\n\n#### 3.8.1.3è¡¥ç çš„ç®—æ•°ç§»ä½\n\nè¡¥ç **<u>æ­£æ•°</u>**çš„ç®—æ•°ç§»ä½ä¸åŸç ä¸€æ ·ï¼Œ\n\n**è´Ÿæ•°**è§„åˆ™å¦‚ä¸‹ï¼š\n\n![image-20240206122220103](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206122220103.png)\n\n### 3.8.2é€»è¾‘ç§»ä½\n\n**é€»è¾‘å³ç§»ï¼š**é«˜ä½è¡¥0ï¼Œä½ä½èˆå¼ƒ\n\n**é€»è¾‘å·¦ç§»ï¼š**ä½ä½è¡¥0ï¼Œé«˜ä½èˆå¼ƒã€‚\n\nå¯ä»¥çœ‹åšæ˜¯å¯¹â€æ— ç¬¦å·æ•°â€œçš„ç®—æ•°ç§»ä½\n\n![image-20240206122743175](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206122743175.png)\n\n### 3.8.3å¾ªç¯ç§»ä½\n\næ™®é€šå¾ªç¯ç§»ä½ï¼š\n\n![3](è®¡ç®—æœºç»„æˆåŸç†ä¸€/3.gif)\n\nå¸¦è¿›ä½ä½çš„å¾ªç¯ç§»ä½ï¼š\n\næ–¹æ³•ç›¸åŒï¼Œåªæ˜¯è¦è€ƒè™‘è¿›ä½ä½CF\n\n![image-20240206123754559](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206123754559.png)\n\nåº”ç”¨ï¼šå¤§ç«¯å’Œå°ç«¯å­˜å‚¨ä¹‹é—´çš„è½¬æ¢\n\n## 3.9ä¹˜é™¤æ³•è¿ç®—\n\n### 3.9.1åŸç çš„ä¹˜æ³•è¿ç®—\n\n**æ‰‹ç®—ï¼š**\n\n![image-20240206125053826](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206125053826.png)\n\n**æœºå™¨å®ç°ï¼š**\n$$\nè®¾æœºå™¨å­—é•¿ä¸ºn+1=5ä½(å«1ä¸ªç¬¦å·ä½)ï¼Œ[x]_åŸ=1.1101ï¼Œ[y]_åŸ=0.1011ï¼Œé‡‡ç”¨åŸç ä¸€ä½ä¹˜æ³•æ±‚xy\n\\\\ç¬¦å·ä½å•ç‹¬å¤„ç†:ç¬¦å·ä½=x_sâŠ•y_s\n\\\\æ•°å€¼ä½å–ç»å¯¹å€¼è¿›è¡Œä¹˜æ³•è¿ç®—:[|x|]_åŸ=0.1101ï¼Œ[|y|]_åŸ=0.1011\n$$\n![image-20240206130607736](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206130607736.png)\n\nåˆ°æœ€åä¸€æ­¥ï¼Œè¦å¤„ç†ç¬¦å·ä½ï¼Œ\n\n![image-20240206130754825](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206130754825.png)\n\nå°æ•°ç‚¹éšå«åœ¨ç¬¦å·ä½åé¢ï¼Œä¹˜æ•°çš„ç¬¦å·ä½ä¸ç”¨å‚ä¸çœŸæ­£çš„è¿ç®—ï¼Œåªéœ€è¦ä¸è¢«ä¹˜æ•°çš„ç¬¦å·ä½è¿›è¡Œå¼‚æˆ–è¿ç®—\n\n**æ‰‹ç®—æ¨¡æ‹Ÿæ–¹æ³•ï¼š**\n\n![image-20240206131310285](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206131310285.png)\n\n### 3.9.2è¡¥ç çš„ä¹˜æ³•è¿ç®—\n\n![image-20240206133738224](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206133738224.png)\n\n![image-20240206133643035](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206133643035.png)\n\n### 3.9.3å®šç‚¹æ•°çš„é™¤æ³•è¿ç®—\n\n[ç‹é“è§†é¢‘åœ°å€](https://www.bilibili.com/video/BV1ps4y1d73V/?p=24&spm_id_from=pageDriver&vd_source=10960c964c9089624e6f92b8d20ed3e0)\n\n#### **3.9.3.1åŸç é™¤æ³•ï¼šæ¢å¤ä½™æ•°æ³•**\n\n$$\nè®¾æœºå™¨å­—é•¿ä¸º5ä½ï¼ˆ1ä½ç¬¦å·ä½,n=4ï¼‰ï¼Œx=0.1011,y=0.1101ï¼Œæ±‚x/y\n\\\\|x|=0.1011,|y|=0.1101,[|y|]_è¡¥=0.1101,[-|y|]_è¡¥=1.0011\n\\\\ç¬¦å·ä½å•ç‹¬å¤„ç†:ç¬¦å·ä½=x_sâŠ•y_s\n\\\\æ•°å€¼ä½å–ç»å¯¹å€¼è¿›è¡Œé™¤æ³•è®¡ç®—ã€‚\n$$\n\nåˆå§‹çŠ¶æ€ï¼š\n\n![image-20240206150210054](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206150210054.png)\n\nè®¡ç®—æœºä¼šé»˜è®¤**å•†1**ï¼Œå¦‚æœå•†1å‡ºç°é—®é¢˜å†è¿›è¡Œå•†0ï¼Œå¹¶â€œæ¢å¤ä½™æ•°â€ã€‚\n\n![image-20240206150630659](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206150630659.png)\n\næ­¤æ—¶å‘ç°ACC-(é™¤æ•°)å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ª**è´Ÿæ•°**ï¼Œæ‰€ä»¥ACCæ˜¯æ¯”é™¤æ•°å°çš„ï¼Œæ‰€ä»¥åº”è¯¥å•†0ï¼Œäºæ˜¯ï¼š\n\næ›´æ”¹ä¸ºå•†0ï¼Œå¹¶å°†ACC+(é™¤æ•°)ï¼Œå°†ç»“æœé€å›ACCï¼Œæ¢å¤åŸæœ¬ä½™æ•°\n\n![image-20240206151038661](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206151038661.png)\n\næ­¤æ—¶è¿™ä¸€ä½å•†å·²ç»è®¡ç®—å®Œæˆï¼Œé€šè¿‡é€»è¾‘å·¦ç§»ï¼Œæœ«å°¾ç½®é›¶ï¼Œè®¡ç®—ä¸‹ä¸€ä½ã€‚\n\næ ¹æ®æœºå™¨å­—é•¿è¿›è¡Œè®¡ç®—ï¼Œç›´åˆ°è®¡ç®—å®Œæˆï¼Œæ³¨æ„ï¼Œæœ€åä¸€ä½å•†çš„ä½™æ•°ä¸ºè´Ÿçš„è¯ä¹Ÿéœ€è¦æ¢å¤ä½™æ•°å¹¶å•†0\n\n![image-20240206151615123](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206151615123.png)\n\næœ€ç»ˆç­”æ¡ˆçš„ç¬¦å·ä½ç”¨å¼‚æˆ–è¿ç®—å¾—åˆ°\n\n**æ‰‹ç®—æ¨¡æ‹Ÿï¼š**\n\n![image-20240206152008434](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206152008434.png)\n\n#### 3.9.3.2åŸç é™¤æ³•ï¼šåŠ å‡äº¤æ›¿æ³•ï¼ˆä¸æ¢å¤ä½™æ•°æ³•ï¼‰\n\n![image-20240206154651802](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206154651802.png)\n\nç¬¦å·ä½çš„ç¡®å®šè¿˜æ˜¯éœ€è¦å¼‚æˆ–è¿ç®—ï¼Œ\n\nåœ¨æœ€åä¸€æ­¥å¦‚æœä½™æ•°ä¸ºè´Ÿï¼Œéœ€å•†0ï¼Œå¹¶+[|y|]è¡¥å¾—åˆ°æ­£ç¡®çš„ä½™æ•°\n\n### 3.9.4è¡¥ç çš„é™¤æ³•è¿ç®—\n\né‡‡ç”¨åŠ å‡äº¤æ›¿æ³•ï¼Œè¦è®©ç¬¦å·ä½å‚ä¸è¿ç®—ï¼Œè¢«é™¤æ•°/ä½™æ•°ï¼Œé™¤æ•°éƒ½é‡‡ç”¨åŒç¬¦å·ä½\n\n![image-20240206155634184](è®¡ç®—æœºç»„æˆåŸç†ä¸€/image-20240206155634184.png)\n\n## è¡¥å……ï¼šCè¯­è¨€å¼ºåˆ¶ç±»å‹è½¬æ¢\n\nCè¯­è¨€ä¸­å®šç‚¹æ•´æ•°æ˜¯ç”¨â€œè¡¥ç â€å­˜å‚¨çš„ã€‚\n\n\n\næ— ç¬¦å·æ•°ä¸æœ‰ç¬¦å·æ•°ï¼šä¸æ”¹å˜æ•°æ®å†…å®¹ï¼Œåªæ˜¯æ”¹å˜è§£é‡Šæ–¹å¼\n\n```C\nvoid main(){\n\tshort x=-4321;//shortç±»å‹å ç”¨2ä¸ªå­—èŠ‚\n    unsigned short y = (unsigned short)x;\n}\n```\n\né•¿æ•´æ•°ä¾¿çŸ­ç­‰è¾“ï¼Œé«˜ä½æˆªæ–­ï¼Œä¿ç•™ä½ä½\n\n```c\nvoid main(){\n\tint a=165537,b=-34991;\n\tshort c=(short)a,d=(short)b;\n    //a:0x000286a1 c:0x86a1 çœŸå€¼ï¼š-31071\n    //b:0xffff7751 d:0x7751 çœŸå€¼ï¼š30545\n}\n```\n\nçŸ­æ•´æ•°å˜é•¿æ•´æ•°ï¼Œç¬¦å·æ‹“å±•\n\n```c\nvoid main(){\n\tshort x=-4321;\n\tint m=x;\n\tunsigned short n=(unsigned short)x;\n\tunsigned int p=n;\n    //x:1110 1111 0001 1111  0xef1f\n    //m:1111 1111 1111 1111 1110 1111 0001 1111 0xffffef1f çœŸå€¼:-4321\n    //n:1110 1111 0011 1111 0xef1f çœŸå€¼ï¼š61215\n    //p:0000 0000 0000 0000 1110 1111 0001 1111 0x0000ef1f çœŸå€¼:61215\n}\n```\n\n","tags":["è®¡ç®—æœºåŸºç¡€"]},{"title":"GoogleColabä½¿ç”¨","url":"/2023/08/10/GoogleColabä½¿ç”¨/","content":"\næ„ï¼Œæƒ³ç³»ç»Ÿå­¦ä¹ CUDAå´æ²¡æ˜¾å¡ç”¨\n\nçœ‹åˆ°è®¸å¤šå…è´¹èµ„æºï¼Œå…¶ä¸­Googleçš„Colabå°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œåªæ˜¯éœ€è¦ä¾é é­”æ³•\n\n## ColabæŒ‚è½½è°·æ­Œäº‘ç›˜\n\nåœ¨è°·æ­Œäº‘ç›˜ä¸­è‡ªå»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç©ºç™½å¤„å³é”®ç‚¹å‡»åˆ›å»ºcolab notebook\n\n![image-20240810173046163](GoogleColabä½¿ç”¨/image-20240810173046163.png)\n\nåœ¨ä¿®æ”¹-ç¬”è®°æœ¬è®¾ç½®é€‰é¡¹é‡Œé€‰æ‹©GPU\n\n![image-20240810173130277](GoogleColabä½¿ç”¨/image-20240810173130277.png)\n\nåœ¨cellé‡Œé¢è¾“å…¥å¦‚ä¸‹ä»£ç ï¼Œè¿›è¡Œäº‘ç›˜æŒ‚è½½\n\n```python\nfrom google.colab import drive\ndrive.mount('/content/drive')\n```\n\næœŸé—´ä¼šå‡ºç°æˆæƒï¼Œæ— è„‘å‹¾é€‰å³å¯\n\n\n\n## Vscodeè¿œç¨‹è¿æ¥Colab\n\n**1.æ–°å»ºè„šæœ¬æ–‡ä»¶**`start.sh`\n\n```bash\npip install colab_ssh --upgrade\n```\n\nç›´æ¥åœ¨cellé‡Œé¢è¾“å…¥ä¼šå‡ºç°è­¦å‘Šï¼Œç”¨è„šæœ¬è¿è¡Œå¯ä»¥è§„é¿\n\n**2.è¿è¡Œè„šæœ¬**\n\nåœ¨cellä¸­è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼Œè¿è¡Œå³å¯\n\n```python\n!bash start.sh\nfrom colab_ssh import launch_ssh_cloudflared, init_git_cloudflared\nlaunch_ssh_cloudflared(password=\"password\")ã€€ã€€ã€€ã€€ã€€ã€€# passwordæ˜¯åé¢ç”¨äºè¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„å¯†ç ï¼Œè‡ªè¡Œå¡«å…¥å³å¯\n```\n\nå¾—åˆ°å¦‚ä¸‹å›¾\n\n![img](GoogleColabä½¿ç”¨/2015591-20231221200626190-1129252360.png)\n\n**3.é…ç½®vscode**\n\né¦–å…ˆè¦å»å®‰è£…ä¸€ä¸ª[cloudflared](https://github.com/cloudflare/cloudflared/releases)\n\nå°†ç¬¬ä¸€ä¸ªæ¡†å†…çš„sshé…ç½®åŠ åˆ°ç”µè„‘æœ¬åœ°çš„sshé…ç½®æ–‡ä»¶ä¸­ï¼Œç”¨cloudflaredçš„æ–‡ä»¶è·¯å¾„æ›¿æ¢é…ç½®ä¸­çš„<PUT_THE_ABSOLUTE_CLOUDFLARE_PATH_HERE> å­—æ®µ\n\n![image-20240810172536048](GoogleColabä½¿ç”¨/image-20240810172536048.png)\n\n**4.è¿æ¥Colab**\n\nåœ¨VSCodeç•Œé¢æŒ‰`Ctrl + Shift + P`  è¾“å…¥ `Connect to Host`\n\nç„¶åå°†ç¬¬ä¸‰ä¸ªé»‘è‰²å—çš„å†…å®¹è¾“å…¥ï¼ˆè¯¥hostnameæ¯æ¬¡æ‰§è¡Œä»£ç éƒ½ä¼šå˜ï¼‰\n\næç¤ºè¾“å…¥å¯†ç å³ä¸ºä¹‹å‰è®¾ç½®çš„å¯†ç \n\n**æ³¨æ„ï¼š**é‡æ–°è¿æ¥ä¼šè¯éƒ½ä¼šæ¢å¤åŸå§‹çŠ¶æ€ï¼Œcolabç«¯çš„æ“ä½œéœ€è¦é‡æ–°åšä¸€é\n\n## é˜²æ‰çº¿\n\nä½¿ç”¨google colabæ—¶å¦‚æœé•¿æ—¶é—´ä¸äº¤äº’å¯èƒ½ä¼šæ‰çº¿ï¼Œ\n\næ‰“å¼€ å¼€å‘è€…é€‰é¡¹ çš„Consoleï¼Œä½¿ç”¨å¦‚ä¸‹è„šæœ¬å³å¯ï¼Œè„šæœ¬ä¼šä¸æ–­åˆ›å»ºcell\n\n```javascript\nfunction ClickConnect() {\n    console.log(\"Working\");\n    document.querySelector(\"colab-toolbar-button\").click();\n}\nsetInterval(ClickConnect, 60000);\n```\n\nä½¿ç”¨å®Œåå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤åœæ­¢è¿è¡Œ\n\n```javascript\nclearInterval(intervalId) # intervalIdæ¢æˆå…·ä½“çš„æ•°å­—\n```\n\n## Vscodeè¿æ¥kaggle\n\n```\n!pip install jupyter_ssh\n!ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa\n\n```\n\n"},{"title":"ç”³å¨æ¶æ„ç›¸å…³çŸ¥è¯†","url":"/2023/04/07/ç”³å¨æ¶æ„ç›¸å…³çŸ¥è¯†/","content":"\n# 0.è¡¥å……çŸ¥è¯†\n\n## CSR å­˜å‚¨æ–¹æ³•\n\n![image-20240407161052148](ç”³å¨æ¶æ„ç›¸å…³çŸ¥è¯†/image-20240407161052148.png)\n\n\n\n# 1.æ¶æ„å›¾\n\n![image-20240407155922026](ç”³å¨æ¶æ„ç›¸å…³çŸ¥è¯†/image-20240407155922026.png)\n\næ­¤å¤„ä¸ºSW26010ä¼—æ ¸å¤„ç†å™¨æ¶æ„ï¼ŒSW39000ä¸º**6ä¸ªæ ¸ç»„**\n\næ¯ä¸€ä¸ªä»æ ¸éƒ½æœ‰ä¸€å¿«é«˜é€Ÿçš„æœ¬åœ°å±€éƒ¨å­˜å‚¨**LDM**\n\n![image-20240407160402121](ç”³å¨æ¶æ„ç›¸å…³çŸ¥è¯†/image-20240407160402121.png)\n\nSW39000 LDMç©ºé—´é™åˆ¶ä¸º**256 KB**ï¼ˆç§æœ‰æ®µã€å…±äº«å†…å­˜ã€Cacheï¼‰\n\n- ç§æœ‰æ®µä¸èƒ½ä¸º0\n- Cache åªèƒ½è®¾ç½®ä¸º0ã€32ã€128 KBï¼ˆé»˜è®¤é…ç½®ä¸º32KBï¼‰\n- LDM è¿ç»­å…±äº«æ®µå¿…é¡»ä¸º2çš„å¹‚ï¼Œå¤§å°åªèƒ½æ˜¯0ï¼Œ4ï¼Œ8ï¼Œ16ï¼Œ32ï¼Œ128ï¼Œ256KB\n\nä¸»å­˜å’Œä»æ ¸ä¹‹é—´æ•°æ®é€šè¿‡**DMA**ä¼ è¾“ï¼Œä»æ ¸ä¹‹é—´çš„æ•°æ®é€šè¿‡**RMA**ä¼ è¾“\n\n","tags":["è®¡ç®—æœºåŸºç¡€"]},{"title":"CUDA","url":"/2022/02/09/CUDA/","content":"\n**æœ¬ç¯‡å‚è€ƒï¼š**\n\n- [https://face2ai.com/program-blog](https://face2ai.com/program-blog)\n\n- [https://zhuanlan.zhihu.com/p/34587739](https://zhuanlan.zhihu.com/p/34587739)\n- [https://zhuanlan.zhihu.com/p/53773183](https://zhuanlan.zhihu.com/p/53773183)\n- [https://zhuanlan.zhihu.com/p/97044592](https://zhuanlan.zhihu.com/p/97044592)\n- [https://blog.csdn.net/sunmc1204953974/article/details/51000970](https://blog.csdn.net/sunmc1204953974/article/details/51000970)\n\nå­¦ä¸œè¥¿è¦æ²‰ä½æ°”ï¼Œâ€**æ…¢å°±æ˜¯ç¨³ï¼Œç¨³å°±æ˜¯å¿«**â€œ\n\n# ä¸€ã€å‰åº\n\n## å¹¶è¡Œæ€§\n\nç¨‹åºæ˜¯ä¸€ç³»åˆ—æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆï¼Œå› æ­¤å¹¶è¡Œå°±å¯ä»¥åˆ†ä¸º**æŒ‡ä»¤å¹¶è¡Œ**å’Œ**æ•°æ®å¹¶è¡Œ**\n\næˆ‘ä»¬é€šå¸¸æ›´å…³æ³¨æ•°æ®å¹¶è¡Œï¼Œopenmpã€pthreadå¾ˆå¤šæ“ä½œéƒ½æ˜¯ä¸ºäº†æ•°æ®å¹¶è¡Œ\n\n- æŒ‡ä»¤å¹¶è¡Œï¼šåˆ©ç”¨æµæ°´çº¿ã€â€Œè¶…æ ‡é‡ã€â€Œä¹±åºæ‰§è¡Œç­‰æŠ€æœ¯ï¼Œâ€Œä½¿å¾—å¤šæ¡æŒ‡ä»¤å¯ä»¥åŒæ—¶æˆ–éƒ¨åˆ†é‡å åœ°æ‰§è¡Œ\n- æ•°æ®å¹¶è¡Œï¼šåœ¨å¤šä¸ªå¤„ç†å•å…ƒä¹‹é—´å®ç°çš„ï¼Œâ€Œé€šè¿‡å°†æ•°æ®åˆ’åˆ†æˆè‹¥å¹²å—ï¼Œâ€Œå¹¶åˆ†åˆ«æ˜ å°„åˆ°ä¸åŒçš„å¤„ç†å•å…ƒä¸Š\n\nCUDAéå¸¸é€‚åˆæ•°æ®å¹¶è¡Œ\n\n## å¼‚æ„è®¡ç®—\n\nå¼‚æ„ï¼šä¸åŒçš„è®¡ç®—æœºæ¶æ„å°±æ˜¯å¼‚æ„\n\nx86 CPU+GPUçš„å¼‚æ„æ˜¯æœ€å¸¸è§çš„\n\n![img](CUDA/1.png)\n\n- ALUï¼šé€»è¾‘è®¡ç®—å•å…ƒï¼Œä¹Ÿå°±æ˜¯æ ¸å¿ƒï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å››æ ¸\n- Controlï¼šæ§åˆ¶å•å…ƒ\n- Cacheï¼šç¼“å­˜\n- DRAMï¼šå†…å­˜\n\nGPUä¸­ä¸€ä¸ªSMï¼ˆçº¢è‰²æ¡†éƒ¨åˆ†ï¼‰å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå®Œæ•´çš„å¤šæ ¸CPUï¼Œåªæ˜¯ALUæ•°é‡å˜å¤šäº†ï¼Œ\n\nå› æ­¤GPUå¯¹æ•°æ®é‡å¤§çš„è®¡ç®—ä»»åŠ¡é€‚åº”æ€§æ›´å¥½ï¼Œå¯¹äºé€»è¾‘å¤æ‚çš„ç¨‹åº**ä¸€ä¸ªSM**æ˜¯ä¸å¦‚**ä¸€ä¸ªCPU**\n\n**æ³¨æ„ï¼š**ä¸€ä¸ªGPUæ˜¯ç”±è‹¥å¹²å¤šä¸ªSMï¼ˆ*streaming multiprocessor*ï¼‰ï¼Œå¯ä»¥æŠŠSMçœ‹æˆGPUçš„å¤§æ ¸ï¼Œå¯„å­˜å™¨registerå’Œå…±äº«å†…å­˜shared memoryæ˜¯SMçš„ç¨€ç¼ºèµ„æº\n\nCPUå’ŒGPUä¹‹é—´é€šè¿‡PCIeæ€»çº¿è¿›è¡Œè¿æ¥ï¼ˆæœ‰çš„é‡‡ç”¨çš„æ˜¯NVLinkï¼‰\n\n## GPUæ¶æ„\n\nGPUæ˜¯å›´ç»•SM(æµå¼å¤šå¤„ç†å™¨)çš„æ‰©å±•é˜µåˆ—æ­å»ºçš„ï¼Œé€šè¿‡å¤åˆ¶ç»“æ„å®ç°ç¡¬ä»¶å¹¶è¡Œã€‚\n\nä¸€ä¸ªSMçš„å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š\n\n![img](CUDA/fermi_sm.png)\n\nGPUä¸­æ¯ä¸ªSMéƒ½èƒ½æ”¯æŒæ•°ç™¾ä¸ªçº¿ç¨‹**å¹¶å‘**æ‰§è¡Œï¼Œ\n\nå½“ä¸€ä¸ªæ ¸å‡½æ•°è¢«å¯åŠ¨çš„æ—¶å€™ï¼Œ**å¤šä¸ªblock**ä¼šè¢«åŒæ—¶åˆ†é…ç»™å¯ç”¨çš„SMä¸Šæ‰§è¡Œã€‚\n\n### çº¿ç¨‹æŸ Wrap\n\nCUDA é‡‡ç”¨å•æŒ‡ä»¤å¤šçº¿ç¨‹SIMTæ¶æ„ç®¡ç†æ‰§è¡Œçº¿ç¨‹ï¼Œ\n\nç›®å‰åŸºæœ¬æ‰€æœ‰è®¾å¤‡çš„çº¿ç¨‹æŸå¤§å°éƒ½æ˜¯**32**ï¼Œæ‰€ä»¥blockå¤§å°æœ€å¥½æ˜¯32çš„å€æ•°\n\nå› ä¸ºæ‰§è¡Œçš„æ—¶å€™å¯èƒ½æœ‰å¤šä¸ªblockä¼šè¢«åˆ†é…åˆ°ä¸€ä¸ªSMï¼Œä½†æ˜¯åœ¨æŸä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ•°åœ¨è¿è¡Œï¼ˆ**å¹¶å‘ï¼ï¼ï¼ï¼**ï¼‰çº¿ç¨‹æŸä¸­çš„æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ**åŒä¸€æ¡æŒ‡ä»¤**\n\nä¸€ä¸ªçº¿ç¨‹æŸé‡Œçš„æ‰§è¡ŒæŒ‡ä»¤æ˜¯ç›¸åŒçš„ï¼Œå¯ä»¥é€‰æ‹©ä¸æ‰§è¡Œä½†ä¹Ÿä¸èƒ½æ‰§è¡Œå…¶ä»–æŒ‡ä»¤ã€‚\n\nçº¿ç¨‹å—Blockä¸­çš„çº¿ç¨‹å¯ä»¥é€šè¿‡å…±äº«å†…å­˜å’Œå¯„å­˜å™¨è¿›è¡Œæ•°æ®å…±äº«ï¼Œå› æ­¤Wrapä¹Ÿä¸€æ ·\n\nCUDAæä¾›äº†å—å†…åŒæ­¥çš„æ–¹æ³•ï¼Œä½†æ˜¯å—ä¸å—ä¹‹é—´çš„åŒæ­¥æ˜¯æ²¡åŠæ³•çš„\n\n### Fermi è´¹ç±³æ¶æ„\n\nç¬¬ä¸€ä¸ªå®Œæ•´çš„GPUæ¶æ„ï¼Œæœ€å¤§å¯æ”¯æŒ16ä¸ªSMï¼Œæ¯ä¸ªSMæœ‰32ä¸ªCoreï¼Œå…±512ä¸ªCore\n\n\n\n![img](CUDA/fermi.png)\n\n\n\n## è¡¥å……çŸ¥è¯†\n\nå³æ˜¯æ²¡æœ‰GPUï¼ŒCPUä¹Ÿå¯ä»¥å®Œæˆè®¡ç®—ï¼Œåªæ˜¯é€Ÿåº¦ä¼šæ…¢å¾ˆå¤šï¼Œæ‰€ä»¥æŠŠGPUçœ‹ä½œæ˜¯CPUçš„åŠ é€Ÿè®¾å¤‡ï¼ˆåŠ é€Ÿå¡ï¼‰\n\nNVIDIAç›®å‰çš„**è®¡ç®—å¹³å°**ï¼ˆä¸æ˜¯æ¶æ„ï¼‰ï¼š\n\n- Tegraï¼šåµŒå…¥å¼èŠ¯ç‰‡ï¼ŒåŠŸè€—ä½ï¼Œgpuå’ŒcpuèŠ¯ç‰‡åœ¨åŒä¸€å—ç¡…ç‰‡ä¸Š\n- Geforceï¼šå›¾åƒç”¨æˆ·\n- Quadroï¼šä¸“ä¸šç»˜å›¾ï¼Œæ”¯æŒé«˜é€ŸOpenGLæ¸²æŸ“\n- Teslaï¼šç”¨äºå¤§è§„æ¨¡å¹¶è¡Œè®¡ç®—\n\n**CUDAå¹³å°**ä¸æ˜¯å•å•æŒ‡è½¯ä»¶æˆ–è€…ç¡¬ä»¶ï¼Œè€Œæ˜¯å»ºç«‹åœ¨Nvidia GPUä¸Šçš„ä¸€æ•´å¥—å¹³å°ï¼Œå¹¶æ‰©å±•å‡ºå¤šè¯­è¨€æ”¯æŒ\n\n# äºŒã€çŸ¥è¯†æ€»è§ˆ\n\n![img](CUDA/CUDA_C.png)\n\n# ä¸‰ã€åŸºç¡€\n\n## 3.1 GPUä¿¡æ¯è·å–\n\n### 3.1.1 ç¨‹åºå†…ä¿¡æ¯è·å–\n\nå…·ä½“å‚è§ï¼š[https://blog.csdn.net/weixin_45791458/article/details/136379581](https://blog.csdn.net/weixin_45791458/article/details/136379581)\n\nAPIåœ¨æ›´æ–°ï¼Œæœ€å¥½æ˜¯æŸ¥é˜…æœ€æ–°çš„å®˜æ–¹æ–‡æ¡£ï¼\n\n### 3.1.2 nvidia-smi\n\næŒ‡ä»¤å¯ä»¥ç›´æ¥è·å–å½“å‰è®¾å¤‡GPUä¿¡æ¯ï¼Œé€šè¿‡æ·»åŠ ä¸åŒçš„å‚æ•°è·å–ä¸åŒçš„ä¿¡æ¯\n\n```\nroot@dsw-425468-7489bfcb8-jfhdt:/mnt/workspace# nvidia-smi\nSat Aug 10 22:43:58 2024       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 470.82.01    Driver Version: 470.82.01    CUDA Version: 12.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA A10          Off  | 00000000:00:08.0 Off |                    0 |\n|  0%   29C    P8    15W / 150W |      0MiB / 22731MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n```\n\næœ€å…·ä½“çš„ä¿¡æ¯å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥è¯¢\n\n```\nnvidia-smi -q [-i No]\n```\n\næ›´å¤šç”¨æ³•å¯ä»¥`nvidia-smi -h` æˆ–è€… æ‰‹å†ŒæŸ¥è¯¢\n\n## 3.2 ç¬¬ä¸€ä¸ªç¨‹åºHello world\n\n```c++\n#include <stdio.h>\n\n__global__ void print_kernel(){\n    int tid = blockDim.x * blockIdx.x + threadIdx.x;\n    printf(\"Hello CPU from GPU %d\\n\", tid);\n}\n\nint main(){\n    printf(\"Hello GPU from CPU!\\n\");\n    print_kernel<<<1,10>>>();\n    cudaDeviceReset();//åŒæ­¥CPUå’ŒGPU\n    return 0;\n}\n```\n\n![image-20240810180059923](CUDA/image-20240810180059923.png)\n\n- `__global__`å…³é”®å­—å‘Šè¯‰ç¼–è¯‘å™¨æ­¤å‡½æ•°æ˜¯åœ¨GPUä¸Šæ‰§è¡Œçš„æ ¸å‡½æ•°\n- `print_kernel<<<1,10>>>()`è¿è¡Œæ ¸å‡½æ•°\n- `cudaDeviceReset()`è¿™ä¸ªå‡½æ•°åŒ…å«æœ‰éšå¼åŒæ­¥ï¼ŒCPUå¿…é¡»ç­‰GPUæ‰§è¡Œå®Œæˆæ‰æ¥ç€æ‰§è¡Œï¼Œ`cudaDeviceSynchronize()`åˆ™æ˜¯æ˜¾ç¤ºåŒæ­¥\n\n### æ•´ä¸ªä»£ç ç»“æ„\n\n1. åˆ†é…GPUçš„å†…å­˜\n2. æ‹·è´æ•°æ®åˆ°GPU\n3. è°ƒç”¨æ ¸å‡½æ•°æ‰§è¡Œè®¡ç®—\n4. å°†è®¡ç®—å®Œçš„æ•°æ®æ‹·è´å›ä¸»æœº\n5. é‡Šæ”¾å†…å­˜\n\n## 3.3 å†…å­˜ç®¡ç†\n\nCUDAæä¾›äº†ä¸€å¥—è¿›è¡Œå†…å­˜ç®¡ç†çš„APIï¼Œæ—¢å¯ä»¥ç®¡ç†è®¾å¤‡ç«¯çš„å†…å­˜ä¹Ÿå¯ä»¥ç®¡ç†ä¸»æœºç«¯çš„\n\nä½†æ˜¯ä¸»æœºç«¯é€šå¸¸è¿˜æ˜¯ç”¨ä¼ ç»Ÿçš„æ ‡å‡†åº“è¿›è¡Œç®¡ç†ã€‚\n\n| æ ‡å‡†Cå‡½æ•° |  CUDA API  | è¯´æ˜     |\n| :-------: | :--------: | -------- |\n|  malloc   | cudaMalloc | åˆ†é…å†…å­˜ |\n|  memcpy   | cudaMemcpy | å†…å­˜æ‹·è´ |\n|  memset   | cudaMemst  | æ•°æ®è®¾ç½® |\n|   free    |  cudaFree  | é‡Šæ”¾å†…å­˜ |\n\n### 3.2.1 cudaMemcpy\n\nå†…å­˜æ•°æ®æ‹·è´çš„è¿‡ç¨‹æ˜¯é€šè¿‡æ€»çº¿å®Œæˆçš„\n\n```c\ncudaError_t cudaMemcpy(void * dst,const void * src,size_t count,cudaMemcpyKind kind)\n/*\nç±»å‹å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç§ï¼š\ncudaMemcpyHostToHost\ncudaMemcpyHostToDevice\ncudaMemcpyDeviceToHost\ncudaMemcpyDeviceToDevice\n*/\n```\n\nå¦‚æœå‡½æ•°æ‰§è¡ŒæˆåŠŸï¼Œåˆ™ä¼šè¿”å›`cudaSuccess` å¦åˆ™è¿”å› `cudaErrorMemoryAllocation`\n\n```c\nchar* cudaGetErrorString(cudaError_t error)\n```\n\nä½¿ç”¨æ­¤æŒ‡ä»¤å³å¯æŠŠé”™è¯¯ä»£ç ç¿»è¯‘æˆè¯¦ç»†çš„ä¿¡æ¯\n\n### 3.2.2 cudaMalloc\n\n```cpp\ncudaError_t cudaMalloc (void **devPtr, size_t  size ); \n```\n\nç¬¬ä¸€æ¬¡é‡åˆ°æˆ‘ä¹Ÿå¾ˆå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸¤ä¸ªæ˜Ÿæ˜Ÿ\n\n```cpp\nfloat *device_data=NULL;\nsize_t size = 1024*sizeof(float);\ncudaMalloc((void**)&device_data, size);\n```\n\nç›®çš„æ˜¯ä¸ºäº†å°† device ä¸Šåˆ†é…çš„å†…å­˜åœ°å€é€šè¿‡å½¢å‚ä¼ å‡ºæ¥ã€‚\n\n### 3.2.3 ç¤ºä¾‹\n\n```c++\n#include <stdio.h>\n#include <cstdlib> // For std::rand and std::srand\n#include <ctime>   // For std::time\n\n__global__ void sub_kernel(double *a, double *b, double *res){\n    int tid = blockDim.x * blockIdx.x + threadIdx.x;\n    res[tid] = a[tid] + b[tid];\n}\n\nint main(){\n    std::srand(std::time(0));\n    const int nElement = 32;\n    printf(\"The Number of Element is %d\\n\", nElement);\n    double *a_host = (double *)malloc(nElement * sizeof(double));\n    double *b_host = (double *)malloc(nElement * sizeof(double));\n    double *res_host = (double *)malloc(nElement * sizeof(double));\n    double *res_from_gpu = (double *)malloc(nElement * sizeof(double));\n    memset(res_host, 0, nElement*sizeof(double));\n    memset(res_from_gpu, 0, nElement*sizeof(double));\n\n    double *a_device, *b_device, *res_device;\n    cudaMalloc((double **)&a_device, nElement*sizeof(double));\n    cudaMalloc((double **)&b_device, nElement*sizeof(double));\n    cudaMalloc((double **)&res_device, nElement*sizeof(double));\n    \n    /*Init a b*/\n    for(int i = 0; i < nElement; i++){\n        a_host[i] = std::rand() % 100;\n        b_host[i] = std::rand() % 100;\n    }\n\n    cudaMemcpy(a_device, a_host, nElement*sizeof(double), cudaMemcpyHostToDevice);\n    cudaMemcpy(b_device, b_host, nElement*sizeof(double), cudaMemcpyHostToDevice);\n    sub_kernel<<<1, 32>>>(a_device, b_device, res_device);\n    \n    for(int i = 0; i < nElement; i++){\n        res_host[i] = a_host[i] + b_host[i];\n    }\n\n    cudaDeviceSynchronize();\n    cudaMemcpy(res_from_gpu, res_device, nElement*sizeof(double), cudaMemcpyDeviceToHost); \n\n    for(int i = 0; i < nElement; i++){\n        printf(\"%lf %lf\\n\", res_host[i], res_from_gpu[i]);\n        if(res_host[i]!=res_from_gpu[i]){\n            printf(\"%d,ERROR!\\n\",i);\n            break;\n        }\n    }\n\n    cudaFree(a_device);\n    cudaFree(b_device);\n    cudaFree(res_device);\n    free(a_host);\n    free(b_host);\n    free(res_from_gpu);\n    free(res_host);\n    return 0;\n}\n```\n\n## 3.4 åˆè¯†çº¿ç¨‹\n\n![img](CUDA/4.png)\n\né¦–å…ˆè¦æ˜ç™½ï¼Œä¸€ä¸ªkernelå¯¹åº”ä¸€ä¸ªGridï¼Œä¸€ä¸ªGridé‡Œé¢æœ‰å¾ˆå¤šå—ï¼Œæ¯ä¸ªå—åˆå¯ä»¥åŒ…å«è®¸å¤šçº¿ç¨‹\n\nçº¿ç¨‹å—å†…éƒ¨çº¿ç¨‹ä¹‹é—´å¯ä»¥å®ç°**åŒæ­¥**å’Œ**å…±äº«å†…å­˜**ï¼Œä¸åŒçº¿ç¨‹å—ä¹‹é—´æ˜¯<u>ç‰©ç†éš”ç¦»</u>çš„\n\n`gridDim.x`ã€`gridDim.y`ã€`gridDim.z`åˆ†åˆ«è¡¨ç¤º**Grid**å„ä¸ªç»´åº¦çš„å¤§å°\n\n`blockDim.x`ã€`blockDim.y`ã€`blockDim.z`åˆ†åˆ«è¡¨ç¤º**çº¿ç¨‹å—**ä¸­å„ä¸ªç»´åº¦çš„å¤§å°\n\n`blockIdx.x`ã€`blockIdx.y`ã€`blockIdx.z`åˆ†åˆ«è¡¨ç¤º**å½“å‰çº¿ç¨‹å—æ‰€å¤„çš„çº¿ç¨‹æ ¼çš„åæ ‡ä½ç½®**\n\n`threadIdx.x`ã€`threadIdx.y`ã€`threadIdx.z`åˆ†åˆ«è¡¨ç¤º**å½“å‰çº¿ç¨‹æ‰€å¤„çš„çº¿ç¨‹å—çš„åæ ‡ä½ç½®**\n\n```cpp\ndim3 grid(1,1,1);\ndim3 block(1,1,1);\nkernel<<<grid, block>>>();\n```\n\n**æ³¨æ„ï¼šä¸€ä¸ªå—é‡Œçš„çº¿ç¨‹æœ€å¤§ä¸º<u>1024</u>**ï¼Œgridçš„ç»´åº¦ï¼ˆblockçš„å—æ•°ï¼‰å¾ˆå¤§ï¼Œæš‚æ—¶å¯ä»¥ä¸è€ƒè™‘\n\nä¸€ç»´äºŒç»´ç¤ºæ„å›¾å¦‚ä¸‹ï¼Œä¸‰ç»´å¯è‡ªè¡Œæ¨\n\n![img](CUDA/1-1723297430375-3.png)\n\n------\n\n![img](CUDA/cuda_thread.png)\n\næ‰€æœ‰CUDAæ ¸å‡½æ•°çš„å¯åŠ¨éƒ½æ˜¯å¼‚æ­¥çš„ã€‚\n\n## 3.5 æ ¸å‡½æ•°\n\n- `__global__`ï¼šè®¾å¤‡ç«¯è¿è¡Œï¼Œå…¨å±€ï¼ˆä¸»æœºç«¯ã€è®¾å¤‡ç«¯ï¼‰éƒ½å¯ä»¥è°ƒç”¨ï¼Œ**è¿”å›ç±»å‹å¿…é¡»æ˜¯void**\n- `__device__`ï¼šè®¾å¤‡ç«¯è¿è¡Œ\n- `__host__`ï¼šå¿½ç•¥ï¼Œä¸åŠ å…³é”®è¯é»˜è®¤å³è¿™ä¸ª\n\næœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯`__device__`å’Œ`__host__`åŒæ—¶å­˜åœ¨ï¼Œè¿™æ ·çš„è¯CPUå’ŒGPUå°±å¯ä»¥éƒ½è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å­˜åœ¨è¿”å›å€¼\n\nåº•å±‚å®ç°æ˜¯ç¼–è¯‘å™¨ç¼–è¯‘å‡ºäº†ä¸¤ä»½åŠŸèƒ½ç›¸åŒï¼Œè°ƒç”¨å¯¹è±¡ä¸åŒçš„ä»£ç \n\n```cpp\n#include <stdio.h>\n__device__ __host__ int func(int a, int b){\n    return a + b;\n}\n__global__ void kernel(){\n    printf(\"GPU:%d\\n\",func(1,1));\n}\nint main(){\n\n    printf(\"CPU:%d\\n\",func(1,1));\n    dim3 grid(1,1,1);\n    dim3 block(1,1,1);\n    kernel<<<grid,block>>>();\n    cudaDeviceSynchronize();\n    return 0;\n}\n```\n\nKernelæ ¸å‡½æ•°ç¼–å†™æœ‰ä»¥ä¸‹é™åˆ¶\n\n1. åªèƒ½è®¿é—®è®¾å¤‡å†…å­˜\n2. å¿…é¡»æœ‰voidè¿”å›ç±»å‹\n3. ä¸æ”¯æŒå¯å˜æ•°é‡çš„å‚æ•°\n4. **ä¸æ”¯æŒé™æ€å˜é‡**\n5. æ˜¾ç¤ºå¼‚æ­¥è¡Œä¸º\n\n## 3.6 é”™è¯¯å¤„ç†\n\n```cpp\n#define CHECK(call)\\\n{\\\n  const cudaError_t error=call;\\\n  if(error!=cudaSuccess)\\\n  {\\\n      printf(\"ERROR: %s:%d,\",__FILE__,__LINE__);\\\n      printf(\"code:%d,reason:%s\\n\",error,cudaGetErrorString(error));\\\n      exit(1);\\\n  }\\\n}\n```\n\né€šè¿‡è¿™ä¸ªå®å®šä¹‰å°±å¯ä»¥è¿›è¡Œæ£€æŸ¥é”™è¯¯\n\n```CPP\n CHECK(cudaMalloc((float**)&a_d,nByte));\n```\n\n## 3.7 è®¡æ—¶\n\n### 3.7.1 CPUè®¡æ—¶æ³•\n\n```cpp\n#include <sys/time.h>\ndouble cpuSecond()\n{\n  struct timeval tp;\n  gettimeofday(&tp,NULL);\n  return ((double)tp.tv_sec + (double)tp.tv_usec*1e-6);\n}\n```\n\nä½¿ç”¨è¿™ä¸ªæ–¹æ³•è®¡ç®—å¾—å‡ºçš„æ—¶é—´æ¯”GPUè®¡ç®—è¿è¡Œçš„æ—¶é—´è¦é•¿\n\nåŸå› ï¼š\n\n- ä¸»æœºè°ƒç”¨æ ¸å‡½æ•°éœ€è¦æ—¶é—´\n- ä¸»æœºåŒæ­¥å‡½æ•°éœ€è¦æ—¶é—´\n\n### 3.7.2 nvprof\n\nnvprofæ˜¯åˆ†æå·¥å…·ï¼Œå¯ä»¥å¾ˆç›´è§‚çš„è®¡ç®—å‡ºæ•´ä¸ªè¿‡ç¨‹æ—¶é—´\n\n```bash\nnvprof [args] <application>\n```\n\n![image-20240811115225538](CUDA/image-20240811115225538.png)\n\nå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹å†…å®¹\n\n```\n======== Warning: nvprof is not supported on devices with compute capability 8.0 and higher.\n                  Use NVIDIA Nsight Systems for GPU tracing and CPU sampling and NVIDIA Nsight Compute for GPU profiling.\n                  Refer https://developer.nvidia.com/tools-overview for more details.\n```\n\nå…¶å®å°±æ˜¯è¯´nvprofå·¥å…·å¤ªè€äº†ï¼Œè®©ä½¿ç”¨`NVIDIA Nsight Systems`\n\nå…·ä½“å‚è§ï¼š[https://zhuanlan.zhihu.com/p/666242337](https://zhuanlan.zhihu.com/p/666242337)\n\n\n\n","tags":["è¶…ç®—"]},{"title":"æ•™åŠ¡ç³»ç»Ÿé€‰è¯¾è„šæœ¬(æ­£æ–¹-urp)","url":"/2022/02/05/æ•™åŠ¡ç³»ç»Ÿé€‰è¯¾è„šæœ¬æ­£æ–¹-urp/","content":"\nå…±ä¸‰ä¸ªè„šæœ¬ï¼Œä¸€ä¸ªurpã€ä¸€ä¸ªæ­£æ–¹æ•™åŠ¡ã€ä¸€ä¸ªè¥¿å—çŸ³æ²¹å¤§å­¦æ–°ç‰ˆæ•™åŠ¡ï¼Œä»£ç éƒ½å¤§åŒå°å¼‚\n\n# urpæ•™åŠ¡ç³»ç»Ÿ\n\nç¬¬ä¸€æ¬¡å†™çˆ¬è™«ç›¸å…³çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å†™UIç•Œé¢ï¼Œè¿‡äºæ½¦è‰ï¼Œä½†åŠŸèƒ½æ²¡é—®é¢˜ï¼Œä½¿ç”¨tkinterå®ç°çš„UIç•Œé¢\n\n```python\nimport time\nimport tkinter.messagebox as messagebox\nimport tkinter as tk\nimport random\nimport winsound\nimport requests\nfrom PIL import Image, ImageTk\nimport threading\nimport os\nfrom lxml import etree\n\nheaders = {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:104.0) Gecko/20100101 Firefox/104.0',\n    }\ncookies = {}\nurp_url = '1'\nthread_class_flag = True #é€‰è¯¾çº¿ç¨‹æ ‡å¿—\nclass_inf = '2'\nclass LoginWindow:\n    def __init__(self):\n        self.window = tk.Tk()\n        self.window.title(\"ç™»å½•\")\n        self.window.geometry(\"300x200\")\n        self.window.resizable(0,0)\n        self.window.iconbitmap('ic.ico')\n        start_url = set_urp_url()\n        self.username_label = tk.Label(self.window, text=\"å½“å‰ç™»å½•ç½‘å€ï¼š\" + urp_url)\n        self.username_label.place(x=30, y=0)\n        # ç”¨æˆ·åè¾“å…¥æ¡†\n        self.username_label = tk.Label(self.window, text=\"ç”¨æˆ·åï¼š\")\n        self.username_label.place(x=50, y=30)\n        self.username_entry = tk.Entry(self.window, width=20)\n        self.username_entry.place(x=110, y=30)\n\n        # å¯†ç è¾“å…¥æ¡†\n        self.password_label = tk.Label(self.window, text=\"å¯†ç ï¼š\")\n        self.password_label.place(x=50, y=70)\n        self.password_entry = tk.Entry(self.window, width=20)\n        self.password_entry.place(x=110, y=70)\n\n        # éªŒè¯ç è¾“å…¥æ¡†\n        self.verify_label = tk.Label(self.window, text=\"éªŒè¯ç ï¼š\")\n        self.verify_label.place(x=50, y=110)\n        self.verify_entry = tk.Entry(self.window, width=10)\n        self.verify_entry.place(x=110, y=110)\n\n        def on_enter(event):\n            event.widget.tk_focusNext().focus()\n        def on_enter_code(event):\n            self.login()\n        #ç»‘å®šäº‹ä»¶ï¼Œå›è½¦æ¢è¾“å…¥æ¡†\n        self.username_entry.bind(\"<Return>\",on_enter)\n        self.password_entry.bind(\"<Return>\",on_enter)\n        self.verify_entry.bind(\"<Return>\",on_enter_code)\n        # éªŒè¯ç å›¾ç‰‡\n        def refresh_code():\n            start_url.getcode()\n            self.verify_image = Image.open(\"code.png\")\n            self.verify_image = ImageTk.PhotoImage(self.verify_image)\n            self.verify_button.config(image=self.verify_image)\n        start_url.getcode()\n        self.verify_image = Image.open(\"code.png\")\n        self.verify_image = ImageTk.PhotoImage(self.verify_image)\n        self.verify_button = tk.Button(self.window, command=refresh_code)\n        self.verify_button.config(image=self.verify_image)\n        self.verify_button.place(x=190, y=110)\n\n        # ç™»å½•æŒ‰é’®\n        self.login_button = tk.Button(self.window, width=10, text=\"ç™»å½•\", command=self.login)\n        self.login_button.place(x=120, y=150)\n\n        try:\n            with open(\"user.txt\", \"r\") as file:\n                lines = file.readlines()\n                if len(lines) >= 1:\n                    self.username_entry.insert(0, lines[0].strip())  # å¡«å……ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†\n                if len(lines) >= 2:\n                    self.password_entry.insert(0, lines[1].strip())  # å¡«å……ç¬¬äºŒä¸ªè¾“å…¥æ¡†\n        except FileNotFoundError:\n            print(\"æ‰¾ä¸åˆ°user.txtæ–‡ä»¶\")\n        self.window.mainloop()\n\n    def login(self):\n        url = urp_url + '/loginAction.do'\n        print(url)\n        while True:\n            data = {\n                'zjh1': '',\n                'tips': '',\n                'lx': '',\n                'evalue': '',\n                'eflag': '',\n                'fs': '',\n                'dzslh': '',\n                'zjh': self.username_entry.get(),\n                'mm': self.password_entry.get(),\n                'v_yzm': self.verify_entry.get(),\n            }\n\n            print(\"ç”¨æˆ·åï¼š\", data[\"zjh\"])\n            print(\"å¯†ç ï¼š\", data['mm'])\n            print(\"éªŒè¯ç ï¼š\", data['v_yzm'])\n            try:\n                response = requests.session().post(url=url, headers=headers, cookies=cookies, data=data, timeout=90).text\n                tree = etree.HTML(response)\n                login_staut = tree.xpath('//head/title/text()')[0]\n                print(login_staut)\n                if login_staut != 'å­¦åˆ†åˆ¶ç»¼åˆæ•™åŠ¡':\n                    login_staut = tree.xpath('//td[@class=\"errorTop\"]/strong/font/text()')[0]\n                    print(login_staut)\n                    messagebox.showinfo('é”™è¯¯',login_staut)\n                    raise Exception\n                break\n            except:\n                return\n        while True:\n            try:\n                requests.get(urp_url + '/xkAction.do', headers=headers, cookies=cookies, timeout=90)\n                break\n            except:\n                return\n        self.window.destroy()\n\n        # æ‰“å¼€\"user.txt\"æ–‡ä»¶ä»¥å†™å…¥æ¨¡å¼\n        with open(\"user.txt\", \"w\") as file:\n            file.write(data['zjh'] + \"\\n\")\n            file.write(data['mm'] + \"\\n\")\n        print(\"å·²å°†æ–‡æœ¬å†™å…¥user.txtæ–‡ä»¶ã€‚\")\n        menu(data['zjh'])\n\nclass menu:\n    def __init__(self,user):\n        root = tk.Tk()\n        root.title(\"å½“å‰ç”¨æˆ·ï¼š\"+user)\n        root.geometry(\"400x300\")  # è®¾ç½®çª—å£å¤§å°\n        root.resizable(0, 0)\n        root.iconbitmap('ic.ico')\n        # æ·»åŠ æ ‡é¢˜\n        lbl_title = tk.Label(root, text=\"urp TOOL\", font=(\"Arial\", 20))\n        lbl_title.pack(pady=10)\n\n        # æ·»åŠ æŒ‰é’®\n        def class_table():\n            url = urp_url + '/xkAction.do?actionType=6'\n            response = requests.get(url, headers=headers, cookies=cookies)\n            with open(\"cx.html\", 'wb') as fp:\n                fp.write(response.content)\n            os.system('cx.html')\n        btn_query = tk.Button(root, text=\"æŸ¥è¯¢è¯¾è¡¨\", width=15, height=2,command=class_table)\n        btn_query.pack(pady=5)\n\n        def select_class():\n            root.withdraw()\n            class_window = tk.Toplevel(root)\n            class_window.title(\"é€‰è¯¾:\"+user)\n            class_window.geometry(\"355x460\")\n            class_window.resizable(0, 0)\n            class_window.iconbitmap(\"ic.ico\")\n            def closing():\n                root.deiconify()\n                class_window.destroy()\n            class_window.protocol('WM_DELETE_WINDOW',closing)\n            label1 = tk.Label(class_window,text = \"è¯¾ç¨‹å·\")\n            label1.grid(row=0,column=0)\n            entry1 = tk.Entry(class_window)\n            entry1.grid(row=0,column=1)\n            label1 = tk.Label(class_window, text=\"è¯¾åºå·\")\n            label1.grid(row=1, column=0)\n            entry2 = tk.Entry(class_window)\n            entry2.grid(row=1, column=1)\n            def add_class():\n                input1 = entry1.get()\n                input2 = entry2.get()\n                if not (input1 == '' and input2==''):\n                    classbox.insert(tk.END, f\"{input1},{input2}\")\n            def delete_selected_class():\n                selected_class = classbox.curselection()\n                if selected_class:\n                    classbox.delete(selected_class)\n            button1 = tk.Button(class_window,text='æ·»åŠ è¯¾ç¨‹',command=add_class)\n            button1.grid(row=0,column=2)\n            button2 = tk.Button(class_window, text='åˆ é™¤è¯¾ç¨‹', command=delete_selected_class)\n            button2.grid(row=1, column=2)\n            classbox = tk.Listbox(class_window,width=50, height=5)\n            classbox.grid(row=2,column=0,columnspan=3)\n            try:\n                for line in open('kc.txt', 'r'):\n                    line = line.rstrip('\\n').split(\" \")\n                    classbox.insert(tk.END,f\"{line[0]},{line[1]}\")\n            except:\n                messagebox.showinfo(\"WARING\",\"æ£€æµ‹åˆ°ç¼ºå°‘è¯¾ç¨‹æ–‡ä»¶ï¼Œå¯æ‰‹åŠ¨æ·»åŠ è¯¾ç¨‹\")\n                class_window.quit()\n\n            def selectthread():\n                len_class = classbox.size()\n                i = 0\n                global thread_class_flag\n                while len_class !=0 and thread_class_flag:\n                    i = i % len_class\n                    kcid = classbox.get(i).split(',')[0]\n                    kcnum = classbox.get(i).split(',')[1]\n                    print(kcid,kcnum)\n                    url = urp_url + '/xkAction.do'\n                    da = {}\n                    if class_inf == '5':\n                        da = {\n                            'kch': kcid,\n                            'cxkxh': kcnum,\n                            'kcm': \"\",\n                            'skjs': \"\",\n                            'kkxsjc': \"\",\n                            'skxq': \"\",\n                            'skjc': \"\",\n                            'pageNumber': \"-2\",\n                            'preActionType': \"3\",\n                            'actionType': \"5\",\n                        }\n                    elif class_inf == '2':\n                        da = {\n                            \"jhxn\": \"\",\n                            \"kcsxdm\": \"\",\n                            \"kch\": kcid,\n                            \"cxkxh\": kcnum,\n                            \"actionType\": \"2\",\n                            \"oper2\": \"gl\",\n                            \"pageNumber\": \"-1\"\n                        }\n                    while True:\n                        try:\n                            st = time.time()\n                            re = requests.post(urp_url + '/xkAction.do', headers=headers, cookies=cookies, data=da, timeout=90)\n                            cost_time = time.time()-st\n                            urp_label.config(text=urp_url+\" \"+f\"å»¶æ—¶: {cost_time:.3f} ç§’\",fg=\"blue\")\n                            break\n                        except:\n                            return\n\n                    data = {\n                        'kcId': kcid + '_' + kcnum,\n                        'preActionType': class_inf,\n                        'actionType': '9',\n                    }\n                    while True:\n                        try:\n                            st = time.time()\n                            response = requests.post(url, headers=headers, cookies=cookies, data=data, timeout=90).text\n                            cost_time = time.time() - st\n                            urp_label.config(text=urp_url + \" \" + f\"å»¶æ—¶: {cost_time:.3f} ç§’\", fg=\"blue\")\n                            break\n                        except:\n                            return\n\n                    try:\n                        tree = etree.HTML(response)\n                        ret = tree.xpath('//strong/font/text()')\n                        status_box.insert(tk.END, str(i+1)+\":\"+ret[0])\n                        status_box.yview_moveto(1.0)\n                        class_window.update()\n                        if \"æ—¶é—´å†²çª\" in ret[0] or \"æˆåŠŸ\" in ret[0] or \"å·²ç»é€‰æ‹©\" in ret[0]:\n                            print(ret[0])\n                            classbox.delete(i)\n                            len_class -= 1\n                            if \"æˆåŠŸ\" in ret[0]:\n                                try:\n                                    winsound.PlaySound(\"succeed.wav\", winsound.SND_ASYNC)\n                                except:\n                                    print(\"æ‰¾ä¸åˆ°éŸ³é¢‘\")\n\n                    except:\n                        print(\"æš‚æ— è¯¾ç¨‹ä¿¡æ¯ï¼Œè¯·ç¨åé‡è¯•\")\n                        status_box.insert(tk.END, str(i+1)+\":\"+\"æš‚æ— è¯¾ç¨‹ä¿¡æ¯ï¼Œè¯·ç¨åé‡è¯•\")\n                        status_box.yview_moveto(1.0)\n                        class_window.update()\n                    i += 1\n                    if delay_slider.get()!=0:\n                        delay_time = delay_slider.get()+random.uniform(0, 2)-random.uniform(0,1.5)\n                        delay_time = max(0,delay_time)\n                        print(\"å»¶è¿Ÿ:\",round(delay_time,2),\"s\")\n                        status_box.insert(tk.END, \"å»¶è¿Ÿï¼š\"+str(delay_time)+\"s\")\n                        status_box.yview_moveto(1.0)\n                        class_window.update()\n                        time.sleep(delay_time)\n\n                if len_class==0:\n                    button4.config(text=\"å¼€å§‹é€‰è¯¾\")\n                    urp_label.config(text=urp_url, fg='black')\n                    status_box.insert(tk.END,\"************é€‰è¯¾ä»»åŠ¡å®Œæˆ************\")\n                if not thread_class_flag:\n                    status_box.insert(tk.END, \"é€‰è¯¾å·²æš‚åœï¼Œç­‰å¾…æœåŠ¡å™¨å“åº”...\")\n                    status_box.see(tk.END)\n                    button4.config(state=tk.NORMAL)\n                    urp_label.config(text=urp_url,fg='black')\n\n            def Thread_class():\n                global thread_class_flag\n                thread = threading.Thread(target=selectthread)\n                if button4.cget(\"text\") == \"å¼€å§‹é€‰è¯¾\":\n                    thread_class_flag = True\n                    status_box.insert(tk.END,\"å¼€å§‹é€‰è¯¾ï¼Œç­‰å¾…æœåŠ¡å™¨å“åº”...\")\n                    status_box.see(tk.END)\n                    button4.config(text=\"æš‚åœé€‰è¯¾\")\n                    thread.start()\n                else:\n                    button4.config(text=\"å¼€å§‹é€‰è¯¾\",state=tk.DISABLED)\n                    thread_class_flag = False\n\n            button4 = tk.Button(class_window, width=12,text='å¼€å§‹é€‰è¯¾',command=Thread_class)\n            button4.grid(row=4, column=1, columnspan=2)\n\n            delay_slider = tk.Scale(class_window, from_=0.0, to=5.0, resolution=0.01, orient=\"horizontal\", length=200)\n            delay_slider.grid(row=5,column=0,columnspan=3)\n            def change_class():\n                global class_inf\n                if class_inf == '2':\n                    class_inf = '5'\n                    class_label.config(text='è¯¾ç¨‹å±æ€§ï¼šè‡ªç”±é€‰æ‹©')\n                elif class_inf == '5':\n                    class_inf='2'\n                    class_label.config(text='è¯¾ç¨‹å±æ€§ï¼šæ–¹æ¡ˆè¯¾ç¨‹')\n            button5 = tk.Button(class_window, width=10, text='åˆ‡æ¢å±æ€§', command=change_class)\n            button5.grid(row=4, column=0, columnspan=2)\n\n            status_box = tk.Listbox(class_window, width=50)\n            status_box.grid(row=3, column=0, columnspan=3)\n\n            class_label = tk.Label(class_window, text=\"è¯¾ç¨‹å±æ€§ï¼šæ–¹æ¡ˆè¯¾ç¨‹\" )\n            class_label.grid(row=6, column=1)\n            urp_label = tk.Label(class_window, text=urp_url)\n            urp_label.grid(row=7,column=0,columnspan=3)\n\n        btn_quick_select = tk.Button(root, text=\"å¿«é€Ÿé€‰è¯¾\", width=15, height=2,command=select_class)\n        btn_quick_select.pack(pady=5)\n\n        def jxpg():\n            print(\"\\næ­£åœ¨è¯»å–æ•™å­¦è¯„ä¼°ç•Œé¢\\n\")\n            resp = requests.get(url=urp_url + \"/jxpgXsAction.do?oper=listWj\", headers=headers, cookies=cookies)\n            tree = etree.HTML(resp.text)\n            list = tree.xpath('//body/form/table/tr/td/table/tr/td/img[@title=\"è¯„ä¼°\"]/@name')\n            if len(list)==0:\n                messagebox.showinfo(\"æé†’\",\"å½“å‰å¯è¯„ä¼°æ•°ç›®ä¸º0ï¼Œæ­£åœ¨è¿”å›èœå•\")\n            else:\n                new_window = tk.Toplevel(root)\n                new_window.title(\"è¯„æ•™\")\n                new_window.geometry(\"400x500\")\n                new_window.resizable(0, 0)\n                risk_box = tk.Listbox(new_window, width=50)\n                risk_box.pack()\n                status_box = tk.Listbox(new_window, width=50)\n                status_box.pack()\n                for i in list:\n                    j=i.split(\"#@\")\n                    risk_box.insert(tk.END,\"æ•™å¸ˆå§“åï¼š\"+j[2]+\"    è¯¾ç¨‹åï¼š\"+j[4])\n                # print(list)\n                print(\"å…± \", len(list), \" ä¸ªè¯„ä¼°ä»»åŠ¡\")\n                risk_count = tk.Label(new_window, text=\"å…± \"+ str(len(list))+ \" ä¸ªè¯„ä¼°ä»»åŠ¡\")\n                risk_count.pack(pady=10)\n\n                def start_jxpg():\n                    for item in list:\n                        info = item.split('#@')\n                        print(info)\n                        data_flag = {\n                            'wjbm': info[0],\n                            'bpr': info[1],\n                            'pgnr': info[5],\n                            'oper': 'wjShow',\n                            \"wjbz\": \"null\",\n                            \"pageSize\": \"20\",\n                            \"page\": \"1\",\n                            \"currentPage\": \"1\",\n                            \"pageNo\": \"\",\n                        }\n                        data = {\n                            \"wjbm\": info[0],\n                            \"bpr\": info[1],\n                            \"pgnr\": info[5],\n                            \"xumanyzg\": 'zg',\n                            \"wjbz\": \"\",\n                            \"0000000257\": \"40_0.96\",\n                            \"0000000258\": \"12_0.96\",\n                            \"0000000259\": \"10_0.96\",\n                            \"0000000260\": \"8_0.96\",\n                            \"0000000261\": \"8_0.96\",\n                            \"0000000262\": \"5_0.96\",\n                            \"0000000263\": \"5_0.96\",\n                            \"0000000264\": \"4_0.96\",\n                            \"0000000265\": \"4_0.96\",\n                            \"0000000266\": \"4_0.96\",\n                            \"0000000271\": \"0_0.96\",\n                            \"0000000272\": \"0_0.2\",\n                            \"0000000273\": \"0_0.96\",\n                            \"zgpj\": \"å¥½\"\n                        }\n                        requests.post(urp_url + '/jxpgXsAction.do', cookies=cookies, data=data_flag)\n                        res = requests.post(url=urp_url + \"/jxpgXsAction.do?oper=wjpg\", cookies=cookies, data=data)\n                        tree = etree.HTML(res.text)\n                        status = tree.xpath('//script/text()')[0].split('\"')[1]\n                        status_box.insert(tk.END,status)\n                btn_query = tk.Button(new_window, text=\"å¼€å§‹è¯„ä¼°\", width=15, height=2, command=start_jxpg)\n                btn_query.pack(pady=5)\n        btn_eval = tk.Button(root, text=\"ä¸€é”®è¯„æ•™\", width=15, height=2,command=jxpg)\n        btn_eval.pack(pady=5)\n\n#é€€è¯¾\n        def cancel_class():\n            root.withdraw()\n            cancle_window = tk.Toplevel(root)\n            cancle_window.title(\"é€€è¯¾\")\n            cancle_window.geometry(\"355x260\")\n            cancle_window.resizable(0, 0)\n            cancle_window.iconbitmap(\"ic.ico\")\n            def closing():\n                root.deiconify()\n                cancle_window.destroy()\n            cancle_window.protocol('WM_DELETE_WINDOW', closing)\n            lable1 = tk.Label(cancle_window,text=\"è¯·é€‰æ‹©æ‰€éœ€é€€è¯¾è¯¾ç¨‹\")\n            lable1.grid(row=0,column=1,columnspan=3)\n            cancle_box = tk.Listbox(cancle_window,width=50,height=10)\n            cancle_box.grid(row=1,column=1,columnspan=3)\n            def class_input_thread():\n                cancle_response = requests.get(url=urp_url+\"/xkAction.do?actionType=6\",cookies=cookies,headers=headers)\n                tree = etree.HTML(cancle_response.text)\n                cancle_list = tree.xpath('//table/tr[count(td) > 15]/td[position()=2 or position()=3 or position()=4 or position()=8]/text()')\n                for row in range(0,len(cancle_list),4):\n                    cancle_box.insert(tk.END,cancle_list[row][4:]+\",\"+cancle_list[row+1][4:]+\",\"+cancle_list[row+2][4:]+\",\"+cancle_list[row+3][4:])\n            def thread_class():\n                thread = threading.Thread(target=class_input_thread)\n                thread.start()\n            def ACK_cancle():\n                select_box_index = cancle_box.curselection()\n                if select_box_index:\n                    ACK_class = cancle_box.get(select_box_index[0]).split(',')\n                    requests.get(url=urp_url+\"/xkAction.do?actionType=10&kcId=\"+ACK_class[0],cookies=cookies,headers=headers)\n                    messagebox.showinfo(\"å®Œæˆ\",message=\"è¯·æŒ‰ç¡®è®¤æ ¡éªŒé€€è¯¾ç»“æœ\")\n                    cancle_box.delete(0,\"end\")\n                    thread_class()\n                else:\n                    messagebox.showwarning(\"è­¦å‘Š\",\"è¯·å…ˆé€‰å®šè¯¾ç¨‹\")\n            thread_class()\n            cancle_button = tk.Button(cancle_window,text=\"ç¡®è®¤é€€è¯¾\",command=ACK_cancle)\n            cancle_button.grid(row=2,column=1,columnspan=3)\n        btn_drop = tk.Button(root, text=\"é€€è¯¾\", width=15, height=2,command=cancel_class)\n        btn_drop.pack(pady=5)\n\n        root.mainloop()\n\n\nclass set_urp_url:\n    urp_url_list = [\"http://10.28.63.116:8081\",\n                    \"http://10.28.63.111:9001\",\n                    \"http://10.28.63.111:9002\",\n                    ]\n    URL_flag = True\n\n    def __init__(self):\n        url_count = len(self.urp_url_list)\n\n        def xzURLthread(i):\n            try:\n                response = requests.get(self.urp_url_list[int(i)], timeout=90)\n            except:\n                return\n            if not self.URL_flag:\n                return\n            global urp_url\n            global cookies\n            urp_url = self.urp_url_list[int(i)]\n            cookies = response.cookies.get_dict()\n            self.URL_flag = False\n\n            lock_url.set()\n\n        threads = []\n        lock_url = threading.Event()\n        for i in range(0, url_count):\n            t = threading.Thread(target=xzURLthread, args=[i])\n            threads.append(t)\n        for thread in threads:\n            thread.start()\n        lock_url.wait()\n        print(urp_url)\n\n    def getcode(self):\n        code_url = urp_url + '/validateCodeAction.do?random=0.5925328096959378'\n        mysession = requests.session()\n        response = mysession.get(code_url, headers=headers, cookies=cookies)\n        content = response.content\n        with open('code.png', 'wb') as fp:\n            fp.write(content)\n\n\nif __name__=='__main__':\n    try:\n                LoginWindow()\n    except:\n        messagebox.showinfo('Error','å‘ç”Ÿäº†æœªçŸ¥é”™è¯¯ï¼Œè¯·æ£€æµ‹ç½‘ç»œæ˜¯å¦è¿æ¥')\n```\n\n# æ­£æ–¹æ•™åŠ¡\n\nè¿™æ˜¯åšæ¥å¸®äººæŠ¢è¯¾çš„,æ²¡æœ‰è¿›ä¸€æ­¥å®Œå–„\n\n```python\nimport threading\nimport requests\nimport os\nfrom lxml import etree\nclass_dict = []\ndef search_class(name,id,header,header_oi,class_name,numb):\n    response = requests.get(url='http://112.45.152.8:30008/xf_xsqxxxk.aspx?xh='+id+'&xm='+name+'&gnmkdm=N121203',headers=header)\n    value = searchcode(response)\n    data = {\n        '__EVENTTARGET': '',\n        '__EVENTARGUMENT': '',\n        '__LASTFOCUS': '',\n        '__VIEWSTATE': value,\n        '__VIEWSTATEGENERATOR': '4E92E216',\n        'ddl_kcxz': '',\n        'ddl_ywyl': 'æ— ',\n        'ddl_kcgs': '',\n        'ddl_sksj': '',\n        'ddl_xqbs': '1',\n        'TextBox1': class_name,\n        'Button2': 'ç¡®å®š',\n        'dpkcmcGrid$txtChoosePage': '1',\n        'dpkcmcGrid$txtPageSize': '150',\n    }\n    res = requests.post(url='http://112.45.152.8:30008/xf_xsqxxxk.aspx?xh=' + id + '&xm=' + name + '&gnmkdm=N121203', data=data, headers=header_oi)\n    data['__VIEWSTATE'] = searchcode(res)\n    data['kcmcGrid$ctl02$xk'] = 'on'\n    data['kcmcGrid$ctl02$jc'] = 'on'\n    data['Button1'] = ['++æ+äº¤++']\n    del data['Button2']\n    res = requests.post(url='http://112.45.152.8:30008/xf_xsqxxxk.aspx?xh=' + id + '&xm=' + name + '&gnmkdm=N121203', data=data, headers=header_oi)\n    # print(res.text)\n    if res.status_code == 200:\n        print(res.status_code)\n        with open(\"cx\"+numb+\".html\", 'wb') as fp:\n            fp.write(res.content)\n        os.system(\"cx\"+numb+\".html\")\n        del class_dict[int(numb)]\n    return\n\ndef searchcode(response):\n    try:\n        tree = etree.HTML(response.text)\n        return tree.xpath('//input[@id=\"__VIEWSTATE\"]/@value')[0]\n    except:\n        print(\"è¯·æ£€æŸ¥cookieæ˜¯å¦æ­£ç¡®ï¼ï¼ï¼\")\n        exit()\n\n\ndef menu(name,id,cookie):\n    header ={\n        'Host': '112.45.152.8:30008',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/110.0',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8',\n        'Accept-Language': 'zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2',\n        'Accept-Encoding': 'gzip, deflate',\n        'Connection': 'keep-alive',\n        'Referer': 'http://112.45.152.8:30008/xs_main.aspx?xh='+id,\n        'Cookie': cookie,\n        'Upgrade-Insecure-Requests': '1',\n    }\n    nm = 'http://112.45.152.8:30008/xf_xsqxxxk.aspx?xh=' + id + '&xm=' + name + '&gnmkdm=N121203'\n    nm = nm.encode('utf-8')\n    header_oi ={\n        'Host': '112.45.152.8:30008',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv: 109.0) Gecko/20100101 Firefox/110.0',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8',\n        'Accept-Language': 'zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2',\n        'Accept-Encoding': 'gzip, deflate',\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Content-Length': '47574',\n        'Origin': 'http://112.45.152.8:30008',\n        'Connection': 'keep-alive',\n        'Referer': nm,\n        'Cookie': cookie,\n        'Upgrade-Insecure-Requests': '1',\n    }\n    while True:\n        class_dict.clear()\n        a = 0\n        for line in open('kc.txt', 'r', encoding='utf-8'):\n            line = line.rstrip('\\n')\n            class_dict.append(line)\n            a += 1\n        print(\"å…±\", a, \"ç§‘\\n\", class_dict)\n        p = input(\"\\nè¯·è¾“å…¥æ‰€éœ€åŠŸèƒ½ï¼š\\n1:é€‰å–\\n\")\n        if p == \"1\" : select(name,id,header,header_oi)\n\n\ndef select(name,id,header,header_oi):\n    i = 0\n    while len(class_dict) != 0:\n        class_thread = []\n        print(len(class_dict))\n        for item in class_dict:\n            class_thread.append(threading.Thread(target=search_class,args=(name,id,header,header_oi,item,str(i))))\n            i+=1\n        for thread in class_thread:\n            thread.start()\n        for thread in class_thread:\n            thread.join()\n    return\n\nif __name__=='__main__':\n    name = input(\"è¯·è¾“å…¥å§“åï¼š\")\n    id = input(\"è¯·è¾“å…¥å­¦å·ï¼š\")\n    cookie = input(\"è¯·è¾“å…¥cookieï¼š\")\n    menu(name,id,cookie)\n\n```\n\n# æ–°ç‰ˆæ•™åŠ¡ç³»ç»Ÿ\n\næš‚æ—¶åªå®ç°äº†é€‰è¯¾åŠŸèƒ½ï¼Œ\n\n![image-20240205200345870](æ•™åŠ¡ç³»ç»Ÿé€‰è¯¾è„šæœ¬æ­£æ–¹-urp/image-20240205200345870-1707136055615-1.png)\n\nç”±äºæ•™åŠ¡è¿˜åœ¨ä½¿ç”¨ï¼Œæš‚æ—¶ä¸è¿›è¡Œå¼€æºï¼Œæ€è·¯å’Œä¸Šè¿°ä¸¤ä¸ªéƒ½å¤§åŒå°å¼‚ï¼Œæœ‰å…´è¶£çš„uuå¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ã€‚\n","tags":["çˆ¬è™«"]},{"title":"é—®æµ·ä¸€å·SACAéšè®°","url":"/2022/02/05/é—®æµ·ä¸€å·SACAéšè®°/","content":"\n**ä¸»æ ¸å­˜å‚¨ç³»ç»Ÿï¼š**\n\n- ä¸€çº§æŒ‡ä»¤Cache 32KB\n- ä¸€çº§æ•°æ®Cache 32KB\n- äºŒçº§Cache 512KB\n\n**ä»æ ¸å­˜å‚¨ç³»ç»Ÿï¼š**\n\n- ä¸€ä¸ªæŒ‡ä»¤Cache 32KB\n- æ¯ä¸ªä»æ ¸æœ‰256KBæ•°æ®å­˜å‚¨ç©ºé—´ï¼ˆLDMï¼‰\n\n![img](é—®æµ·ä¸€å·SACAéšè®°/1685787598459-32ce2b53-4270-4d08-8615-840b5f1603ac.png)\n\nä»æ ¸ç§æœ‰å˜é‡ï¼š`_thread int a[100];`\n\n\n\n```cpp\næ··åˆé™æ€ç¼–è¯‘åŠé“¾æ¥\nswgcc -mhost master.c\nswgcc -mslave slave.c\nswgcc -mhybrid master.o slave.o -o a.out\n\næ··åˆåŠ¨æ€ç¼–è¯‘åŠé“¾æ¥\nswgcc -mhost -FPIC -c master.c\nswgcc -mslave -FPIC -c slave.c\nswgcc -mdynamic -shared master.o slave.o -o libmix.so\n\nmpiç¼–è¯‘\nmpicc -mhost mater.c\nmpicc -mslave slave.c\nmpicc -mhybrid master.o slave.o -o a.out\n-mhost\tç¼–è¯‘ä¸»æ ¸ä»£ç \n-mslave\tç¼–è¯‘ä»æ ¸ä»£ç \n-mhybrid/-mdynamic\té™æ€/åŠ¨æ€é“¾æ¥\n-msimd\tSIMDæ‰©å±•ç¼–ç¨‹æ¥å£\tï¼ˆå»ºè®®ä»æ ¸åŠ ï¼‰\n-mieee\tå…è®¸ä½¿ç”¨ç²¾ç¡®ç»“æœçš„ä»»ä½•æ“ä½œ\tï¼ˆä¸»æ ¸å¿…åŠ ï¼‰\n-faddress_align=n\tæ‰€æœ‰æ•°ç»„ã€å‘é‡ã€ç»“æ„ä½“æŒ‰ç…§é¦–åœ°å€ nBå¯¹é½\tä¸»æ ¸ï¼ˆn=32ï¼‰ä»æ ¸ï¼ˆn=64ï¼‰\n-mftz\tå‘ç”Ÿä¸‹æº¢æ—¶ï¼Œå°†çœŸé›¶å†™å…¥ç›®æ ‡å¯„å­˜å™¨ ï¼ˆå»ºè®®ä¸»æ ¸åŠ ï¼‰\n-O[0/1/2/3/s]\tä¼˜åŒ–çº§åˆ«\n-lm -lm_slave\tæä¾›é«˜æ€§èƒ½å¿«é€Ÿæ•°æ®åº“é“¾æ¥\tï¼ˆä¸»æ ¸-lmï¼Œä»æ ¸-lm_slaveï¼‰\n-g\tæ–¹ä¾¿gdbè°ƒè¯•\n-mfma\tå¯¹ä¹˜åŠ æ“ä½œåˆæˆä¸€æ¡æ“ä½œï¼Œå»ºè®®å¢åŠ \n```\n\n**è¯´æ˜ï¼š**\n\n-faddress_align=64å†…å­˜å¯¹é½ï¼ŒåŠ äº†è¿™ä¸ªç¼–è¯‘é€‰é¡¹åï¼Œ\n\nå°±æ— éœ€åœ¨å®šä¹‰æ•°ç»„æ—¶å€™åŠ `__attribute__ ((aligned(64)))`\n\n**ä¾‹å¦‚ï¼š**\n\n```\nint arr[16] __attribute__ ((aligned (64)))= {1,2,3,4,5,6,7,8,10,11,12,13,14,15}; \n```\n\n\n\nSIMDæ•°æ®å‘é‡åŒ–æ”¯æŒ512ä½\n\n```cpp\nCRTS_init();\n//ä»æ ¸çº¿ç¨‹åˆå§‹åŒ–\nathread_spawn();\n//ä»æ ¸çº¿ç¨‹å¯åŠ¨\nathread_join();\n//ä»æ ¸çº¿ç¨‹å›æ”¶\nathread_halt();\n//ä»æ ¸çº¿ç¨‹ç»ˆæ­¢\nCRTS_tid\t--ä»æ ¸å·ï¼ˆ0-63ï¼‰\nCRTS_rid\t--ä»æ ¸æ‰€åœ¨è¡Œï¼ˆ0-7ï¼‰\nCRTS_cid\t--ä»æ ¸æ‰€åœ¨åˆ—ï¼ˆ0-7ï¼‰\nCRTS_cgn\t--ä»æ ¸æ‰€åœ¨æ ¸ç»„å·ï¼ˆ0-5ï¼‰\nCRTS_spc_tid\t--ä»æ ¸ç°‡æ–¹å¼çš„é€»è¾‘ä»æ ¸å·ï¼ˆ0-63ï¼‰\nCRTS_spcn\t--ä»æ ¸ç°‡å·ï¼ˆ0-16ï¼‰\n\nCRTS_dma_iget(void *dst, void *src, int len, crts_rply_t *rply);\n//dstä»æ ¸å†…çš„åœ°å€,srcå…±äº«å†…å­˜çš„åœ°å€,len=i*sizeof(int)\nCRTS_dma_iget_stride(void *dst, void *src, int len, int bsize, int stride, crts_rply_t *rply);\n//ä¸»å­˜è·¨æ­¥è¯»å–ï¼Œè·¨æ­¥å¤§å°ä¸ºstride(4Bçš„æ•´æ•°å€)å³ä¸¤ä¸ªå‘é‡å—ä¹‹é—´çš„ç©ºéš™ï¼Œbsizeä¸ºè·¨æ­¥å‘é‡å—çš„å¤§å°\n\nCRTS_dma_wait_value(crts_rply_t *rply, int value);\n//å½“rplyçš„å€¼å¤§äºç­‰äºvalueæ—¶ï¼Œä»£è¡¨æ“ä½œå·²ç»å®Œæˆ\n    \nCRTS_dma_iput(void *dst, void *src, int len, crts_rply_t *rply);\n//dstä¸ºä¸»å­˜çš„åœ°å€ï¼Œsrcä¸ºå±€å­˜åœ°å€\nCRTS_dma_input_stride(void *dst, void *src, int len, int bsize, int stride, crts_rply_t *rply);\n//è·¨æ­¥\n```\n\n## ç¼–è¯‘\n\n![img](é—®æµ·ä¸€å·SACAéšè®°/1685699879442-3e5a6739-2f07-48fa-b74f-7a07ddf8b225.png)\n\n```cpp\nsw9gcc -mhost -c main.c\n\nsw9gcc -mslave -c slave.c\n\nsw9gcc -mhybrid main.o slave.o -o a.out\n```\n\n## ä½œä¸šæäº¤\n\n```\nbsub -I -q q_sw_expr -b -n 1 -cgsp 64 -host_stack 1024 -share_size 6000 test.exe\n```\n\n-  -I ç¨‹åºè¾“å‡ºæ‰“å°åˆ°ç»ˆç«¯ï¼Œç»ˆç«¯å…³é—­åˆ™ç¨‹åºåœæ­¢è¿è¡Œï¼Œè‹¥æƒ³å»æ‰è¯¥é¡¹ï¼Œåˆ™åŠ ä¸Š\"-o out.log\"ï¼Œè¾“å‡ºå†…å®¹ä¼šé‡å®šå‘åˆ°out.logæ–‡ä»¶ï¼Œç»ˆç«¯å…³é—­ç¨‹åºä¹Ÿä¸ä¼šåœæ­¢\n- -q ç¨‹åºæäº¤åˆ°q_sw_exprè®¡ç®—èŠ‚ç‚¹é˜Ÿåˆ—è¿è¡Œ\n- -n ç¨‹åºè¿è¡Œä½¿ç”¨çš„æ ¸ç»„æ•°ï¼Œæœ€å¥½æ˜¯4çš„å€æ•°ï¼ˆä¸€ä¸ªèŠ‚ç‚¹æœ‰4ä¸ªæ ¸ç»„ï¼‰\n- -b ä»æ ¸å‡½æ•°æ ˆå˜é‡æ”¾åœ¨ä»æ ¸å±€éƒ¨å­˜å‚¨ä¸Šï¼ˆå¿…é€‰ï¼‰\n- -cgsp ä»æ ¸çš„ä¸ªæ•°ï¼Œè®¾ç½®64\n- -host_stack æŒ‡å®šä¸»æ ¸æ ˆçš„ç©ºé—´å¤§å°ï¼Œé»˜è®¤8Mï¼Œä¸€èˆ¬è®¾ç½®128Mä»¥ä¸Š\n- -share_size æŒ‡å®šæ ¸ç»„çš„å…±äº«ç©ºé—´å¤§å°ï¼Œä¸€èˆ¬share_size+host_stack â‰¤7500 \n\n```cpp\nbjobs \n//æŸ¥çœ‹å½“å‰ä½œä¸šçŠ¶æ€å’Œä½œä¸šå·\n\nbkill ä½œä¸šå· \n//åœæ­¢ä½œä¸š\n\nqload -w \n//æŸ¥çœ‹å¯ç”¨è®¡ç®—é˜Ÿåˆ—å’Œå¯ç”¨èŠ‚ç‚¹\n```\n\n## ä¸¤çº§å¹¶è¡Œ\n\n![img](é—®æµ·ä¸€å·SACAéšè®°/1685700038922-317f4811-448c-41c9-9f52-18ae7ae9797c.png)\n\n## æ€§èƒ½åˆ†æ\n\nswprof\n\nä½¿ç”¨æ–¹æ³•ï¼šåœ¨bsubå‘½ä»¤ä¸­å¢åŠ `-swrunarg '-p'`\n\n![img](é—®æµ·ä¸€å·SACAéšè®°/1685700372900-61a89b72-655c-434c-8ef1-0a654eccd299.png)\n","tags":["è¶…ç®—"]},{"title":"SQLåŸºç¡€å­¦ä¹ ","url":"/2022/02/05/SQLåŸºç¡€å­¦ä¹ /","content":"\n# åŸºç¡€æŸ¥è¯¢\n\n```sql\nuse SCT --SCTæ•°æ®åº“\nselect C# from sc --ä»scè¡¨ä¸­æŸ¥è¯¢C#\nselect distinct C# from sc --ä»scè¡¨ä¸­æŸ¥è¯¢C#å¹¶ä¸”è¿‡æ»¤æ‰é‡å¤è¡Œ\nselect top 3 * from sc --ä»scè¡¨ä¸­æŸ¥è¯¢å‰ä¸‰è¡Œçš„æ•°æ®\nselect top 50 percent * from sc --ä»scè¡¨ä¸­æŸ¥è¯¢å‰50%çš„æ•°æ®\nselect s# as å­¦å·,score as åˆ†æ•° from sc --ä»scè¡¨æŸ¥è¯¢s#ä½œä¸ºâ€œå­¦å·â€è¾“å‡ºï¼Œscoreä½œä¸ºâ€œåˆ†æ•°â€è¾“å‡º\nselect s#,C#,Score*1.50 from sc --ä»scä¸­æŸ¥è¯¢s#,c#ï¼Œå’Œscoreçš„1.5å€ï¼Œæ³¨æ„æ­¤æ—¶scoreæ²¡æœ‰åˆ—å\nselect s#,C#,Score150 = score *1.50 from sc --æ­¤æ—¶score*1.50çš„åˆ—åä¸ºScore150\nselect * from sc where score>=60 --æŸ¥è¯¢scä¸­score>=60çš„å…ƒç»„\nselect * from sc where score>=60 and s#='123' --andæŸ¥è¯¢scä¸­score>=60å¹¶ä¸”s#ä¸º123çš„å…ƒç»„\nselect * from sc where score>=60 or score<=20 --oræŸ¥è¯¢\nselect * from sc where score between 20 and 60\nselect * from sc where score>=20 and score<=60 --ç­‰æ•ˆ\nselect Cname,Chours from sc where Cname in('æ•°æ®åº“','Cè¯­è¨€')\nselect Cname,Chours from sc where Cname not in('æ•°æ®åº“','Cè¯­è¨€')\nselect * from sc where sname like 'å¼ %' \nselect * from sc where sname not like 'å¼ %' --%ä»»æ„é•¿çš„ä»»æ„å­—ç¬¦,_ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œ[]æŒ‡å®šèŒƒå›´å†…çš„å•ä¸ªå­—ç¬¦ï¼Œå¦‚[a-f]æˆ–è€…[abfr]ï¼Œ[^]æŒ‡å®šä¸åœ¨èŒƒå›´å†…çš„å•ä¸ªå­—ç¬¦\nselect * from sc where sname is NULL --[not] iså¯¹ç©ºå€¼åˆ¤æ–­\n```\n\n\n\n```sql\nselect avg(sage) as å¹³å‡å¹´é¾„ from student where ssex = 'ç”·'\nâ— avg()ï¼šè¿”å›åˆ—çš„æ•°æ®å¹³å‡å€¼\nâ— sum()ï¼šè¿”å›åˆ—æ•°æ®çš„å’Œ\nâ— max()ï¼šè¿”å›åˆ—æ•°æ®ä¸­çš„æœ€å¤§å€¼\nâ— min()ï¼šè¿”å›åˆ—æ•°æ®ä¸­çš„æœ€å°å€¼\nâ— count()ï¼šè¿”å›æ•°æ®çš„ä¸ªæ•°\nuse SCT\nselect C#,avg(score) from SC\ngroup by C#\n--group by åé¢çš„å¿…é¡»æŒ‰ç…§å‰é¢ç­›é€‰çš„C#è¿›è¡Œåˆ†ç»„\nhaving avg(score)>=60\n--å¯¹group byè¿›è¡Œç­›é€‰\nSELECT s#,sname \nFROM student \nWHERE ssex='å¥³'\nORDER BY sname ASC --å‡åº\n--ORDER BY sname DESC é™åº\nSELECT student.sname, sc.c#, sc.score\nFROM student INNER JOIN sc ON student.s#=sc.s#\n\nä¹Ÿå¯ç”¨\nSELECT sname, sc.c#, sc.score\nFROM student,sc\nWHERE  student.s#=sc.s#\nselect * from subject\nleft join score --left joinè¡¨ç¤ºsubjectå…¨éƒ¨è¾“å‡ºï¼Œscoreå–äº¤é›†\nright join score --right join è¡¨ç¤ºscoreå…¨éƒ¨è¾“å‡ºï¼Œsubjectå–äº¤é›†\non subject.id = score.id\n```\n\n![img](SQLåŸºç¡€å­¦ä¹ /1680141783646-9338980a-9e78-456d-a219-ad3215ccffcc.png)![img](SQLåŸºç¡€å­¦ä¹ /1680141893719-2f9854d4-d7fa-4101-80fd-814543bb4399.png)![img](SQLåŸºç¡€å­¦ä¹ /1680141908016-0e173a0d-1daf-4850-9c53-65792838d1ec.png)\n\n```sql\nUNION --å¹¶\nEXCEPT --å·®\nINTERSECT --äº¤\n```\n\n# æ•°æ®åº“ã€è¡¨çš„æ“ä½œ\n\n### æ•°æ®åº“çš„åˆ›å»º\n\n```\ncreate database **DATABASE_NAME**\n```\n\n### åˆ é™¤æ•°æ®åº“\n\n```\ndrop database **DATABASE_NAME**\n```\n\n### è¡¨çš„åˆ›å»º\n\n```sql\ncreate table TABLE_NAME\n(\n  å±æ€§1 æ•°æ®ç±»å‹,\n  å±æ€§2 æ•°æ®ç±»å‹,\n)\n```\n\n### è¡¨çš„ä¿®æ”¹\n\n```sql\nalter table TABLE_NAME\n[\n  alter column å±æ€§ æ•°æ®ç±»å‹ --ä¿®æ”¹è¡¨å±æ€§çš„æ•°æ®ç±»å‹\n  add å±æ€§ æ•°æ®ç±»å‹ --æ–°å¢è¡¨å±æ€§\n  drop column å±æ€§ --åˆ é™¤è¡¨å±æ€§\n]\n```\n\n### æ·»åŠ å…ƒç»„\n\n```\ninsert into TABLE_NAME values('','','')\ninsert into TABLE_NAME(å±æ€§1,å±æ€§2,....) values('','',''...)\n```\n\n### ä¿®æ”¹è¡¨ä¸­æ•°æ®\n\n```sql\nupdate è¡¨åTABLE_NAME\n  set ssex='ç”·'\n  where sno = '10011'\n```\n\n### åˆ é™¤å…ƒç»„\n\nå¦‚æœä¸åŠ whereåˆ™åˆ é™¤å…¨éƒ¨å…ƒç»„\n\n```sql\ndelete è¡¨åTABLENAME\n  \twhere ssex='ç”·'\n```\n\n### not null\n\n```sql\nUSE SCT\nCREATE TABLE STUDENT\n( Sno   char(7) not null,\nSname   char(10), \nSFZ  char(18),\nSage tinyint )\n=============================\nUSE  SCT \nALTER TABLE student\nALTER COLUMN Sname char(10) not null\n```\n\n### **primary keyä¸»é”®çº¦æŸ**\n\n```sql\nUSE SCT\n  CREATE TABLE SC\n  ( Sno   char(7) ,\n    Cno   char(3), \n    Score tinyint,\n    Primary key (Sno,Cno)\n  ) \n================================\nUSE SCT\n  CREATE TABLE STUDENT1\n\t( Sno char(7) primary keyï¼Œ\n    Sname char(10), \n    SFZ char(18),\n\t  Sage tinyint\n  ) \n================================\nUSE  SCT\nALTER TABLE STUDENT1\nadd primary key(sno) --ä¸æŒ‡å®šçº¦æŸåç§°\nadd constraint pk1 primary key(sno) --æŒ‡å®šçº¦æŸåç§°\n================================\nuse sct\nalter table STUDENT1\ndrop constraint pk1 --åˆ é™¤pk1çº¦æŸ\n```\n\n### foreign keyå¤–é”®çº¦æŸ\n\n```sql\nUSE SCT\nCREATE  TABLE  SC\n( Sno char(7)  CONSTRAINT sc_k foreign key refernces student(sno),\n Cno char(3), \n Score tinyint\t ) \n=================================\nUSE  SCT\nALTER  TABLE  SC\nADD CONSTRAINT SC3_K\nforeign key(Cno) references Course(Cno)\n```\n\n![img](SQLåŸºç¡€å­¦ä¹ /1680493907932-81eb8885-51a5-40cb-bdb0-61eaa798c6d9.png)\n\næ³¨æ„ï¼šreferencesæŒ‡å‘çš„å¿…é¡»æ˜¯**ä¸»é”®**\n\n### check æ¡ä»¶çº¦æŸ\n\n```sql\nUSE SCT\nCREATE TABLE STUDENT\n( Sno char(7) PRIMARY KEYï¼Œ\nSname char(10), \nSFZ  char(18) UNIQUE,\nSage tinyint CHECK(Sage>=15 and Sage<=40 ) )\n================================================\nUSE  SCT\nALTER  TABLE  student\nADD CONSTRAINT St4_K\nCHECK(Sage>=15 and Sage<=40 )\n```\n\n### defaulté»˜è®¤çº¦æŸ\n\n```sql\nUSE SCT\nCREATE TABLE STUDENT\n( Sno   char(7) PRIMARY KEY,\nSname   char(10), \nMajor char(10) DEFAULTâ€˜ç”µè®¡â€™)\n==============================\nuse SCT\nalter table STUDENT\nadd constraint pk1\ndefalut 'ç”µè®¡' for Major\n```\n"},{"title":"Linuxå¸¸ç”¨æŒ‡ä»¤","url":"/2022/02/05/Linuxå¸¸ç”¨æŒ‡ä»¤/","content":"\n# ç›®å½•ç»“æ„\n\nWindowsæ“ä½œç³»ç»Ÿä¸­è·¯å¾„æ˜¯ï¼š\n\n```\nC:\\Users\\Vicczyq\\Desktop\\a.cpp\n```\n\nLinuxæ“ä½œç³»ç»Ÿè·¯å¾„ï¼š\n\n```\n/Users/Vicczyq/Desktop/a.cpp\n```\n\n# åŸºç¡€å‘½ä»¤\n\n## 1ã€lså‘½ä»¤ï¼š\n\nè¯­æ³•ï¼š`ls [-a -l -h] [Linuxè·¯å¾„]`\n\n- -a -l -h æ˜¯å¯é€‰çš„é€‰é¡¹\n\n-a:æ˜¾ç¤ºå…¨éƒ¨æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶\n\n-l:ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤ºæ–‡ä»¶ï¼Œæ›´ç»†èŠ‚\n\n-h:æ­é…-lä½¿ç”¨ï¼Œäººæ€§åŒ–çš„æ˜¾ç¤ºæ–‡ä»¶å¤§å°(K,M,G)\n\n-d:æ˜¾ç¤ºç›®å½•æœ¬èº«å±æ€§\n\n--color:ä»¥é¢œè‰²åŒºåˆ†ä¸åŒç±»å‹çš„æ–‡ä»¶\n\nå¯ä»¥ç»„åˆä½¿ç”¨ï¼Œå¦‚-al,-alh\n\n\n\n- Linuxè·¯å¾„ æ˜¯å¯é€‰çš„å‚æ•°\n\nå¦‚æœä¸åŠ é€‰é¡¹å’Œå‚æ•°ï¼Œç›´æ¥ä½¿ç”¨lså‘½ä»¤ï¼Œè¡¨ç¤ºï¼šä»¥å¹³é“ºçš„å½¢å¼ï¼Œåˆ—å‡ºå½“å‰å·¥ä½œç›®å½•ï¼ˆå¼€å§‹é»˜è®¤ä¸ºHOMEç›®å½•ï¼Œ/HOME/ç”¨æˆ·åï¼‰å†…å®¹\n\n## 2ã€cdå‘½ä»¤ï¼ˆchange directoryï¼‰ï¼š\n\nè¯­æ³•ï¼š`cd Linuxè·¯å¾„`\n\n- cdå‘½ä»¤æ— éœ€é€‰é¡¹ï¼Œåªæœ‰è·¯å¾„ï¼ˆåªæœ‰å‚æ•°ï¼‰\n- cdå‘½ä»¤ä¸ç»™è·¯å¾„ï¼ˆä¸å†™å‚æ•°ï¼‰çš„è¡¨ç¤ºå›åˆ°ç”¨æˆ·HOMEç›®å½•\n\n## 3ã€pwdå‘½ä»¤ï¼ˆprint work directoryï¼‰ï¼š\n\nè¯­æ³•ï¼š`pwd`\n\npwdå‘½ä»¤æ— é€‰é¡¹ï¼Œæ— å‚æ•°ï¼Œç›´æ¥è¾“å…¥å³å¯æŸ¥çœ‹å½“å‰æ‰€åœ¨å·¥ä½œç›®å½•è·¯å¾„\n\n\n\n## 4ã€ç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„ã€ç‰¹æ®Šè·¯å¾„ç¬¦ï¼š\n\ncd /home/Vicczyq/Desktop\tç»å¯¹è·¯å¾„\n\ncd Desktop\tç›¸å¯¹è·¯å¾„\n\nç‰¹æ®Šè·¯å¾„ç¬¦ï¼š\n\n**.** \tè¡¨ç¤ºå½“å‰ç›®å½•\n\n**..**\tè¡¨ç¤ºä¸Šä¸€çº§ç›®å½•\n\n**~**\tè¡¨ç¤ºHOMEç›®å½•\n\n## 5ã€mkdirå‘½ä»¤ï¼ˆmake directory):\n\nè¯­æ³•ï¼š`mkdir [-p] Linuxè·¯å¾„`\n\n-pï¼šè‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„çˆ¶ç›®å½•ï¼Œç”¨äºå¤šçº§æ–‡ä»¶å¤¹åˆ›å»º\n\n## 6ã€touchã€catã€moreæŸ¥çœ‹å‘½ä»¤ï¼š\n\nè¯­æ³•ï¼š`touch Linuxè·¯å¾„`\n\nä¾‹å¦‚ï¼štouch test.py åˆ›å»ºtest.pyæ–‡ä»¶ï¼ˆç›¸å¯¹è·¯å¾„ç»å¯¹è·¯å¾„éƒ½å¯ä»¥ï¼‰\n\nè¯­æ³•ï¼š`cat Linuxè·¯å¾„`\n\nä¾‹å¦‚ï¼šcat test.py æŸ¥çœ‹test.pyæ–‡ä»¶\n\nè¯­æ³•ï¼š`more Linuxè·¯å¾„`\n\nå¯ä»¥ç¿»é¡µæŸ¥çœ‹æ–‡ä»¶ï¼ˆç©ºæ ¼ç¿»é¡µï¼Œå›è½¦æ¢è¡Œï¼Œqé€€å‡ºï¼‰\n\n## 7ã€cpã€mvã€rmæ–‡ä»¶æ“ä½œå‘½ä»¤ï¼š\n\nè¯­æ³•ï¼š`cp [-r] å‚æ•°1 å‚æ•°2`\n\n- -rç”¨äºå¤åˆ¶æ–‡ä»¶å¤¹ï¼ˆå¦‚æœè¦å¤åˆ¶æ–‡ä»¶å¤¹å°±è¦å¸¦ä¸Š-rï¼‰\n- å‚æ•°1 Linuxè·¯å¾„ï¼Œè¡¨ç¤ºè¢«å¤åˆ¶çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹è·¯å¾„\n- å‚æ•°2 Linuxè·¯å¾„ï¼Œè¡¨ç¤ºè¦å¤åˆ¶å»çš„åœ°æ–¹\n\nè¯­æ³•ï¼š`mv å‚æ•°1 å‚æ•°2`\n\n- å‚æ•°1 Linuxè·¯å¾„ï¼Œè¡¨ç¤ºè¢«ç§»åŠ¨çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è·¯å¾„\n- å‚æ•°2 Linuxè·¯å¾„ï¼Œè¡¨ç¤ºè¦ç§»åŠ¨å»çš„åœ°æ–¹\n\nå¯ä»¥ç”¨äºæ”¹å\n\nè¯­æ³•ï¼š`rm [-r -f] å‚æ•°1 å‚æ•°2 å‚æ•°3.....å‚æ•°n`\n\n- -r ç”¨äºåˆ é™¤æ–‡ä»¶å¤¹\n- -f å¼ºåˆ¶åˆ é™¤ï¼Œä¸ä¼šå¼¹å‡ºç¡®è®¤ä¿¡æ¯ï¼ˆrootè¶…çº§ç®¡ç†å‘˜æ‰ç”¨åˆ°ï¼‰\n- å¯ä»¥æœ‰å¤šä¸ªå‚æ•°Linuxè·¯å¾„ï¼Œåˆ é™¤å¤šä¸ª\n\n\n\nrmå¯ä»¥é…åˆé€šé…ç¬¦ï¼Œç”¨æ¥åšæ¨¡ç³Šæœç´¢åˆ é™¤\n\n- ç¬¦å·*è¡¨ç¤ºé€šé…ç¬¦ï¼ŒåŠåŒ¹é…ä»»æ„å†…å®¹ï¼š\n- test* è¡¨ç¤ºä»¥ä»»æ„testå¼€å¤´çš„å†…å®¹\n- *test è¡¨ç¤ºä»»æ„ä»¥testç»“å°¾çš„å†…å®¹\n- *test*è¡¨ç¤ºä»»æ„åŒ…å«testçš„å†…å®¹ \n\n## 8ã€whichã€findæŸ¥æ‰¾å‘½ä»¤ï¼š\n\nè¯­æ³•ï¼š`which æŸ¥æ‰¾çš„å‘½ä»¤`\n\né€šè¿‡whichå¯ä»¥æŸ¥æ‰¾å‘½ä»¤ç¨‹åºçš„æ–‡ä»¶ç›®å½•ï¼Œå¦‚which pwdã€while mkdir\n\nè¯­æ³•ï¼š`find èµ·å§‹è·¯å¾„ -name \"æ–‡ä»¶å\"`\n\næ–‡ä»¶åå¯ä»¥ä½¿ç”¨é€šé…ç¬¦\n\nè¯­æ³•ï¼š`find èµ·å§‹è·¯å¾„ -size +|-n[kMG]`\n\n- +ã€-è¡¨ç¤ºå¤§äºæˆ–å°äº\n- nè¡¨ç¤ºæ•°å­—å¤§å°\n- kMGè¡¨ç¤ºå¤§å°å•ä½(kä¸ºå°å†™)\n\nä¾‹å¦‚ï¼š\n\n- æŸ¥æ‰¾å°äº10KBçš„æ–‡ä»¶ï¼Œfind -size -10k\n- æŸ¥æ‰¾å¤§äº100MBçš„æ–‡ä»¶ï¼šfind -size +100M\n\n## 9ã€grepã€wcï¼ˆæ–‡ä»¶å†…å®¹ç­›é€‰å’Œç»Ÿè®¡ï¼‰ç®¡é“ç¬¦å‘½ä»¤ï¼š\n\nè¯­æ³•ï¼š`grep [-n] å…³é”®å­— æ–‡ä»¶è·¯å¾„`\n\n- -nå¯é€‰ï¼Œè¡¨ç¤ºç»“æœæ˜¾ç¤ºåŒ¹é…çš„è¡Œçš„è¡Œå·\n- å‚æ•°ï¼Œå…³é”®å­—ï¼Œå¿…å¡«ï¼Œè¡¨ç¤ºæ–‡ä»¶å†…å®¹ç­›é€‰çš„å…³é”®å­—\n- å‚æ•°ï¼Œæ–‡ä»¶è·¯å¾„ï¼Œå¿…å¡«ï¼Œå¯ä»¥åšå†…å®¹è¾“å…¥ï¼ˆè§ç®¡é“ç¬¦ï¼‰\n\nè¯­æ³•ï¼š`wc [-c -m -l -w] æ–‡ä»¶è·¯å¾„`\n\n- é€‰é¡¹ï¼Œ-cï¼Œç»Ÿè®¡bytesæ•°é‡\n- é€‰é¡¹ï¼Œ-mï¼Œç»Ÿè®¡å­—ç¬¦æ•°é‡\n- é€‰é¡¹ï¼Œ-lï¼Œç»Ÿè®¡è¡Œæ•°\n- é€‰é¡¹ï¼Œ-wï¼Œç»Ÿè®¡å•è¯æ•°é‡\n- å‚æ•°ï¼Œæ–‡ä»¶è·¯å¾„ï¼Œå¿…å¡«ï¼Œå¯ä»¥åšå†…å®¹è¾“å…¥ï¼ˆè§ç®¡é“ç¬¦ï¼‰\n\n**æ‹“å±•ï¼šç®¡é“ç¬¦ |**\n\n**cat test.txt | grep å…³é”®å­—**\n\n**cat test.txt | wc -l**\n\n**å°†****å·¦è¾¹çš„è¾“å‡º****ä½œä¸º****å³è¾¹çš„è¾“å…¥**\n\n**åªè¦å·¦è¾¹æœ‰è¾“å‡ºå°±å¯ä»¥ä½œä¸ºå³è¾¹çš„è¾“å…¥**\n\n## 10ã€echoã€tailã€headã€é‡å®šå‘ç¬¦ï¼š\n\nè¯­æ³•ï¼š`echo è¾“å‡ºçš„å†…å®¹`\n\nä¾‹å¦‚ï¼šecho hello worldï¼\n\necho `pwd`è¢«åŒ…å›´çš„å†…å®¹ä¼šæŒ‰ç…§å‘½ä»¤å»æ‰§è¡Œï¼Œæœ€åä»¥echoçš„å½¢å¼æ˜¾ç¤ºç»“æœ\n\nè¯­æ³•ï¼š`tail/head [-f -num] Linuxæ–‡ä»¶è·¯å¾„`\n\n- é€‰é¡¹ï¼Œ-fï¼Œè¡¨ç¤ºæŒç»­è¿½è¸ªï¼Œç›¸å½“äºåŠ¨æ€æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼ŒCtrl+Cå¯ä»¥åœæ­¢\n- é€‰é¡¹ï¼Œ-numï¼Œè¡¨ç¤ºæŸ¥çœ‹å°¾éƒ¨å¤šå°‘è¡Œï¼Œä¸å¡«é»˜è®¤ä¸º10\n\n\n\n**é‡å®šå‘ç¬¦ï¼š**\n\n\\>è¡¨ç¤ºè¦†ç›–å†™å…¥åˆ°æ–‡ä»¶\n\n\\>>è¡¨ç¤ºè¿½åŠ å†™å…¥åˆ°æ–‡ä»¶\n\nä¾‹å¦‚ï¼šls -al > Desktop/test.txt\n\n## 11ã€lnå‘½ä»¤ï¼ˆè½¯é“¾æ¥ï¼‰å¿«æ·æ–¹å¼:\n\nè¯­æ³•ï¼š`ln -s å‚æ•°1 å‚æ•°2`\n\n- -sé€‰é¡¹ åˆ›å»ºè½¯é“¾æ¥\n- å‚æ•°1ï¼šè¢«é“¾æ¥çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹\n- å‚æ•°2ï¼šé“¾æ¥çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼ˆå¿«æ·æ–¹å¼ï¼‰\n\n### 12ã€dateæ—¶é—´è®¾ç½®å‘½ä»¤ã€calæ—¥å†å‘½ä»¤\n\né€šè¿‡dateå‘½ä»¤å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´\n\nè¯­æ³•ï¼š`date [-d] [+æ ¼å¼åŒ–å­—ç¬¦ä¸²]`\n\n- -d æŒ‰ç…§ç»™å®šçš„å­—ç¬¦ä¸²æ˜¾ç¤ºæ—¥æœŸï¼Œä¸€èˆ¬ç”¨äºæ—¥æœŸè®¡ç®—\n\n- - - year å¹´\n    - month æœˆ\n    - day æ—¥\n    - hour å°æ—¶\n    - minute åˆ†é’Ÿ\n    - second ç§’\n\nä¾‹å¦‚ï¼šdate -d \"-1 day\"\n\n- æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼šé€šè¿‡ç‰¹å®šçš„å­—ç¬¦ä¸²æ ‡è®°ï¼Œæ§åˆ¶æ˜¾ç¤ºçš„æ—¥æœŸæ ¼å¼\n\n- - - %Y å¹´\n    - %y å¹´ä»½åä¸¤ä½ï¼ˆå¦‚99ï¼‰\n    - %m æœˆä»½ï¼ˆ01,12ï¼‰\n    - %d æ—¥ï¼ˆ0,31ï¼‰\n    - %H å°æ—¶ï¼ˆ00,23ï¼‰\n    - %M åˆ†é’Ÿï¼ˆ00,59ï¼‰\n    - %S ç§’ï¼ˆ00,60ï¼‰\n    - %s è‡ª1970-01-01 00:00:00: UTCåˆ°ç°åœ¨çš„ç§’æ•°\n\ndate -d \"-1 day\" %d\n\n#### ä¿®æ”¹æ—¶åŒºï¼šrm -f /etc/localtime\n\n# Viã€Vimç¼–è¾‘å™¨\n\nvi/vimæ˜¯å‘½ä»¤è¡Œä¸‹å¯¹æ–‡æœ¬ç¼–è¾‘çš„æœ€ç»å…¸çš„ç¼–è¾‘å™¨\n\nvimæ˜¯viçš„åŠ å¼ºç‰ˆæœ¬ï¼Œå…¼å®¹viçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œè€Œä¸”å…·æœ‰shellç¨‹åºç¼–è¾‘çš„åŠŸèƒ½\n\nè¯­æ³•ï¼š`vim æ–‡ä»¶å` è¿›å…¥å‘½ä»¤æ¨¡å¼\n\n| i    | å½“å‰å…‰æ ‡ä½ç½®è¿›å…¥è¾“å…¥æ¨¡å¼      | dd      | åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ             |\n| ---- | ----------------------------- | ------- | -------------------------- |\n| a    | å½“å‰å…‰æ ‡ä½ç½® ä¹‹åè¿›å…¥è¾“å…¥æ¨¡å¼ | ndd     | nä¸ºæ•°å­—ï¼Œåˆ é™¤å½“å‰å…‰æ ‡ä¸‹nè¡Œ |\n| I    | å½“å‰è¡Œçš„å¼€å¤´è¿›å…¥è¾“å…¥æ¨¡å¼      | yy      | å¤åˆ¶å½“å‰è¡Œ                 |\n| A    | å½“å‰è¡Œçš„ç»“å°¾è¿›å…¥è¾“å…¥æ¨¡å¼      | nyy     | nä¸ºæ•°å­—ï¼Œå¤åˆ¶å½“å‰å…‰æ ‡ä¸‹nè¡Œ |\n| o    | å½“å‰å…‰æ ‡ä¸‹ä¸€è¡Œè¿›å…¥è¾“å…¥æ¨¡å¼    | p       | ç²˜è´´                       |\n| O    | å½“å‰å…‰æ ‡ä¸Šä¸€è¡Œè¿›å…¥è¾“å…¥æ¨¡å¼    | u       | æ’¤é”€ä¿®æ”¹                   |\n| esc  | è¿›å…¥å‘½ä»¤æ¨¡å¼                  | gg      | åˆ°é¦–è¡Œ                     |\n| 0    | å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå¼€å¤´              | G       | åˆ°å°¾éƒ¨                     |\n| $    | å…‰æ ‡ç§»åŠ¨åˆ°è¡Œç»“å°¾              | :wq     | ä¿å­˜å¹¶é€€å‡º                 |\n| /    | è¿›å…¥æœç´¢æ¨¡å¼                  | :q      | ç›´æ¥é€€å‡º                   |\n| n    | å‘ä¸‹ç»§ç»­æœç´¢                  | :q!     | å¼ºåˆ¶é€€å‡º                   |\n| N    | å‘ä¸Šç»§ç»­æœç´¢                  | :set nu | è®¾ç½®æ˜¾ç¤ºè¡Œå·               |\n\n# ç½‘ç»œè¯·æ±‚å’Œä¸‹è½½\n\n### 1ã€ping\n\nè¯­æ³•ï¼š`ping [-c num] ipæˆ–è€…ä¸»æœºå`\n\n- -c æ£€æŸ¥çš„æ¬¡æ•°ï¼Œä¸ä½¿ç”¨-cå°±æ— é™æ¬¡\n\n### 2ã€wget\n\nè¯­æ³•ï¼š`wget [-b] url`\n\n- -b å¯é€‰ï¼Œåå°ä¸‹è½½ï¼Œä¼šå°†æ—¥å¿—å†™å…¥åˆ°å½“å‰ç›®å½•çš„wget-logæ–‡ä»¶ä¸­\n- url å‚æ•°,ä¸‹è½½é“¾æ¥\n\n### 3ã€curl\n\nå¯ä»¥ç”¨äºå‘é€httpç½‘ç»œè¯·æ±‚ï¼Œç”¨äºï¼šä¸‹è½½æ–‡ä»¶ï¼Œè·å–ä¿¡æ¯ç­‰\n\nè¯­æ³•ï¼š`curl [-O] url`\n\n- -O é€‰é¡¹ï¼Œç”¨äºä¸‹è½½æ–‡ä»¶ï¼Œå½“urlæ˜¯ä¸‹è½½é“¾æ¥æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹ä¿å­˜æ–‡ä»¶\n- urlï¼Œå‚æ•°ï¼Œè¦å‘èµ·è¯·æ±‚çš„ç½‘å€\n\n# è½¯ä»¶\n\n### 1ã€yumå‘½ä»¤ï¼ˆrootï¼‰è½¯ä»¶å®‰è£…ï¼š\n\nRPMåŒ…è½¯ä»¶ç®¡ç†å™¨ï¼Œç”¨äºè‡ªåŠ¨åŒ–å®‰è£…Linuxè½¯ä»¶ï¼Œå¹¶å¯ä»¥è§£å†³ä¾èµ–é—®é¢˜\n\nè¯­æ³•ï¼š`yum [-y] [install | remove | search] è½¯ä»¶åç§°`\n\n- -yï¼Œè‡ªåŠ¨ç¡®è®¤ï¼Œæ— éœ€æ‰‹åŠ¨ç¡®è®¤å®‰è£…æˆ–å¸è½½è¿‡ç¨‹\n- installï¼šå®‰è£…\n- removeï¼šå¸è½½\n- searchï¼šæœç´¢\n\n### 2ã€systemctlå‘½ä»¤\n\næ§åˆ¶è½¯ä»¶ï¼šå¯åŠ¨ã€åœæ­¢ã€å¼€æœºè‡ªå¯\n\nè¯­æ³•ï¼š`systemctl [start | stop | status |enable | disable] æœåŠ¡å`\n\n- startï¼šå¯åŠ¨\n- stopï¼šå…³é—­\n- statusï¼šæŸ¥çœ‹çŠ¶æ€\n- enableï¼šå¼€å¯å¼€æœºè‡ªå¯\n- disableï¼šå…³é—­å¼€æœºè‡ªå¯\n\n# å‹ç¼©å’Œè§£å‹ç¼©\n\n### 1ã€tarå‹ç¼©\n\nè¯­æ³•ï¼š`tar [-c -v -x -f -z -C] å‚æ•°1 å‚æ•°2...å‚æ•°n`\n\n- -cï¼Œåˆ›å»ºå‹ç¼©æ–‡ä»¶ï¼Œç”¨äºå‹ç¼©æ¨¡å¼\n- -vï¼Œæ˜¾ç¤ºå‹ç¼©ï¼Œè§£å‹è¿‡ç¨‹ï¼Œç”¨äºæŸ¥çœ‹è¿›åº¦\n- -xï¼Œè§£å‹æ¨¡å¼\n- -fï¼Œè¦åˆ›å»ºçš„æ–‡ä»¶ï¼Œæˆ–è¦è§£å‹çš„æ–‡ä»¶ï¼Œ-fé€‰é¡¹å¿…é¡»åœ¨æ‰€æœ‰é€‰é¡¹çš„**æœ€å**\n- -zï¼Œgzipæ ¼å¼ï¼Œä¸ä½¿ç”¨å°±æ˜¯æ™®é€šçš„tarballæ ¼å¼ï¼Œå¿…é¡»åœ¨**æœ€å‰é¢**\n- -Cï¼Œè§£å‹ç›®çš„åœ°\n\ntarï¼š`tar -cvf test.tar 1.txt 2.txt 3.txt`\n\ngzipï¼š`tar -zcvf test.tar.gz 1.txt 2.txt 3.txt`\n\n### 2ã€tarè§£å‹\n\nè¯­æ³•ï¼š`tar -xvf test.tar`\n\næŒ‡å®šè§£å‹è·¯å¾„ï¼š`tar -xvf test.tar -C /home/vicczyq/Desktop`\n\n\n\n### 3ã€zipå‹ç¼©æ–‡ä»¶\n\nè¯­æ³•ï¼š`zip [-r] å‚æ•°1 å‚æ•°2.....å‚æ•°n`\n\n- -rï¼Œè¢«å‹ç¼©çš„åŒ…å«æ–‡ä»¶å¤¹æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨\n\n### 4ã€unzipè§£å‹æ–‡ä»¶\n\nè¯­æ³•ï¼š`unzip å‚æ•° [-d æ–‡ä»¶è·¯å¾„]`\n\n-dæŒ‡å®šè§£å‹å»çš„è·¯å¾„ä½ç½®ï¼Œå‚æ•°ä¸ºzipå‹ç¼©åŒ…æ–‡ä»¶\n\n# å¿«æ·é”®\n\n### 1ã€Ctrl+C å¼ºè¡Œåœæ­¢\n\n- LinuxæŸäº›ç¨‹åºè¿è¡Œï¼Œå¦‚æœæƒ³å¼ºè¡Œåœæ­¢å¯ä»¥Ctrl+C\n- è¾“å…¥å‘½ä»¤é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡Ctrl+Cæ¸…ç©ºè¾“å…¥\n\n### 2ã€Ctrl+D é€€å‡ºæˆ–ç™»å‡º\n\nç”¨æˆ·åˆ‡æ¢æ—¶å€™ç­‰æ•ˆäºexitï¼Œä½†ä¸èƒ½é€€å‡ºvi/vim\n\nå¯ä»¥é€€å‡ºpythonç­‰è½¯ä»¶\n\n### 3ã€historyå‘½ä»¤å¯ä»¥æŸ¥è¯¢å†å²ä½¿ç”¨å‘½ä»¤\n\nhistory | grep \"å…³é”®è¯\"\n\nå¯ä»¥ç­›é€‰\n\n### 4ã€ï¼å‘½ä»¤å‰ç¼€\n\næ‰§è¡Œå†å²è®°å½•ä¸­ä»¥å‰ç¼€å¼€å¤´çš„æœ€è¿‘çš„å‘½ä»¤\n\n### 5ã€Ctrl+R æœç´¢å†å²å‘½ä»¤\n\n### 6ã€Ctrl+a è·³åˆ°å‘½ä»¤å¼€å¤´\n\n### 7ã€Ctrl+e è·³åˆ°å‘½ä»¤ç»“å°¾\n\n### 8ã€Ctrl+é”®ç›˜å·¦å³é”® å·¦å³è·³å•è¯\n\n### 9ã€Ctal+L æ¸…ç©ºç»ˆç«¯å†…å®¹\n\nç­‰æ•ˆäºè¾“å…¥å‘½ä»¤clear\n\n### 10ã€Ctrl+Uæ¸…ç©ºè‡³è¡Œé¦–\n\n### 11ã€Ctrl+Kæ¸…ç©ºè‡³è¡Œå°¾\n\n### 12ã€Homeè·³åˆ°è¡Œé¦–\n\n### 13ã€Endè·³åˆ°è¡Œå°¾\n\n# ç¯å¢ƒå˜é‡\n\n### ä¸´æ—¶è®¾ç½®ï¼š\n\nè¯­æ³•ï¼š`export å˜é‡å=å˜é‡å€¼`\n\n### æ°¸ä¹…ç”Ÿæ•ˆï¼š\n\necport PATH=$PATH :/æ·»åŠ çš„ä¸œè¥¿ï¼ˆ$PATHå–å½“å‰PATHçš„å€¼ï¼‰\n\né’ˆå¯¹å½“å‰ç”¨æˆ·ï¼šé…ç½®å½“å‰ç”¨æˆ·çš„~/bashrcæ–‡ä»¶\n\né’ˆå¯¹æ‰€æœ‰ç”¨æˆ·ï¼šé…ç½®åœ¨ç³»ç»Ÿçš„/ect/profileæ–‡ä»¶\n\né…ç½®å®Œæˆï¼Œé€šè¿‡`source é…ç½®æ–‡ä»¶`å‘½ä»¤ç«‹åˆ»ç”Ÿæ•ˆ\n\n# IPåœ°å€å’Œä¸»æœºç”¨æˆ·\n\n### 1ã€hostname æŸ¥çœ‹ä¸»æœºå\n\n### 2ã€hostnamectl set-hostname ä¸»æœºå\n\nä¿®æ”¹ä¸»æœºå\n\n### 3ã€è®¾ç½®é™æ€IP\n\nä½¿ç”¨vimç¼–è¾‘ /ect/sysconfig/network-scripts/ifcfg-ens33æ–‡ä»¶ \n\n# Linuxç”¨æˆ·\n\n**ç”¨æˆ·è´¦å·æ–‡ä»¶ï¼š**/etc/passwd\n\n**ç”¨æˆ·å¯†ç æ–‡ä»¶ï¼š**/etc/shadow\n\n**ç»„è´¦å·ï¼š**/etc/group\n\n**ç»„å¯†ç ï¼š**/etc/gshadow\n\n\n\næœ€å¤§æƒé™çš„è´¦æˆ·åï¼šroot\n\nåˆ‡æ¢ç”¨æˆ·ï¼ˆSwitch Userï¼‰ï¼š\n\n```\nsu [-] [ç”¨æˆ·å]\n```\n\n- â€œ-â€ç¬¦å·è¡¨ç¤ºè¡¨ç¤ºæ˜¯å¦åŠ è½½ç¯å¢ƒå˜é‡ï¼Œå»ºè®®åŠ ä¸Š\n- ç”¨æˆ·åä¸ºå¯é€‰å‚æ•°ï¼Œä¸å¡«é»˜è®¤ä¸ºroot\n\nåˆ‡æ¢ç”¨æˆ·åï¼Œå¯ä»¥ç”¨exitåˆ‡å›ä¸Šæ¬¡ç”¨æˆ·\n\n\n\n```\nsudo å…¶å®ƒå‘½ä»¤\n```\n\nè¿™æ¡å‘½ä»¤ä»¥rootçš„èº«ä»½å»æ‰§è¡Œï¼Œä¸´æ—¶rootæˆæƒ\n\nå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç”¨æˆ·éƒ½æœ‰æƒåŠ›ä½¿ç”¨sudoï¼Œåªæœ‰é…ç½®sudoè®¤è¯çš„æ‰èƒ½\n\n\n\n**é…ç½®sudoè®¤è¯ï¼š**\n\nåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œæ‰§è¡Œvisudoå‘½ä»¤ï¼Œåœ¨æ–‡ä»¶æœ€åæ·»åŠ \n\n```\nç”¨æˆ·å ALL=(ALL) NOPASSWORD\n```\n\nwqä¿å­˜é€€å‡º\n\n\n\n## ç”¨æˆ·å’Œç”¨æˆ·ç»„\n\n1ã€åˆ›å»ºç”¨æˆ·ç»„ï¼š\n\nè¯­æ³• `groupadd ç”¨æˆ·ç»„å`\n\n2ã€åˆ é™¤ç”¨æˆ·ç»„\n\nè¯­æ³• `groupdel ç”¨æˆ·ç»„å`\n\n3ã€åˆ›å»ºç”¨æˆ·\n\nè¯­æ³• `useradd [-g -d -s] ç”¨æˆ·å`\n\n- -g æŒ‡å®šç”¨æˆ·ç»„ï¼Œå¦‚æœä¸æŒ‡å®šå°±ä¼šåˆ›å»ºä¸€ä¸ªå’Œç”¨æˆ·åä¸€æ ·çš„ç»„è‡ªå·±åŠ å…¥\n- -d æŒ‡å®šç”¨æˆ·HOMEè·¯å¾„ï¼Œä¸æŒ‡å®šé»˜è®¤åœ¨/home/ç”¨æˆ·å\n- -s æŒ‡å®šshellï¼Œé»˜è®¤ä¸º/bin/bash\n\n4ã€åˆ é™¤ç”¨æˆ·\n\nè¯­æ³• `userdel [-r] ç”¨æˆ·å`\n\n- -r åˆ é™¤ç”¨æˆ·çš„HOMEç›®å½•ï¼Œä¸ä½¿ç”¨-råªåˆ æ‰ç”¨æˆ·ï¼Œä¸åˆ ç›®å½•æ–‡ä»¶\n\n5ã€æŸ¥çœ‹ç”¨æˆ·æ‰€å±ç»„\n\nè¯­æ³• `id [ç”¨æˆ·å]`\n\n- ä¸åŠ ç”¨æˆ·åé»˜è®¤æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰€å±ç”¨æˆ·ç»„\n\n6ã€ä¿®æ”¹ç”¨æˆ·æ‰€å±ç»„\n\nè¯­æ³•` usermod -aG ç”¨æˆ·ç»„ ç”¨æˆ·å`\n\n- å°†æŒ‡å®šç”¨æˆ·åŠ å…¥æŒ‡å®šç»„\n\n7ã€getent\n\nè¯­æ³• `getent passwd`\n\næŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­çš„ç”¨æˆ·\n\nè¯­æ³• `getent group`\n\næŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­çš„ç”¨æˆ·ç»„\n\n8ã€æ›´æ”¹/è®¾ç½®ç”¨æˆ·å£ä»¤\n\nè¯­æ³•` passwd ç”¨æˆ·å`\n\n![img](Linuxå¸¸ç”¨æŒ‡ä»¤/1695091854612-947fb28a-bde3-4437-b4aa-2e1fb80ddc7c.png)\n\n## æƒé™ç®¡ç†å’Œä¿®æ”¹\n\n![img](Linuxå¸¸ç”¨æŒ‡ä»¤/1679123684100-4081e340-fa70-4e1f-97bb-166729dccf43.png)\n\nrï¼šè¡¨ç¤ºå¯è¯»æƒé™\n\nwï¼šè¡¨ç¤ºå¯å†™æƒé™\n\nxï¼šè¡¨ç¤ºæ‰§è¡Œæƒé™\n\n-ï¼šæ— æƒé™\n\n### æƒé™ä¿®æ”¹ï¼š\n\n**1ã€chmodå‘½ä»¤ï¼š**\n\nè¯­æ³•ï¼š`chmod [-R] æƒé™ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹`\n\n- -RæŒ‡æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶è¿›è¡Œç›¸åŒæ“ä½œ\n\nå®ä¾‹ï¼š\n\nchmod u=rwx,g=rx,o=x hello.txt\n\nä¿®æ”¹åçš„æƒé™ä¿¡æ¯ä¸ºï¼šrwxr-x--x\n\n0ï¼š--- \t1ï¼š--x\t2ï¼š-w-\t3ï¼š-wx\n\n4ï¼šr--\t5ï¼šr-x\t6ï¼šrw-\t7ï¼šrwx\n\nchmod 751 hello.txt\n\n\n\n**2ã€chownå‘½ä»¤ï¼š**\n\nè¯­æ³•ï¼š`chown [-R] [ç”¨æˆ·] [:] [ç”¨æˆ·ç»„] æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹`\n\n- -RæŒ‡æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶è¿›è¡Œç›¸åŒæ“ä½œ\n\n![img](Linuxå¸¸ç”¨æŒ‡ä»¤/1679124407657-2754fd9e-b047-4c49-8978-174f49b9c60d.png)\n\n![img](Linuxå¸¸ç”¨æŒ‡ä»¤/1695695221590-a0ce7b34-78de-451b-ab9b-34a7ae774746.png)\n","tags":["è®¡ç®—æœºåŸºç¡€"]},{"title":"CUDAåŸºç¡€å­¦ä¹ ","url":"/2022/02/05/CUDAåŸºç¡€å­¦ä¹ /","content":"\n![img](CUDAåŸºç¡€å­¦ä¹ /1699278155036-757a1974-f6c1-43cd-a8e6-06852e4e6a4f.png)\n\nCPU+GPUç»„æˆå¼‚æ„è®¡ç®—ï¼ŒGPUå¯ä»¥çœ‹åšæ˜¯CPUçš„åä½œå¤„ç†å™¨ï¼Œä¸€èˆ¬ç§°ä¸ºè®¾å¤‡\n\nä¸»æœºï¼ˆCPUï¼‰å’Œè®¾å¤‡ï¼ˆGPUï¼‰ä¹‹é—´çš„å†…å­˜è®¿é—®æ˜¯é€šè¿‡PCIeæ€»çº¿è¿æ¥çš„\n\n| **CPU**            | **GPU**        | **å±‚æ¬¡** |\n| ------------------ | -------------- | -------- |\n| ç®—æœ¯é€»è¾‘å’Œæ§åˆ¶å•å…ƒ | æµå¤„ç†å™¨(SM)   | ç¡¬ä»¶     |\n| ç®—æœ¯å•å…ƒ           | æ‰¹é‡å¤„ç†å™¨(SP) | ç¡¬ä»¶     |\n| è¿›ç¨‹               | Block          | è½¯ä»¶     |\n| çº¿ç¨‹               | thread         | è½¯ä»¶     |\n| è°ƒåº¦å•ä½           | Warp           | è½¯ä»¶     |\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1699013132500-689d59c7-7782-48d7-b23b-7cde1c59474d.png)\n\nä¸€ä¸ªçº¿ç¨‹åœ¨ä¸€ä¸ªCUDA Coreæ‰§è¡Œï¼ˆSPï¼‰\n\nä¸€ä¸ªçº¿ç¨‹å—è¢«åˆ†é…åˆ°ä¸€ä¸ªSMä¸Šé¢æ‰§è¡Œ\n\nä¸€ä¸ªGridåœ¨GPUè®¾å¤‡æ‰§è¡Œ\n\n**æŸ¥çœ‹æ˜¾å¡åˆ©ç”¨ç‡**\n\n```\nnvidia-smi\n```\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1699002941511-a35e1dac-97f6-4a68-b917-50814844d2dc.png)\n\n# 1ã€æ ¸å‡½æ•°ï¼ˆKernel_functionï¼‰\n\næ ¸å‡½æ•°åœ¨GPUä¸Šè¿›è¡Œå¹¶è¡Œæ‰§è¡Œ\n\næ³¨æ„ï¼š\n\n1. é™å®šè¯_global_ä¿®é¥°\n2. è¿”å›å€¼å¿…é¡»æ˜¯void\n3. æ ¸å‡½æ•°åªèƒ½è®¿é—®è®¾å¤‡ï¼ˆGPUï¼‰å†…å­˜\n4. æ ¸å‡½æ•°ä¸èƒ½ä½¿ç”¨å˜é•¿å‚æ•°ã€é™æ€å˜é‡ã€å‡½æ•°æŒ‡é’ˆ\n5. æ ¸å‡½æ•°å…·æœ‰å¼‚æ­¥æ€§\n\n```cpp\n_global_ void kernel_function(argument *arg)\n{\n    printf(\"Hello world from GPU\\n\");\n}\nvoid _global_ kernel_function(argument *arg)\n{\n    printf(\"Hello world from GPU\\n\");\n}\n#include <stdio.h>\n_global__ void hello()\n{\n    printf(\"Hello world from GPU\\n\");\n}\nint main()\n{\n    hello<<<1,1>>>(); //è®¾å¤‡ï¼ˆGPUï¼‰æ ¸å‡½æ•°æ‰§è¡Œï¼Œ<<<1,1>>>å«ä¹‰è§ä¸‹èŠ‚ã€‚\n    cudaDeviceSynchronize(); //åŒæ­¥ï¼ŒCPUç­‰å¾…CPUå¤„ç†å®Œæˆ\n    return 0;\n}\n```\n\n# 2ã€çº¿ç¨‹æ¨¡å‹\n\n## 2.1åŸºæœ¬æ¦‚å¿µ\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1699011161039-62e75ab2-9f1c-4917-a815-37284fa75aa2.jpeg)\n\nçº¿ç¨‹åˆ†å—æ˜¯é€»è¾‘ä¸Šçš„åˆ’åˆ†ï¼Œç‰©ç†ä¸Šçº¿ç¨‹ä¸åˆ†å—\n\né…ç½®çº¿ç¨‹ï¼š`<<<grid_size , block_size>>>`\n\ngrid_sizeï¼šç½‘æ ¼åŒ…å«çš„çº¿ç¨‹å—ä¸ªæ•°\tblock_sizeï¼šçº¿ç¨‹å—åŒ…å«çš„çº¿ç¨‹ä¸ªæ•°\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1697013915734-f63e760a-5105-44f8-bafe-e9c5b382fe85.png)\n\n## 2.2ä¸€ç»´èº«ä»½æ ‡è¯†\n\næ¯ä¸ªçº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ç”±`<<<grid_size, block_size>>>`ç¡®å®šã€‚\n\nåœ¨æ ¸å‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨\n\n`gridDim.x`ï¼šè¯¥å˜é‡çš„å€¼ç­‰äºæ‰§è¡Œé…ç½®ä¸­å˜é‡`grid_size`çš„å€¼ï¼ˆçº¿ç¨‹æ ¼çš„ç»´åº¦ï¼‰\n\n`blockDim.x`ï¼šè¯¥å˜é‡çš„å€¼ç­‰äºæ‰§è¡Œé…ç½®ä¸­å˜é‡`block_size`çš„å€¼ï¼ˆçº¿ç¨‹å—çš„ç»´åº¦ï¼‰\n\n`blockIdx.x`ï¼šçº¿ç¨‹åœ¨ç½‘æ ¼(grid)ä¸­çš„çº¿ç¨‹å—(block)çš„ç´¢å¼•ï¼ŒèŒƒå›´`0~gridDim.x-1`ï¼ˆçº¿ç¨‹å—çš„ç´¢å¼•ï¼‰\n\n`threadIdx.x`ï¼šçº¿ç¨‹åœ¨çº¿ç¨‹å—ä¸­çš„çº¿ç¨‹ç´¢å¼•ï¼ŒèŒƒå›´`0~blockDim.x-1`ï¼ˆçº¿ç¨‹ç´¢å¼•ï¼‰\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1697012880220-f0efb73d-8784-47bf-bed8-34e3663ca4a5.png)\n\n\n\nCUDAå¯ä»¥ç»„ç»‡ä¸‰ç»´çš„ç½‘æ ¼å’Œçº¿ç¨‹å—\n\n`blockIdx`å’Œ`threadIdx`éƒ½æ˜¯ç»“æ„ä½“ï¼Œå…·æœ‰xï¼Œyï¼Œzä¸‰ä¸ªæˆå‘˜\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1697013503445-bdade019-0e4f-4dbe-91f9-35edef6a38ea.png)\n\n**ä¸€ç»´ï¼š**\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1697013590396-76aec282-966a-48f7-804b-3cd0220a7cd4.png)\n\n**å¤šç»´ï¼š**\n\n```cpp\ndim3 grid_size(Gx,Gy,Gz);\ndim3 block_size(Bx,By,Bz);\n<<<grid_size,block_size>>>//ï¼ˆçº¿ç¨‹å—æ•°ï¼Œæ¯ä¸ªå—çº¿ç¨‹æ•°ï¼‰\n\n// ä¾‹å¦‚ï¼š\n    dim3 grid_size(2,2); //ç­‰ä»·äºdim3 grid_size(2,2,1);\n\tdim3 block_size(5,3);//ç­‰ä»·äºdim3 block_size(5,3,1);\n```\n\n# 3ã€å‡½æ•°ä¿®é¥°ç¬¦\n\n**__global__**ï¼šè¡¨æ˜è¢«ä¿®é¥°çš„å‡½æ•°åœ¨è®¾å¤‡ä¸Šæ‰§è¡Œï¼Œä½†åœ¨ä¸»æœºä¸Šè°ƒç”¨\n\n**__device__**ï¼šè¡¨æ˜è¢«ä¿®é¥°çš„å‡½æ•°åœ¨è®¾å¤‡ä¸Šæ‰§è¡Œï¼Œä½†åªèƒ½åœ¨å…¶ä»–__device__å‡½æ•°æˆ–è€…__global__å‡½æ•°ä¸­è°ƒç”¨ã€‚\n\n# 4ã€å¸¸ç”¨çš„GPUå‡½æ•°\n\n#### cudaMalloc (void **devPtr, size_t size)\n\nåŠŸèƒ½ï¼šä¸Cè¯­è¨€ä¸­çš„mallocå‡½æ•°ä¸€æ ·ï¼Œåªæ˜¯æ­¤å‡½æ•°åœ¨GPUçš„å†…å­˜ä½ åˆ†é…å†…å­˜ã€‚\n\n#### cudaMemcpy (void dst, const void src, size_t count, cudaMemcpyKind kind)\n\nåŠŸèƒ½ï¼šä¸cè¯­è¨€ä¸­çš„memcpyå‡½æ•°ä¸€æ ·ï¼Œåªæ˜¯æ­¤å‡½æ•°å¯ä»¥åœ¨ä¸»æœºå†…å­˜å’ŒGPUå†…å­˜ä¹‹é—´äº’ç›¸æ‹·è´æ•°æ®ã€‚\n\nå‡½æ•°å‚æ•°ï¼šcudaMemcpyKind kindè¡¨ç¤ºæ•°æ®æ‹·è´æ–¹å‘ï¼Œå¦‚æœkindèµ‹å€¼cudaMemcpyDeviceToHostè¡¨ç¤ºæ•°æ®ä»è®¾å¤‡å†…å­˜æ‹·è´åˆ°ä¸»æœºå†…å­˜ï¼ŒcudaMemcpyHostToDeviceè¡¨ç¤ºä¸»æœºåˆ°è®¾å¤‡ã€‚\n\nç›¸åº”çš„æœ‰ä¸ªå¼‚æ­¥æ–¹å¼æ‰§è¡Œçš„å‡½æ•°cudaMemcpyAsync()\n\n#### cudaFree ( void* devPtr )\n\nåŠŸèƒ½ï¼šä¸cè¯­è¨€ä¸­çš„free()å‡½æ•°ä¸€æ ·ï¼Œåªæ˜¯æ­¤å‡½æ•°é‡Šæ”¾çš„æ˜¯cudaMalloc()åˆ†é…çš„å†…å­˜ã€‚\n\n#### __syncthreads()\n\nåŠŸèƒ½ï¼šåŒæ­¥å‡½æ•°ï¼Œç¡®ä¿çº¿ç¨‹å—ä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œå®Œ__syscthreads()å‰é¢çš„è¯­å¥åï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ã€‚\n\n#### cudaDeviceSynchronize(); \n\nåŠŸèƒ½ï¼šåŒæ­¥ï¼ŒCPUç­‰å¾…GPUå¤„ç†å®Œæˆï¼Œæ³¨æ„æ­¤å‡½æ•°æ˜¯CPUå‡½æ•°ï¼\n\n```cpp\n#include <stdio.h>\n__global__ void add( int a, int b, int *c ) {\n    *c = a + b;\n}\nint main( void ) {\n    int c;\n    int *dev_c;\n\n    cudaMalloc( (void**)&dev_c, sizeof(int) );\n\n    add<<<1,1>>>( 2, 7, dev_c );   \n\n    cudaMemcpy( &c, dev_c, sizeof(int),cudaMemcpyDeviceToHost ) ;\n    printf( \"2 + 7 = %d\\n\", c );\n\n    cudaFree( dev_c );\n    return 0;\n}\n```\n\n# 5ã€GPUå†…å­˜åˆ†ç±»\n\n## 5.1å…¨å±€å†…å­˜\n\né€šä¿—æ„ä¹‰ä¸Šçš„è®¾å¤‡å†…å­˜\n\n## 5.2å…±äº«å†…å­˜\n\nä½ç½®ï¼šè®¾å¤‡å†…å­˜ã€‚\n\nå½¢å¼ï¼šå…³é”®å­—`__share__`æ·»åŠ åˆ°å˜é‡å£°æ˜ä¸­ï¼Œå¦‚ï¼š`**__share__ float a[10]**`\n\nè®¿é—®é€Ÿåº¦å’ŒL1ç›¸åŒ\n\n## 5.3å¸¸é‡å†…å­˜\n\nä½ç½®ï¼šè®¾å¤‡å†…å­˜\n\nå½¢å¼ï¼šå…³é”®å­—`__constant__`æ·»åŠ åˆ°å˜é‡å£°æ˜ä¸­ï¼Œå¦‚ï¼š`__constant__ float a[10]`\n\nç›®çš„ï¼šä¸ºäº†æå‡æ€§èƒ½ã€‚å¸¸é‡å†…å­˜é‡‡å–äº†ä¸åŒäºå…¨å±€å†…å­˜çš„å¤„ç†æ–¹å¼ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ç”¨å¸¸é‡å†…å­˜æ›¿æ¢å…¨å±€å†…å­˜èƒ½æœ‰æ•ˆçš„å‡å°‘å†…å­˜å¸¦å®½ã€‚\n\n# 6ã€è®¡æ—¶\n\n```cpp\n#include <sys/time.h>\ndouble cpuSecond(){\n\tstruct timeval tp;\n    gettimeofday(&tp,NULL);\n    return ((double)tp.tv_sec + (double)tp.tv_usec*1.e-6);\n}\n\næµ‹è¯•å‡½æ•°(ç§’)ï¼š\ndouble start_time = cpuSecond();\nkernel_function<<<grid,block>>>();\ncudaDeviceSynchronize();\ndouble Elaps = cpuSecond() - start_time; \ncudaEvent_t startCuda, stopCuda;  //declare\ncudaEventCreate(&startCuda);      //set up \ncudaEventCreate(&stopCuda);       //set up\n\ncudaEventRecord(startCuda,0);    //start\nmyAdd <<<grid, threads>>> (d_B, d_C, d_A);\ncudaEventRecord(stopCuda,0);     //finish\n\nfloat eTime;\ncudaEventElapsedTime(&eTime, startCuda, stopCuda); \n\ncout<<eTime<<endl;\n\ncudaEventDestory(startCuda);\ncudaEventDestory(stopCuda);\n```\n\n# 7ã€è·å–GPUåå­—\n\n```cpp\n    cudaDeviceProp deviceProp;\n    cudaGetDeviceProperties(&deviceProp, 0);\n    printf(\"GPU Name: %s\\nJob start:\\n\", deviceProp.name);\n```\n\n# 8ã€çº¿ç¨‹æŸï¼ˆWrap)\n\nçº¿ç¨‹æŸæ˜¯SMä¸­åŸºæœ¬çš„æ‰§è¡Œå•å…ƒ\n\nï¼ˆSMæ˜¯Streaming Multiprocessorçš„ç¼©å†™ï¼Œå®ƒæ˜¯æŒ‡å›¾å½¢å¤„ç†å™¨(GPU)ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒå¤„ç†å•å…ƒï¼‰\n\nä¸€ä¸ªçº¿ç¨‹æŸç”±32ä¸ªè¿ç»­çš„çº¿ç¨‹ç»„æˆã€‚æ˜¯æ‰§è¡Œç¨‹åºæ—¶çš„è°ƒåº¦å•ä½ï¼ŒåŒåœ¨ä¸€ä¸ªwarpçš„çº¿ç¨‹æ‰§è¡ŒåŒä¸€ä¸ªæŒ‡ä»¤ã€‚\n\n\n\n**ä¸ºä»€ä¹ˆè¦å¼•å…¥Wrapï¼Ÿ**\n\nè™½ç„¶GPUçš„Gridå’ŒBlockçš„å¤§å°å¾ˆå¤§ï¼Œå¯ä»¥æ‹¥æœ‰ä¸Šä¸‡çº§åˆ«çš„çº¿ç¨‹ï¼Œä½†å› ä¸ºç¡¬ä»¶çš„é™åˆ¶ï¼Œä¸æ˜¯æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯ä»¥å¹³è¡Œè¿è¡Œçš„ã€‚åœ¨è¿è¡Œthreadçš„æ—¶å€™ï¼Œ threadä¼šè¢«æ†ç»‘åˆ°ä¸€èµ·å½¢æˆä¸€ä¸ªwrapã€‚32ä¸ªthreadä¸€ä¸ªwrapã€‚ åŒä¸€ä¸ªwrapé‡Œçš„æŒ‡ä»¤æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬è¿è¡Œçš„ä¸œè¥¿æ˜¯ä¸€æ‘¸ä¸€æ ·çš„ï¼Œæ•°æ®ä¹Ÿç›¸åŒã€‚ä¸€ä¸ªwrapé‡Œçš„çº¿ç¨‹åªå…è®¸åœ¨åŒä¸€ä¸ªblocké‡Œé¢è¿è¡Œã€‚**ä¸ºäº†è®©ç¨‹åºçš„è¿è¡Œæ›´åŠ æœ‰æ•ˆï¼Œéœ€è¦è®©åŒä¸€ä¸ªwrapé‡Œçš„çº¿ç¨‹è¿è¡ŒåŒæ ·çš„ä»£ç ã€‚**\n\n**çœ‹ä¸€ä¸ªä»£ç ï¼š**\n\n```cpp\n__global__ void code_with_divergence()\n{\n\tint idx = threadIdx.x;\n\tif(idx%2==0)\n\t{\n\t\t // do A\n\t}\n\telse\n\t{\n\t\t// do B\n\t}\n}\n```\n\nä¸Šé¢è¿™ä¸ªè¿™ä¸ªä»£ç ä¼šè®©æ•ˆç‡å‡å°‘ä¸€åŠã€‚å› ä¸ºå½“è¿è¡ŒAçš„æ—¶å€™ï¼Œä¼šè®©æ»¡è¶³æ¡ä»¶çš„é‚£ä¸€åŠthreadè¿è¡Œï¼Œè€Œå¦ä¸€åŠçš„threadä¼šè¢«ä¼‘çœ ã€‚\n\n**æ³¨æ„ï¼š**ä¸æ˜¯å†™äº†ifè¯­å¥å°±ä¸€å®šä¼šè®©è¿è¡Œæ•ˆç‡é™ä½ã€‚åªè¦èƒ½ä¿è¯ç”¨ä¸€ä¸ªwrapé‡Œçš„çº¿ç¨‹è¿è¡ŒåŒæ ·çš„æŒ‡ä»¤å°±å¯ä»¥æå‡æ•ˆç‡ï¼Œæ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š\n\n```cpp\n__global__ void code_without_divergence()\n{\n\tint idx = blockIdx.x * blockDim.x + threadIdx.x;\n\t// int wrap_id = idx/32;\n    int wrap_id = idx / wrapSize;//å›ºæœ‰å˜é‡wrapSize = 32\n\tif(wrap_id%2==0)\n\t{\n\t\t // do A\n\t}\n\telse\n\t{\n\t\t// do B\n\t}\n}\n```\n\nä»£ç æ˜¯ä»¥ä¸€ä¸ªwrapä¸ºæ•´ä½“å»è¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“è¿è¡Œæ•ˆç‡ã€‚\n\n# 9ã€å¦‚ä½•è®¾ç½®gridå’Œblock\n\n## å‰è¨€ï¼š\n\nGPU ç”±å¤šä¸ª SM å¤„ç†å™¨æ„æˆï¼Œä¸€ä¸ª SM å¤„ç†å™¨åŒ…å« 8 ä¸ª SP æ ¸ã€‚ä¸€ä¸ª SM å¤„ç†å™¨å¯åŒæ—¶å¤„ç† 32 ä¸ªçº¿ç¨‹ï¼ˆWrapæŸï¼‰ï¼Œå®é™…ä¸Šæ˜¯åŒä¸€å¥—æŒ‡ä»¤åœ¨æ¯ä¸ª SP æ ¸ä¸Šé‡å¤ 4 æ¬¡ï¼Œ è¿™æ ·æäº¤ä¸€æ¬¡ä»»åŠ¡ï¼Œ8 ä¸ªSP æ ¸åŒæ—¶å°±èƒ½å¤„ç† 32 ä¸ªçº¿ç¨‹ã€‚\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1699013420617-1a677527-2101-48e4-a317-1841acc8d223.png)\n\n## è®¾ç½®gridå’Œblockç»´åº¦\n\nå¦‚æœæŸä¸ªGPUæ‹¥æœ‰ 16 ä¸ª SM å¤„ç†å™¨ï¼Œå…± 128 ä¸ª SP æ ¸ï¼ˆ16*8ï¼‰ã€‚\n\n1. å¦‚æœæƒ³è®©æ¯ä¸ª SM å¤„ç†å™¨éƒ½å·¥ä½œï¼Œåˆ™ Grid çš„ Block çš„æ•°é‡æœ€å¥½æ˜¯ 16 çš„æ•´æ•°å€ã€‚è¿™æ ·åœ¨æ•´ä¸ªè®¡ç®—è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª SM å¤„ç†å™¨è´Ÿè½½éƒ½æ˜¯ä¸€æ ·çš„ã€‚\n2. æ¯ä¸ª SM å¤„ç†å™¨åŒæ—¶å¯ä»¥å¤„ç† 32 ä¸ªçº¿ç¨‹ï¼Œå› æ­¤ï¼ŒBlock ä¸­çš„çº¿ç¨‹æ•°é‡æœ€å¥½æ˜¯ 32 çš„å€æ•°ï¼Œä½¿å¾— 8 ä¸ª SP æ ¸è´Ÿè½½å‡è¡¡ã€‚\n\nç”±ä¸Šå¯çŸ¥ï¼Œåº”è¯¥æŒ‰ç…§16*N*32*M = 512*Sçš„åˆ’åˆ†æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç†æƒ³çš„æ•°æ®é‡åº”è¯¥æ˜¯ 512 çš„æ•´æ•°å€ã€‚åŒæ—¶è¦æ³¨æ„ï¼Œä¸€ä¸ªçº¿ç¨‹å—çº¿ç¨‹æ•°é‡ä¸èƒ½å¤šäº1024ï¼\n\n### 1.ä¸€ç»´gridï¼Œä¸€ç»´block\n\n```cpp\nint nx = 1 << 14;\nint ny = 1 << 14;\nint dimx = 32;\ndim3 block(dimx);\ndim3 grid((nx + block.x - 1) / block.x);\n```\n\næ ¸å‡½æ•°\n\n```cpp\n__global__ void kernel_function()\n{\n    unsigned int ix = threadIdx.x + blockIdx.x * blockDim.x;\n    if (ix < nx )\n   {\n        do_something();\n    }\n}\n```\n\n### 2.äºŒç»´gridï¼Œä¸€ç»´block\n\n```cpp\nint nx = 1 << 14;\nint ny = 1 << 14;\nint dimx = 32;\ndim3 block(1, dimx);\ndim3 grid(nx, (ny + block.y - 1) / block.y);\n```\n\næ ¸å‡½æ•°\n\n```cpp\n__global__ void kernel_function()\n{\n    int x = blockIdx.x;\n    int y = blockIdx.y*blockDim.y+threadIdx.y;\n}\n```\n\n### 3.äºŒç»´gridï¼ŒäºŒç»´block\n\n```cpp\nint nx = 1 << 14;\nint ny = 1 << 14;\nint dimx = 32;\nint dimy = 32;\ndim3 block(dimx, dimy);\ndim3 grid((nx + block.x - 1) / block.x, (ny + block.y - 1) / block.y);\n```\n\næ ¸å‡½æ•°\n\n```cpp\n__global__ void kernel_function()\n{\n    unsigned int x = threadIdx.x + blockIdx.x * blockDim.x;\n    unsigned int y = threadIdx.y + blockIdx.y * blockDim.y;\n    unsigned int tid = x*ny + y;\n    if (ix < nx && iy < ny)\n    {\n        do_something();\n    }\n}\n```\n\n![img](CUDAåŸºç¡€å­¦ä¹ /1699272791683-3f21b828-d2bd-4311-b305-d7185839e59d.png)\n\n## æ–‡æ¡£\n\nhttps://www.zhihu.com/tardis/bd/art/566538074\n\nhttps://zhuanlan.zhihu.com/p/573271688\n","tags":["è¶…ç®—"]},{"title":"MPIå­¦ä¹ ","url":"/2022/02/05/MPIå­¦ä¹ /","content":"\n# ä¸€ã€Hello world\n\n```cpp\n#include <iostream>\n#include <mpi.h>\nusing namespace std;\nint main(){\n\tMPI_Init(NULL,NULL);\n\tcout << \"hello world\" << endl;\n\tMPI_Finalize();\n\treturn 0;\n}\n```\n\n```bash\nmpicxx hello.cpp -o hello\n```\n\n```bash\nmpirun -np 10 ./hello\n```\n\nä»£ç ç»“æ„ï¼š\n\n- å¤´æ–‡ä»¶\n- åˆå§‹åŒ–MPIç¯å¢ƒï¼šMPI_Init()\n- åˆ†å¸ƒå¼ä»£ç \n- ç»ˆæ­¢MPIç¯å¢ƒï¼šMPI_Finalize()\n- ç»“æŸ\n\n# äºŒã€åŸºæœ¬API\n\n## 2.1 åˆå§‹åŒ–ç¯å¢ƒ MPI_Init\n\n```cpp\nint MPI_Init(int* argc,char* argv[]);\n//å‚æ•°argc_på’Œargc_væ˜¯æŒ‡å‘å‚æ•°argcå’Œargvçš„æŒ‡é’ˆï¼Œå½“ç¨‹åºä¸ä½¿ç”¨è¿™äº›å‚æ•°æ—¶å¯ç›´æ¥å†™ä¸ºNULLã€‚\n//è¯¥å‡½æ•°çš„è¿”å›å€¼ä¸€èˆ¬ä¸ºä¸€ä¸ªæ•´å‹intï¼Œæˆ‘ä»¬ä¸€èˆ¬å¿½ç•¥ã€‚\n//æ‰€ä»¥ä¸€èˆ¬æœ€å¸¸è§çš„ç”¨æ³•ä¸ºï¼š\nMPI_Init(NULL,NULL);\n//é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥å‡½æ•°ä¸€èˆ¬è¡¨ç¤ºMPIå‡½æ•°çš„å¼€å§‹ï¼Œåœ¨æ­¤ä¹‹å‰ä¸åº”è¯¥æœ‰å…¶ä»–MPIå‡½æ•°\n```\n\n## 2.2 æ˜¯å¦åˆå§‹åŒ–ï¼šMPI_Initialized\n\n```cpp\nint MPI_Initialized(int *flag)\n```\n\nå”¯ä¸€å¯åœ¨MPI_Initå‰ä½¿ç”¨çš„å‡½æ•°ï¼Œç”¨æ¥æ£€æµ‹MPIç³»ç»Ÿæ˜¯å¦å·²ç»åˆå§‹åŒ–ï¼Œ**å·²ç»è°ƒç”¨MPI_Initï¼Œè¿”å›flag=trueï¼Œå¦åˆ™è¿”å›flag=false**ã€‚\n\n## 2.3 ç»ˆæ­¢ç¯å¢ƒï¼šMPI_Finalized\n\n```cpp\nint MPI_Finalize(void)\n```\n\nåœ¨ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œå®Œå…¶å…¨éƒ¨MPIå‡½æ•°è°ƒç”¨åï¼Œå°†è°ƒç”¨å‡½æ•°MPI_Finalizeï¼Œä»è€Œè®©ç³»ç»Ÿé‡Šæ”¾åˆ†é…ç»™MPIçš„èµ„æºï¼ˆä¾‹å¦‚å†…å­˜ç­‰ï¼‰\n\n## 2.4 è·å–è¿›ç¨‹æ•°ï¼šMPI_Comm_size\n\n```cpp\nint MPI_Comm_size(MPI_Comm comm, int* size)\n```\n\né€šè¿‡è°ƒç”¨å‡½æ•°æ¥ç¡®å®šä¸€ä¸ªé€šä¿¡åŸŸä¸­çš„**è¿›ç¨‹æ€»æ•°**ã€‚\n\nå¦‚æœcommæ˜¯`MPI_COMM_WORLD`ï¼Œé‚£å°±æ˜¯å½“å‰ç¨‹åºèƒ½ç”¨çš„æ‰€æœ‰è¿›ç¨‹æ•°\n\n## 2.5 è·å–è¿›ç¨‹IDï¼šMPI_Comm_rank\n\n```cpp\nint MPI_Comm_rank(MPI_Comm comm, int* rank)\n```\n\n**åœ¨ä¸€ä¸ªæœ‰pä¸ªè¿›ç¨‹çš„é€šä¿¡åŸŸä¸­ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹æœ‰ä¸€ä¸ªå”¯ä¸€çš„åºå·ï¼ˆIDå·ï¼‰ï¼Œå–å€¼ä¸º0~p-1**ã€‚\n\nå½“MPIåˆå§‹åŒ–åï¼Œæ¯ä¸€ä¸ªæ´»åŠ¨è¿›ç¨‹å˜æˆäº†ä¸€ä¸ªå«MPI_COMM_WORLDçš„é€šä¿¡åŸŸä¸­çš„æˆå‘˜ã€‚\n\n## 2.6 è·å–ç¨‹åºè¿è¡Œçš„ä¸»æœºå\n\n```cpp\nint MPI_Get_processor_name(char* name, int* resultlen)\n```\n\n- nameï¼šè¿”å›åç§°\n- resultlenï¼šè¿”å›åç§°æ‰€å ç”¨çš„å­—èŠ‚\n\nåº”æä¾›å‚æ•°nameä¸å°‘äºMPI_MAX_PROCESSOR_NAMEä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚\n\n## 2.7 ç»ˆæ­¢ä¸€ä¸ªcommçš„æ‰€æœ‰è¿›ç¨‹ï¼šMPI_Abort\n\n```cpp\nint MPI_Abort(MPI_Comm comm, int errorcode)\n```\n\nå¼‚å¸¸ç»ˆæ­¢MPIç¨‹åºï¼Œåœ¨å‡ºç°äº†è‡´å‘½é”™è¯¯è€Œå¸Œæœ›å¼‚å¸¸ç»ˆæ­¢MPIç¨‹åºæ—¶æ‰§è¡Œï¼ŒMPIç³»ç»Ÿä¼šè®¾æ³•ç»ˆæ­¢commé€šä¿¡å™¨ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼Œè¾“å…¥æ•´å½¢å‚æ•°errocodeï¼Œå°†è¢«ä½œä¸ºè¿›ç¨‹çš„é€€å‡ºç è¿”å›ç»™ç³»ç»Ÿã€‚\n\n## 2.8 åŒæ­¥æ …æ å‡½æ•° MPI_Barrier\n\n```cpp\nvoid MPI_Barrier(MPI_Comm communicator)\n```\n\nå¯ä»¥ç”¨äºŒå‰æ ‘ã€åŒå›ç¯ç­‰æ–¹å¼å®ç°ï¼Œä¾é çš„æ˜¯Sendã€Recvé˜»å¡æœºåˆ¶\n\n# ä¸‰ã€é€šä¿¡API\n\n- MPIæä¾›äº†æ¶ˆæ¯çš„ç¼“å­˜æœºåˆ¶\n- æ¶ˆæ¯å¯ä»¥ä»¥é˜»å¡æˆ–éé˜»å¡çš„æ–¹å¼å‘é€\n- é¡ºåºæ€§ï¼šMPIä¿è¯æ¥æ”¶è€…æ”¶åˆ°æ¶ˆæ¯çš„é¡ºåºå’Œå‘é€è€…çš„å‘é€é¡ºåºä¸€è‡´\n- å…¬å¹³æ€§ï¼šMPIä¸ä¿è¯è°ƒåº¦å…¬å¹³æ€§ï¼Œç¨‹åºå‘˜è‡ªå·±å»é˜²æ­¢è¿›ç¨‹é¥¥é¥¿\n\n## 3.1 MPIæ¶ˆæ¯æ•°æ®ç±»å‹\n\n|    MPI æ•°æ®ç±»å‹    |    C è¯­è¨€æ•°æ®ç±»å‹    |   MPI æ•°æ®ç±»å‹    |  C è¯­è¨€æ•°æ®ç±»å‹   |\n| :----------------: | :------------------: | :---------------: | :---------------: |\n|      MPI_CHAR      |     signed char      |   MPI_UNSIGNED    |   unsigned int    |\n|     MPI_SHORT      |   signed short int   | MPI_UNSIGNED_LONG | unsigned long int |\n|      MPI_INT       |      signed int      |     MPI_FLOAT     |       float       |\n|      MPI_LONG      |   signed long int    |    MPI_DOUBLE     |      double       |\n|   MPI_LONG_LONG    | signed long long int |  MPI_LONG_DOUBLE  |    long double    |\n| MPI_UNSIGNED_CHAR  |    unsigned char     |     MPI_BYTE      |                   |\n| MPI_UNSIGNED_SHORT |  unsigned short int  |    MPI_PACKED     |                   |\n\n## 3.2 ç‚¹å¯¹ç‚¹é€šä¿¡\n\n`status`å‚æ•°ç”¨äºæŒ‡å‡ºæ¥æ”¶çš„æ¶ˆæ¯çš„æºå’Œæ ‡è®°ï¼ˆstatus.MPI_SOURCEã€status.MPI_TAGï¼‰å¦‚æœä¸å…³å¿ƒè¿™äº›å‚æ•°ï¼Œå¯ä»¥ç”¨`MPI_STATUS_IGNORE`\n\n- é˜»å¡å‘é€/æ¥æ”¶ï¼š\n\n  ```cpp\n  int MPI_Send(void *buf, int count, MPI_Datatype datatype, int dest, int tag, MPI_Comm comm)\n  // buf: å‘é€ç¼“å†²åŒºèµ·å§‹åœ°å€\n  // count: å‘é€æ¶ˆæ¯çš„æ•°æ®å•å…ƒä¸ªæ•°\n  // datatype: å‘é€æ¶ˆæ¯çš„æ•°æ®ç±»å‹\n  // dest: ç›®æ ‡è¿›ç¨‹å·\n  // tag: å‘é€æ¶ˆæ¯çš„æ ‡ç­¾\n  // comm: é€šä¿¡åŸŸ\n  int MPI_Recv(void *buf, int count, MPI_Datatype datatype, int source, int tag, MPI_Comm comm, MPI_Status *status)\n  //statuså¯ä»¥ç”¨MPI_STATUS_IGNOREå¿½ç•¥ä½¿ç”¨\n  ```\n\n  ```cpp\n  #include <stdio.h>\n  #include <string.h>\n  #include \"mpi.h\"\n  void main(int argc, char* argv[])\n  {\n      int numprocs, myid, source;\n      MPI_Status status;\n      char message[100];\n      MPI_Init(&argc, &argv);\n      MPI_Comm_rank(MPI_COMM_WORLD, &myid);\n      MPI_Comm_size(MPI_COMM_WORLD, &numprocs);\n      if (myid != 0) {  //é0å·è¿›ç¨‹å‘é€æ¶ˆæ¯\n          strcpy(message, \"Hello World!\");\n          MPI_Send(message, strlen(message) + 1, MPI_CHAR, 0, 99,\n              MPI_COMM_WORLD);\n      }\n      else {   // myid == 0ï¼Œå³0å·è¿›ç¨‹æ¥æ”¶æ¶ˆæ¯\n          for (source = 1; source < numprocs; source++) {\n              MPI_Recv(message, 100, MPI_CHAR, source, 99,\n                  MPI_COMM_WORLD, &status);\n              printf(\"æ¥æ”¶åˆ°ç¬¬%då·è¿›ç¨‹å‘é€çš„æ¶ˆæ¯ï¼š%s\\n\", source, message);\n          }\n      }\n      MPI_Finalize();\n  }\n  ```\n\n  \n\n- éé˜»å¡å‘é€/æ¥æ”¶ï¼š\n\n  ```cpp\n  int MPI_Isend(const void* buf, int count, MPI_Datatype datatype, int dest, int tag, MPI_Comm comm, MPI_Request* request)\n  // buf: å‘é€ç¼“å†²åŒºèµ·å§‹åœ°å€\n  // count: å‘é€æ¶ˆæ¯çš„æ•°æ®å•å…ƒä¸ªæ•°\n  // datatype: å‘é€æ¶ˆæ¯çš„æ•°æ®ç±»å‹\n  // dest: ç›®æ ‡è¿›ç¨‹å·\n  // tag: å‘é€æ¶ˆæ¯çš„æ ‡ç­¾\n  // comm: é€šä¿¡åŸŸ\n  // request: éé˜»å¡å‘é€è¯·æ±‚å¯¹è±¡\n  int MPI_Irecv(void *buf, int count, MPI_Datatype datatype, int source, int tag, MPI_Comm comm, MPI_Request *request)\n  //é€šè¿‡requestå¯ä»¥çŸ¥é“Isendæˆ–Irecvçš„çŠ¶æ€ï¼ˆæ˜¯å¦å®Œæˆï¼‰\n  ```\n\n  `MPI_Wait`ç”¨äºç­‰å¾…æŸä¸€ä¸ªé€šä¿¡çš„å®Œæˆï¼Œ`MPI_Waitall`ç­‰å¾…ä¸€ç»„é€šä¿¡çš„å®Œæˆ\n\n  ```cpp\n  int MPI_Wait(MPI_Request *request, MPI_Status *status)\n  //statuså¯ç”¨`MPI_STATUS_IGNORE`ä»£æ›¿\n  ```\n\n  ```cpp\n  #include <mpi.h>\n  #include <iostream>\n  #include <vector>\n  int main(int argc, char** argv) {\n      MPI_Init(&argc, &argv);\n      int rank, size;\n      MPI_Comm_rank(MPI_COMM_WORLD, &rank);\n      MPI_Comm_size(MPI_COMM_WORLD, &size);\n      if (size != 2) {\n          std::cerr << \"This program requires exactly 2 MPI processes.\" << std::endl;\n          MPI_Abort(MPI_COMM_WORLD, 1);\n      }\n      const int N = 10;\n      std::vector<int> data(N);\n      MPI_Request request;\n      MPI_Status status;\n  \n      if (rank == 0) {\n          for (int i = 0; i < N; ++i) {\n              data[i] = i;\n          }\n          MPI_Isend(data.data(), N, MPI_INT, 1, 0, MPI_COMM_WORLD, &request);\n          MPI_Wait(&request, &status);\n      } else if (rank == 1) {\n          MPI_Irecv(data.data(), N, MPI_INT, 0, 0, MPI_COMM_WORLD, &request);\n          MPI_Wait(&request, &status);\n          std::cout << \"Process 1: Data received.\" << std::endl;\n          std::cout << \"Process 1: Received data = \";\n          for (int i = 0; i < N; ++i) {\n              std::cout << data[i] << \" \";\n          }\n          std::cout << std::endl;\n      }\n      MPI_Finalize();\n      return 0;\n  }\n  \n  ```\n\n## 3.3 é›†åˆé€šä¿¡\n\n### 3.3.1 å¹¿æ’­ Bcast\n\nä»æŒ‡å®šçš„ä¸€ä¸ªæ ¹è¿›ç¨‹ä¸­æŠŠ**ç›¸åŒçš„æ•°æ®**å¹¿æ’­å‘é€ç»™ç»„ä¸­çš„æ‰€æœ‰å…¶ä»–è¿›ç¨‹\n\n![img](MPIå­¦ä¹ /793e4b95df5f473ab6a917b3351d5c2c.png)\n\n```cpp\nMPI_Bcast(\n    void *buffer,\n    int count,\n    MPI_Datatype datatype,\n    int root,\n    MPI_Comm comm)\n```\n\nforå¾ªç¯è°ƒç”¨MPI_Sendå’ŒMPI_Recvä¹Ÿèƒ½å®ç°å¹¿æ’­çš„æ•ˆæœï¼Œä½†æ˜¯**æ—¶é—´å¤æ‚åº¦**æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œforå¾ªç¯å®ç°æ—¶é—´å¤æ‚åº¦ä¸º**O(n)**ï¼ŒBcastå®ç°æ—¶é—´å¤æ‚åº¦ä¸º**O(logn)**\n\n**Bcastçš„å®ç°ç¤ºæ„å›¾ï¼š**\n\n![MPI_Bcast tree](MPIå­¦ä¹ /broadcast_tree.png)\n\n- **T0æ—¶åˆ»ï¼š**0å·è¿›ç¨‹å°†æ•°æ®ä¼ é€’ç»™1å·è¿›ç¨‹\n- **T1æ—¶åˆ»ï¼š**0å·è¿›ç¨‹å’Œ1å·è¿›ç¨‹éƒ½æœ‰äº†æ•°æ®ï¼Œ0å·è¿›ç¨‹å°†æ•°æ®å‘é€ç»™2å·è¿›ç¨‹ï¼Œ1å·è¿›ç¨‹å‘é€ç»™3å·è¿›ç¨‹\n- **T2æ—¶åˆ»ï¼š**0->4ï¼Œ1->5ï¼Œ2->6ï¼Œ3->7\n\n### 3.3.2 åˆ†å‘ Scatter\n\næŠŠæŒ‡å®šçš„æ ¹è¿›ç¨‹ä¸­çš„æ•°æ®**åˆ†æ•£**å‘é€ç»™ç»„ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼ˆ**åŒ…æ‹¬è‡ªå·±**ï¼‰\n\n![img](MPIå­¦ä¹ /5b0f095e18a74d38b739034c496a1e15.png)\n\n```cpp\nMPI_Scatter(\n    void* send_data,int send_count,MPI_Datatype send_datatype,\n    void* recv_data,int recv count,MPI_Datatype recv_datatype,\n    int root,MPI_Comm communicator)\n```\n\n### 3.3.3 æ”¶é›† Gather\n\nåœ¨ç»„ä¸­æŒ‡å®šä¸€ä¸ªè¿›ç¨‹æ”¶é›†ç»„ä¸­è¿›ç¨‹å‘æ¥çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªå‡½æ•°æ“ä½œä¸MPI_Scatterå‡½æ•°æ“ä½œç›¸å\næ‰€æœ‰è¿›ç¨‹è°ƒç”¨è¯¥å‡½æ•°ï¼ŒæŠŠæŒ‡å®šä½ç½®çš„æ•°æ®å‘é€ç»™æ ¹è¿›ç¨‹çš„æŒ‡å®šä½ç½®\n\n![img](MPIå­¦ä¹ /b5d9b251e1c643ce83ae9db8440eab5c.png)\n\n```cpp\nMPI_Gather(\n    void *sendbuf,int sent_count,MPI_Datatype send_datatype,\n    void *recv_data,int recv_count,MPI_Datatype recv_datatype,\n    int root,MPI_Comm communicator)\n```\n\n### 3.3.4 å…¨æ”¶é›† Allgather\n\nå°†æ‰€æœ‰çš„æ•°æ®èšåˆåˆ°æ¯ä¸ªè¿›ç¨‹ä¸­ã€‚\n\n![image-20240526132009884](MPIå­¦ä¹ /image-20240526132009884.png)\n\n```cpp\nMPI_Allgather(\n    void* send_data,int send_count,MPI_Datatype send_datatype,\n    void* recv_data,int recv_count,MPI_Datatype recv_datatype,\n    MPI_Comm communicator)\n```\n\nä¸gatherçš„åŒºåˆ«å°±æ˜¯æ²¡æœ‰`root`å‚æ•°\n\n### 3.3.5 è§„çº¦ Reduce\n\nå°†æ¯ä¸ªè¿›ç¨‹ä¸­çš„æ•°æ®æŒ‰ç»™å®šçš„æ“ä½œopè¿›è¡Œè¿ç®—ï¼Œå¹¶å°†å…¶ç»“æœè¿”å›åˆ°åºåˆ—å·ä¸ºrootçš„è¿›ç¨‹ã€‚\n\n![image-20240526132613368](MPIå­¦ä¹ /image-20240526132613368.png)\n\nå¯ä»¥å¤„ç†å¤šä¸ªå€¼\n\n![img](MPIå­¦ä¹ /modb_20211208_35345a7a-580d-11ec-bc47-fa163eb4f6be.png)\n\n```cpp\nMPI_Reduce(\n\tvoid *send_data,\n\tvoid *recv_data, \n\tint count,\n\tMPI_Datatype datatype,\n\tMPI_Op operator,/*æ“ä½œ*/\n\tint root,\n\tMPI_Comm comm);\n```\n\n![opration](MPIå­¦ä¹ /20151125101509006.png)\n\n### 3.3.6 å…¨è§„çº¦ Allreduce\n\n![MPIï¼ŒOpenMPIä¸æ·±åº¦å­¦ä¹ -æœ‰é©¾](MPIå­¦ä¹ /u=1777912551,215306698&fm=30&app=106&f=JPEG.jpeg)\n\n```cpp\nMPI_Allreduce(\n    void* send_data,\n    void* recv_data,\n    int count,\n    MPI_Datatype datatype,\n    MPI_Op op,\n    MPI_Comm communicator)\n```\n\n## 3.4 é€šä¿¡åŸŸå’Œè¿›ç¨‹ç»„\n\n**è¿›ç¨‹ç»„**å°±æ˜¯ä¸€ç»„å¹¶è¡Œè¿è¡Œçš„MPIè¿›ç¨‹çš„é›†åˆï¼ŒåŒä¸€è¿›ç¨‹å¯ä»¥å±äºä¸åŒçš„è¿›ç¨‹ç»„\n\nä¸€ä¸ªè¿›ç¨‹ç»„å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„è¿›ç¨‹ï¼Œè€Œä¸€ä¸ªé€šä¿¡åŸŸç”±ä¸€ä¸ªè¿›ç¨‹ç»„æ„æˆï¼Œä½†ä¸€ä¸ªè¿›ç¨‹ç»„å¯ä»¥ç”¨äºåˆ›å»ºå¤šä¸ªä¸åŒçš„é€šä¿¡åŸŸã€‚\n\nåœ¨ä¹‹å‰çš„MPIå­¦ä¹ ä¸­ä¸€ç›´ä½¿ç”¨çš„é€šä¿¡åŸŸMPI_COMM_WORLD**æ‰€å¯¹åº”çš„**è¿›ç¨‹ç»„å°±æ˜¯å…¨ä½“è¿›ç¨‹çš„é›†åˆ\n\n```cpp\n#include <mpi.h>\n#include <stdio.h>\n\nint main(int argc, char *argv[]) {\n    MPI_Init(&argc, &argv);\n\n    int rank, size;\n    MPI_Comm_rank(MPI_COMM_WORLD, &rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &size);\n\n    // è·å–é»˜è®¤é€šä¿¡åŸŸçš„è¿›ç¨‹ç»„\n    MPI_Group world_group;\n    MPI_Comm_group(MPI_COMM_WORLD, &world_group);\n\n    // åˆ›å»ºåŒ…å«å‰åŠéƒ¨åˆ†è¿›ç¨‹çš„æ–°è¿›ç¨‹ç»„\n    int half_size = size / 2;\n    int *ranks = (int *)malloc(half_size * sizeof(int));\n    for (int i = 0; i < half_size; i++) {\n        ranks[i] = i;\n    }\n\n    MPI_Group new_group;\n    MPI_Group_incl(world_group, half_size, ranks, &new_group);\n\n    // ä½¿ç”¨æ–°è¿›ç¨‹ç»„åˆ›å»ºæ–°çš„é€šä¿¡åŸŸ\n    MPI_Comm new_comm;\n    MPI_Comm_create(MPI_COMM_WORLD, new_group, &new_comm);\n\n    // åœ¨æ–°é€šä¿¡åŸŸä¸­è¿›è¡Œæ“ä½œ\n    if (new_comm != MPI_COMM_NULL) {\n        int new_rank, new_size;\n        MPI_Comm_rank(new_comm, &new_rank);\n        MPI_Comm_size(new_comm, &new_size);\n\n        int data = new_rank;\n        // å¹¿æ’­æ•°æ®\n        MPI_Bcast(&data, 1, MPI_INT, 0, new_comm);\n        printf(\"Process %d in new_comm received data %d\\n\", new_rank, data);\n\n        // è§„çº¦æ“ä½œ\n        int sum;\n        MPI_Reduce(&data, &sum, 1, MPI_INT, MPI_SUM, 0, new_comm);\n        if (new_rank == 0) {\n            printf(\"Sum of ranks in new_comm: %d\\n\", sum);\n        }\n    }\n\n    // é‡Šæ”¾é€šä¿¡åŸŸ\n    MPI_Comm_free(&new_comm);\n\n    // é‡Šæ”¾è¿›ç¨‹ç»„\n    MPI_Group_free(&world_group);\n    MPI_Group_free(&new_group);\n\n    MPI_Finalize();\n    return 0;\n}\n\n```\n\n","tags":["è¶…ç®—"]},{"title":"OpenMPå­¦ä¹ ","url":"/2022/02/05/OpenMPå­¦ä¹ /","content":"\n![image-20240524114515105](OpenMPå­¦ä¹ /image-20240524114515105.png)\n\nç¼–è¯‘æ—¶éœ€è¦åŠ ä¸Š`-fopenmp`æ ‡å¿—ï¼š\n\n```bash\ngcc -fopenmp -o my_program my_program.c\n```\n\n|            å‡½æ•°             |               æ¦‚å¿µ               |\n| :-------------------------: | :------------------------------: |\n|  `int omp_get_num_procs()`  | è¿”å›æœ¬çº¿ç¨‹çš„å¤šå¤„ç†æœºçš„å¤„ç†å™¨ä¸ªæ•° |\n| `int omp_get_num_threads()` |    è¿”å›å½“å‰å¹¶è¡ŒåŒºåŸŸçš„çº¿ç¨‹ä¸ªæ•°    |\n| `int omp_get_thread_num()`  |          è¿”å›å½“å‰çº¿ç¨‹å·          |\n| `int omp_set_num_threads()` |    è®¾ç½®å¹¶è¡Œä»£ç æ‰§è¡Œæ—¶çº¿ç¨‹ä¸ªæ•°    |\n|  `double omp_get_wtime()`   |     è¿”å›ä»¥ç§’ä¸ºå•ä½çš„å½“å‰æ—¶é—´     |\n\n# ä¸€ã€openMPè¯­å¥æ¨¡å¼\n\n```\n#pragma omp æŒ‡ä»¤ å­å¥ å­å¥ å­å¥........\n```\n\n# äºŒã€parallel åˆ¶å¯¼å‘½ä»¤\n\nè¡¨ç¤ºæ¥ä¸‹æ¥ç”±èŠ±æ‹¬å·æ‹¬èµ·æ¥çš„åŒºåŸŸå°†åˆ›å»ºå¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œ\n\nå¯ä»¥ç”¨`num_threads`æ¥æ§åˆ¶ä½¿ç”¨çš„çº¿ç¨‹æ•°ç›®ã€‚\n\n```\n#pragma omp parallel num_threads(5)\n```\n\n**å‡½æ•°å®ç°çº¿ç¨‹æ•°ç›®æ§åˆ¶**ï¼š`omp_set_num_threads(5)`\n\nè·å–çº¿ç¨‹IDï¼š`int tid = omp_get_thread_num();`\n\n# ä¸‰ã€for å¾ªç¯è¯­å¥\n\næ¯ä¸€ä¸ªè¦**å¾ªç¯çš„è¯­å¥**å°†è¢«åˆ†é…ç»™ä¸åŒçš„çº¿ç¨‹å»æ‰§è¡Œã€‚\n\n```\n#pragma omp for\n```\n\n**tips**:å¾ªç¯ä½“è¦æŒ‰ç…§`for(int i=0;i<n;i++)`çš„å½¢å¼ï¼Œæ³¨æ„intï¼è¦åœ¨foråˆå§‹åŒ–\n\n```cpp\n#pragma omp parallel\n{\n    #pragma omp for\n    for(int i=0;i<n;i++)\n        {\n            // æ‰§è¡Œè¯­å¥\n        }\n}\n```\n\nparallel å’Œ for å¯ä»¥å†™æˆä¸€ä¸ªæ•´ä½“ï¼Œå³ï¼š\n\n```cpp\n#pragma omp parallel for\nfor(int i=0;i<n;i++)\n{\n    // æ‰§è¡Œè¯­å¥\n}\n```\n\n# å››ã€scheduleè°ƒåº¦æŒ‡ä»¤\n\n**scheduleå­å¥**ï¼š`schedule(type,size)`\n\n- typeï¼š**â‘ static â‘¡dynamic â‘¢guided â‘£runtime**\n- sizeï¼šæ•´æ•°å‹ï¼Œè¡¨ç¤º**å¾ªç¯è¿­ä»£æ¬¡æ•°åˆ’åˆ†å•ä½**\n\n## 1ã€staticå‚æ•°ï¼šé™æ€è°ƒåº¦\n\n- ä¸ç”¨sizeå‚æ•°æ—¶ï¼Œåˆ†é…ç»™æ¯ä¸ªç¨‹åºçš„éƒ½æ˜¯n/tæ¬¡è¿ç»­è¿­ä»£ï¼ˆnä¸ºè¿­ä»£æ¬¡æ•°ï¼Œtä¸ºå¹¶è¡Œçš„çº¿ç¨‹æ•°ç›®ï¼‰\n- ä½¿ç”¨sizeå‚æ•°ï¼Œè¡¨ç¤ºæ¯æ¬¡åˆ†é…ç»™çº¿ç¨‹sizeä¸ªè¿ç»­è¿­ä»£ã€‚\n\n```cpp\n#pragma omp parallel for schedule(static) num_threads(3)\n{\n\tfor(int i=0;i<12;i++)\n\t{\n\t\t//ä¸€ç³»åˆ—æ“ä½œ\n\t}\n}\nè¿­ä»£æƒ…å†µï¼š\n\tThread 0: 0ã€3ã€6ã€9\n\tThread 1: 1ã€4ã€7ã€10\n\tThread 2: 2ã€5ã€8ã€11\n\t\n#pragma omp parallel for schedule(static,2) num_threads(3)\n{\n\tfor(int i=0;i<12;i++)\n\t{\n\t\t//ä¸€ç³»åˆ—æ“ä½œ\n\t}\n}\nè¿­ä»£æƒ…å†µï¼š\n\tThread 0: 0ã€1 | 6ã€7\n\tThread 1: 2ã€3 | 8ã€9\n\tThread 2: 4ã€5 | 10ã€11\n\n```\n\n## 2ã€dynamicå‚æ•°ï¼šåŠ¨æ€è°ƒåº¦\n\nå…ˆåˆ°å…ˆå¾—çš„æ–¹å¼è¿›è¡Œä»»åŠ¡åˆ†é…\n\n- ä¸ä½¿ç”¨sizeå‚æ•°æ—¶ï¼Œç©ºé—²çº¿ç¨‹å–**ä¸€ä¸ªä»»åŠ¡**\n- ä½¿ç”¨sizeå‚æ•°æ—¶å€™ï¼Œç©ºé—²çº¿ç¨‹å–**sizeä¸ªä»»åŠ¡**\n\n## 3ã€guidedå‚æ•°ï¼š\n\n`guided`å¼€å§‹æ—¶æ¯ä¸ªçº¿ç¨‹ä¼šåˆ†é…åˆ°è¾ƒå¤§çš„è¿­ä»£å—ï¼Œä¹‹ååˆ†é…åˆ°çš„è¿­ä»£å—ä¼šé€æ¸é€’å‡ã€‚\n\nè¿­ä»£å—çš„å¤§å°ä¼šæŒ‰æŒ‡æ•°çº§ä¸‹é™åˆ°æŒ‡å®šçš„`chunksize`å¤§å°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š`chunksize`å‚æ•°ï¼Œé‚£ä¹ˆè¿­ä»£å—å¤§å°æœ€å°ä¼šé™åˆ°1ã€‚\n\n**ä»£ç ç¤ºä¾‹ï¼š**\n\n```cpp\n#include<omp.h>\n#include<iostream>\nusing namespace std;\nint main()\n{\n\tomp_set_num_threads(2);\n#pragma omp parallel for schedule(static)\n\t\tfor(int i=0;i<8;i++)\n\t\t cout << omp_get_thread_num() << endl;\n}\n```\n\n# äº”ã€sectionsåˆ¶å¯¼æŒ‡ä»¤\n\nç”¨sectionsæŠŠ**ä¸åŒçš„åŒºåŸŸäº¤ç»™ä¸åŒçš„çº¿ç¨‹**å»æ‰§è¡Œ\n\n**ä»£ç ç¤ºä¾‹ï¼š**\n\n```cpp\n#include <bits/stdc++.h>\n#include <omp.h>\nusing namespace std;\nint main()\n{\n    #pragma omp parallel sections\n    {\n        #pragma omp section\n        {\n            // å¥æ®µ1\n        }\n        #pragma omp section\n        {\n            // å¥æ®µ2\n        }\n    }\n}\n```\n\n# å…­ã€å˜é‡ç®¡ç†\n\nåœ¨æ²¡æœ‰privateæŒ‡ä»¤çš„æ—¶å€™ï¼Œé»˜è®¤å˜é‡éƒ½æ˜¯å„çº¿ç¨‹ä¹‹é—´**å…±äº«**çš„\n\n## private\n\nç”¨`#pragma omp private(n)`å£°æ˜å¯å£°æ˜**ä¸€ä¸ªæˆ–å¤šä¸ª**å˜é‡ä¸ºçº¿ç¨‹ç§æœ‰å‰¯æœ¬ã€‚\n\n```cpp\nint n = 1 , m = 100;\n#pragma omp private(n,m)\n{\n\tprintf(\"%d %d\",n,m);//æ­¤æ—¶çš„nã€mä¸ºå„çº¿ç¨‹ç§æœ‰ï¼Œn=0,m=0;\n}\n```\n\n## firstprivate\n\nprivateæŒ‡ä»¤åªæ˜¯å£°æ˜å˜é‡ç§æœ‰ï¼Œä½†ä¸èƒ½ç»§æ‰¿åœ¨ä¸»çº¿ç¨‹ä¸­çš„å€¼ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨`firstprivate`äº†\nä¾‹å¦‚ï¼š\n\n```cpp\nint n = 1;\n#pragma omp firstprivate(n)\n{\n\tprintf(\"%d\",n);//æ­¤æ—¶æ¯ä¸ªçº¿ç¨‹ä¸­çš„néƒ½ä¸º1\n}\n```\n\n## lastprivate\n\nå°†ç»è¿‡çº¿ç¨‹å¤„ç†çš„æ•°æ®é‡æ–°èµ‹å€¼ç»™ä¸»çº¿ç¨‹çš„å˜é‡\n**æ³¨æ„ï¼š**\næœ€ç»ˆä¸»çº¿ç¨‹å˜é‡çš„å€¼ç”±æœ€åæ‰§è¡Œå®Œæˆçš„é‚£ä¸ªçº¿ç¨‹å†³å®šã€‚\n\n```cpp\nint n = 1;\n#pragma omp lastprivate(n) \n{\n\tn += omp_get_thread_num();//æœ€ç»ˆçš„nçš„å€¼ç”±æœ€åä¸€ä¸ªæ‰§è¡Œå®Œçš„çº¿ç¨‹å†³å®š\n}\nprintf(\"%d\",n);\n```\n\n## defualt\n\ndefaultå¯ä»¥è®¾ç½®å¹¶è¡ŒåŒºåŸŸçš„å˜é‡ä½¿ç”¨æ–¹å¼\n`default(shared)`ä¸ºå…±äº«\n`default(none)`ä¸ºç§æœ‰\n\n# ä¸ƒã€singleåˆ¶å¯¼è¯­å¥\n\nsingleåˆ¶å¯¼æŒ‡ä»¤æ‰€åŒ…å«çš„ä»£ç æ®µåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œåˆ«çš„çº¿ç¨‹è·³è¿‡ã€‚\n\nå¦‚æœæ²¡æœ‰`nowait`å­å¥ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹å°†ä¼šåœ¨singleåˆ¶å¯¼æŒ‡ä»¤ç»“æŸçš„éšå¼åŒæ­¥ç‚¹ç­‰å¾…ã€‚\n\næœ‰`nowait`å­å¥å…¶ä»–çº¿ç¨‹å°†è·³è¿‡ç­‰å¾…å¾€ä¸‹æ‰§è¡Œã€‚\n\n```\n#pragma omp single\n#pragma omp single nowait\n```\n\n![image-20240524114221718](OpenMPå­¦ä¹ /image-20240524114221718.png)\n\n# å…«ã€äº’æ–¥\n\n`critical`ã€`Lock`ã€`atomic`ä¸‰è€…çš„è€—æ—¶æ¯”çº¦ä¸º 7 : 3.5 ï¼š1\n\n## 1ã€critical\n\nCriticalåŒºåŸŸæ˜¯ä¸€æ®µä»£ç ï¼Œåœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥CriticalåŒºåŸŸæ—¶ï¼Œå…¶ä»–çº¿ç¨‹å°±éœ€è¦ç­‰å¾…è¯¥çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰èƒ½è¿›å…¥è¿™ä¸ªåŒºåŸŸã€‚ä½¿ç”¨`#pragma omp critical`æŒ‡ä»¤æ¥åˆ›å»ºCriticalåŒºåŸŸã€‚\n\n```cpp\nint x=0;\n#pragma omp parallel for\n{\n\t#pragma omp critical\n\t{\n\t\tx+=1;//æ­¤æ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè¿™ä¸ªx+1çš„æ“ä½œï¼Œå…¶ä»–çº¿ç¨‹åœ¨ç­‰å¾…\n\t}\n\tprintf(\"%d\",x);\n}\n```\n\n## 2ã€atomic\n\natomicæ˜¯åŸå­æ“ä½œï¼Œ**é€Ÿåº¦æœ€å¿«**ï¼Œä½†æ˜¯<u>åªèƒ½ä¿æŠ¤ä¸€æ¡Cè¯­è¨€èµ‹å€¼è¯­å¥å½¢æˆçš„ä¸´ç•ŒåŒº</u>\nè¯­å¥å¿…é¡»æŒ‰ç…§ï¼šx {op} = {expression}çš„å½¢å¼\nå¦‚ï¼šx++ã€x--ã€--xã€++x\n\nopå¯ä»¥æ˜¯ä»¥ä¸‹ä»»æ„çš„äºŒå…ƒæ“ä½œç¬¦ï¼š+ã€-ã€*ã€/ã€&ã€^ã€|ã€<<ã€>>\n\n**æ³¨æ„ï¼š**expressionä¸èƒ½å¼•ç”¨xï¼Œå¦‚ï¼šx+=xï¼Œè¿™æ˜¯ä¸å…è®¸çš„\n\n```cpp\nint x = 0;\n#pragma omp parallel\n{\n\t#pragma omp atomic\n\t\tx++;\n}\n```\n\n## 3ã€é”\n\nä¸€ç§æ˜¾å¼çš„åŒæ­¥æœºåˆ¶ï¼Œå¯ä»¥ç”¨äºä¿æŠ¤å…±äº«èµ„æºï¼Œä¹Ÿå¯ä»¥ç”¨äºæ§åˆ¶çº¿ç¨‹æ‰§è¡Œçš„é¡ºåº\n\nåœ¨OpenMPä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨omp_lock_tç±»å‹çš„å˜é‡\n\n`omp_init_lock(&omp_lock)`åˆå§‹åŒ–é”\n`omp_set_lock(omp_lock)`ä¸Šé”\n`omp_unset_lock(&omp_lock)`è§£é”\n`omp_test_lock(&omp_lock)`æµ‹è¯•é”ï¼Œä¸Šé”çŠ¶æ€è¿”å›0ï¼Œå¦åˆ™ä¸º1ï¼Œå½“å‰çº¿ç¨‹ä¸ä¼šå‘ç”Ÿé˜»å¡\n`omp_destroy_lock(&omp_lock)`æ’¤é”€é”\n\n```cpp\nomp_lock_t lock;\nomp_init_lock(&lock);\n#pragma omp parallel\n{\n    // ä¸´ç•ŒåŒº\n    omp_set_lock(&lock);\n    // è¿™é‡Œæ˜¯éœ€è¦ä¿æŠ¤çš„ä»£ç å—\n    omp_unset_lock(&lock);\n}\nomp_destroy_lock(&lock);\n```\n\n# ä¹ã€è§„çº¦å­å¥\n\nä½¿ç”¨è§„çº¦å­å¥å°†å¹¶è¡ŒåŒºåŸŸæœ«å°¾è®¡ç®—å‡ºçš„ç»“æœä¸åŸå§‹å€¼åˆå¹¶\n\nä½¿ç”¨ï¼š`reduction(op:list)`\n\n| è¿ç®—ç¬¦ |           åˆå§‹å€¼           |\n| :----: | :------------------------: |\n|   +    |             0              |\n|   *    |             1              |\n|   -    |             0              |\n|  min   | è§„çº¦åˆ—è¡¨ç±»å‹ä¸­æœ€å¤§å¯è¡¨ç¤ºæ•° |\n|  max   | è§„çº¦åˆ—è¡¨ç±»å‹ä¸­æœ€å°å¯è¡¨ç¤ºæ•° |\n\n```cpp\n#pragma omp parallel for reduction(+:sum)\nfor(int i = 0; i < 100; i++){\n\tsum += i;\n}\n```\n\n","tags":["è¶…ç®—"]},{"title":"webå‰ç«¯å¼€å‘","url":"/2022/02/05/webå‰ç«¯å¼€å‘/","content":"\n# HTML\n\n## ä¸€ã€åŸºç¡€æ ‡ç­¾\n\n#### 1ã€<hr>åˆ†å‰²çº¿æ ‡ç­¾\n\n```html\n<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\" />\n\t\t<title></title>\n\t</head>\n\t<body>\n\t\t<hr color=\"red\" />\n\t\t<hr color=\"green\" width=\"200\"/>\n\t\t<hr color=\"blue\" align=\"right\" width=\"100\"/>\n\t\t<hr />\n\t\t<hr noshade=\"noshade\"/> <!--æ— é˜´å½±-->\n\t</body>\n</html>\n```\n\n![img](webå‰ç«¯å¼€å‘/1695631951027-f9965548-67e1-4eab-8cd5-eb0f942e0f66.png)\n\n#### 2ã€ç‰¹æ®Šç¬¦å·\n\n![img](webå‰ç«¯å¼€å‘/1695632165459-ed017fbb-bb0c-4d34-8033-989aa2baa0c6.png)\n\n#### 3ã€<div>å’Œ<span>æ ‡ç­¾\n\n**divæ ‡ç­¾ï¼š**æ— å…·ä½“å«ä¹‰ï¼Œç”¨æ¥åˆ’åˆ†åŒºåŸŸï¼Œç‹¬å ä¸€è¡Œ\n\n**spanæ ‡ç­¾ï¼š**æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œä¸»è¦ç”¨äºæ–‡æœ¬çš„ç‹¬ç«‹ä¿®é¥°ï¼Œå†…å®¹åŸæ¥æœ‰å¤šå®½å°±å ç”¨å¤šå®½\n\n```html\n\t\t<h3>ä½“è‚²sports</h3>\n\t\t<h3>ä½“è‚²<span style=\"color: red;\">sports</span></h3>\n```\n\n![img](webå‰ç«¯å¼€å‘/1695632731353-81a36c73-b073-4d9c-8878-06a570d49c8b.png)\n\n#### 4ã€<ul>ã€<ol>åˆ—è¡¨ä»¥åŠè‡ªå®šä¹‰åˆ—è¡¨\n\n![img](webå‰ç«¯å¼€å‘/1695633169978-e673c111-5d9b-419b-be46-8614c153f976.png)\n\n```html\n<ol type=\"I\" start=\"3\">\n  <li>III</li>\n  <li>IV</li>\n  <li>V</li>\n</ol>\ntypeï¼š1,a,A,I,i\nstartï¼šå–å€¼åªèƒ½æ˜¯ä¸€ä¸ªæ•°å­—\n<ul type=\"square\">\n  <li>1111</li>\n  <li>2222</li>\n</ul>\ntype: disc,circle,square,none\n<dl>\n  <dt>æˆ‘æ˜¯å›¾ç‰‡</dt>\n  <dd>æˆ‘æ˜¯æ–‡å­—</dd>\n</dl>\n```\n\n#### 5ã€<img>å›¾ç‰‡æ ‡ç­¾\n\næ”¯æŒjpeg/png/gifä¸‰ç§æ ¼å¼\n\n```html\nåŒçº§ç›®å½•ï¼š<img src=\"1.jpg\">\nä¸Šçº§ç›®å½•ï¼š<img src=\"../1.jpg\">\nç»å¯¹è·¯å¾„\n<img src=\"å›¾ç‰‡è·¯å¾„\" \n  \ttitle=\"é¼ æ ‡æ‚¬åœä¸Šå»åçš„æ–‡å­—æç¤º\"\n  \talt=\"å›¾ç‰‡åŠ è½½å¤±è´¥çš„æ–‡å­—æç¤º\"\n    width=\"å®½åº¦\"\n\t\theight=\"é«˜åº¦\" />\n```\n\n#### 6ã€<a>è¶…é“¾æ¥æ ‡ç­¾\n\n```html\n<a href=\"è·³è½¬è·¯å¾„\"\n  \ttitle=â€œé¼ æ ‡æ‚¬åœæ–‡å­—â€\n    target=\"è§„å®šåœ¨ä½•å¤„æ‰“å¼€\">\n  å¯è§†å†…å®¹\n</a>\ntargetå±æ€§ï¼šè§„å®šåœ¨ä½•å¤„æ‰“å¼€\n\ttarget=\"_self\" é»˜è®¤å€¼ï¼Œæœ¬çª—å£æ‰“å¼€\n\ttarget=\"_blank\" æ–°çª—å£æ‰“å¼€\n\n<a href=\"www.baidu.com\" title=\"ç‚¹å‡»ä¸€ä¸‹ï¼Œäº†è§£æ›´å¤š\" target=\"_blank\">\n\t<img src=\"baidu.png\" />\n</a>\n\n<a href=\"#link_to_this\">ç‚¹å‡»åˆ°è¾¾</a>\n<p name=\"link_to_this\"></p>\n\n<a href=\"mailto:vicczyq@qq.com\">å‘é€é‚®ä»¶</a>\n```\n\n![img](webå‰ç«¯å¼€å‘/1695635303035-80966f86-af1c-4ec3-9c01-6665955ef326.png)\n\n#### 7ã€<table>è¡¨æ ¼æ ‡ç­¾\n\n<table>è¡¨æ ¼å±æ€§ï¼š\n\n1. width å®½åº¦\n2. height é«˜åº¦\n3. border è¾¹æ¡†\n4. bordercolor è¾¹æ¡†é¢œè‰²\n5. bgcolor èƒŒæ™¯é¢œè‰²\n6. align å¯¹é½ï¼šrightã€leftã€center\n7. cellspacing å•å…ƒæ ¼ä¸å•å…ƒæ ¼ä¹‹é—´çš„é—´è·\n8. cellpadding å•å…ƒæ ¼å’Œå†…å®¹ä¹‹é—´çš„ç©ºéš™\n\n**<tr>è¡Œå±æ€§ï¼šï¼ˆæ²¡æœ‰widthå®½åº¦å±æ€§ï¼‰**\n\n1. height é«˜åº¦\n2. bgcolor èƒŒæ™¯é¢œè‰²\n3. align æ–‡å­—æ°´å¹³å¯¹é½leftã€rightã€center\n4. valign æ–‡å­—å‚ç›´å¯¹é½topã€middleã€bottom\n\n**<td>å•å…ƒæ ¼å±æ€§ï¼š**\n\n1. width å®½åº¦ï¼ˆå½±å“ä¸€åˆ—çš„å®½åº¦ï¼‰\n2. height é«˜åº¦ï¼ˆå½±å“ä¸€è¡Œçš„é«˜åº¦ï¼‰\n3. bgcolor èƒŒæ™¯é¢œè‰²\n4. align æ–‡å­—æ°´å¹³å¯¹é½\n5. valign æ–‡å­—å‚ç›´å¯¹é½\n\n```html\n\t\t<table>è¡¨\n\t\t\t<tr>è¡Œ\n\t\t\t\t<td>1</td>å•å…ƒæ ¼\n\t\t\t\t<td>2</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>3</td>\n\t\t\t\t<td>4</td>\t\t\t\t\n\t\t\t</tr>\n\t\t</table>\n```\n\n**è¡¨æ ¼çš„åˆå¹¶ï¼šcolspanåˆå¹¶åˆ—ã€rowspanåˆå¹¶è¡Œ**\n\n#### 8ã€formè¡¨å•æ ‡ç­¾\n\n```html\n<form method=\"get/post\" action=\"è¡¨å•æ•°æ®å‘é€URL\">\n\t<input type=\"...\" />\n  <\n      A. å±æ€§typeå®šä¹‰è¾“å…¥æ¡†çš„ç±»å‹\n        \ta) æ–‡æœ¬æ¡†ã€å¯†ç æ¡† <input type=\"text|password\" />\n          b) æäº¤æ¡† <input type=\"submit\" />\n          c) æŒ‰é’®æ¡† <input type=\"button\" /> å•çº¯çš„æŒ‰é’®\n          d) é‡ç½®æ¡† <input type=\"reset\" />æ¸…ç©ºè¡¨å•å†…å®¹\n          e) å•é€‰æ¡† <input type=\"radio\" name=\"sex\" value=\"male\"/>ç”·\n                    <input type=\"radio\" name=\"sex\" value=\"female\"/>å¥³\n          f) å¤šé€‰æ¡† <input type=\"checkbox\" name=\"transport\" value=\"bike\" />è‡ªè¡Œè½¦\n                    <input type=\"checkbox\" name=\"transport\" value=\"bus\" />å…¬å…±æ±½è½¦\n          g) æ–‡ä»¶ä¸Šä¼ <input type=\"file\" />\n          h) ä¸‹æ‹‰èœå• <select size=\"3\" name=\"xxx\">//è§†è§’å¤§å°ä¸º3\n                        <option disabled selected>==è¯·é€‰æ‹©===</option>\n                        <option value=\"1\">1</option>\n                        <option value=\"2\">2</option>\n                        <option value=\"3\">3</option>\n          \t\t\t\t\t\t</select>\n          i) å¤šè¡Œæ–‡æœ¬ <textarea name=\"xxx\" rows=2 cols=1>â€¦</textarea>\n    \n      B. å±æ€§placeholderæè¿°è¾“å…¥å­—æ®µé¢„æœŸå€¼çš„ç®€çŸ­ä¿¡æ¯æç¤º\n      C. å±æ€§nameå¿…é¡»è®¾ç½®ï¼Œå¦åˆ™åœ¨æäº¤çš„æ—¶å€™è¾“å…¥çš„æ•°æ®ä¸ä¼šå‘é€\n      D. å±æ€§value,è¾“å…¥æ¡†é»˜è®¤è¾“å…¥å†…å®¹ï¼ŒåŠ åœ¨æŒ‰é’®ä¸Šä¸ºæ ‡é¢˜\n\t\t      å¦‚ï¼š<input type=\"submit\" value=\"ä¸Šä¼ \" />\n              <input type=\"reset\" value=\"é‡ç½®\" />\n>\n</form>\n```\n\ndisabledå±æ€§å¯ä»¥ç¦ç”¨\n\n**<filedset>...</filedset>**å¯ä»¥è®¾ç½®åˆ†ç»„ï¼Œä¸­é—´åŠ **<legend>**æ ‡ç­¾å¯ä»¥è®¾ç½®ä¸»é¢˜\n\n![img](webå‰ç«¯å¼€å‘/1695822025377-d717d6d5-d7d8-4159-97e0-4bce7640e258.png)\n\n#### 9ã€é”šç‚¹\n\n```html\n<div id=\"#aaa\"></div>\n<!-- é”šç‚¹aaa -->\n<a herf=\"#aaa\">ç‚¹å‡»å®šä½åˆ°a</a>\n```\n\n# CSS\n\n```html\n<head>\n    <style >\n      *{\t\t\t\t\t\t\t\té€šç”¨é€‰æ‹©å™¨\n        margin:0px\t\t\n      }\n      h1{\t\t\t\t\t\t\t\tæ ‡ç­¾é€‰æ‹©å™¨\n        color:red;\n      }\n      #name{\t\t\t\t\t\tç±»é€‰æ‹©å™¨class\n        color:green;\n      }\n      .id {\t\t\t\t\t\t\tidé€‰æ‹©å™¨\n        color:blue\n      }\n    </style>\n</head>\næ–¹æ³•ä¸€ï¼š\n<style type=\"text/css\">\n  @import url(\"CSSæ–‡ä»¶è·¯å¾„\")\n</style>\næ–¹æ³•äºŒï¼š\n<link rel=\"stylesheet\" type=\"text/css\" href=\"cssæ–‡ä»¶è·¯å¾„\">\n<div style=\"width:200px\"></div>\n```\n\n\n\n**CSSæ ·å¼è¡¨çš„****ä¼˜å…ˆçº§****ï¼šè¡Œå†…>å†…éƒ¨>å¤–éƒ¨**\n\n```html\na:link{å±æ€§:å±æ€§å€¼}\tè¶…é“¾æ¥çš„åˆå§‹çŠ¶æ€\na:visited{å±æ€§:å±æ€§å€¼} è¶…é“¾æ¥è¢«è®¿é—®åçš„çŠ¶æ€\na:hover{å±æ€§:å±æ€§å€¼} é¼ æ ‡æ‚¬åœæ—¶çš„çŠ¶æ€\na:active{å±æ€§:å±æ€§å€¼} é¼ æ ‡æŒ‰ä¸‹è¶…é“¾æ¥çš„çŠ¶æ€\n```\n\nlink--visited--hover--active\n\n### 1ã€æ–‡æœ¬å±æ€§\n\n![img](webå‰ç«¯å¼€å‘/1695639480688-c5abcf44-95c5-4ace-a1f2-ccd3cf40a9f9.png)![img](webå‰ç«¯å¼€å‘/1695799466350-aec44770-7a22-49dc-aef3-65d8fb270f69.png)\n\n```html\næ–‡æœ¬é¦–å­—æ¯å¤§å†™ï¼štext-transform:capitalize\næ–‡æœ¬è½¬å°å†™ï¼štext-transform:lowercase\næ–‡å­—è½¬å¤§å†™ï¼štext-transform:uppercase\n```\n\n### 2ã€åˆ—è¡¨å±æ€§\n\n![img](webå‰ç«¯å¼€å‘/1695800346011-6fc94c4d-a49d-46e1-ad79-df04b295c891.png)\n\n### 3ã€èƒŒæ™¯å±æ€§\n\n![img](webå‰ç«¯å¼€å‘/1695800590244-632d630f-cc2e-47ce-bb7b-27304356b5bf.png)\n\n```html\nbackground-size:cover\nbackground-size:100% 100%\nbackground-size:100px 100px\n```\n\n### 4ã€æµ®åŠ¨floatå±æ€§\n\n![img](webå‰ç«¯å¼€å‘/1695802285408-dd289a7f-fdf1-4364-90c7-1c361591aa3d.png)![img](webå‰ç«¯å¼€å‘/1695802457654-cd1a1173-e0bb-41c7-b60f-eb997cc869d7.png)\n\n### 5ã€ç›’å­æ¨¡å‹\n\n![img](webå‰ç«¯å¼€å‘/1695802939375-75259be5-d93f-42a4-96fd-3d566c0e35c2.png)\n\n#### å†…è¾¹è· paddingã€å¤–è¾¹è· margin\n\n- 1ä¸ªå€¼ï¼Œ4ä¸ªæ–¹å‘ä¸€æ ·\n- 2ä¸ªå€¼ï¼Œä¸Šä¸‹ï¼Œå·¦å³\n- 3ä¸ªå€¼ï¼Œä¸Šï¼Œå·¦å³ï¼Œä¸‹\n- 4ä¸ªå€¼ï¼Œä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦\n\n\n\n#### è¾¹æ¡† borderï¼ˆwidth style colorï¼‰\n\n```\nborder:1px solid red\n```\n\n**æ ·å¼ï¼š**\n\n1. noneï¼šæ²¡æœ‰è¾¹æ¡†ï¼Œä¹Ÿå³å¿½ç•¥è¾¹æ¡†çš„å®½åº¦ï¼›\n2. dottedï¼šç‚¹çº¿ï¼›\n3. dashedï¼šè™šçº¿ï¼›\n4. solidï¼šå®çº¿ï¼›\n5. doubleï¼šåŒçº¿ï¼›\n6. grooveï¼š3Då‡¹æ§½ï¼›\n7. ridgeï¼šè±å½¢è¾¹æ¡†ï¼›\n8. insetï¼š3Då‡¹è¾¹ï¼›\n9. outsetï¼š3Då‡¸è¾¹ï¼›\n\n#### å±å¹•æ¨ªå‘å±…ä¸­\n\n```\nmargin:0 auto\n```\n\n#### æ³¨æ„ï¼šmarginå‚ç›´æ–¹å‘å¤–è¾¹è·å–æœ€å¤§å€¼ï¼Œæ°´å¹³æ–¹å‘å–å’Œ\n\n### 6ã€æº¢å‡ºå±æ€§\n\n#### (1)overflow:\n\n![img](webå‰ç«¯å¼€å‘/1695804858012-6f571f7d-f009-4618-b32a-bc3f4902de4e.png)\n\n#### (2)white-space\n\n![img](webå‰ç«¯å¼€å‘/1695805168006-c97b87c7-7866-464a-bb8a-eadf9eec1759.png)\n\n#### (3)text-overflowï¼ˆå¿…é¡»æœ‰å®½åº¦widthï¼ï¼ï¼ï¼ï¼‰\n\n```\ntext-overflow:ellipsis\n```\n\n![img](webå‰ç«¯å¼€å‘/1695805461984-30bbe8ad-0988-45ab-8b92-9f90741aa36f.png)\n\n### 7ã€å…ƒç´ æ˜¾ç¤ºç±»å‹\n\n![img](webå‰ç«¯å¼€å‘/1695805704515-66885476-500c-470c-8b4e-5ced19fd7dee.png)\n\nå¯ä»¥ç”¨`display`è¿›è¡Œç›¸äº’è½¬æ¢\n\n### 8ã€å®šä½\n\n![img](webå‰ç«¯å¼€å‘/1695816702982-0509abbb-132a-4d4c-9dce-48f21c6f019a.png)\n\nçˆ¶å­å…³ç³»å¦‚æœæƒ³è®©çˆ¶ç›’å­æ˜¾ç¤ºåœ¨ä¸Šé¢ï¼šåœ¨å­ç›’å­ä¸­è®¾ç½®z-indexä¸ºè´Ÿå€¼å³å¯\n\n### 9ã€ä¸‰è§’å½¢æ¡ˆä¾‹\n\n![img](webå‰ç«¯å¼€å‘/1695817864798-a6945562-adac-47f4-af09-5b7c1f8d3f0a.png)\n\n```html\n\t\t<style type=\"text/css\">\n\t\t\tdiv{\n\t\t\t\theight: 0px;\n\t\t\t\twidth: 0px;\n\t\t\t\tborder-top: 20px solid red;\n\t\t\t\tborder-right: 20px solid transparent;\n\t\t\t\tborder-bottom: 20px solid transparent;\n\t\t\t\tborder-left: 20px solid transparent;\n\t\t\t}\n\t\t</style>\n```\n\n### 10ã€æ°´å¹³å‚ç›´å±…ä¸­\n\n```html\n\t\t<style type=\"text/css\">\n\t\t\t*{\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t}\n\t\t\tdiv{\n\t\t\t\theight: 200px;\n\t\t\t\twidth: 200px;\n\t\t\t\tbackground-color: red;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\tmargin-left: -100px;\n\t\t\t\tmargin-top: -100px;\n\t\t\t}\n\t\t</style>\n```\n\n![img](webå‰ç«¯å¼€å‘/1695818652162-9b170132-d822-4063-b482-e0742762bbde.png)\n\n### 11ã€æµ®åŠ¨å’Œç»å¯¹å®šä½çš„åŒºåˆ«\n\næµ®åŠ¨æ˜¯åŠè„±ç¦»çŠ¶æ€ï¼Œæ–‡å­—æ˜¯ç¯ç»•æ•ˆæœ\n\n![img](webå‰ç«¯å¼€å‘/1695818906440-c1c0d98c-7967-4cc3-ab02-d23ddcb46750.png)\n\nå®šä½æ˜¯å…¨è„±ç¦»çŠ¶æ€ï¼Œä¸ä¼šå‡ºç°æ–‡å­—ç¯ç»•æ•ˆæœ\n\n![img](webå‰ç«¯å¼€å‘/1695818881031-d284e957-f409-4ec3-890a-36d736018a4a.png)\n\n### 12ã€calcè®¡ç®—å‡½æ•°\n\n```\nwidth: calc(100% - 200px)\n```\n\n### 13ã€åœ†è§’å±æ€§\n\n```\nborder-radius: 2px\n```\n\nç­‰ä»·äºï¼š\n\n![img](webå‰ç«¯å¼€å‘/1698233180004-a75117ef-636f-4f39-9145-9c6ae82f184c.png)\n\n### 14ã€æ–¹æ¡†é˜´å½±å±æ€§\n\n```\nbox-shadow: <h-shadow> <v-shadow> [blur] [spread] [color] [inset]\n```\n\n![img](webå‰ç«¯å¼€å‘/1698233434344-7616929e-0211-468f-ba84-dcee322cc129.png)\n\n# JavaScript\n\n```html\nåµŒå…¥ç½‘é¡µ\n<script type=\"text/javascript\">\n    //JavaScriptç¨‹åº\n</script>\n\nå•ç‹¬.jsæ–‡ä»¶è°ƒç”¨\n<script type=\"text/javascript\" src=\"xxx/xx.js\">\n</script>\n```\n\n**å˜é‡å£°æ˜ï¼š**\n\n`**var**`è¦æ±‚ä¸ä¸¥æ ¼ï¼Œå¯ä»¥åœ¨ä½œç”¨èŒƒå›´å†…é‡å¤\n\n`**let**`è¦æ±‚ä¸¥æ ¼ï¼Œåœ¨ç›¸åŒçš„ä½œç”¨åŸŸå†…ä¸èƒ½é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡\n\n**å¸¸é‡å£°æ˜ï¼š**\n\n`**const**`ä¸èƒ½ä¸letå£°æ˜çš„å˜é‡é‡å¤ï¼Œä¸€æ—¦å£°æ˜å°±å¿…é¡»åˆå§‹åŒ–ï¼Œå€¼ä¸èƒ½æ”¹å˜\n\n```\nconst a = 3.1415\n```\n\n## ç±»å‹è½¬æ¢\n\n- parseInt(String)\n- parseFloat(String)\n- Number(String) å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å€¼å‹\n- toFixed(String) æŒ‰ç…§æŒ‡å®šçš„å°æ•°ä½è¿”å›æ•°å­—çš„å­—ç¬¦ä¸²è¡¨ç¤º\n\n## æ³¨é‡Š\n\nå•è¡Œæ³¨é‡Šç”¨// å¤šè¡Œç”¨/**/\n\n```javascript\n//å•è¡Œæ³¨é‡Šå†…å®¹\n\n/*å¤šè¡Œæ³¨é‡Š\nHello\nworld!\n*/\n```\n\n## typeof\n\næ“ä½œæ•°çš„ç±»å‹\n\n## æ•°ç»„\n\n1. æ–°å»ºé•¿åº¦ä¸º0çš„æ•°ç»„ï¼š`var myArray = new Array();`\n2. æ–°å»ºé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼š`var myArray = new Array(n);`\n3. æ–°å»ºä¸€ä¸ªæŒ‡å®šå†…å®¹çš„æ•°ç»„ï¼š`var myArray = new Array(1,2,3);`\n4. ç®€ä»‹å®šä¹‰ï¼š`var myArray = [1,2,3];`\n5. è·å–æ•°ç»„é•¿åº¦ `myArray.length;`\n6. `push()/pop()æ ˆæ–¹æ³•`\n\nå†…å®¹å¯ä»¥ç”¨alertè¾“å‡ºï¼ˆæç¤ºæ¡†ï¼‰\n\n### æ•°ç»„ç›¸å…³æ–¹æ³•ï¼š\n\n#### ï¼ˆ1ï¼‰concatæ–¹æ³•\n\n```javascript\nvar a=[1,2,3];\nvar b=[4,5,6];\nalert(a.concat(b));//è¾“å‡º1,2,3,4,5,6\nalert(a.length);//é•¿åº¦ä»ä¸º3\nå¯ä»¥ç›´æ¥è¿æ¥æ•°å€¼\nå¦‚ï¼ša.concat(4,5,6);\n```\n\n#### ï¼ˆ2ï¼‰joinæ–¹æ³•\n\n```javascript\nvar a=[1,2,3];\nalert(a.join());//è¾“å‡º1,2,3,\nalert(a.join(\":\"));//è¾“å‡º1:2:3\n```\n\n#### ï¼ˆ3ï¼‰shiftæ–¹æ³•\n\n```javascript\nvar a=[1,2,3];\nalert(a.shift());è¾“å‡º1\nalert(a.shift());è¾“å‡º2\nalert(a.length);è¾“å‡ºé•¿åº¦1\n```\n\n#### ï¼ˆ4ï¼‰unshiftæ–¹æ³•\n\n```javascript\nvar a=[1,2,3];\na.unshift(4,5,6);\nalert(a);//è¾“å‡º4,5,6,1,2,3\n```\n\n#### ï¼ˆ5ï¼‰sliceæ–¹æ³•\n\n```javascript\nvar a1=[1,2,3,4,5];\nalert(a1.slice(1,3)); //è¾“å‡º2,3\nalert(a1.slice(1));   //è¾“å‡º2,3,4,5\nalert(a1.slice(1,-1)); //è¾“å‡º2,3,4\nalert(a1.slice(-3,-2)); //è¾“å‡º3\n```\n\n#### ï¼ˆ6ï¼‰sortæ–¹æ³•\n\n```javascript\nvar a1=[1,4,2,3,5];\nalert(a1.sort());  //è¾“å‡º1,2,3,4,5\n```\n\n#### ï¼ˆ7ï¼‰reverseæ–¹æ³•\n\n## JavaScriptå‡½æ•°\n\n```javascript\nfunction å‡½æ•°å(å‚æ•°1,å‚æ•°2...)\n{\n    // å‡½æ•°å†…å®¹\n    // [return <è¿”å›å€¼>]\n}\n<input type=\"Submit\" value=\"æ˜¾ç¤º\" onClick=\"å‡½æ•°å()\">\n```\n\n### å¸¸è§äº‹ä»¶ï¼š\n\n| **äº‹ä»¶**     | **åŠ¨ä½œ**                     | **äº‹ä»¶**      | **åŠ¨ä½œ**                           |\n| ------------ | ---------------------------- | ------------- | ---------------------------------- |\n| **Abort**    | **ä¸­æ­¢æ­£åœ¨åŠ è½½çš„å¯¹è±¡**       | **Load**      | **æµè§ˆå™¨è¯»å…¥æ–‡ä»¶æ—¶**               |\n| **Blur**     | **å¤±å»ç„¦ç‚¹**                 | **Unload**    | **å…³é—­å½“å‰ç½‘é¡µ**                   |\n| **Focus**    | **è·å–ç„¦ç‚¹**                 | **MouseDown** | **æŒ‰ä¸‹é¼ æ ‡å·¦é”®**                   |\n| **Change**   | **æ”¹å˜å¯¹è±¡çš„å€¼**             | **MouseMove** | **ç§»åŠ¨é¼ æ ‡æŒ‡é’ˆ**                   |\n| **Click**    | **åœ¨å¯¹è±¡ä¸Šå•å‡»é¼ æ ‡**         | **MouseOut**  | **é¼ æ ‡æŒ‡é’ˆç¦»å¼€æŸå¯¹è±¡**             |\n| **DblClick** | **åœ¨å¯¹è±¡ä¸ŠåŒå‡»é¼ æ ‡**         | **MouseOver** | **é¼ æ ‡æŒ‡é’ˆæ‚¬åœäºæŸå¯¹è±¡ä¹‹ä¸Š**       |\n| **DrogDrop** | **æ‹–æ‹½å¯¹è±¡**                 | **MouseUp**   | **æ”¾å¼€é¼ æ ‡å·¦é”®**                   |\n| **Error**    | **åŠ è½½æ–‡ä»¶æˆ–å›¾å½¢æ—¶å‘ç”Ÿé”™è¯¯** | **Move**      | **çª—å£è¢«ç§»åŠ¨æ—¶**                   |\n| **KeyDown**  | **æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ä»»æ„é”®çš„ç¬é—´** | **Resize**    | **çª—å£å¤§å°è¢«æ”¹å˜**                 |\n| **KeyPress** | **æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ä»»æ„é”®æ—¶**     | **Select**    | **é€‰æ‹©æŸå¯¹è±¡**                     |\n| **KeyUp**    | **æŸé”®è¢«æŒ‰ä¸‹åå¼¹èµ·æ¥çš„ç¬é—´** | **Submit**    | **å•å‡»è¡¨å•ä¸Šçš„****Submit****æŒ‰é’®** |\n|              |                              | **Reset**     | **å•å‡»è¡¨å•ä¸Šçš„****Reset****æŒ‰é’®**  |\n\n### documentå¯¹è±¡åŠæ“ä½œ\n\ndocumentè¡¨ç¤ºæ•´ä¸ªé¡µé¢æ–‡æ¡£\n\n#### ï¼ˆ1ï¼‰documen.getElementById(id)\n\n```\nvar a = document.getElementById(\"name\").value;\n```\n\n#### ï¼ˆ2ï¼‰ document.getElementsByName(name)\n\n```javascript\nvar userNameInput=document.getElementsByName(\"userName\");\nvar userName = userNmaeInput[0].value;\nè¿”å›å€¼ä¸ºæ•°ç»„å¯¹è±¡ï¼›å¦‚æœæ— ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„\nç”±äºè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä½ç½®ä¸‹æ ‡æ¥è·å¾—é¡µé¢å…ƒç´ \n```\n\n#### ï¼ˆ3ï¼‰document.getElementsByTagName(tagname)\n\n```javascript\nè¿”å›å€¼ï¼šæ•°ç»„å¯¹è±¡; å¦‚æœæ— ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„\nä¾‹å¦‚ï¼š\nvar inputs=document.getElementsByTagName(â€œinputâ€);\nalert(input.length);   //æ˜¾ç¤ºä¸º4\n```\n\n#### ï¼ˆ4ï¼‰document.forms\n\n```javascript\nè¿”å›å€¼ï¼šæ•°ç»„å¯¹è±¡ã€‚å¦‚æœæ— ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡(Formå¯¹è±¡)ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„\nä¾‹å¦‚ï¼š\nvar frms=document.forms;  //å…ˆè·å¾—æ•°ç»„å¯¹è±¡ï¼Œæ³¨æ„ä¸æ˜¯æ–¹æ³•ï¼Œæ˜¯å±æ€§\nvar loginfrm=frms[0]; //è·å¾—æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªformå¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨çš„è¯\n```\n\n### documentå±æ€§\n\n#### (1)innerHTMLå±æ€§\n\n```javascript\n<p id=\"p1\">Hello World!</p>\n<script>\ndocument.getElementById(\"p1\").innerHTML=\"New text!\";\n</script>\n\n<script>\ndocument.getElementById(\"p2\").style.color=\"blue\";\n</script>\n```\n\n#### (2)æ“ä½œHTML\n\n```javascript\nvar para = document.createElement(\"p\");\nvar node = document.createTextNode(\"æ–°æ®µè½\");\npara.appendChild(node);\nvar element=document.getElementById(\"div1\");\nelement.appendChild(para);\n```\n\n#### (3)æ”¹å˜å…ƒç´ å±æ€§\n\n```javascript\nobj.getAttribute(attribute);\nobj.setAttribute(attribute,value);\n//getAttributeæ–¹æ³•å°±æ˜¯ä¸“é—¨ç”¨æ¥è·å–å…ƒç´ å±æ€§çš„\n//ç›¸åº”çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨setAttributeæ–¹æ³•æ¥æ›´æ”¹å…ƒç´ èŠ‚ç‚¹çš„å€¼\nä¾‹å¦‚ï¼š\ndocument.getElementById(\"div1\").getAttribute(\"name\");\n```\n\n#### (4)åˆ é™¤å…ƒç´ \n\n```javascript\nvar child=document.getElementById(\"p1\");\nvar parent=document.getElementById(\"div1\");\nparent.removeChild(child);//ä»çˆ¶å…ƒç´ ä¸­åˆ é™¤è¯¥å…ƒç´ \n    <script>\n        const loginForm = document.getElementById('loginForm');\n        const usernameInput = document.getElementById('username');\n        const passwordInput = document.getElementById('password');\n        const usernameMessage = document.getElementById('username-message');\n\t\t\t\tconst passwordMessage = document.getElementById('password-message');\n\n        loginForm.addEventListener('submit', function (event) {\n            event.preventDefault(); \n            const username = usernameInput.value;\n            const password = passwordInput.value;\n      \t\t\tshowMessage(passwordMessage,'');\n      \t\t\tshowMessage(usernameMessage,'');\n      \t\t\tvar user_flag = false;\n      \t\t\tvar pass_flag = false;\n            if (username.length === 0)showMessage(usernameMessage,'è¯·è¾“å…¥ç”¨æˆ·å');\n            else if (!isEnglishCharacter(username))showMessage(usernameMessage,'ç”¨æˆ·åå¿…é¡»ä»¥è‹±æ–‡å­—æ¯å¼€å¤´ï¼');  \n            else if(username.length < 6||username.length>18)showMessage(usernameMessage,\"ç”¨æˆ·åå¿…é¡»åœ¨6åˆ°18ä½\");\n\t\t\t\t\t\telse user_flag = true;\n  \n            if (password.length < 6)showMessage(passwordMessage,\"å¯†ç ä¸èƒ½å°äº6ä½ï¼\"); \n            else pass_flag=true; \n            if(pass_flag && user_flag)\n            {\n            \talert(\"æ³¨å†ŒæˆåŠŸï¼ï¼\");\n            }\n        });\n      \n        function isEnglishCharacter(input) {\n            const firstChar = input.charAt(0);\n            // const firstCharCode = firstChar.charCodeAt(0);\n            return (firstChar >='a' && firstChar <='z') || (firstChar >='A' && firstChar <='Z');\n            // return (firstCharCode >= 65 && firstCharCode <= 90) || (firstCharCode >= 97 && firstCharCode <= 122);\n        }\n\n        function showMessage(element,message) {\n           element.textContent = message;\n        }\n    </script>\n```\n\n# JQurey\n\n```html\n\t\t<script>\n\t\t\t$(document).ready(\n\t\t\t\tfunction(){\n\t\t\t\t\tfunction loadStuInfo(){\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\ttype:\"get\",\n\t\t\t\t\t\t\turl:\"http://114.67.241.121:8123/stu/list\",\n\t\t\t\t\t\t\tasync:true,\n\t\t\t\t\t\t\tsuccess: function(e){\n\t\t\t\t\t\t\t\t$(\"#info\").find(\"tr:gt(0)\").remove();\n\t\t\t\t\t\t\t\tfor(var i=0; i<e.data.length;i++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$(\"#info\").append(\n\t\t\t\t\t\t\t\t\t\t\"<tr>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stuid+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stuno+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stuname+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stumajor+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stugender+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stugrade+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stuphone+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stuaddess+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td>\"+e.data[i].stunative+\"</td>\"+\n\t\t\t\t\t\t\t\t\t\t\t\"<td><a href='' class='delete'>åˆ é™¤</a>\"+\n\t\t\t\t\t\t\t\t\t\t\"</tr>\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tloadStuInfo();//åˆå§‹åŒ–æ•°æ®\n\t\t\t\t\t\n\t\t\t\t\t$(\"#submit\").click(\n\t\t\t\t\t\tfunction(){\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\ttype:\"post\",\n\t\t\t\t\t\t\t\tdataType: 'json',\n\t            \t\t\t\tcontentType: 'application/json',\n\t\t\t\t\t\t\t\turl:\"http://114.67.241.121:8123/stu/add\",\n\t\t\t\t\t\t\t\tdata:JSON.stringify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t  stuaddess: $(\"#stuaddress\").val(),\n\t\t\t\t\t\t\t\t\t  stugender: $(\"#stugender\").val(),\n\t\t\t\t\t\t\t\t\t  stugrade: $(\"#stugrade\").val(),\n\t\t\t\t\t\t\t\t\t  stuid: 0,\n\t\t\t\t\t\t\t\t\t  stumajor: $(\"#stumajor\").val(),\n\t\t\t\t\t\t\t\t\t  stuname: $(\"#stuname\").val(),\n\t\t\t\t\t\t\t\t\t  stunative: $(\"#stunative\").val(),\n\t\t\t\t\t\t\t\t\t  stuno: $(\"#stuno\").val(),\n\t\t\t\t\t\t\t\t\t  stuphone: $(\"#stuphone\").val()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tsuccess:function(e){\n\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(e));\n\t\t\t\t\t\t\t\t\tloadStuInfo();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\n\t\t\t\t\t$(\"#info\").on(\"click\",\"a\",function(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tvar stuid = $(this).closest(\"tr\").children(\":eq(0)\").text();\n\t\t\t\t\t\t\t//let stuid = $(this).closest(\"tr\").children().first().text();\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\ttype:\"post\",\n\t\t\t\t\t\t\t\turl:\"http://114.67.241.121:8123/stu/del\",\n\t\t\t\t\t\t\t\tdata: \"stuId=\" + stuid,\n\t\t\t\t\t\t\t\tsuccess:function(e){\n\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(e));\n\t\t\t\t\t\t\t\t\tloadStuInfo();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t</script>\n```\n\n![img](webå‰ç«¯å¼€å‘/1698476517302-c078f5c0-030c-48ee-ad49-7db744722890.png)\n"},{"title":"ä¸€åˆ»","url":"/2018/01/01/ä¸€åˆ»/","content":"\n## ç”Ÿæ—¥\n\né«˜æ€é›¨ï¼šæ­£æœˆåˆå…«\n\né˜¿å§¨ï¼šæ­£æœˆåå››\n\nå§å§ï¼šä¸ƒæœˆåå››\n\nä½™æ³“æï¼šä¸ƒæœˆå»¿äºŒ\n\nçˆ¸çˆ¸ï¼šå…«æœˆåˆå…­\n\nçˆ·çˆ·ï¼šå…«æœˆåå››\n\nå¥¶å¥¶ï¼šè…ŠæœˆåˆäºŒ\n\nå¦ˆå¦ˆï¼šè…Šæœˆåˆä¸‰\n\né™ˆè‡£ï¼šè…Šæœˆåˆå…«\n\n## çºªå¿µæ—¥\n\nå‘¨å¹´ï¼š21å¹´11æœˆ9æ—¥\n\n1thçº¦ä¼šï¼š22å¹´1æœˆ21æ—¥\n","tags":["é‡è¦"]}]